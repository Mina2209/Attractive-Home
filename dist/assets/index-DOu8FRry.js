function g1(r,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in r)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(r,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function Cf(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Gu={exports:{}},Xs={},Wu={exports:{}},Pe={};var Sg;function y1(){if(Sg)return Pe;Sg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function g(P){return P===null||typeof P!="object"?null:(P=p&&P[p]||P["@@iterator"],typeof P=="function"?P:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,b={};function S(P,G,ae){this.props=P,this.context=G,this.refs=b,this.updater=ae||v}S.prototype.isReactComponent={},S.prototype.setState=function(P,G){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,G,"setState")},S.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function A(){}A.prototype=S.prototype;function L(P,G,ae){this.props=P,this.context=G,this.refs=b,this.updater=ae||v}var R=L.prototype=new A;R.constructor=L,x(R,S.prototype),R.isPureReactComponent=!0;var k=Array.isArray,C=Object.prototype.hasOwnProperty,F={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function z(P,G,ae){var ge,we={},Ee=null,De=null;if(G!=null)for(ge in G.ref!==void 0&&(De=G.ref),G.key!==void 0&&(Ee=""+G.key),G)C.call(G,ge)&&!_.hasOwnProperty(ge)&&(we[ge]=G[ge]);var Y=arguments.length-2;if(Y===1)we.children=ae;else if(1<Y){for(var se=Array(Y),Oe=0;Oe<Y;Oe++)se[Oe]=arguments[Oe+2];we.children=se}if(P&&P.defaultProps)for(ge in Y=P.defaultProps,Y)we[ge]===void 0&&(we[ge]=Y[ge]);return{$$typeof:r,type:P,key:Ee,ref:De,props:we,_owner:F.current}}function te(P,G){return{$$typeof:r,type:P.type,key:G,ref:P.ref,props:P.props,_owner:P._owner}}function U(P){return typeof P=="object"&&P!==null&&P.$$typeof===r}function q(P){var G={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(ae){return G[ae]})}var le=/\/+/g;function re(P,G){return typeof P=="object"&&P!==null&&P.key!=null?q(""+P.key):G.toString(36)}function pe(P,G,ae,ge,we){var Ee=typeof P;(Ee==="undefined"||Ee==="boolean")&&(P=null);var De=!1;if(P===null)De=!0;else switch(Ee){case"string":case"number":De=!0;break;case"object":switch(P.$$typeof){case r:case e:De=!0}}if(De)return De=P,we=we(De),P=ge===""?"."+re(De,0):ge,k(we)?(ae="",P!=null&&(ae=P.replace(le,"$&/")+"/"),pe(we,G,ae,"",function(Oe){return Oe})):we!=null&&(U(we)&&(we=te(we,ae+(!we.key||De&&De.key===we.key?"":(""+we.key).replace(le,"$&/")+"/")+P)),G.push(we)),1;if(De=0,ge=ge===""?".":ge+":",k(P))for(var Y=0;Y<P.length;Y++){Ee=P[Y];var se=ge+re(Ee,Y);De+=pe(Ee,G,ae,se,we)}else if(se=g(P),typeof se=="function")for(P=se.call(P),Y=0;!(Ee=P.next()).done;)Ee=Ee.value,se=ge+re(Ee,Y++),De+=pe(Ee,G,ae,se,we);else if(Ee==="object")throw G=String(P),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return De}function de(P,G,ae){if(P==null)return P;var ge=[],we=0;return pe(P,ge,"","",function(Ee){return G.call(ae,Ee,we++)}),ge}function ce(P){if(P._status===-1){var G=P._result;G=G(),G.then(function(ae){(P._status===0||P._status===-1)&&(P._status=1,P._result=ae)},function(ae){(P._status===0||P._status===-1)&&(P._status=2,P._result=ae)}),P._status===-1&&(P._status=0,P._result=G)}if(P._status===1)return P._result.default;throw P._result}var xe={current:null},Z={transition:null},X={ReactCurrentDispatcher:xe,ReactCurrentBatchConfig:Z,ReactCurrentOwner:F};function V(){throw Error("act(...) is not supported in production builds of React.")}return Pe.Children={map:de,forEach:function(P,G,ae){de(P,function(){G.apply(this,arguments)},ae)},count:function(P){var G=0;return de(P,function(){G++}),G},toArray:function(P){return de(P,function(G){return G})||[]},only:function(P){if(!U(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},Pe.Component=S,Pe.Fragment=t,Pe.Profiler=i,Pe.PureComponent=L,Pe.StrictMode=n,Pe.Suspense=u,Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X,Pe.act=V,Pe.cloneElement=function(P,G,ae){if(P==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+P+".");var ge=x({},P.props),we=P.key,Ee=P.ref,De=P._owner;if(G!=null){if(G.ref!==void 0&&(Ee=G.ref,De=F.current),G.key!==void 0&&(we=""+G.key),P.type&&P.type.defaultProps)var Y=P.type.defaultProps;for(se in G)C.call(G,se)&&!_.hasOwnProperty(se)&&(ge[se]=G[se]===void 0&&Y!==void 0?Y[se]:G[se])}var se=arguments.length-2;if(se===1)ge.children=ae;else if(1<se){Y=Array(se);for(var Oe=0;Oe<se;Oe++)Y[Oe]=arguments[Oe+2];ge.children=Y}return{$$typeof:r,type:P.type,key:we,ref:Ee,props:ge,_owner:De}},Pe.createContext=function(P){return P={$$typeof:l,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},P.Provider={$$typeof:o,_context:P},P.Consumer=P},Pe.createElement=z,Pe.createFactory=function(P){var G=z.bind(null,P);return G.type=P,G},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(P){return{$$typeof:c,render:P}},Pe.isValidElement=U,Pe.lazy=function(P){return{$$typeof:h,_payload:{_status:-1,_result:P},_init:ce}},Pe.memo=function(P,G){return{$$typeof:f,type:P,compare:G===void 0?null:G}},Pe.startTransition=function(P){var G=Z.transition;Z.transition={};try{P()}finally{Z.transition=G}},Pe.unstable_act=V,Pe.useCallback=function(P,G){return xe.current.useCallback(P,G)},Pe.useContext=function(P){return xe.current.useContext(P)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(P){return xe.current.useDeferredValue(P)},Pe.useEffect=function(P,G){return xe.current.useEffect(P,G)},Pe.useId=function(){return xe.current.useId()},Pe.useImperativeHandle=function(P,G,ae){return xe.current.useImperativeHandle(P,G,ae)},Pe.useInsertionEffect=function(P,G){return xe.current.useInsertionEffect(P,G)},Pe.useLayoutEffect=function(P,G){return xe.current.useLayoutEffect(P,G)},Pe.useMemo=function(P,G){return xe.current.useMemo(P,G)},Pe.useReducer=function(P,G,ae){return xe.current.useReducer(P,G,ae)},Pe.useRef=function(P){return xe.current.useRef(P)},Pe.useState=function(P){return xe.current.useState(P)},Pe.useSyncExternalStore=function(P,G,ae){return xe.current.useSyncExternalStore(P,G,ae)},Pe.useTransition=function(){return xe.current.useTransition()},Pe.version="18.3.1",Pe}var wg;function Bl(){return wg||(wg=1,Wu.exports=y1()),Wu.exports}var Ig;function v1(){if(Ig)return Xs;Ig=1;var r=Bl(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(c,u,f){var h,p={},g=null,v=null;f!==void 0&&(g=""+f),u.key!==void 0&&(g=""+u.key),u.ref!==void 0&&(v=u.ref);for(h in u)n.call(u,h)&&!o.hasOwnProperty(h)&&(p[h]=u[h]);if(c&&c.defaultProps)for(h in u=c.defaultProps,u)p[h]===void 0&&(p[h]=u[h]);return{$$typeof:e,type:c,key:g,ref:v,props:p,_owner:i.current}}return Xs.Fragment=t,Xs.jsx=l,Xs.jsxs=l,Xs}var Ag;function x1(){return Ag||(Ag=1,Gu.exports=v1()),Gu.exports}var w=x1(),M=Bl();const Ze=Cf(M),b1=g1({__proto__:null,default:Ze},[M]);var Fa={},Vu={exports:{}},Ht={},Ku={exports:{}},zu={};var Tg;function E1(){return Tg||(Tg=1,(function(r){function e(Z,X){var V=Z.length;Z.push(X);e:for(;0<V;){var P=V-1>>>1,G=Z[P];if(0<i(G,X))Z[P]=X,Z[V]=G,V=P;else break e}}function t(Z){return Z.length===0?null:Z[0]}function n(Z){if(Z.length===0)return null;var X=Z[0],V=Z.pop();if(V!==X){Z[0]=V;e:for(var P=0,G=Z.length,ae=G>>>1;P<ae;){var ge=2*(P+1)-1,we=Z[ge],Ee=ge+1,De=Z[Ee];if(0>i(we,V))Ee<G&&0>i(De,we)?(Z[P]=De,Z[Ee]=V,P=Ee):(Z[P]=we,Z[ge]=V,P=ge);else if(Ee<G&&0>i(De,V))Z[P]=De,Z[Ee]=V,P=Ee;else break e}}return X}function i(Z,X){var V=Z.sortIndex-X.sortIndex;return V!==0?V:Z.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();r.unstable_now=function(){return l.now()-c}}var u=[],f=[],h=1,p=null,g=3,v=!1,x=!1,b=!1,S=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(Z){for(var X=t(f);X!==null;){if(X.callback===null)n(f);else if(X.startTime<=Z)n(f),X.sortIndex=X.expirationTime,e(u,X);else break;X=t(f)}}function k(Z){if(b=!1,R(Z),!x)if(t(u)!==null)x=!0,ce(C);else{var X=t(f);X!==null&&xe(k,X.startTime-Z)}}function C(Z,X){x=!1,b&&(b=!1,A(z),z=-1),v=!0;var V=g;try{for(R(X),p=t(u);p!==null&&(!(p.expirationTime>X)||Z&&!q());){var P=p.callback;if(typeof P=="function"){p.callback=null,g=p.priorityLevel;var G=P(p.expirationTime<=X);X=r.unstable_now(),typeof G=="function"?p.callback=G:p===t(u)&&n(u),R(X)}else n(u);p=t(u)}if(p!==null)var ae=!0;else{var ge=t(f);ge!==null&&xe(k,ge.startTime-X),ae=!1}return ae}finally{p=null,g=V,v=!1}}var F=!1,_=null,z=-1,te=5,U=-1;function q(){return!(r.unstable_now()-U<te)}function le(){if(_!==null){var Z=r.unstable_now();U=Z;var X=!0;try{X=_(!0,Z)}finally{X?re():(F=!1,_=null)}}else F=!1}var re;if(typeof L=="function")re=function(){L(le)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,de=pe.port2;pe.port1.onmessage=le,re=function(){de.postMessage(null)}}else re=function(){S(le,0)};function ce(Z){_=Z,F||(F=!0,re())}function xe(Z,X){z=S(function(){Z(r.unstable_now())},X)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Z){Z.callback=null},r.unstable_continueExecution=function(){x||v||(x=!0,ce(C))},r.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<Z?Math.floor(1e3/Z):5},r.unstable_getCurrentPriorityLevel=function(){return g},r.unstable_getFirstCallbackNode=function(){return t(u)},r.unstable_next=function(Z){switch(g){case 1:case 2:case 3:var X=3;break;default:X=g}var V=g;g=X;try{return Z()}finally{g=V}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(Z,X){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var V=g;g=Z;try{return X()}finally{g=V}},r.unstable_scheduleCallback=function(Z,X,V){var P=r.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?P+V:P):V=P,Z){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=V+G,Z={id:h++,callback:X,priorityLevel:Z,startTime:V,expirationTime:G,sortIndex:-1},V>P?(Z.sortIndex=V,e(f,Z),t(u)===null&&Z===t(f)&&(b?(A(z),z=-1):b=!0,xe(k,V-P))):(Z.sortIndex=G,e(u,Z),x||v||(x=!0,ce(C))),Z},r.unstable_shouldYield=q,r.unstable_wrapCallback=function(Z){var X=g;return function(){var V=g;g=X;try{return Z.apply(this,arguments)}finally{g=V}}}})(zu)),zu}var Lg;function S1(){return Lg||(Lg=1,Ku.exports=E1()),Ku.exports}var Rg;function w1(){if(Rg)return Ht;Rg=1;var r=Bl(),e=S1();function t(s){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+s,d=1;d<arguments.length;d++)a+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function o(s,a){l(s,a),l(s+"Capture",a)}function l(s,a){for(i[s]=a,s=0;s<a.length;s++)n.add(a[s])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function g(s){return u.call(p,s)?!0:u.call(h,s)?!1:f.test(s)?p[s]=!0:(h[s]=!0,!1)}function v(s,a,d,m){if(d!==null&&d.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return m?!1:d!==null?!d.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function x(s,a,d,m){if(a===null||typeof a>"u"||v(s,a,d,m))return!0;if(m)return!1;if(d!==null)switch(d.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function b(s,a,d,m,y,E,T){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=m,this.attributeNamespace=y,this.mustUseProperty=d,this.propertyName=s,this.type=a,this.sanitizeURL=E,this.removeEmptyString=T}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){S[s]=new b(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var a=s[0];S[a]=new b(a,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){S[s]=new b(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){S[s]=new b(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){S[s]=new b(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){S[s]=new b(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){S[s]=new b(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){S[s]=new b(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){S[s]=new b(s,5,!1,s.toLowerCase(),null,!1,!1)});var A=/[\-:]([a-z])/g;function L(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var a=s.replace(A,L);S[a]=new b(a,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var a=s.replace(A,L);S[a]=new b(a,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var a=s.replace(A,L);S[a]=new b(a,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){S[s]=new b(s,1,!1,s.toLowerCase(),null,!1,!1)}),S.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){S[s]=new b(s,1,!1,s.toLowerCase(),null,!0,!0)});function R(s,a,d,m){var y=S.hasOwnProperty(a)?S[a]:null;(y!==null?y.type!==0:m||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(x(a,d,y,m)&&(d=null),m||y===null?g(a)&&(d===null?s.removeAttribute(a):s.setAttribute(a,""+d)):y.mustUseProperty?s[y.propertyName]=d===null?y.type===3?!1:"":d:(a=y.attributeName,m=y.attributeNamespace,d===null?s.removeAttribute(a):(y=y.type,d=y===3||y===4&&d===!0?"":""+d,m?s.setAttributeNS(m,a,d):s.setAttribute(a,d))))}var k=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,C=Symbol.for("react.element"),F=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),q=Symbol.for("react.context"),le=Symbol.for("react.forward_ref"),re=Symbol.for("react.suspense"),pe=Symbol.for("react.suspense_list"),de=Symbol.for("react.memo"),ce=Symbol.for("react.lazy"),xe=Symbol.for("react.offscreen"),Z=Symbol.iterator;function X(s){return s===null||typeof s!="object"?null:(s=Z&&s[Z]||s["@@iterator"],typeof s=="function"?s:null)}var V=Object.assign,P;function G(s){if(P===void 0)try{throw Error()}catch(d){var a=d.stack.trim().match(/\n( *(at )?)/);P=a&&a[1]||""}return`
`+P+s}var ae=!1;function ge(s,a){if(!s||ae)return"";ae=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(W){var m=W}Reflect.construct(s,[],a)}else{try{a.call()}catch(W){m=W}s.call(a.prototype)}else{try{throw Error()}catch(W){m=W}s()}}catch(W){if(W&&m&&typeof W.stack=="string"){for(var y=W.stack.split(`
`),E=m.stack.split(`
`),T=y.length-1,D=E.length-1;1<=T&&0<=D&&y[T]!==E[D];)D--;for(;1<=T&&0<=D;T--,D--)if(y[T]!==E[D]){if(T!==1||D!==1)do if(T--,D--,0>D||y[T]!==E[D]){var O=`
`+y[T].replace(" at new "," at ");return s.displayName&&O.includes("<anonymous>")&&(O=O.replace("<anonymous>",s.displayName)),O}while(1<=T&&0<=D);break}}}finally{ae=!1,Error.prepareStackTrace=d}return(s=s?s.displayName||s.name:"")?G(s):""}function we(s){switch(s.tag){case 5:return G(s.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return s=ge(s.type,!1),s;case 11:return s=ge(s.type.render,!1),s;case 1:return s=ge(s.type,!0),s;default:return""}}function Ee(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case _:return"Fragment";case F:return"Portal";case te:return"Profiler";case z:return"StrictMode";case re:return"Suspense";case pe:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case q:return(s.displayName||"Context")+".Consumer";case U:return(s._context.displayName||"Context")+".Provider";case le:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case de:return a=s.displayName||null,a!==null?a:Ee(s.type)||"Memo";case ce:a=s._payload,s=s._init;try{return Ee(s(a))}catch{}}return null}function De(s){var a=s.type;switch(s.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=a.render,s=s.displayName||s.name||"",a.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ee(a);case 8:return a===z?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Y(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function se(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Oe(s){var a=se(s)?"checked":"value",d=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),m=""+s[a];if(!s.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var y=d.get,E=d.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return y.call(this)},set:function(T){m=""+T,E.call(this,T)}}),Object.defineProperty(s,a,{enumerable:d.enumerable}),{getValue:function(){return m},setValue:function(T){m=""+T},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function it(s){s._valueTracker||(s._valueTracker=Oe(s))}function Ke(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var d=a.getValue(),m="";return s&&(m=se(s)?s.checked?"true":"false":s.value),s=m,s!==d?(a.setValue(s),!0):!1}function Nt(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Mt(s,a){var d=a.checked;return V({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??s._wrapperState.initialChecked})}function je(s,a){var d=a.defaultValue==null?"":a.defaultValue,m=a.checked!=null?a.checked:a.defaultChecked;d=Y(a.value!=null?a.value:d),s._wrapperState={initialChecked:m,initialValue:d,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function fr(s,a){a=a.checked,a!=null&&R(s,"checked",a,!1)}function pi(s,a){fr(s,a);var d=Y(a.value),m=a.type;if(d!=null)m==="number"?(d===0&&s.value===""||s.value!=d)&&(s.value=""+d):s.value!==""+d&&(s.value=""+d);else if(m==="submit"||m==="reset"){s.removeAttribute("value");return}a.hasOwnProperty("value")?ds(s,a.type,d):a.hasOwnProperty("defaultValue")&&ds(s,a.type,Y(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(s.defaultChecked=!!a.defaultChecked)}function Ro(s,a,d){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var m=a.type;if(!(m!=="submit"&&m!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+s._wrapperState.initialValue,d||a===s.value||(s.value=a),s.defaultValue=a}d=s.name,d!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,d!==""&&(s.name=d)}function ds(s,a,d){(a!=="number"||Nt(s.ownerDocument)!==s)&&(d==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+d&&(s.defaultValue=""+d))}var jn=Array.isArray;function sn(s,a,d,m){if(s=s.options,a){a={};for(var y=0;y<d.length;y++)a["$"+d[y]]=!0;for(d=0;d<s.length;d++)y=a.hasOwnProperty("$"+s[d].value),s[d].selected!==y&&(s[d].selected=y),y&&m&&(s[d].defaultSelected=!0)}else{for(d=""+Y(d),a=null,y=0;y<s.length;y++){if(s[y].value===d){s[y].selected=!0,m&&(s[y].defaultSelected=!0);return}a!==null||s[y].disabled||(a=s[y])}a!==null&&(a.selected=!0)}}function Ql(s,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return V({},a,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function Oh(s,a){var d=a.value;if(d==null){if(d=a.children,a=a.defaultValue,d!=null){if(a!=null)throw Error(t(92));if(jn(d)){if(1<d.length)throw Error(t(93));d=d[0]}a=d}a==null&&(a=""),d=a}s._wrapperState={initialValue:Y(d)}}function Ph(s,a){var d=Y(a.value),m=Y(a.defaultValue);d!=null&&(d=""+d,d!==s.value&&(s.value=d),a.defaultValue==null&&s.defaultValue!==d&&(s.defaultValue=d)),m!=null&&(s.defaultValue=""+m)}function Nh(s){var a=s.textContent;a===s._wrapperState.initialValue&&a!==""&&a!==null&&(s.value=a)}function Mh(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ec(s,a){return s==null||s==="http://www.w3.org/1999/xhtml"?Mh(a):s==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Co,_h=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,d,m,y){MSApp.execUnsafeLocalFunction(function(){return s(a,d,m,y)})}:s})(function(s,a){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=a;else{for(Co=Co||document.createElement("div"),Co.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=Co.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;a.firstChild;)s.appendChild(a.firstChild)}});function fs(s,a){if(a){var d=s.firstChild;if(d&&d===s.lastChild&&d.nodeType===3){d.nodeValue=a;return}}s.textContent=a}var hs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bE=["Webkit","ms","Moz","O"];Object.keys(hs).forEach(function(s){bE.forEach(function(a){a=a+s.charAt(0).toUpperCase()+s.substring(1),hs[a]=hs[s]})});function Fh(s,a,d){return a==null||typeof a=="boolean"||a===""?"":d||typeof a!="number"||a===0||hs.hasOwnProperty(s)&&hs[s]?(""+a).trim():a+"px"}function Bh(s,a){s=s.style;for(var d in a)if(a.hasOwnProperty(d)){var m=d.indexOf("--")===0,y=Fh(d,a[d],m);d==="float"&&(d="cssFloat"),m?s.setProperty(d,y):s[d]=y}}var EE=V({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function tc(s,a){if(a){if(EE[s]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function rc(s,a){if(s.indexOf("-")===-1)return typeof a.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nc=null;function ic(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var sc=null,mi=null,gi=null;function jh(s){if(s=Ms(s)){if(typeof sc!="function")throw Error(t(280));var a=s.stateNode;a&&(a=Jo(a),sc(s.stateNode,s.type,a))}}function Uh(s){mi?gi?gi.push(s):gi=[s]:mi=s}function Hh(){if(mi){var s=mi,a=gi;if(gi=mi=null,jh(s),a)for(s=0;s<a.length;s++)jh(a[s])}}function $h(s,a){return s(a)}function Gh(){}var oc=!1;function Wh(s,a,d){if(oc)return s(a,d);oc=!0;try{return $h(s,a,d)}finally{oc=!1,(mi!==null||gi!==null)&&(Gh(),Hh())}}function ps(s,a){var d=s.stateNode;if(d===null)return null;var m=Jo(d);if(m===null)return null;d=m[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(s=s.type,m=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!m;break e;default:s=!1}if(s)return null;if(d&&typeof d!="function")throw Error(t(231,a,typeof d));return d}var ac=!1;if(c)try{var ms={};Object.defineProperty(ms,"passive",{get:function(){ac=!0}}),window.addEventListener("test",ms,ms),window.removeEventListener("test",ms,ms)}catch{ac=!1}function SE(s,a,d,m,y,E,T,D,O){var W=Array.prototype.slice.call(arguments,3);try{a.apply(d,W)}catch(ee){this.onError(ee)}}var gs=!1,Do=null,ko=!1,lc=null,wE={onError:function(s){gs=!0,Do=s}};function IE(s,a,d,m,y,E,T,D,O){gs=!1,Do=null,SE.apply(wE,arguments)}function AE(s,a,d,m,y,E,T,D,O){if(IE.apply(this,arguments),gs){if(gs){var W=Do;gs=!1,Do=null}else throw Error(t(198));ko||(ko=!0,lc=W)}}function Un(s){var a=s,d=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(d=a.return),s=a.return;while(s)}return a.tag===3?d:null}function Vh(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function Kh(s){if(Un(s)!==s)throw Error(t(188))}function TE(s){var a=s.alternate;if(!a){if(a=Un(s),a===null)throw Error(t(188));return a!==s?null:s}for(var d=s,m=a;;){var y=d.return;if(y===null)break;var E=y.alternate;if(E===null){if(m=y.return,m!==null){d=m;continue}break}if(y.child===E.child){for(E=y.child;E;){if(E===d)return Kh(y),s;if(E===m)return Kh(y),a;E=E.sibling}throw Error(t(188))}if(d.return!==m.return)d=y,m=E;else{for(var T=!1,D=y.child;D;){if(D===d){T=!0,d=y,m=E;break}if(D===m){T=!0,m=y,d=E;break}D=D.sibling}if(!T){for(D=E.child;D;){if(D===d){T=!0,d=E,m=y;break}if(D===m){T=!0,m=E,d=y;break}D=D.sibling}if(!T)throw Error(t(189))}}if(d.alternate!==m)throw Error(t(190))}if(d.tag!==3)throw Error(t(188));return d.stateNode.current===d?s:a}function zh(s){return s=TE(s),s!==null?Yh(s):null}function Yh(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var a=Yh(s);if(a!==null)return a;s=s.sibling}return null}var qh=e.unstable_scheduleCallback,Xh=e.unstable_cancelCallback,LE=e.unstable_shouldYield,RE=e.unstable_requestPaint,st=e.unstable_now,CE=e.unstable_getCurrentPriorityLevel,cc=e.unstable_ImmediatePriority,Zh=e.unstable_UserBlockingPriority,Oo=e.unstable_NormalPriority,DE=e.unstable_LowPriority,Jh=e.unstable_IdlePriority,Po=null,Tr=null;function kE(s){if(Tr&&typeof Tr.onCommitFiberRoot=="function")try{Tr.onCommitFiberRoot(Po,s,void 0,(s.current.flags&128)===128)}catch{}}var hr=Math.clz32?Math.clz32:NE,OE=Math.log,PE=Math.LN2;function NE(s){return s>>>=0,s===0?32:31-(OE(s)/PE|0)|0}var No=64,Mo=4194304;function ys(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function _o(s,a){var d=s.pendingLanes;if(d===0)return 0;var m=0,y=s.suspendedLanes,E=s.pingedLanes,T=d&268435455;if(T!==0){var D=T&~y;D!==0?m=ys(D):(E&=T,E!==0&&(m=ys(E)))}else T=d&~y,T!==0?m=ys(T):E!==0&&(m=ys(E));if(m===0)return 0;if(a!==0&&a!==m&&(a&y)===0&&(y=m&-m,E=a&-a,y>=E||y===16&&(E&4194240)!==0))return a;if((m&4)!==0&&(m|=d&16),a=s.entangledLanes,a!==0)for(s=s.entanglements,a&=m;0<a;)d=31-hr(a),y=1<<d,m|=s[d],a&=~y;return m}function ME(s,a){switch(s){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _E(s,a){for(var d=s.suspendedLanes,m=s.pingedLanes,y=s.expirationTimes,E=s.pendingLanes;0<E;){var T=31-hr(E),D=1<<T,O=y[T];O===-1?((D&d)===0||(D&m)!==0)&&(y[T]=ME(D,a)):O<=a&&(s.expiredLanes|=D),E&=~D}}function uc(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Qh(){var s=No;return No<<=1,(No&4194240)===0&&(No=64),s}function dc(s){for(var a=[],d=0;31>d;d++)a.push(s);return a}function vs(s,a,d){s.pendingLanes|=a,a!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,a=31-hr(a),s[a]=d}function FE(s,a){var d=s.pendingLanes&~a;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=a,s.mutableReadLanes&=a,s.entangledLanes&=a,a=s.entanglements;var m=s.eventTimes;for(s=s.expirationTimes;0<d;){var y=31-hr(d),E=1<<y;a[y]=0,m[y]=-1,s[y]=-1,d&=~E}}function fc(s,a){var d=s.entangledLanes|=a;for(s=s.entanglements;d;){var m=31-hr(d),y=1<<m;y&a|s[m]&a&&(s[m]|=a),d&=~y}}var $e=0;function ep(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var tp,hc,rp,np,ip,pc=!1,Fo=[],on=null,an=null,ln=null,xs=new Map,bs=new Map,cn=[],BE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sp(s,a){switch(s){case"focusin":case"focusout":on=null;break;case"dragenter":case"dragleave":an=null;break;case"mouseover":case"mouseout":ln=null;break;case"pointerover":case"pointerout":xs.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":bs.delete(a.pointerId)}}function Es(s,a,d,m,y,E){return s===null||s.nativeEvent!==E?(s={blockedOn:a,domEventName:d,eventSystemFlags:m,nativeEvent:E,targetContainers:[y]},a!==null&&(a=Ms(a),a!==null&&hc(a)),s):(s.eventSystemFlags|=m,a=s.targetContainers,y!==null&&a.indexOf(y)===-1&&a.push(y),s)}function jE(s,a,d,m,y){switch(a){case"focusin":return on=Es(on,s,a,d,m,y),!0;case"dragenter":return an=Es(an,s,a,d,m,y),!0;case"mouseover":return ln=Es(ln,s,a,d,m,y),!0;case"pointerover":var E=y.pointerId;return xs.set(E,Es(xs.get(E)||null,s,a,d,m,y)),!0;case"gotpointercapture":return E=y.pointerId,bs.set(E,Es(bs.get(E)||null,s,a,d,m,y)),!0}return!1}function op(s){var a=Hn(s.target);if(a!==null){var d=Un(a);if(d!==null){if(a=d.tag,a===13){if(a=Vh(d),a!==null){s.blockedOn=a,ip(s.priority,function(){rp(d)});return}}else if(a===3&&d.stateNode.current.memoizedState.isDehydrated){s.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Bo(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var d=gc(s.domEventName,s.eventSystemFlags,a[0],s.nativeEvent);if(d===null){d=s.nativeEvent;var m=new d.constructor(d.type,d);nc=m,d.target.dispatchEvent(m),nc=null}else return a=Ms(d),a!==null&&hc(a),s.blockedOn=d,!1;a.shift()}return!0}function ap(s,a,d){Bo(s)&&d.delete(a)}function UE(){pc=!1,on!==null&&Bo(on)&&(on=null),an!==null&&Bo(an)&&(an=null),ln!==null&&Bo(ln)&&(ln=null),xs.forEach(ap),bs.forEach(ap)}function Ss(s,a){s.blockedOn===a&&(s.blockedOn=null,pc||(pc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,UE)))}function ws(s){function a(y){return Ss(y,s)}if(0<Fo.length){Ss(Fo[0],s);for(var d=1;d<Fo.length;d++){var m=Fo[d];m.blockedOn===s&&(m.blockedOn=null)}}for(on!==null&&Ss(on,s),an!==null&&Ss(an,s),ln!==null&&Ss(ln,s),xs.forEach(a),bs.forEach(a),d=0;d<cn.length;d++)m=cn[d],m.blockedOn===s&&(m.blockedOn=null);for(;0<cn.length&&(d=cn[0],d.blockedOn===null);)op(d),d.blockedOn===null&&cn.shift()}var yi=k.ReactCurrentBatchConfig,jo=!0;function HE(s,a,d,m){var y=$e,E=yi.transition;yi.transition=null;try{$e=1,mc(s,a,d,m)}finally{$e=y,yi.transition=E}}function $E(s,a,d,m){var y=$e,E=yi.transition;yi.transition=null;try{$e=4,mc(s,a,d,m)}finally{$e=y,yi.transition=E}}function mc(s,a,d,m){if(jo){var y=gc(s,a,d,m);if(y===null)Pc(s,a,m,Uo,d),sp(s,m);else if(jE(y,s,a,d,m))m.stopPropagation();else if(sp(s,m),a&4&&-1<BE.indexOf(s)){for(;y!==null;){var E=Ms(y);if(E!==null&&tp(E),E=gc(s,a,d,m),E===null&&Pc(s,a,m,Uo,d),E===y)break;y=E}y!==null&&m.stopPropagation()}else Pc(s,a,m,null,d)}}var Uo=null;function gc(s,a,d,m){if(Uo=null,s=ic(m),s=Hn(s),s!==null)if(a=Un(s),a===null)s=null;else if(d=a.tag,d===13){if(s=Vh(a),s!==null)return s;s=null}else if(d===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null);return Uo=s,null}function lp(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(CE()){case cc:return 1;case Zh:return 4;case Oo:case DE:return 16;case Jh:return 536870912;default:return 16}default:return 16}}var un=null,yc=null,Ho=null;function cp(){if(Ho)return Ho;var s,a=yc,d=a.length,m,y="value"in un?un.value:un.textContent,E=y.length;for(s=0;s<d&&a[s]===y[s];s++);var T=d-s;for(m=1;m<=T&&a[d-m]===y[E-m];m++);return Ho=y.slice(s,1<m?1-m:void 0)}function $o(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Go(){return!0}function up(){return!1}function Wt(s){function a(d,m,y,E,T){this._reactName=d,this._targetInst=y,this.type=m,this.nativeEvent=E,this.target=T,this.currentTarget=null;for(var D in s)s.hasOwnProperty(D)&&(d=s[D],this[D]=d?d(E):E[D]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?Go:up,this.isPropagationStopped=up,this}return V(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Go)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Go)},persist:function(){},isPersistent:Go}),a}var vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vc=Wt(vi),Is=V({},vi,{view:0,detail:0}),GE=Wt(Is),xc,bc,As,Wo=V({},Is,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sc,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==As&&(As&&s.type==="mousemove"?(xc=s.screenX-As.screenX,bc=s.screenY-As.screenY):bc=xc=0,As=s),xc)},movementY:function(s){return"movementY"in s?s.movementY:bc}}),dp=Wt(Wo),WE=V({},Wo,{dataTransfer:0}),VE=Wt(WE),KE=V({},Is,{relatedTarget:0}),Ec=Wt(KE),zE=V({},vi,{animationName:0,elapsedTime:0,pseudoElement:0}),YE=Wt(zE),qE=V({},vi,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),XE=Wt(qE),ZE=V({},vi,{data:0}),fp=Wt(ZE),JE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},QE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tS(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=eS[s])?!!a[s]:!1}function Sc(){return tS}var rS=V({},Is,{key:function(s){if(s.key){var a=JE[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=$o(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?QE[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sc,charCode:function(s){return s.type==="keypress"?$o(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?$o(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),nS=Wt(rS),iS=V({},Wo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hp=Wt(iS),sS=V({},Is,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sc}),oS=Wt(sS),aS=V({},vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),lS=Wt(aS),cS=V({},Wo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),uS=Wt(cS),dS=[9,13,27,32],wc=c&&"CompositionEvent"in window,Ts=null;c&&"documentMode"in document&&(Ts=document.documentMode);var fS=c&&"TextEvent"in window&&!Ts,pp=c&&(!wc||Ts&&8<Ts&&11>=Ts),mp=" ",gp=!1;function yp(s,a){switch(s){case"keyup":return dS.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vp(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var xi=!1;function hS(s,a){switch(s){case"compositionend":return vp(a);case"keypress":return a.which!==32?null:(gp=!0,mp);case"textInput":return s=a.data,s===mp&&gp?null:s;default:return null}}function pS(s,a){if(xi)return s==="compositionend"||!wc&&yp(s,a)?(s=cp(),Ho=yc=un=null,xi=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return pp&&a.locale!=="ko"?null:a.data;default:return null}}var mS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xp(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!mS[s.type]:a==="textarea"}function bp(s,a,d,m){Uh(m),a=qo(a,"onChange"),0<a.length&&(d=new vc("onChange","change",null,d,m),s.push({event:d,listeners:a}))}var Ls=null,Rs=null;function gS(s){Bp(s,0)}function Vo(s){var a=Ii(s);if(Ke(a))return s}function yS(s,a){if(s==="change")return a}var Ep=!1;if(c){var Ic;if(c){var Ac="oninput"in document;if(!Ac){var Sp=document.createElement("div");Sp.setAttribute("oninput","return;"),Ac=typeof Sp.oninput=="function"}Ic=Ac}else Ic=!1;Ep=Ic&&(!document.documentMode||9<document.documentMode)}function wp(){Ls&&(Ls.detachEvent("onpropertychange",Ip),Rs=Ls=null)}function Ip(s){if(s.propertyName==="value"&&Vo(Rs)){var a=[];bp(a,Rs,s,ic(s)),Wh(gS,a)}}function vS(s,a,d){s==="focusin"?(wp(),Ls=a,Rs=d,Ls.attachEvent("onpropertychange",Ip)):s==="focusout"&&wp()}function xS(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Vo(Rs)}function bS(s,a){if(s==="click")return Vo(a)}function ES(s,a){if(s==="input"||s==="change")return Vo(a)}function SS(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var pr=typeof Object.is=="function"?Object.is:SS;function Cs(s,a){if(pr(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var d=Object.keys(s),m=Object.keys(a);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var y=d[m];if(!u.call(a,y)||!pr(s[y],a[y]))return!1}return!0}function Ap(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Tp(s,a){var d=Ap(s);s=0;for(var m;d;){if(d.nodeType===3){if(m=s+d.textContent.length,s<=a&&m>=a)return{node:d,offset:a-s};s=m}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=Ap(d)}}function Lp(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?Lp(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function Rp(){for(var s=window,a=Nt();a instanceof s.HTMLIFrameElement;){try{var d=typeof a.contentWindow.location.href=="string"}catch{d=!1}if(d)s=a.contentWindow;else break;a=Nt(s.document)}return a}function Tc(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}function wS(s){var a=Rp(),d=s.focusedElem,m=s.selectionRange;if(a!==d&&d&&d.ownerDocument&&Lp(d.ownerDocument.documentElement,d)){if(m!==null&&Tc(d)){if(a=m.start,s=m.end,s===void 0&&(s=a),"selectionStart"in d)d.selectionStart=a,d.selectionEnd=Math.min(s,d.value.length);else if(s=(a=d.ownerDocument||document)&&a.defaultView||window,s.getSelection){s=s.getSelection();var y=d.textContent.length,E=Math.min(m.start,y);m=m.end===void 0?E:Math.min(m.end,y),!s.extend&&E>m&&(y=m,m=E,E=y),y=Tp(d,E);var T=Tp(d,m);y&&T&&(s.rangeCount!==1||s.anchorNode!==y.node||s.anchorOffset!==y.offset||s.focusNode!==T.node||s.focusOffset!==T.offset)&&(a=a.createRange(),a.setStart(y.node,y.offset),s.removeAllRanges(),E>m?(s.addRange(a),s.extend(T.node,T.offset)):(a.setEnd(T.node,T.offset),s.addRange(a)))}}for(a=[],s=d;s=s.parentNode;)s.nodeType===1&&a.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<a.length;d++)s=a[d],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var IS=c&&"documentMode"in document&&11>=document.documentMode,bi=null,Lc=null,Ds=null,Rc=!1;function Cp(s,a,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;Rc||bi==null||bi!==Nt(m)||(m=bi,"selectionStart"in m&&Tc(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Ds&&Cs(Ds,m)||(Ds=m,m=qo(Lc,"onSelect"),0<m.length&&(a=new vc("onSelect","select",null,a,d),s.push({event:a,listeners:m}),a.target=bi)))}function Ko(s,a){var d={};return d[s.toLowerCase()]=a.toLowerCase(),d["Webkit"+s]="webkit"+a,d["Moz"+s]="moz"+a,d}var Ei={animationend:Ko("Animation","AnimationEnd"),animationiteration:Ko("Animation","AnimationIteration"),animationstart:Ko("Animation","AnimationStart"),transitionend:Ko("Transition","TransitionEnd")},Cc={},Dp={};c&&(Dp=document.createElement("div").style,"AnimationEvent"in window||(delete Ei.animationend.animation,delete Ei.animationiteration.animation,delete Ei.animationstart.animation),"TransitionEvent"in window||delete Ei.transitionend.transition);function zo(s){if(Cc[s])return Cc[s];if(!Ei[s])return s;var a=Ei[s],d;for(d in a)if(a.hasOwnProperty(d)&&d in Dp)return Cc[s]=a[d];return s}var kp=zo("animationend"),Op=zo("animationiteration"),Pp=zo("animationstart"),Np=zo("transitionend"),Mp=new Map,_p="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function dn(s,a){Mp.set(s,a),o(a,[s])}for(var Dc=0;Dc<_p.length;Dc++){var kc=_p[Dc],AS=kc.toLowerCase(),TS=kc[0].toUpperCase()+kc.slice(1);dn(AS,"on"+TS)}dn(kp,"onAnimationEnd"),dn(Op,"onAnimationIteration"),dn(Pp,"onAnimationStart"),dn("dblclick","onDoubleClick"),dn("focusin","onFocus"),dn("focusout","onBlur"),dn(Np,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ks="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LS=new Set("cancel close invalid load scroll toggle".split(" ").concat(ks));function Fp(s,a,d){var m=s.type||"unknown-event";s.currentTarget=d,AE(m,a,void 0,s),s.currentTarget=null}function Bp(s,a){a=(a&4)!==0;for(var d=0;d<s.length;d++){var m=s[d],y=m.event;m=m.listeners;e:{var E=void 0;if(a)for(var T=m.length-1;0<=T;T--){var D=m[T],O=D.instance,W=D.currentTarget;if(D=D.listener,O!==E&&y.isPropagationStopped())break e;Fp(y,D,W),E=O}else for(T=0;T<m.length;T++){if(D=m[T],O=D.instance,W=D.currentTarget,D=D.listener,O!==E&&y.isPropagationStopped())break e;Fp(y,D,W),E=O}}}if(ko)throw s=lc,ko=!1,lc=null,s}function ze(s,a){var d=a[jc];d===void 0&&(d=a[jc]=new Set);var m=s+"__bubble";d.has(m)||(jp(a,s,2,!1),d.add(m))}function Oc(s,a,d){var m=0;a&&(m|=4),jp(d,s,m,a)}var Yo="_reactListening"+Math.random().toString(36).slice(2);function Os(s){if(!s[Yo]){s[Yo]=!0,n.forEach(function(d){d!=="selectionchange"&&(LS.has(d)||Oc(d,!1,s),Oc(d,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Yo]||(a[Yo]=!0,Oc("selectionchange",!1,a))}}function jp(s,a,d,m){switch(lp(a)){case 1:var y=HE;break;case 4:y=$E;break;default:y=mc}d=y.bind(null,a,d,s),y=void 0,!ac||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(y=!0),m?y!==void 0?s.addEventListener(a,d,{capture:!0,passive:y}):s.addEventListener(a,d,!0):y!==void 0?s.addEventListener(a,d,{passive:y}):s.addEventListener(a,d,!1)}function Pc(s,a,d,m,y){var E=m;if((a&1)===0&&(a&2)===0&&m!==null)e:for(;;){if(m===null)return;var T=m.tag;if(T===3||T===4){var D=m.stateNode.containerInfo;if(D===y||D.nodeType===8&&D.parentNode===y)break;if(T===4)for(T=m.return;T!==null;){var O=T.tag;if((O===3||O===4)&&(O=T.stateNode.containerInfo,O===y||O.nodeType===8&&O.parentNode===y))return;T=T.return}for(;D!==null;){if(T=Hn(D),T===null)return;if(O=T.tag,O===5||O===6){m=E=T;continue e}D=D.parentNode}}m=m.return}Wh(function(){var W=E,ee=ic(d),ne=[];e:{var Q=Mp.get(s);if(Q!==void 0){var ue=vc,me=s;switch(s){case"keypress":if($o(d)===0)break e;case"keydown":case"keyup":ue=nS;break;case"focusin":me="focus",ue=Ec;break;case"focusout":me="blur",ue=Ec;break;case"beforeblur":case"afterblur":ue=Ec;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=dp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=VE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=oS;break;case kp:case Op:case Pp:ue=YE;break;case Np:ue=lS;break;case"scroll":ue=GE;break;case"wheel":ue=uS;break;case"copy":case"cut":case"paste":ue=XE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=hp}var ye=(a&4)!==0,ot=!ye&&s==="scroll",j=ye?Q!==null?Q+"Capture":null:Q;ye=[];for(var N=W,$;N!==null;){$=N;var ie=$.stateNode;if($.tag===5&&ie!==null&&($=ie,j!==null&&(ie=ps(N,j),ie!=null&&ye.push(Ps(N,ie,$)))),ot)break;N=N.return}0<ye.length&&(Q=new ue(Q,me,null,d,ee),ne.push({event:Q,listeners:ye}))}}if((a&7)===0){e:{if(Q=s==="mouseover"||s==="pointerover",ue=s==="mouseout"||s==="pointerout",Q&&d!==nc&&(me=d.relatedTarget||d.fromElement)&&(Hn(me)||me[$r]))break e;if((ue||Q)&&(Q=ee.window===ee?ee:(Q=ee.ownerDocument)?Q.defaultView||Q.parentWindow:window,ue?(me=d.relatedTarget||d.toElement,ue=W,me=me?Hn(me):null,me!==null&&(ot=Un(me),me!==ot||me.tag!==5&&me.tag!==6)&&(me=null)):(ue=null,me=W),ue!==me)){if(ye=dp,ie="onMouseLeave",j="onMouseEnter",N="mouse",(s==="pointerout"||s==="pointerover")&&(ye=hp,ie="onPointerLeave",j="onPointerEnter",N="pointer"),ot=ue==null?Q:Ii(ue),$=me==null?Q:Ii(me),Q=new ye(ie,N+"leave",ue,d,ee),Q.target=ot,Q.relatedTarget=$,ie=null,Hn(ee)===W&&(ye=new ye(j,N+"enter",me,d,ee),ye.target=$,ye.relatedTarget=ot,ie=ye),ot=ie,ue&&me)t:{for(ye=ue,j=me,N=0,$=ye;$;$=Si($))N++;for($=0,ie=j;ie;ie=Si(ie))$++;for(;0<N-$;)ye=Si(ye),N--;for(;0<$-N;)j=Si(j),$--;for(;N--;){if(ye===j||j!==null&&ye===j.alternate)break t;ye=Si(ye),j=Si(j)}ye=null}else ye=null;ue!==null&&Up(ne,Q,ue,ye,!1),me!==null&&ot!==null&&Up(ne,ot,me,ye,!0)}}e:{if(Q=W?Ii(W):window,ue=Q.nodeName&&Q.nodeName.toLowerCase(),ue==="select"||ue==="input"&&Q.type==="file")var be=yS;else if(xp(Q))if(Ep)be=ES;else{be=xS;var Ie=vS}else(ue=Q.nodeName)&&ue.toLowerCase()==="input"&&(Q.type==="checkbox"||Q.type==="radio")&&(be=bS);if(be&&(be=be(s,W))){bp(ne,be,d,ee);break e}Ie&&Ie(s,Q,W),s==="focusout"&&(Ie=Q._wrapperState)&&Ie.controlled&&Q.type==="number"&&ds(Q,"number",Q.value)}switch(Ie=W?Ii(W):window,s){case"focusin":(xp(Ie)||Ie.contentEditable==="true")&&(bi=Ie,Lc=W,Ds=null);break;case"focusout":Ds=Lc=bi=null;break;case"mousedown":Rc=!0;break;case"contextmenu":case"mouseup":case"dragend":Rc=!1,Cp(ne,d,ee);break;case"selectionchange":if(IS)break;case"keydown":case"keyup":Cp(ne,d,ee)}var Ae;if(wc)e:{switch(s){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else xi?yp(s,d)&&(Ce="onCompositionEnd"):s==="keydown"&&d.keyCode===229&&(Ce="onCompositionStart");Ce&&(pp&&d.locale!=="ko"&&(xi||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&xi&&(Ae=cp()):(un=ee,yc="value"in un?un.value:un.textContent,xi=!0)),Ie=qo(W,Ce),0<Ie.length&&(Ce=new fp(Ce,s,null,d,ee),ne.push({event:Ce,listeners:Ie}),Ae?Ce.data=Ae:(Ae=vp(d),Ae!==null&&(Ce.data=Ae)))),(Ae=fS?hS(s,d):pS(s,d))&&(W=qo(W,"onBeforeInput"),0<W.length&&(ee=new fp("onBeforeInput","beforeinput",null,d,ee),ne.push({event:ee,listeners:W}),ee.data=Ae))}Bp(ne,a)})}function Ps(s,a,d){return{instance:s,listener:a,currentTarget:d}}function qo(s,a){for(var d=a+"Capture",m=[];s!==null;){var y=s,E=y.stateNode;y.tag===5&&E!==null&&(y=E,E=ps(s,d),E!=null&&m.unshift(Ps(s,E,y)),E=ps(s,a),E!=null&&m.push(Ps(s,E,y))),s=s.return}return m}function Si(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Up(s,a,d,m,y){for(var E=a._reactName,T=[];d!==null&&d!==m;){var D=d,O=D.alternate,W=D.stateNode;if(O!==null&&O===m)break;D.tag===5&&W!==null&&(D=W,y?(O=ps(d,E),O!=null&&T.unshift(Ps(d,O,D))):y||(O=ps(d,E),O!=null&&T.push(Ps(d,O,D)))),d=d.return}T.length!==0&&s.push({event:a,listeners:T})}var RS=/\r\n?/g,CS=/\u0000|\uFFFD/g;function Hp(s){return(typeof s=="string"?s:""+s).replace(RS,`
`).replace(CS,"")}function Xo(s,a,d){if(a=Hp(a),Hp(s)!==a&&d)throw Error(t(425))}function Zo(){}var Nc=null,Mc=null;function _c(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Fc=typeof setTimeout=="function"?setTimeout:void 0,DS=typeof clearTimeout=="function"?clearTimeout:void 0,$p=typeof Promise=="function"?Promise:void 0,kS=typeof queueMicrotask=="function"?queueMicrotask:typeof $p<"u"?function(s){return $p.resolve(null).then(s).catch(OS)}:Fc;function OS(s){setTimeout(function(){throw s})}function Bc(s,a){var d=a,m=0;do{var y=d.nextSibling;if(s.removeChild(d),y&&y.nodeType===8)if(d=y.data,d==="/$"){if(m===0){s.removeChild(y),ws(a);return}m--}else d!=="$"&&d!=="$?"&&d!=="$!"||m++;d=y}while(d);ws(a)}function fn(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return s}function Gp(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var d=s.data;if(d==="$"||d==="$!"||d==="$?"){if(a===0)return s;a--}else d==="/$"&&a++}s=s.previousSibling}return null}var wi=Math.random().toString(36).slice(2),Lr="__reactFiber$"+wi,Ns="__reactProps$"+wi,$r="__reactContainer$"+wi,jc="__reactEvents$"+wi,PS="__reactListeners$"+wi,NS="__reactHandles$"+wi;function Hn(s){var a=s[Lr];if(a)return a;for(var d=s.parentNode;d;){if(a=d[$r]||d[Lr]){if(d=a.alternate,a.child!==null||d!==null&&d.child!==null)for(s=Gp(s);s!==null;){if(d=s[Lr])return d;s=Gp(s)}return a}s=d,d=s.parentNode}return null}function Ms(s){return s=s[Lr]||s[$r],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Ii(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function Jo(s){return s[Ns]||null}var Uc=[],Ai=-1;function hn(s){return{current:s}}function Ye(s){0>Ai||(s.current=Uc[Ai],Uc[Ai]=null,Ai--)}function We(s,a){Ai++,Uc[Ai]=s.current,s.current=a}var pn={},At=hn(pn),_t=hn(!1),$n=pn;function Ti(s,a){var d=s.type.contextTypes;if(!d)return pn;var m=s.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===a)return m.__reactInternalMemoizedMaskedChildContext;var y={},E;for(E in d)y[E]=a[E];return m&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=a,s.__reactInternalMemoizedMaskedChildContext=y),y}function Ft(s){return s=s.childContextTypes,s!=null}function Qo(){Ye(_t),Ye(At)}function Wp(s,a,d){if(At.current!==pn)throw Error(t(168));We(At,a),We(_t,d)}function Vp(s,a,d){var m=s.stateNode;if(a=a.childContextTypes,typeof m.getChildContext!="function")return d;m=m.getChildContext();for(var y in m)if(!(y in a))throw Error(t(108,De(s)||"Unknown",y));return V({},d,m)}function ea(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||pn,$n=At.current,We(At,s),We(_t,_t.current),!0}function Kp(s,a,d){var m=s.stateNode;if(!m)throw Error(t(169));d?(s=Vp(s,a,$n),m.__reactInternalMemoizedMergedChildContext=s,Ye(_t),Ye(At),We(At,s)):Ye(_t),We(_t,d)}var Gr=null,ta=!1,Hc=!1;function zp(s){Gr===null?Gr=[s]:Gr.push(s)}function MS(s){ta=!0,zp(s)}function mn(){if(!Hc&&Gr!==null){Hc=!0;var s=0,a=$e;try{var d=Gr;for($e=1;s<d.length;s++){var m=d[s];do m=m(!0);while(m!==null)}Gr=null,ta=!1}catch(y){throw Gr!==null&&(Gr=Gr.slice(s+1)),qh(cc,mn),y}finally{$e=a,Hc=!1}}return null}var Li=[],Ri=0,ra=null,na=0,er=[],tr=0,Gn=null,Wr=1,Vr="";function Wn(s,a){Li[Ri++]=na,Li[Ri++]=ra,ra=s,na=a}function Yp(s,a,d){er[tr++]=Wr,er[tr++]=Vr,er[tr++]=Gn,Gn=s;var m=Wr;s=Vr;var y=32-hr(m)-1;m&=~(1<<y),d+=1;var E=32-hr(a)+y;if(30<E){var T=y-y%5;E=(m&(1<<T)-1).toString(32),m>>=T,y-=T,Wr=1<<32-hr(a)+y|d<<y|m,Vr=E+s}else Wr=1<<E|d<<y|m,Vr=s}function $c(s){s.return!==null&&(Wn(s,1),Yp(s,1,0))}function Gc(s){for(;s===ra;)ra=Li[--Ri],Li[Ri]=null,na=Li[--Ri],Li[Ri]=null;for(;s===Gn;)Gn=er[--tr],er[tr]=null,Vr=er[--tr],er[tr]=null,Wr=er[--tr],er[tr]=null}var Vt=null,Kt=null,Xe=!1,mr=null;function qp(s,a){var d=sr(5,null,null,0);d.elementType="DELETED",d.stateNode=a,d.return=s,a=s.deletions,a===null?(s.deletions=[d],s.flags|=16):a.push(d)}function Xp(s,a){switch(s.tag){case 5:var d=s.type;return a=a.nodeType!==1||d.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(s.stateNode=a,Vt=s,Kt=fn(a.firstChild),!0):!1;case 6:return a=s.pendingProps===""||a.nodeType!==3?null:a,a!==null?(s.stateNode=a,Vt=s,Kt=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(d=Gn!==null?{id:Wr,overflow:Vr}:null,s.memoizedState={dehydrated:a,treeContext:d,retryLane:1073741824},d=sr(18,null,null,0),d.stateNode=a,d.return=s,s.child=d,Vt=s,Kt=null,!0):!1;default:return!1}}function Wc(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Vc(s){if(Xe){var a=Kt;if(a){var d=a;if(!Xp(s,a)){if(Wc(s))throw Error(t(418));a=fn(d.nextSibling);var m=Vt;a&&Xp(s,a)?qp(m,d):(s.flags=s.flags&-4097|2,Xe=!1,Vt=s)}}else{if(Wc(s))throw Error(t(418));s.flags=s.flags&-4097|2,Xe=!1,Vt=s}}}function Zp(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Vt=s}function ia(s){if(s!==Vt)return!1;if(!Xe)return Zp(s),Xe=!0,!1;var a;if((a=s.tag!==3)&&!(a=s.tag!==5)&&(a=s.type,a=a!=="head"&&a!=="body"&&!_c(s.type,s.memoizedProps)),a&&(a=Kt)){if(Wc(s))throw Jp(),Error(t(418));for(;a;)qp(s,a),a=fn(a.nextSibling)}if(Zp(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8){var d=s.data;if(d==="/$"){if(a===0){Kt=fn(s.nextSibling);break e}a--}else d!=="$"&&d!=="$!"&&d!=="$?"||a++}s=s.nextSibling}Kt=null}}else Kt=Vt?fn(s.stateNode.nextSibling):null;return!0}function Jp(){for(var s=Kt;s;)s=fn(s.nextSibling)}function Ci(){Kt=Vt=null,Xe=!1}function Kc(s){mr===null?mr=[s]:mr.push(s)}var _S=k.ReactCurrentBatchConfig;function _s(s,a,d){if(s=d.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(t(309));var m=d.stateNode}if(!m)throw Error(t(147,s));var y=m,E=""+s;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===E?a.ref:(a=function(T){var D=y.refs;T===null?delete D[E]:D[E]=T},a._stringRef=E,a)}if(typeof s!="string")throw Error(t(284));if(!d._owner)throw Error(t(290,s))}return s}function sa(s,a){throw s=Object.prototype.toString.call(a),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s))}function Qp(s){var a=s._init;return a(s._payload)}function em(s){function a(j,N){if(s){var $=j.deletions;$===null?(j.deletions=[N],j.flags|=16):$.push(N)}}function d(j,N){if(!s)return null;for(;N!==null;)a(j,N),N=N.sibling;return null}function m(j,N){for(j=new Map;N!==null;)N.key!==null?j.set(N.key,N):j.set(N.index,N),N=N.sibling;return j}function y(j,N){return j=wn(j,N),j.index=0,j.sibling=null,j}function E(j,N,$){return j.index=$,s?($=j.alternate,$!==null?($=$.index,$<N?(j.flags|=2,N):$):(j.flags|=2,N)):(j.flags|=1048576,N)}function T(j){return s&&j.alternate===null&&(j.flags|=2),j}function D(j,N,$,ie){return N===null||N.tag!==6?(N=Fu($,j.mode,ie),N.return=j,N):(N=y(N,$),N.return=j,N)}function O(j,N,$,ie){var be=$.type;return be===_?ee(j,N,$.props.children,ie,$.key):N!==null&&(N.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===ce&&Qp(be)===N.type)?(ie=y(N,$.props),ie.ref=_s(j,N,$),ie.return=j,ie):(ie=Ca($.type,$.key,$.props,null,j.mode,ie),ie.ref=_s(j,N,$),ie.return=j,ie)}function W(j,N,$,ie){return N===null||N.tag!==4||N.stateNode.containerInfo!==$.containerInfo||N.stateNode.implementation!==$.implementation?(N=Bu($,j.mode,ie),N.return=j,N):(N=y(N,$.children||[]),N.return=j,N)}function ee(j,N,$,ie,be){return N===null||N.tag!==7?(N=Jn($,j.mode,ie,be),N.return=j,N):(N=y(N,$),N.return=j,N)}function ne(j,N,$){if(typeof N=="string"&&N!==""||typeof N=="number")return N=Fu(""+N,j.mode,$),N.return=j,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case C:return $=Ca(N.type,N.key,N.props,null,j.mode,$),$.ref=_s(j,null,N),$.return=j,$;case F:return N=Bu(N,j.mode,$),N.return=j,N;case ce:var ie=N._init;return ne(j,ie(N._payload),$)}if(jn(N)||X(N))return N=Jn(N,j.mode,$,null),N.return=j,N;sa(j,N)}return null}function Q(j,N,$,ie){var be=N!==null?N.key:null;if(typeof $=="string"&&$!==""||typeof $=="number")return be!==null?null:D(j,N,""+$,ie);if(typeof $=="object"&&$!==null){switch($.$$typeof){case C:return $.key===be?O(j,N,$,ie):null;case F:return $.key===be?W(j,N,$,ie):null;case ce:return be=$._init,Q(j,N,be($._payload),ie)}if(jn($)||X($))return be!==null?null:ee(j,N,$,ie,null);sa(j,$)}return null}function ue(j,N,$,ie,be){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return j=j.get($)||null,D(N,j,""+ie,be);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case C:return j=j.get(ie.key===null?$:ie.key)||null,O(N,j,ie,be);case F:return j=j.get(ie.key===null?$:ie.key)||null,W(N,j,ie,be);case ce:var Ie=ie._init;return ue(j,N,$,Ie(ie._payload),be)}if(jn(ie)||X(ie))return j=j.get($)||null,ee(N,j,ie,be,null);sa(N,ie)}return null}function me(j,N,$,ie){for(var be=null,Ie=null,Ae=N,Ce=N=0,mt=null;Ae!==null&&Ce<$.length;Ce++){Ae.index>Ce?(mt=Ae,Ae=null):mt=Ae.sibling;var Be=Q(j,Ae,$[Ce],ie);if(Be===null){Ae===null&&(Ae=mt);break}s&&Ae&&Be.alternate===null&&a(j,Ae),N=E(Be,N,Ce),Ie===null?be=Be:Ie.sibling=Be,Ie=Be,Ae=mt}if(Ce===$.length)return d(j,Ae),Xe&&Wn(j,Ce),be;if(Ae===null){for(;Ce<$.length;Ce++)Ae=ne(j,$[Ce],ie),Ae!==null&&(N=E(Ae,N,Ce),Ie===null?be=Ae:Ie.sibling=Ae,Ie=Ae);return Xe&&Wn(j,Ce),be}for(Ae=m(j,Ae);Ce<$.length;Ce++)mt=ue(Ae,j,Ce,$[Ce],ie),mt!==null&&(s&&mt.alternate!==null&&Ae.delete(mt.key===null?Ce:mt.key),N=E(mt,N,Ce),Ie===null?be=mt:Ie.sibling=mt,Ie=mt);return s&&Ae.forEach(function(In){return a(j,In)}),Xe&&Wn(j,Ce),be}function ye(j,N,$,ie){var be=X($);if(typeof be!="function")throw Error(t(150));if($=be.call($),$==null)throw Error(t(151));for(var Ie=be=null,Ae=N,Ce=N=0,mt=null,Be=$.next();Ae!==null&&!Be.done;Ce++,Be=$.next()){Ae.index>Ce?(mt=Ae,Ae=null):mt=Ae.sibling;var In=Q(j,Ae,Be.value,ie);if(In===null){Ae===null&&(Ae=mt);break}s&&Ae&&In.alternate===null&&a(j,Ae),N=E(In,N,Ce),Ie===null?be=In:Ie.sibling=In,Ie=In,Ae=mt}if(Be.done)return d(j,Ae),Xe&&Wn(j,Ce),be;if(Ae===null){for(;!Be.done;Ce++,Be=$.next())Be=ne(j,Be.value,ie),Be!==null&&(N=E(Be,N,Ce),Ie===null?be=Be:Ie.sibling=Be,Ie=Be);return Xe&&Wn(j,Ce),be}for(Ae=m(j,Ae);!Be.done;Ce++,Be=$.next())Be=ue(Ae,j,Ce,Be.value,ie),Be!==null&&(s&&Be.alternate!==null&&Ae.delete(Be.key===null?Ce:Be.key),N=E(Be,N,Ce),Ie===null?be=Be:Ie.sibling=Be,Ie=Be);return s&&Ae.forEach(function(m1){return a(j,m1)}),Xe&&Wn(j,Ce),be}function ot(j,N,$,ie){if(typeof $=="object"&&$!==null&&$.type===_&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case C:e:{for(var be=$.key,Ie=N;Ie!==null;){if(Ie.key===be){if(be=$.type,be===_){if(Ie.tag===7){d(j,Ie.sibling),N=y(Ie,$.props.children),N.return=j,j=N;break e}}else if(Ie.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===ce&&Qp(be)===Ie.type){d(j,Ie.sibling),N=y(Ie,$.props),N.ref=_s(j,Ie,$),N.return=j,j=N;break e}d(j,Ie);break}else a(j,Ie);Ie=Ie.sibling}$.type===_?(N=Jn($.props.children,j.mode,ie,$.key),N.return=j,j=N):(ie=Ca($.type,$.key,$.props,null,j.mode,ie),ie.ref=_s(j,N,$),ie.return=j,j=ie)}return T(j);case F:e:{for(Ie=$.key;N!==null;){if(N.key===Ie)if(N.tag===4&&N.stateNode.containerInfo===$.containerInfo&&N.stateNode.implementation===$.implementation){d(j,N.sibling),N=y(N,$.children||[]),N.return=j,j=N;break e}else{d(j,N);break}else a(j,N);N=N.sibling}N=Bu($,j.mode,ie),N.return=j,j=N}return T(j);case ce:return Ie=$._init,ot(j,N,Ie($._payload),ie)}if(jn($))return me(j,N,$,ie);if(X($))return ye(j,N,$,ie);sa(j,$)}return typeof $=="string"&&$!==""||typeof $=="number"?($=""+$,N!==null&&N.tag===6?(d(j,N.sibling),N=y(N,$),N.return=j,j=N):(d(j,N),N=Fu($,j.mode,ie),N.return=j,j=N),T(j)):d(j,N)}return ot}var Di=em(!0),tm=em(!1),oa=hn(null),aa=null,ki=null,zc=null;function Yc(){zc=ki=aa=null}function qc(s){var a=oa.current;Ye(oa),s._currentValue=a}function Xc(s,a,d){for(;s!==null;){var m=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,m!==null&&(m.childLanes|=a)):m!==null&&(m.childLanes&a)!==a&&(m.childLanes|=a),s===d)break;s=s.return}}function Oi(s,a){aa=s,zc=ki=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&a)!==0&&(Bt=!0),s.firstContext=null)}function rr(s){var a=s._currentValue;if(zc!==s)if(s={context:s,memoizedValue:a,next:null},ki===null){if(aa===null)throw Error(t(308));ki=s,aa.dependencies={lanes:0,firstContext:s}}else ki=ki.next=s;return a}var Vn=null;function Zc(s){Vn===null?Vn=[s]:Vn.push(s)}function rm(s,a,d,m){var y=a.interleaved;return y===null?(d.next=d,Zc(a)):(d.next=y.next,y.next=d),a.interleaved=d,Kr(s,m)}function Kr(s,a){s.lanes|=a;var d=s.alternate;for(d!==null&&(d.lanes|=a),d=s,s=s.return;s!==null;)s.childLanes|=a,d=s.alternate,d!==null&&(d.childLanes|=a),d=s,s=s.return;return d.tag===3?d.stateNode:null}var gn=!1;function Jc(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nm(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function zr(s,a){return{eventTime:s,lane:a,tag:0,payload:null,callback:null,next:null}}function yn(s,a,d){var m=s.updateQueue;if(m===null)return null;if(m=m.shared,(Fe&2)!==0){var y=m.pending;return y===null?a.next=a:(a.next=y.next,y.next=a),m.pending=a,Kr(s,d)}return y=m.interleaved,y===null?(a.next=a,Zc(m)):(a.next=y.next,y.next=a),m.interleaved=a,Kr(s,d)}function la(s,a,d){if(a=a.updateQueue,a!==null&&(a=a.shared,(d&4194240)!==0)){var m=a.lanes;m&=s.pendingLanes,d|=m,a.lanes=d,fc(s,d)}}function im(s,a){var d=s.updateQueue,m=s.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var y=null,E=null;if(d=d.firstBaseUpdate,d!==null){do{var T={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};E===null?y=E=T:E=E.next=T,d=d.next}while(d!==null);E===null?y=E=a:E=E.next=a}else y=E=a;d={baseState:m.baseState,firstBaseUpdate:y,lastBaseUpdate:E,shared:m.shared,effects:m.effects},s.updateQueue=d;return}s=d.lastBaseUpdate,s===null?d.firstBaseUpdate=a:s.next=a,d.lastBaseUpdate=a}function ca(s,a,d,m){var y=s.updateQueue;gn=!1;var E=y.firstBaseUpdate,T=y.lastBaseUpdate,D=y.shared.pending;if(D!==null){y.shared.pending=null;var O=D,W=O.next;O.next=null,T===null?E=W:T.next=W,T=O;var ee=s.alternate;ee!==null&&(ee=ee.updateQueue,D=ee.lastBaseUpdate,D!==T&&(D===null?ee.firstBaseUpdate=W:D.next=W,ee.lastBaseUpdate=O))}if(E!==null){var ne=y.baseState;T=0,ee=W=O=null,D=E;do{var Q=D.lane,ue=D.eventTime;if((m&Q)===Q){ee!==null&&(ee=ee.next={eventTime:ue,lane:0,tag:D.tag,payload:D.payload,callback:D.callback,next:null});e:{var me=s,ye=D;switch(Q=a,ue=d,ye.tag){case 1:if(me=ye.payload,typeof me=="function"){ne=me.call(ue,ne,Q);break e}ne=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=ye.payload,Q=typeof me=="function"?me.call(ue,ne,Q):me,Q==null)break e;ne=V({},ne,Q);break e;case 2:gn=!0}}D.callback!==null&&D.lane!==0&&(s.flags|=64,Q=y.effects,Q===null?y.effects=[D]:Q.push(D))}else ue={eventTime:ue,lane:Q,tag:D.tag,payload:D.payload,callback:D.callback,next:null},ee===null?(W=ee=ue,O=ne):ee=ee.next=ue,T|=Q;if(D=D.next,D===null){if(D=y.shared.pending,D===null)break;Q=D,D=Q.next,Q.next=null,y.lastBaseUpdate=Q,y.shared.pending=null}}while(!0);if(ee===null&&(O=ne),y.baseState=O,y.firstBaseUpdate=W,y.lastBaseUpdate=ee,a=y.shared.interleaved,a!==null){y=a;do T|=y.lane,y=y.next;while(y!==a)}else E===null&&(y.shared.lanes=0);Yn|=T,s.lanes=T,s.memoizedState=ne}}function sm(s,a,d){if(s=a.effects,a.effects=null,s!==null)for(a=0;a<s.length;a++){var m=s[a],y=m.callback;if(y!==null){if(m.callback=null,m=d,typeof y!="function")throw Error(t(191,y));y.call(m)}}}var Fs={},Rr=hn(Fs),Bs=hn(Fs),js=hn(Fs);function Kn(s){if(s===Fs)throw Error(t(174));return s}function Qc(s,a){switch(We(js,a),We(Bs,s),We(Rr,Fs),s=a.nodeType,s){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:ec(null,"");break;default:s=s===8?a.parentNode:a,a=s.namespaceURI||null,s=s.tagName,a=ec(a,s)}Ye(Rr),We(Rr,a)}function Pi(){Ye(Rr),Ye(Bs),Ye(js)}function om(s){Kn(js.current);var a=Kn(Rr.current),d=ec(a,s.type);a!==d&&(We(Bs,s),We(Rr,d))}function eu(s){Bs.current===s&&(Ye(Rr),Ye(Bs))}var Qe=hn(0);function ua(s){for(var a=s;a!==null;){if(a.tag===13){var d=a.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var tu=[];function ru(){for(var s=0;s<tu.length;s++)tu[s]._workInProgressVersionPrimary=null;tu.length=0}var da=k.ReactCurrentDispatcher,nu=k.ReactCurrentBatchConfig,zn=0,et=null,ut=null,ht=null,fa=!1,Us=!1,Hs=0,FS=0;function Tt(){throw Error(t(321))}function iu(s,a){if(a===null)return!1;for(var d=0;d<a.length&&d<s.length;d++)if(!pr(s[d],a[d]))return!1;return!0}function su(s,a,d,m,y,E){if(zn=E,et=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,da.current=s===null||s.memoizedState===null?HS:$S,s=d(m,y),Us){E=0;do{if(Us=!1,Hs=0,25<=E)throw Error(t(301));E+=1,ht=ut=null,a.updateQueue=null,da.current=GS,s=d(m,y)}while(Us)}if(da.current=ma,a=ut!==null&&ut.next!==null,zn=0,ht=ut=et=null,fa=!1,a)throw Error(t(300));return s}function ou(){var s=Hs!==0;return Hs=0,s}function Cr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?et.memoizedState=ht=s:ht=ht.next=s,ht}function nr(){if(ut===null){var s=et.alternate;s=s!==null?s.memoizedState:null}else s=ut.next;var a=ht===null?et.memoizedState:ht.next;if(a!==null)ht=a,ut=s;else{if(s===null)throw Error(t(310));ut=s,s={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},ht===null?et.memoizedState=ht=s:ht=ht.next=s}return ht}function $s(s,a){return typeof a=="function"?a(s):a}function au(s){var a=nr(),d=a.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=s;var m=ut,y=m.baseQueue,E=d.pending;if(E!==null){if(y!==null){var T=y.next;y.next=E.next,E.next=T}m.baseQueue=y=E,d.pending=null}if(y!==null){E=y.next,m=m.baseState;var D=T=null,O=null,W=E;do{var ee=W.lane;if((zn&ee)===ee)O!==null&&(O=O.next={lane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),m=W.hasEagerState?W.eagerState:s(m,W.action);else{var ne={lane:ee,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null};O===null?(D=O=ne,T=m):O=O.next=ne,et.lanes|=ee,Yn|=ee}W=W.next}while(W!==null&&W!==E);O===null?T=m:O.next=D,pr(m,a.memoizedState)||(Bt=!0),a.memoizedState=m,a.baseState=T,a.baseQueue=O,d.lastRenderedState=m}if(s=d.interleaved,s!==null){y=s;do E=y.lane,et.lanes|=E,Yn|=E,y=y.next;while(y!==s)}else y===null&&(d.lanes=0);return[a.memoizedState,d.dispatch]}function lu(s){var a=nr(),d=a.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=s;var m=d.dispatch,y=d.pending,E=a.memoizedState;if(y!==null){d.pending=null;var T=y=y.next;do E=s(E,T.action),T=T.next;while(T!==y);pr(E,a.memoizedState)||(Bt=!0),a.memoizedState=E,a.baseQueue===null&&(a.baseState=E),d.lastRenderedState=E}return[E,m]}function am(){}function lm(s,a){var d=et,m=nr(),y=a(),E=!pr(m.memoizedState,y);if(E&&(m.memoizedState=y,Bt=!0),m=m.queue,cu(dm.bind(null,d,m,s),[s]),m.getSnapshot!==a||E||ht!==null&&ht.memoizedState.tag&1){if(d.flags|=2048,Gs(9,um.bind(null,d,m,y,a),void 0,null),pt===null)throw Error(t(349));(zn&30)!==0||cm(d,a,y)}return y}function cm(s,a,d){s.flags|=16384,s={getSnapshot:a,value:d},a=et.updateQueue,a===null?(a={lastEffect:null,stores:null},et.updateQueue=a,a.stores=[s]):(d=a.stores,d===null?a.stores=[s]:d.push(s))}function um(s,a,d,m){a.value=d,a.getSnapshot=m,fm(a)&&hm(s)}function dm(s,a,d){return d(function(){fm(a)&&hm(s)})}function fm(s){var a=s.getSnapshot;s=s.value;try{var d=a();return!pr(s,d)}catch{return!0}}function hm(s){var a=Kr(s,1);a!==null&&xr(a,s,1,-1)}function pm(s){var a=Cr();return typeof s=="function"&&(s=s()),a.memoizedState=a.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$s,lastRenderedState:s},a.queue=s,s=s.dispatch=US.bind(null,et,s),[a.memoizedState,s]}function Gs(s,a,d,m){return s={tag:s,create:a,destroy:d,deps:m,next:null},a=et.updateQueue,a===null?(a={lastEffect:null,stores:null},et.updateQueue=a,a.lastEffect=s.next=s):(d=a.lastEffect,d===null?a.lastEffect=s.next=s:(m=d.next,d.next=s,s.next=m,a.lastEffect=s)),s}function mm(){return nr().memoizedState}function ha(s,a,d,m){var y=Cr();et.flags|=s,y.memoizedState=Gs(1|a,d,void 0,m===void 0?null:m)}function pa(s,a,d,m){var y=nr();m=m===void 0?null:m;var E=void 0;if(ut!==null){var T=ut.memoizedState;if(E=T.destroy,m!==null&&iu(m,T.deps)){y.memoizedState=Gs(a,d,E,m);return}}et.flags|=s,y.memoizedState=Gs(1|a,d,E,m)}function gm(s,a){return ha(8390656,8,s,a)}function cu(s,a){return pa(2048,8,s,a)}function ym(s,a){return pa(4,2,s,a)}function vm(s,a){return pa(4,4,s,a)}function xm(s,a){if(typeof a=="function")return s=s(),a(s),function(){a(null)};if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function bm(s,a,d){return d=d!=null?d.concat([s]):null,pa(4,4,xm.bind(null,a,s),d)}function uu(){}function Em(s,a){var d=nr();a=a===void 0?null:a;var m=d.memoizedState;return m!==null&&a!==null&&iu(a,m[1])?m[0]:(d.memoizedState=[s,a],s)}function Sm(s,a){var d=nr();a=a===void 0?null:a;var m=d.memoizedState;return m!==null&&a!==null&&iu(a,m[1])?m[0]:(s=s(),d.memoizedState=[s,a],s)}function wm(s,a,d){return(zn&21)===0?(s.baseState&&(s.baseState=!1,Bt=!0),s.memoizedState=d):(pr(d,a)||(d=Qh(),et.lanes|=d,Yn|=d,s.baseState=!0),a)}function BS(s,a){var d=$e;$e=d!==0&&4>d?d:4,s(!0);var m=nu.transition;nu.transition={};try{s(!1),a()}finally{$e=d,nu.transition=m}}function Im(){return nr().memoizedState}function jS(s,a,d){var m=En(s);if(d={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null},Am(s))Tm(a,d);else if(d=rm(s,a,d,m),d!==null){var y=kt();xr(d,s,m,y),Lm(d,a,m)}}function US(s,a,d){var m=En(s),y={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null};if(Am(s))Tm(a,y);else{var E=s.alternate;if(s.lanes===0&&(E===null||E.lanes===0)&&(E=a.lastRenderedReducer,E!==null))try{var T=a.lastRenderedState,D=E(T,d);if(y.hasEagerState=!0,y.eagerState=D,pr(D,T)){var O=a.interleaved;O===null?(y.next=y,Zc(a)):(y.next=O.next,O.next=y),a.interleaved=y;return}}catch{}d=rm(s,a,y,m),d!==null&&(y=kt(),xr(d,s,m,y),Lm(d,a,m))}}function Am(s){var a=s.alternate;return s===et||a!==null&&a===et}function Tm(s,a){Us=fa=!0;var d=s.pending;d===null?a.next=a:(a.next=d.next,d.next=a),s.pending=a}function Lm(s,a,d){if((d&4194240)!==0){var m=a.lanes;m&=s.pendingLanes,d|=m,a.lanes=d,fc(s,d)}}var ma={readContext:rr,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useInsertionEffect:Tt,useLayoutEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useMutableSource:Tt,useSyncExternalStore:Tt,useId:Tt,unstable_isNewReconciler:!1},HS={readContext:rr,useCallback:function(s,a){return Cr().memoizedState=[s,a===void 0?null:a],s},useContext:rr,useEffect:gm,useImperativeHandle:function(s,a,d){return d=d!=null?d.concat([s]):null,ha(4194308,4,xm.bind(null,a,s),d)},useLayoutEffect:function(s,a){return ha(4194308,4,s,a)},useInsertionEffect:function(s,a){return ha(4,2,s,a)},useMemo:function(s,a){var d=Cr();return a=a===void 0?null:a,s=s(),d.memoizedState=[s,a],s},useReducer:function(s,a,d){var m=Cr();return a=d!==void 0?d(a):a,m.memoizedState=m.baseState=a,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:a},m.queue=s,s=s.dispatch=jS.bind(null,et,s),[m.memoizedState,s]},useRef:function(s){var a=Cr();return s={current:s},a.memoizedState=s},useState:pm,useDebugValue:uu,useDeferredValue:function(s){return Cr().memoizedState=s},useTransition:function(){var s=pm(!1),a=s[0];return s=BS.bind(null,s[1]),Cr().memoizedState=s,[a,s]},useMutableSource:function(){},useSyncExternalStore:function(s,a,d){var m=et,y=Cr();if(Xe){if(d===void 0)throw Error(t(407));d=d()}else{if(d=a(),pt===null)throw Error(t(349));(zn&30)!==0||cm(m,a,d)}y.memoizedState=d;var E={value:d,getSnapshot:a};return y.queue=E,gm(dm.bind(null,m,E,s),[s]),m.flags|=2048,Gs(9,um.bind(null,m,E,d,a),void 0,null),d},useId:function(){var s=Cr(),a=pt.identifierPrefix;if(Xe){var d=Vr,m=Wr;d=(m&~(1<<32-hr(m)-1)).toString(32)+d,a=":"+a+"R"+d,d=Hs++,0<d&&(a+="H"+d.toString(32)),a+=":"}else d=FS++,a=":"+a+"r"+d.toString(32)+":";return s.memoizedState=a},unstable_isNewReconciler:!1},$S={readContext:rr,useCallback:Em,useContext:rr,useEffect:cu,useImperativeHandle:bm,useInsertionEffect:ym,useLayoutEffect:vm,useMemo:Sm,useReducer:au,useRef:mm,useState:function(){return au($s)},useDebugValue:uu,useDeferredValue:function(s){var a=nr();return wm(a,ut.memoizedState,s)},useTransition:function(){var s=au($s)[0],a=nr().memoizedState;return[s,a]},useMutableSource:am,useSyncExternalStore:lm,useId:Im,unstable_isNewReconciler:!1},GS={readContext:rr,useCallback:Em,useContext:rr,useEffect:cu,useImperativeHandle:bm,useInsertionEffect:ym,useLayoutEffect:vm,useMemo:Sm,useReducer:lu,useRef:mm,useState:function(){return lu($s)},useDebugValue:uu,useDeferredValue:function(s){var a=nr();return ut===null?a.memoizedState=s:wm(a,ut.memoizedState,s)},useTransition:function(){var s=lu($s)[0],a=nr().memoizedState;return[s,a]},useMutableSource:am,useSyncExternalStore:lm,useId:Im,unstable_isNewReconciler:!1};function gr(s,a){if(s&&s.defaultProps){a=V({},a),s=s.defaultProps;for(var d in s)a[d]===void 0&&(a[d]=s[d]);return a}return a}function du(s,a,d,m){a=s.memoizedState,d=d(m,a),d=d==null?a:V({},a,d),s.memoizedState=d,s.lanes===0&&(s.updateQueue.baseState=d)}var ga={isMounted:function(s){return(s=s._reactInternals)?Un(s)===s:!1},enqueueSetState:function(s,a,d){s=s._reactInternals;var m=kt(),y=En(s),E=zr(m,y);E.payload=a,d!=null&&(E.callback=d),a=yn(s,E,y),a!==null&&(xr(a,s,y,m),la(a,s,y))},enqueueReplaceState:function(s,a,d){s=s._reactInternals;var m=kt(),y=En(s),E=zr(m,y);E.tag=1,E.payload=a,d!=null&&(E.callback=d),a=yn(s,E,y),a!==null&&(xr(a,s,y,m),la(a,s,y))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var d=kt(),m=En(s),y=zr(d,m);y.tag=2,a!=null&&(y.callback=a),a=yn(s,y,m),a!==null&&(xr(a,s,m,d),la(a,s,m))}};function Rm(s,a,d,m,y,E,T){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(m,E,T):a.prototype&&a.prototype.isPureReactComponent?!Cs(d,m)||!Cs(y,E):!0}function Cm(s,a,d){var m=!1,y=pn,E=a.contextType;return typeof E=="object"&&E!==null?E=rr(E):(y=Ft(a)?$n:At.current,m=a.contextTypes,E=(m=m!=null)?Ti(s,y):pn),a=new a(d,E),s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=ga,s.stateNode=a,a._reactInternals=s,m&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=y,s.__reactInternalMemoizedMaskedChildContext=E),a}function Dm(s,a,d,m){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(d,m),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(d,m),a.state!==s&&ga.enqueueReplaceState(a,a.state,null)}function fu(s,a,d,m){var y=s.stateNode;y.props=d,y.state=s.memoizedState,y.refs={},Jc(s);var E=a.contextType;typeof E=="object"&&E!==null?y.context=rr(E):(E=Ft(a)?$n:At.current,y.context=Ti(s,E)),y.state=s.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&(du(s,a,E,d),y.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(a=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),a!==y.state&&ga.enqueueReplaceState(y,y.state,null),ca(s,d,y,m),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308)}function Ni(s,a){try{var d="",m=a;do d+=we(m),m=m.return;while(m);var y=d}catch(E){y=`
Error generating stack: `+E.message+`
`+E.stack}return{value:s,source:a,stack:y,digest:null}}function hu(s,a,d){return{value:s,source:null,stack:d??null,digest:a??null}}function pu(s,a){try{console.error(a.value)}catch(d){setTimeout(function(){throw d})}}var WS=typeof WeakMap=="function"?WeakMap:Map;function km(s,a,d){d=zr(-1,d),d.tag=3,d.payload={element:null};var m=a.value;return d.callback=function(){wa||(wa=!0,Cu=m),pu(s,a)},d}function Om(s,a,d){d=zr(-1,d),d.tag=3;var m=s.type.getDerivedStateFromError;if(typeof m=="function"){var y=a.value;d.payload=function(){return m(y)},d.callback=function(){pu(s,a)}}var E=s.stateNode;return E!==null&&typeof E.componentDidCatch=="function"&&(d.callback=function(){pu(s,a),typeof m!="function"&&(xn===null?xn=new Set([this]):xn.add(this));var T=a.stack;this.componentDidCatch(a.value,{componentStack:T!==null?T:""})}),d}function Pm(s,a,d){var m=s.pingCache;if(m===null){m=s.pingCache=new WS;var y=new Set;m.set(a,y)}else y=m.get(a),y===void 0&&(y=new Set,m.set(a,y));y.has(d)||(y.add(d),s=i1.bind(null,s,a,d),a.then(s,s))}function Nm(s){do{var a;if((a=s.tag===13)&&(a=s.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return s;s=s.return}while(s!==null);return null}function Mm(s,a,d,m,y){return(s.mode&1)===0?(s===a?s.flags|=65536:(s.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(a=zr(-1,1),a.tag=2,yn(d,a,1))),d.lanes|=1),s):(s.flags|=65536,s.lanes=y,s)}var VS=k.ReactCurrentOwner,Bt=!1;function Dt(s,a,d,m){a.child=s===null?tm(a,null,d,m):Di(a,s.child,d,m)}function _m(s,a,d,m,y){d=d.render;var E=a.ref;return Oi(a,y),m=su(s,a,d,m,E,y),d=ou(),s!==null&&!Bt?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~y,Yr(s,a,y)):(Xe&&d&&$c(a),a.flags|=1,Dt(s,a,m,y),a.child)}function Fm(s,a,d,m,y){if(s===null){var E=d.type;return typeof E=="function"&&!_u(E)&&E.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(a.tag=15,a.type=E,Bm(s,a,E,m,y)):(s=Ca(d.type,null,m,a,a.mode,y),s.ref=a.ref,s.return=a,a.child=s)}if(E=s.child,(s.lanes&y)===0){var T=E.memoizedProps;if(d=d.compare,d=d!==null?d:Cs,d(T,m)&&s.ref===a.ref)return Yr(s,a,y)}return a.flags|=1,s=wn(E,m),s.ref=a.ref,s.return=a,a.child=s}function Bm(s,a,d,m,y){if(s!==null){var E=s.memoizedProps;if(Cs(E,m)&&s.ref===a.ref)if(Bt=!1,a.pendingProps=m=E,(s.lanes&y)!==0)(s.flags&131072)!==0&&(Bt=!0);else return a.lanes=s.lanes,Yr(s,a,y)}return mu(s,a,d,m,y)}function jm(s,a,d){var m=a.pendingProps,y=m.children,E=s!==null?s.memoizedState:null;if(m.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(_i,zt),zt|=d;else{if((d&1073741824)===0)return s=E!==null?E.baseLanes|d:d,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:s,cachePool:null,transitions:null},a.updateQueue=null,We(_i,zt),zt|=s,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=E!==null?E.baseLanes:d,We(_i,zt),zt|=m}else E!==null?(m=E.baseLanes|d,a.memoizedState=null):m=d,We(_i,zt),zt|=m;return Dt(s,a,y,d),a.child}function Um(s,a){var d=a.ref;(s===null&&d!==null||s!==null&&s.ref!==d)&&(a.flags|=512,a.flags|=2097152)}function mu(s,a,d,m,y){var E=Ft(d)?$n:At.current;return E=Ti(a,E),Oi(a,y),d=su(s,a,d,m,E,y),m=ou(),s!==null&&!Bt?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~y,Yr(s,a,y)):(Xe&&m&&$c(a),a.flags|=1,Dt(s,a,d,y),a.child)}function Hm(s,a,d,m,y){if(Ft(d)){var E=!0;ea(a)}else E=!1;if(Oi(a,y),a.stateNode===null)va(s,a),Cm(a,d,m),fu(a,d,m,y),m=!0;else if(s===null){var T=a.stateNode,D=a.memoizedProps;T.props=D;var O=T.context,W=d.contextType;typeof W=="object"&&W!==null?W=rr(W):(W=Ft(d)?$n:At.current,W=Ti(a,W));var ee=d.getDerivedStateFromProps,ne=typeof ee=="function"||typeof T.getSnapshotBeforeUpdate=="function";ne||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(D!==m||O!==W)&&Dm(a,T,m,W),gn=!1;var Q=a.memoizedState;T.state=Q,ca(a,m,T,y),O=a.memoizedState,D!==m||Q!==O||_t.current||gn?(typeof ee=="function"&&(du(a,d,ee,m),O=a.memoizedState),(D=gn||Rm(a,d,D,m,Q,O,W))?(ne||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(a.flags|=4194308)):(typeof T.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=m,a.memoizedState=O),T.props=m,T.state=O,T.context=W,m=D):(typeof T.componentDidMount=="function"&&(a.flags|=4194308),m=!1)}else{T=a.stateNode,nm(s,a),D=a.memoizedProps,W=a.type===a.elementType?D:gr(a.type,D),T.props=W,ne=a.pendingProps,Q=T.context,O=d.contextType,typeof O=="object"&&O!==null?O=rr(O):(O=Ft(d)?$n:At.current,O=Ti(a,O));var ue=d.getDerivedStateFromProps;(ee=typeof ue=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(D!==ne||Q!==O)&&Dm(a,T,m,O),gn=!1,Q=a.memoizedState,T.state=Q,ca(a,m,T,y);var me=a.memoizedState;D!==ne||Q!==me||_t.current||gn?(typeof ue=="function"&&(du(a,d,ue,m),me=a.memoizedState),(W=gn||Rm(a,d,W,m,Q,me,O)||!1)?(ee||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(m,me,O),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(m,me,O)),typeof T.componentDidUpdate=="function"&&(a.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof T.componentDidUpdate!="function"||D===s.memoizedProps&&Q===s.memoizedState||(a.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||D===s.memoizedProps&&Q===s.memoizedState||(a.flags|=1024),a.memoizedProps=m,a.memoizedState=me),T.props=m,T.state=me,T.context=O,m=W):(typeof T.componentDidUpdate!="function"||D===s.memoizedProps&&Q===s.memoizedState||(a.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||D===s.memoizedProps&&Q===s.memoizedState||(a.flags|=1024),m=!1)}return gu(s,a,d,m,E,y)}function gu(s,a,d,m,y,E){Um(s,a);var T=(a.flags&128)!==0;if(!m&&!T)return y&&Kp(a,d,!1),Yr(s,a,E);m=a.stateNode,VS.current=a;var D=T&&typeof d.getDerivedStateFromError!="function"?null:m.render();return a.flags|=1,s!==null&&T?(a.child=Di(a,s.child,null,E),a.child=Di(a,null,D,E)):Dt(s,a,D,E),a.memoizedState=m.state,y&&Kp(a,d,!0),a.child}function $m(s){var a=s.stateNode;a.pendingContext?Wp(s,a.pendingContext,a.pendingContext!==a.context):a.context&&Wp(s,a.context,!1),Qc(s,a.containerInfo)}function Gm(s,a,d,m,y){return Ci(),Kc(y),a.flags|=256,Dt(s,a,d,m),a.child}var yu={dehydrated:null,treeContext:null,retryLane:0};function vu(s){return{baseLanes:s,cachePool:null,transitions:null}}function Wm(s,a,d){var m=a.pendingProps,y=Qe.current,E=!1,T=(a.flags&128)!==0,D;if((D=T)||(D=s!==null&&s.memoizedState===null?!1:(y&2)!==0),D?(E=!0,a.flags&=-129):(s===null||s.memoizedState!==null)&&(y|=1),We(Qe,y&1),s===null)return Vc(a),s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((a.mode&1)===0?a.lanes=1:s.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(T=m.children,s=m.fallback,E?(m=a.mode,E=a.child,T={mode:"hidden",children:T},(m&1)===0&&E!==null?(E.childLanes=0,E.pendingProps=T):E=Da(T,m,0,null),s=Jn(s,m,d,null),E.return=a,s.return=a,E.sibling=s,a.child=E,a.child.memoizedState=vu(d),a.memoizedState=yu,s):xu(a,T));if(y=s.memoizedState,y!==null&&(D=y.dehydrated,D!==null))return KS(s,a,T,m,D,y,d);if(E){E=m.fallback,T=a.mode,y=s.child,D=y.sibling;var O={mode:"hidden",children:m.children};return(T&1)===0&&a.child!==y?(m=a.child,m.childLanes=0,m.pendingProps=O,a.deletions=null):(m=wn(y,O),m.subtreeFlags=y.subtreeFlags&14680064),D!==null?E=wn(D,E):(E=Jn(E,T,d,null),E.flags|=2),E.return=a,m.return=a,m.sibling=E,a.child=m,m=E,E=a.child,T=s.child.memoizedState,T=T===null?vu(d):{baseLanes:T.baseLanes|d,cachePool:null,transitions:T.transitions},E.memoizedState=T,E.childLanes=s.childLanes&~d,a.memoizedState=yu,m}return E=s.child,s=E.sibling,m=wn(E,{mode:"visible",children:m.children}),(a.mode&1)===0&&(m.lanes=d),m.return=a,m.sibling=null,s!==null&&(d=a.deletions,d===null?(a.deletions=[s],a.flags|=16):d.push(s)),a.child=m,a.memoizedState=null,m}function xu(s,a){return a=Da({mode:"visible",children:a},s.mode,0,null),a.return=s,s.child=a}function ya(s,a,d,m){return m!==null&&Kc(m),Di(a,s.child,null,d),s=xu(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function KS(s,a,d,m,y,E,T){if(d)return a.flags&256?(a.flags&=-257,m=hu(Error(t(422))),ya(s,a,T,m)):a.memoizedState!==null?(a.child=s.child,a.flags|=128,null):(E=m.fallback,y=a.mode,m=Da({mode:"visible",children:m.children},y,0,null),E=Jn(E,y,T,null),E.flags|=2,m.return=a,E.return=a,m.sibling=E,a.child=m,(a.mode&1)!==0&&Di(a,s.child,null,T),a.child.memoizedState=vu(T),a.memoizedState=yu,E);if((a.mode&1)===0)return ya(s,a,T,null);if(y.data==="$!"){if(m=y.nextSibling&&y.nextSibling.dataset,m)var D=m.dgst;return m=D,E=Error(t(419)),m=hu(E,m,void 0),ya(s,a,T,m)}if(D=(T&s.childLanes)!==0,Bt||D){if(m=pt,m!==null){switch(T&-T){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(m.suspendedLanes|T))!==0?0:y,y!==0&&y!==E.retryLane&&(E.retryLane=y,Kr(s,y),xr(m,s,y,-1))}return Mu(),m=hu(Error(t(421))),ya(s,a,T,m)}return y.data==="$?"?(a.flags|=128,a.child=s.child,a=s1.bind(null,s),y._reactRetry=a,null):(s=E.treeContext,Kt=fn(y.nextSibling),Vt=a,Xe=!0,mr=null,s!==null&&(er[tr++]=Wr,er[tr++]=Vr,er[tr++]=Gn,Wr=s.id,Vr=s.overflow,Gn=a),a=xu(a,m.children),a.flags|=4096,a)}function Vm(s,a,d){s.lanes|=a;var m=s.alternate;m!==null&&(m.lanes|=a),Xc(s.return,a,d)}function bu(s,a,d,m,y){var E=s.memoizedState;E===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:y}:(E.isBackwards=a,E.rendering=null,E.renderingStartTime=0,E.last=m,E.tail=d,E.tailMode=y)}function Km(s,a,d){var m=a.pendingProps,y=m.revealOrder,E=m.tail;if(Dt(s,a,m.children,d),m=Qe.current,(m&2)!==0)m=m&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Vm(s,d,a);else if(s.tag===19)Vm(s,d,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}m&=1}if(We(Qe,m),(a.mode&1)===0)a.memoizedState=null;else switch(y){case"forwards":for(d=a.child,y=null;d!==null;)s=d.alternate,s!==null&&ua(s)===null&&(y=d),d=d.sibling;d=y,d===null?(y=a.child,a.child=null):(y=d.sibling,d.sibling=null),bu(a,!1,y,d,E);break;case"backwards":for(d=null,y=a.child,a.child=null;y!==null;){if(s=y.alternate,s!==null&&ua(s)===null){a.child=y;break}s=y.sibling,y.sibling=d,d=y,y=s}bu(a,!0,d,null,E);break;case"together":bu(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function va(s,a){(a.mode&1)===0&&s!==null&&(s.alternate=null,a.alternate=null,a.flags|=2)}function Yr(s,a,d){if(s!==null&&(a.dependencies=s.dependencies),Yn|=a.lanes,(d&a.childLanes)===0)return null;if(s!==null&&a.child!==s.child)throw Error(t(153));if(a.child!==null){for(s=a.child,d=wn(s,s.pendingProps),a.child=d,d.return=a;s.sibling!==null;)s=s.sibling,d=d.sibling=wn(s,s.pendingProps),d.return=a;d.sibling=null}return a.child}function zS(s,a,d){switch(a.tag){case 3:$m(a),Ci();break;case 5:om(a);break;case 1:Ft(a.type)&&ea(a);break;case 4:Qc(a,a.stateNode.containerInfo);break;case 10:var m=a.type._context,y=a.memoizedProps.value;We(oa,m._currentValue),m._currentValue=y;break;case 13:if(m=a.memoizedState,m!==null)return m.dehydrated!==null?(We(Qe,Qe.current&1),a.flags|=128,null):(d&a.child.childLanes)!==0?Wm(s,a,d):(We(Qe,Qe.current&1),s=Yr(s,a,d),s!==null?s.sibling:null);We(Qe,Qe.current&1);break;case 19:if(m=(d&a.childLanes)!==0,(s.flags&128)!==0){if(m)return Km(s,a,d);a.flags|=128}if(y=a.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),We(Qe,Qe.current),m)break;return null;case 22:case 23:return a.lanes=0,jm(s,a,d)}return Yr(s,a,d)}var zm,Eu,Ym,qm;zm=function(s,a){for(var d=a.child;d!==null;){if(d.tag===5||d.tag===6)s.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},Eu=function(){},Ym=function(s,a,d,m){var y=s.memoizedProps;if(y!==m){s=a.stateNode,Kn(Rr.current);var E=null;switch(d){case"input":y=Mt(s,y),m=Mt(s,m),E=[];break;case"select":y=V({},y,{value:void 0}),m=V({},m,{value:void 0}),E=[];break;case"textarea":y=Ql(s,y),m=Ql(s,m),E=[];break;default:typeof y.onClick!="function"&&typeof m.onClick=="function"&&(s.onclick=Zo)}tc(d,m);var T;d=null;for(W in y)if(!m.hasOwnProperty(W)&&y.hasOwnProperty(W)&&y[W]!=null)if(W==="style"){var D=y[W];for(T in D)D.hasOwnProperty(T)&&(d||(d={}),d[T]="")}else W!=="dangerouslySetInnerHTML"&&W!=="children"&&W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&W!=="autoFocus"&&(i.hasOwnProperty(W)?E||(E=[]):(E=E||[]).push(W,null));for(W in m){var O=m[W];if(D=y?.[W],m.hasOwnProperty(W)&&O!==D&&(O!=null||D!=null))if(W==="style")if(D){for(T in D)!D.hasOwnProperty(T)||O&&O.hasOwnProperty(T)||(d||(d={}),d[T]="");for(T in O)O.hasOwnProperty(T)&&D[T]!==O[T]&&(d||(d={}),d[T]=O[T])}else d||(E||(E=[]),E.push(W,d)),d=O;else W==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,D=D?D.__html:void 0,O!=null&&D!==O&&(E=E||[]).push(W,O)):W==="children"?typeof O!="string"&&typeof O!="number"||(E=E||[]).push(W,""+O):W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&(i.hasOwnProperty(W)?(O!=null&&W==="onScroll"&&ze("scroll",s),E||D===O||(E=[])):(E=E||[]).push(W,O))}d&&(E=E||[]).push("style",d);var W=E;(a.updateQueue=W)&&(a.flags|=4)}},qm=function(s,a,d,m){d!==m&&(a.flags|=4)};function Ws(s,a){if(!Xe)switch(s.tailMode){case"hidden":a=s.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?s.tail=null:d.sibling=null;break;case"collapsed":d=s.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:m.sibling=null}}function Lt(s){var a=s.alternate!==null&&s.alternate.child===s.child,d=0,m=0;if(a)for(var y=s.child;y!==null;)d|=y.lanes|y.childLanes,m|=y.subtreeFlags&14680064,m|=y.flags&14680064,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)d|=y.lanes|y.childLanes,m|=y.subtreeFlags,m|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=m,s.childLanes=d,a}function YS(s,a,d){var m=a.pendingProps;switch(Gc(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(a),null;case 1:return Ft(a.type)&&Qo(),Lt(a),null;case 3:return m=a.stateNode,Pi(),Ye(_t),Ye(At),ru(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(s===null||s.child===null)&&(ia(a)?a.flags|=4:s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,mr!==null&&(Ou(mr),mr=null))),Eu(s,a),Lt(a),null;case 5:eu(a);var y=Kn(js.current);if(d=a.type,s!==null&&a.stateNode!=null)Ym(s,a,d,m,y),s.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!m){if(a.stateNode===null)throw Error(t(166));return Lt(a),null}if(s=Kn(Rr.current),ia(a)){m=a.stateNode,d=a.type;var E=a.memoizedProps;switch(m[Lr]=a,m[Ns]=E,s=(a.mode&1)!==0,d){case"dialog":ze("cancel",m),ze("close",m);break;case"iframe":case"object":case"embed":ze("load",m);break;case"video":case"audio":for(y=0;y<ks.length;y++)ze(ks[y],m);break;case"source":ze("error",m);break;case"img":case"image":case"link":ze("error",m),ze("load",m);break;case"details":ze("toggle",m);break;case"input":je(m,E),ze("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!E.multiple},ze("invalid",m);break;case"textarea":Oh(m,E),ze("invalid",m)}tc(d,E),y=null;for(var T in E)if(E.hasOwnProperty(T)){var D=E[T];T==="children"?typeof D=="string"?m.textContent!==D&&(E.suppressHydrationWarning!==!0&&Xo(m.textContent,D,s),y=["children",D]):typeof D=="number"&&m.textContent!==""+D&&(E.suppressHydrationWarning!==!0&&Xo(m.textContent,D,s),y=["children",""+D]):i.hasOwnProperty(T)&&D!=null&&T==="onScroll"&&ze("scroll",m)}switch(d){case"input":it(m),Ro(m,E,!0);break;case"textarea":it(m),Nh(m);break;case"select":case"option":break;default:typeof E.onClick=="function"&&(m.onclick=Zo)}m=y,a.updateQueue=m,m!==null&&(a.flags|=4)}else{T=y.nodeType===9?y:y.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=Mh(d)),s==="http://www.w3.org/1999/xhtml"?d==="script"?(s=T.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof m.is=="string"?s=T.createElement(d,{is:m.is}):(s=T.createElement(d),d==="select"&&(T=s,m.multiple?T.multiple=!0:m.size&&(T.size=m.size))):s=T.createElementNS(s,d),s[Lr]=a,s[Ns]=m,zm(s,a,!1,!1),a.stateNode=s;e:{switch(T=rc(d,m),d){case"dialog":ze("cancel",s),ze("close",s),y=m;break;case"iframe":case"object":case"embed":ze("load",s),y=m;break;case"video":case"audio":for(y=0;y<ks.length;y++)ze(ks[y],s);y=m;break;case"source":ze("error",s),y=m;break;case"img":case"image":case"link":ze("error",s),ze("load",s),y=m;break;case"details":ze("toggle",s),y=m;break;case"input":je(s,m),y=Mt(s,m),ze("invalid",s);break;case"option":y=m;break;case"select":s._wrapperState={wasMultiple:!!m.multiple},y=V({},m,{value:void 0}),ze("invalid",s);break;case"textarea":Oh(s,m),y=Ql(s,m),ze("invalid",s);break;default:y=m}tc(d,y),D=y;for(E in D)if(D.hasOwnProperty(E)){var O=D[E];E==="style"?Bh(s,O):E==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,O!=null&&_h(s,O)):E==="children"?typeof O=="string"?(d!=="textarea"||O!=="")&&fs(s,O):typeof O=="number"&&fs(s,""+O):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(i.hasOwnProperty(E)?O!=null&&E==="onScroll"&&ze("scroll",s):O!=null&&R(s,E,O,T))}switch(d){case"input":it(s),Ro(s,m,!1);break;case"textarea":it(s),Nh(s);break;case"option":m.value!=null&&s.setAttribute("value",""+Y(m.value));break;case"select":s.multiple=!!m.multiple,E=m.value,E!=null?sn(s,!!m.multiple,E,!1):m.defaultValue!=null&&sn(s,!!m.multiple,m.defaultValue,!0);break;default:typeof y.onClick=="function"&&(s.onclick=Zo)}switch(d){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return Lt(a),null;case 6:if(s&&a.stateNode!=null)qm(s,a,s.memoizedProps,m);else{if(typeof m!="string"&&a.stateNode===null)throw Error(t(166));if(d=Kn(js.current),Kn(Rr.current),ia(a)){if(m=a.stateNode,d=a.memoizedProps,m[Lr]=a,(E=m.nodeValue!==d)&&(s=Vt,s!==null))switch(s.tag){case 3:Xo(m.nodeValue,d,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Xo(m.nodeValue,d,(s.mode&1)!==0)}E&&(a.flags|=4)}else m=(d.nodeType===9?d:d.ownerDocument).createTextNode(m),m[Lr]=a,a.stateNode=m}return Lt(a),null;case 13:if(Ye(Qe),m=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(Xe&&Kt!==null&&(a.mode&1)!==0&&(a.flags&128)===0)Jp(),Ci(),a.flags|=98560,E=!1;else if(E=ia(a),m!==null&&m.dehydrated!==null){if(s===null){if(!E)throw Error(t(318));if(E=a.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(t(317));E[Lr]=a}else Ci(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Lt(a),E=!1}else mr!==null&&(Ou(mr),mr=null),E=!0;if(!E)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=d,a):(m=m!==null,m!==(s!==null&&s.memoizedState!==null)&&m&&(a.child.flags|=8192,(a.mode&1)!==0&&(s===null||(Qe.current&1)!==0?dt===0&&(dt=3):Mu())),a.updateQueue!==null&&(a.flags|=4),Lt(a),null);case 4:return Pi(),Eu(s,a),s===null&&Os(a.stateNode.containerInfo),Lt(a),null;case 10:return qc(a.type._context),Lt(a),null;case 17:return Ft(a.type)&&Qo(),Lt(a),null;case 19:if(Ye(Qe),E=a.memoizedState,E===null)return Lt(a),null;if(m=(a.flags&128)!==0,T=E.rendering,T===null)if(m)Ws(E,!1);else{if(dt!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(T=ua(s),T!==null){for(a.flags|=128,Ws(E,!1),m=T.updateQueue,m!==null&&(a.updateQueue=m,a.flags|=4),a.subtreeFlags=0,m=d,d=a.child;d!==null;)E=d,s=m,E.flags&=14680066,T=E.alternate,T===null?(E.childLanes=0,E.lanes=s,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=T.childLanes,E.lanes=T.lanes,E.child=T.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=T.memoizedProps,E.memoizedState=T.memoizedState,E.updateQueue=T.updateQueue,E.type=T.type,s=T.dependencies,E.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),d=d.sibling;return We(Qe,Qe.current&1|2),a.child}s=s.sibling}E.tail!==null&&st()>Fi&&(a.flags|=128,m=!0,Ws(E,!1),a.lanes=4194304)}else{if(!m)if(s=ua(T),s!==null){if(a.flags|=128,m=!0,d=s.updateQueue,d!==null&&(a.updateQueue=d,a.flags|=4),Ws(E,!0),E.tail===null&&E.tailMode==="hidden"&&!T.alternate&&!Xe)return Lt(a),null}else 2*st()-E.renderingStartTime>Fi&&d!==1073741824&&(a.flags|=128,m=!0,Ws(E,!1),a.lanes=4194304);E.isBackwards?(T.sibling=a.child,a.child=T):(d=E.last,d!==null?d.sibling=T:a.child=T,E.last=T)}return E.tail!==null?(a=E.tail,E.rendering=a,E.tail=a.sibling,E.renderingStartTime=st(),a.sibling=null,d=Qe.current,We(Qe,m?d&1|2:d&1),a):(Lt(a),null);case 22:case 23:return Nu(),m=a.memoizedState!==null,s!==null&&s.memoizedState!==null!==m&&(a.flags|=8192),m&&(a.mode&1)!==0?(zt&1073741824)!==0&&(Lt(a),a.subtreeFlags&6&&(a.flags|=8192)):Lt(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function qS(s,a){switch(Gc(a),a.tag){case 1:return Ft(a.type)&&Qo(),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return Pi(),Ye(_t),Ye(At),ru(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 5:return eu(a),null;case 13:if(Ye(Qe),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(t(340));Ci()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return Ye(Qe),null;case 4:return Pi(),null;case 10:return qc(a.type._context),null;case 22:case 23:return Nu(),null;case 24:return null;default:return null}}var xa=!1,Rt=!1,XS=typeof WeakSet=="function"?WeakSet:Set,fe=null;function Mi(s,a){var d=s.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(m){nt(s,a,m)}else d.current=null}function Su(s,a,d){try{d()}catch(m){nt(s,a,m)}}var Xm=!1;function ZS(s,a){if(Nc=jo,s=Rp(),Tc(s)){if("selectionStart"in s)var d={start:s.selectionStart,end:s.selectionEnd};else e:{d=(d=s.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var y=m.anchorOffset,E=m.focusNode;m=m.focusOffset;try{d.nodeType,E.nodeType}catch{d=null;break e}var T=0,D=-1,O=-1,W=0,ee=0,ne=s,Q=null;t:for(;;){for(var ue;ne!==d||y!==0&&ne.nodeType!==3||(D=T+y),ne!==E||m!==0&&ne.nodeType!==3||(O=T+m),ne.nodeType===3&&(T+=ne.nodeValue.length),(ue=ne.firstChild)!==null;)Q=ne,ne=ue;for(;;){if(ne===s)break t;if(Q===d&&++W===y&&(D=T),Q===E&&++ee===m&&(O=T),(ue=ne.nextSibling)!==null)break;ne=Q,Q=ne.parentNode}ne=ue}d=D===-1||O===-1?null:{start:D,end:O}}else d=null}d=d||{start:0,end:0}}else d=null;for(Mc={focusedElem:s,selectionRange:d},jo=!1,fe=a;fe!==null;)if(a=fe,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,fe=s;else for(;fe!==null;){a=fe;try{var me=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(me!==null){var ye=me.memoizedProps,ot=me.memoizedState,j=a.stateNode,N=j.getSnapshotBeforeUpdate(a.elementType===a.type?ye:gr(a.type,ye),ot);j.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var $=a.stateNode.containerInfo;$.nodeType===1?$.textContent="":$.nodeType===9&&$.documentElement&&$.removeChild($.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ie){nt(a,a.return,ie)}if(s=a.sibling,s!==null){s.return=a.return,fe=s;break}fe=a.return}return me=Xm,Xm=!1,me}function Vs(s,a,d){var m=a.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var y=m=m.next;do{if((y.tag&s)===s){var E=y.destroy;y.destroy=void 0,E!==void 0&&Su(a,d,E)}y=y.next}while(y!==m)}}function ba(s,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var d=a=a.next;do{if((d.tag&s)===s){var m=d.create;d.destroy=m()}d=d.next}while(d!==a)}}function wu(s){var a=s.ref;if(a!==null){var d=s.stateNode;s.tag,s=d,typeof a=="function"?a(s):a.current=s}}function Zm(s){var a=s.alternate;a!==null&&(s.alternate=null,Zm(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&(delete a[Lr],delete a[Ns],delete a[jc],delete a[PS],delete a[NS])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function Jm(s){return s.tag===5||s.tag===3||s.tag===4}function Qm(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Jm(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Iu(s,a,d){var m=s.tag;if(m===5||m===6)s=s.stateNode,a?d.nodeType===8?d.parentNode.insertBefore(s,a):d.insertBefore(s,a):(d.nodeType===8?(a=d.parentNode,a.insertBefore(s,d)):(a=d,a.appendChild(s)),d=d._reactRootContainer,d!=null||a.onclick!==null||(a.onclick=Zo));else if(m!==4&&(s=s.child,s!==null))for(Iu(s,a,d),s=s.sibling;s!==null;)Iu(s,a,d),s=s.sibling}function Au(s,a,d){var m=s.tag;if(m===5||m===6)s=s.stateNode,a?d.insertBefore(s,a):d.appendChild(s);else if(m!==4&&(s=s.child,s!==null))for(Au(s,a,d),s=s.sibling;s!==null;)Au(s,a,d),s=s.sibling}var Et=null,yr=!1;function vn(s,a,d){for(d=d.child;d!==null;)eg(s,a,d),d=d.sibling}function eg(s,a,d){if(Tr&&typeof Tr.onCommitFiberUnmount=="function")try{Tr.onCommitFiberUnmount(Po,d)}catch{}switch(d.tag){case 5:Rt||Mi(d,a);case 6:var m=Et,y=yr;Et=null,vn(s,a,d),Et=m,yr=y,Et!==null&&(yr?(s=Et,d=d.stateNode,s.nodeType===8?s.parentNode.removeChild(d):s.removeChild(d)):Et.removeChild(d.stateNode));break;case 18:Et!==null&&(yr?(s=Et,d=d.stateNode,s.nodeType===8?Bc(s.parentNode,d):s.nodeType===1&&Bc(s,d),ws(s)):Bc(Et,d.stateNode));break;case 4:m=Et,y=yr,Et=d.stateNode.containerInfo,yr=!0,vn(s,a,d),Et=m,yr=y;break;case 0:case 11:case 14:case 15:if(!Rt&&(m=d.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){y=m=m.next;do{var E=y,T=E.destroy;E=E.tag,T!==void 0&&((E&2)!==0||(E&4)!==0)&&Su(d,a,T),y=y.next}while(y!==m)}vn(s,a,d);break;case 1:if(!Rt&&(Mi(d,a),m=d.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=d.memoizedProps,m.state=d.memoizedState,m.componentWillUnmount()}catch(D){nt(d,a,D)}vn(s,a,d);break;case 21:vn(s,a,d);break;case 22:d.mode&1?(Rt=(m=Rt)||d.memoizedState!==null,vn(s,a,d),Rt=m):vn(s,a,d);break;default:vn(s,a,d)}}function tg(s){var a=s.updateQueue;if(a!==null){s.updateQueue=null;var d=s.stateNode;d===null&&(d=s.stateNode=new XS),a.forEach(function(m){var y=o1.bind(null,s,m);d.has(m)||(d.add(m),m.then(y,y))})}}function vr(s,a){var d=a.deletions;if(d!==null)for(var m=0;m<d.length;m++){var y=d[m];try{var E=s,T=a,D=T;e:for(;D!==null;){switch(D.tag){case 5:Et=D.stateNode,yr=!1;break e;case 3:Et=D.stateNode.containerInfo,yr=!0;break e;case 4:Et=D.stateNode.containerInfo,yr=!0;break e}D=D.return}if(Et===null)throw Error(t(160));eg(E,T,y),Et=null,yr=!1;var O=y.alternate;O!==null&&(O.return=null),y.return=null}catch(W){nt(y,a,W)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)rg(a,s),a=a.sibling}function rg(s,a){var d=s.alternate,m=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(vr(a,s),Dr(s),m&4){try{Vs(3,s,s.return),ba(3,s)}catch(ye){nt(s,s.return,ye)}try{Vs(5,s,s.return)}catch(ye){nt(s,s.return,ye)}}break;case 1:vr(a,s),Dr(s),m&512&&d!==null&&Mi(d,d.return);break;case 5:if(vr(a,s),Dr(s),m&512&&d!==null&&Mi(d,d.return),s.flags&32){var y=s.stateNode;try{fs(y,"")}catch(ye){nt(s,s.return,ye)}}if(m&4&&(y=s.stateNode,y!=null)){var E=s.memoizedProps,T=d!==null?d.memoizedProps:E,D=s.type,O=s.updateQueue;if(s.updateQueue=null,O!==null)try{D==="input"&&E.type==="radio"&&E.name!=null&&fr(y,E),rc(D,T);var W=rc(D,E);for(T=0;T<O.length;T+=2){var ee=O[T],ne=O[T+1];ee==="style"?Bh(y,ne):ee==="dangerouslySetInnerHTML"?_h(y,ne):ee==="children"?fs(y,ne):R(y,ee,ne,W)}switch(D){case"input":pi(y,E);break;case"textarea":Ph(y,E);break;case"select":var Q=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!E.multiple;var ue=E.value;ue!=null?sn(y,!!E.multiple,ue,!1):Q!==!!E.multiple&&(E.defaultValue!=null?sn(y,!!E.multiple,E.defaultValue,!0):sn(y,!!E.multiple,E.multiple?[]:"",!1))}y[Ns]=E}catch(ye){nt(s,s.return,ye)}}break;case 6:if(vr(a,s),Dr(s),m&4){if(s.stateNode===null)throw Error(t(162));y=s.stateNode,E=s.memoizedProps;try{y.nodeValue=E}catch(ye){nt(s,s.return,ye)}}break;case 3:if(vr(a,s),Dr(s),m&4&&d!==null&&d.memoizedState.isDehydrated)try{ws(a.containerInfo)}catch(ye){nt(s,s.return,ye)}break;case 4:vr(a,s),Dr(s);break;case 13:vr(a,s),Dr(s),y=s.child,y.flags&8192&&(E=y.memoizedState!==null,y.stateNode.isHidden=E,!E||y.alternate!==null&&y.alternate.memoizedState!==null||(Ru=st())),m&4&&tg(s);break;case 22:if(ee=d!==null&&d.memoizedState!==null,s.mode&1?(Rt=(W=Rt)||ee,vr(a,s),Rt=W):vr(a,s),Dr(s),m&8192){if(W=s.memoizedState!==null,(s.stateNode.isHidden=W)&&!ee&&(s.mode&1)!==0)for(fe=s,ee=s.child;ee!==null;){for(ne=fe=ee;fe!==null;){switch(Q=fe,ue=Q.child,Q.tag){case 0:case 11:case 14:case 15:Vs(4,Q,Q.return);break;case 1:Mi(Q,Q.return);var me=Q.stateNode;if(typeof me.componentWillUnmount=="function"){m=Q,d=Q.return;try{a=m,me.props=a.memoizedProps,me.state=a.memoizedState,me.componentWillUnmount()}catch(ye){nt(m,d,ye)}}break;case 5:Mi(Q,Q.return);break;case 22:if(Q.memoizedState!==null){sg(ne);continue}}ue!==null?(ue.return=Q,fe=ue):sg(ne)}ee=ee.sibling}e:for(ee=null,ne=s;;){if(ne.tag===5){if(ee===null){ee=ne;try{y=ne.stateNode,W?(E=y.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none"):(D=ne.stateNode,O=ne.memoizedProps.style,T=O!=null&&O.hasOwnProperty("display")?O.display:null,D.style.display=Fh("display",T))}catch(ye){nt(s,s.return,ye)}}}else if(ne.tag===6){if(ee===null)try{ne.stateNode.nodeValue=W?"":ne.memoizedProps}catch(ye){nt(s,s.return,ye)}}else if((ne.tag!==22&&ne.tag!==23||ne.memoizedState===null||ne===s)&&ne.child!==null){ne.child.return=ne,ne=ne.child;continue}if(ne===s)break e;for(;ne.sibling===null;){if(ne.return===null||ne.return===s)break e;ee===ne&&(ee=null),ne=ne.return}ee===ne&&(ee=null),ne.sibling.return=ne.return,ne=ne.sibling}}break;case 19:vr(a,s),Dr(s),m&4&&tg(s);break;case 21:break;default:vr(a,s),Dr(s)}}function Dr(s){var a=s.flags;if(a&2){try{e:{for(var d=s.return;d!==null;){if(Jm(d)){var m=d;break e}d=d.return}throw Error(t(160))}switch(m.tag){case 5:var y=m.stateNode;m.flags&32&&(fs(y,""),m.flags&=-33);var E=Qm(s);Au(s,E,y);break;case 3:case 4:var T=m.stateNode.containerInfo,D=Qm(s);Iu(s,D,T);break;default:throw Error(t(161))}}catch(O){nt(s,s.return,O)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function JS(s,a,d){fe=s,ng(s)}function ng(s,a,d){for(var m=(s.mode&1)!==0;fe!==null;){var y=fe,E=y.child;if(y.tag===22&&m){var T=y.memoizedState!==null||xa;if(!T){var D=y.alternate,O=D!==null&&D.memoizedState!==null||Rt;D=xa;var W=Rt;if(xa=T,(Rt=O)&&!W)for(fe=y;fe!==null;)T=fe,O=T.child,T.tag===22&&T.memoizedState!==null?og(y):O!==null?(O.return=T,fe=O):og(y);for(;E!==null;)fe=E,ng(E),E=E.sibling;fe=y,xa=D,Rt=W}ig(s)}else(y.subtreeFlags&8772)!==0&&E!==null?(E.return=y,fe=E):ig(s)}}function ig(s){for(;fe!==null;){var a=fe;if((a.flags&8772)!==0){var d=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:Rt||ba(5,a);break;case 1:var m=a.stateNode;if(a.flags&4&&!Rt)if(d===null)m.componentDidMount();else{var y=a.elementType===a.type?d.memoizedProps:gr(a.type,d.memoizedProps);m.componentDidUpdate(y,d.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var E=a.updateQueue;E!==null&&sm(a,E,m);break;case 3:var T=a.updateQueue;if(T!==null){if(d=null,a.child!==null)switch(a.child.tag){case 5:d=a.child.stateNode;break;case 1:d=a.child.stateNode}sm(a,T,d)}break;case 5:var D=a.stateNode;if(d===null&&a.flags&4){d=D;var O=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":O.autoFocus&&d.focus();break;case"img":O.src&&(d.src=O.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var W=a.alternate;if(W!==null){var ee=W.memoizedState;if(ee!==null){var ne=ee.dehydrated;ne!==null&&ws(ne)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Rt||a.flags&512&&wu(a)}catch(Q){nt(a,a.return,Q)}}if(a===s){fe=null;break}if(d=a.sibling,d!==null){d.return=a.return,fe=d;break}fe=a.return}}function sg(s){for(;fe!==null;){var a=fe;if(a===s){fe=null;break}var d=a.sibling;if(d!==null){d.return=a.return,fe=d;break}fe=a.return}}function og(s){for(;fe!==null;){var a=fe;try{switch(a.tag){case 0:case 11:case 15:var d=a.return;try{ba(4,a)}catch(O){nt(a,d,O)}break;case 1:var m=a.stateNode;if(typeof m.componentDidMount=="function"){var y=a.return;try{m.componentDidMount()}catch(O){nt(a,y,O)}}var E=a.return;try{wu(a)}catch(O){nt(a,E,O)}break;case 5:var T=a.return;try{wu(a)}catch(O){nt(a,T,O)}}}catch(O){nt(a,a.return,O)}if(a===s){fe=null;break}var D=a.sibling;if(D!==null){D.return=a.return,fe=D;break}fe=a.return}}var QS=Math.ceil,Ea=k.ReactCurrentDispatcher,Tu=k.ReactCurrentOwner,ir=k.ReactCurrentBatchConfig,Fe=0,pt=null,at=null,St=0,zt=0,_i=hn(0),dt=0,Ks=null,Yn=0,Sa=0,Lu=0,zs=null,jt=null,Ru=0,Fi=1/0,qr=null,wa=!1,Cu=null,xn=null,Ia=!1,bn=null,Aa=0,Ys=0,Du=null,Ta=-1,La=0;function kt(){return(Fe&6)!==0?st():Ta!==-1?Ta:Ta=st()}function En(s){return(s.mode&1)===0?1:(Fe&2)!==0&&St!==0?St&-St:_S.transition!==null?(La===0&&(La=Qh()),La):(s=$e,s!==0||(s=window.event,s=s===void 0?16:lp(s.type)),s)}function xr(s,a,d,m){if(50<Ys)throw Ys=0,Du=null,Error(t(185));vs(s,d,m),((Fe&2)===0||s!==pt)&&(s===pt&&((Fe&2)===0&&(Sa|=d),dt===4&&Sn(s,St)),Ut(s,m),d===1&&Fe===0&&(a.mode&1)===0&&(Fi=st()+500,ta&&mn()))}function Ut(s,a){var d=s.callbackNode;_E(s,a);var m=_o(s,s===pt?St:0);if(m===0)d!==null&&Xh(d),s.callbackNode=null,s.callbackPriority=0;else if(a=m&-m,s.callbackPriority!==a){if(d!=null&&Xh(d),a===1)s.tag===0?MS(lg.bind(null,s)):zp(lg.bind(null,s)),kS(function(){(Fe&6)===0&&mn()}),d=null;else{switch(ep(m)){case 1:d=cc;break;case 4:d=Zh;break;case 16:d=Oo;break;case 536870912:d=Jh;break;default:d=Oo}d=gg(d,ag.bind(null,s))}s.callbackPriority=a,s.callbackNode=d}}function ag(s,a){if(Ta=-1,La=0,(Fe&6)!==0)throw Error(t(327));var d=s.callbackNode;if(Bi()&&s.callbackNode!==d)return null;var m=_o(s,s===pt?St:0);if(m===0)return null;if((m&30)!==0||(m&s.expiredLanes)!==0||a)a=Ra(s,m);else{a=m;var y=Fe;Fe|=2;var E=ug();(pt!==s||St!==a)&&(qr=null,Fi=st()+500,Xn(s,a));do try{r1();break}catch(D){cg(s,D)}while(!0);Yc(),Ea.current=E,Fe=y,at!==null?a=0:(pt=null,St=0,a=dt)}if(a!==0){if(a===2&&(y=uc(s),y!==0&&(m=y,a=ku(s,y))),a===1)throw d=Ks,Xn(s,0),Sn(s,m),Ut(s,st()),d;if(a===6)Sn(s,m);else{if(y=s.current.alternate,(m&30)===0&&!e1(y)&&(a=Ra(s,m),a===2&&(E=uc(s),E!==0&&(m=E,a=ku(s,E))),a===1))throw d=Ks,Xn(s,0),Sn(s,m),Ut(s,st()),d;switch(s.finishedWork=y,s.finishedLanes=m,a){case 0:case 1:throw Error(t(345));case 2:Zn(s,jt,qr);break;case 3:if(Sn(s,m),(m&130023424)===m&&(a=Ru+500-st(),10<a)){if(_o(s,0)!==0)break;if(y=s.suspendedLanes,(y&m)!==m){kt(),s.pingedLanes|=s.suspendedLanes&y;break}s.timeoutHandle=Fc(Zn.bind(null,s,jt,qr),a);break}Zn(s,jt,qr);break;case 4:if(Sn(s,m),(m&4194240)===m)break;for(a=s.eventTimes,y=-1;0<m;){var T=31-hr(m);E=1<<T,T=a[T],T>y&&(y=T),m&=~E}if(m=y,m=st()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*QS(m/1960))-m,10<m){s.timeoutHandle=Fc(Zn.bind(null,s,jt,qr),m);break}Zn(s,jt,qr);break;case 5:Zn(s,jt,qr);break;default:throw Error(t(329))}}}return Ut(s,st()),s.callbackNode===d?ag.bind(null,s):null}function ku(s,a){var d=zs;return s.current.memoizedState.isDehydrated&&(Xn(s,a).flags|=256),s=Ra(s,a),s!==2&&(a=jt,jt=d,a!==null&&Ou(a)),s}function Ou(s){jt===null?jt=s:jt.push.apply(jt,s)}function e1(s){for(var a=s;;){if(a.flags&16384){var d=a.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var m=0;m<d.length;m++){var y=d[m],E=y.getSnapshot;y=y.value;try{if(!pr(E(),y))return!1}catch{return!1}}}if(d=a.child,a.subtreeFlags&16384&&d!==null)d.return=a,a=d;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Sn(s,a){for(a&=~Lu,a&=~Sa,s.suspendedLanes|=a,s.pingedLanes&=~a,s=s.expirationTimes;0<a;){var d=31-hr(a),m=1<<d;s[d]=-1,a&=~m}}function lg(s){if((Fe&6)!==0)throw Error(t(327));Bi();var a=_o(s,0);if((a&1)===0)return Ut(s,st()),null;var d=Ra(s,a);if(s.tag!==0&&d===2){var m=uc(s);m!==0&&(a=m,d=ku(s,m))}if(d===1)throw d=Ks,Xn(s,0),Sn(s,a),Ut(s,st()),d;if(d===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=a,Zn(s,jt,qr),Ut(s,st()),null}function Pu(s,a){var d=Fe;Fe|=1;try{return s(a)}finally{Fe=d,Fe===0&&(Fi=st()+500,ta&&mn())}}function qn(s){bn!==null&&bn.tag===0&&(Fe&6)===0&&Bi();var a=Fe;Fe|=1;var d=ir.transition,m=$e;try{if(ir.transition=null,$e=1,s)return s()}finally{$e=m,ir.transition=d,Fe=a,(Fe&6)===0&&mn()}}function Nu(){zt=_i.current,Ye(_i)}function Xn(s,a){s.finishedWork=null,s.finishedLanes=0;var d=s.timeoutHandle;if(d!==-1&&(s.timeoutHandle=-1,DS(d)),at!==null)for(d=at.return;d!==null;){var m=d;switch(Gc(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&Qo();break;case 3:Pi(),Ye(_t),Ye(At),ru();break;case 5:eu(m);break;case 4:Pi();break;case 13:Ye(Qe);break;case 19:Ye(Qe);break;case 10:qc(m.type._context);break;case 22:case 23:Nu()}d=d.return}if(pt=s,at=s=wn(s.current,null),St=zt=a,dt=0,Ks=null,Lu=Sa=Yn=0,jt=zs=null,Vn!==null){for(a=0;a<Vn.length;a++)if(d=Vn[a],m=d.interleaved,m!==null){d.interleaved=null;var y=m.next,E=d.pending;if(E!==null){var T=E.next;E.next=y,m.next=T}d.pending=m}Vn=null}return s}function cg(s,a){do{var d=at;try{if(Yc(),da.current=ma,fa){for(var m=et.memoizedState;m!==null;){var y=m.queue;y!==null&&(y.pending=null),m=m.next}fa=!1}if(zn=0,ht=ut=et=null,Us=!1,Hs=0,Tu.current=null,d===null||d.return===null){dt=1,Ks=a,at=null;break}e:{var E=s,T=d.return,D=d,O=a;if(a=St,D.flags|=32768,O!==null&&typeof O=="object"&&typeof O.then=="function"){var W=O,ee=D,ne=ee.tag;if((ee.mode&1)===0&&(ne===0||ne===11||ne===15)){var Q=ee.alternate;Q?(ee.updateQueue=Q.updateQueue,ee.memoizedState=Q.memoizedState,ee.lanes=Q.lanes):(ee.updateQueue=null,ee.memoizedState=null)}var ue=Nm(T);if(ue!==null){ue.flags&=-257,Mm(ue,T,D,E,a),ue.mode&1&&Pm(E,W,a),a=ue,O=W;var me=a.updateQueue;if(me===null){var ye=new Set;ye.add(O),a.updateQueue=ye}else me.add(O);break e}else{if((a&1)===0){Pm(E,W,a),Mu();break e}O=Error(t(426))}}else if(Xe&&D.mode&1){var ot=Nm(T);if(ot!==null){(ot.flags&65536)===0&&(ot.flags|=256),Mm(ot,T,D,E,a),Kc(Ni(O,D));break e}}E=O=Ni(O,D),dt!==4&&(dt=2),zs===null?zs=[E]:zs.push(E),E=T;do{switch(E.tag){case 3:E.flags|=65536,a&=-a,E.lanes|=a;var j=km(E,O,a);im(E,j);break e;case 1:D=O;var N=E.type,$=E.stateNode;if((E.flags&128)===0&&(typeof N.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(xn===null||!xn.has($)))){E.flags|=65536,a&=-a,E.lanes|=a;var ie=Om(E,D,a);im(E,ie);break e}}E=E.return}while(E!==null)}fg(d)}catch(be){a=be,at===d&&d!==null&&(at=d=d.return);continue}break}while(!0)}function ug(){var s=Ea.current;return Ea.current=ma,s===null?ma:s}function Mu(){(dt===0||dt===3||dt===2)&&(dt=4),pt===null||(Yn&268435455)===0&&(Sa&268435455)===0||Sn(pt,St)}function Ra(s,a){var d=Fe;Fe|=2;var m=ug();(pt!==s||St!==a)&&(qr=null,Xn(s,a));do try{t1();break}catch(y){cg(s,y)}while(!0);if(Yc(),Fe=d,Ea.current=m,at!==null)throw Error(t(261));return pt=null,St=0,dt}function t1(){for(;at!==null;)dg(at)}function r1(){for(;at!==null&&!LE();)dg(at)}function dg(s){var a=mg(s.alternate,s,zt);s.memoizedProps=s.pendingProps,a===null?fg(s):at=a,Tu.current=null}function fg(s){var a=s;do{var d=a.alternate;if(s=a.return,(a.flags&32768)===0){if(d=YS(d,a,zt),d!==null){at=d;return}}else{if(d=qS(d,a),d!==null){d.flags&=32767,at=d;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{dt=6,at=null;return}}if(a=a.sibling,a!==null){at=a;return}at=a=s}while(a!==null);dt===0&&(dt=5)}function Zn(s,a,d){var m=$e,y=ir.transition;try{ir.transition=null,$e=1,n1(s,a,d,m)}finally{ir.transition=y,$e=m}return null}function n1(s,a,d,m){do Bi();while(bn!==null);if((Fe&6)!==0)throw Error(t(327));d=s.finishedWork;var y=s.finishedLanes;if(d===null)return null;if(s.finishedWork=null,s.finishedLanes=0,d===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var E=d.lanes|d.childLanes;if(FE(s,E),s===pt&&(at=pt=null,St=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||Ia||(Ia=!0,gg(Oo,function(){return Bi(),null})),E=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||E){E=ir.transition,ir.transition=null;var T=$e;$e=1;var D=Fe;Fe|=4,Tu.current=null,ZS(s,d),rg(d,s),wS(Mc),jo=!!Nc,Mc=Nc=null,s.current=d,JS(d),RE(),Fe=D,$e=T,ir.transition=E}else s.current=d;if(Ia&&(Ia=!1,bn=s,Aa=y),E=s.pendingLanes,E===0&&(xn=null),kE(d.stateNode),Ut(s,st()),a!==null)for(m=s.onRecoverableError,d=0;d<a.length;d++)y=a[d],m(y.value,{componentStack:y.stack,digest:y.digest});if(wa)throw wa=!1,s=Cu,Cu=null,s;return(Aa&1)!==0&&s.tag!==0&&Bi(),E=s.pendingLanes,(E&1)!==0?s===Du?Ys++:(Ys=0,Du=s):Ys=0,mn(),null}function Bi(){if(bn!==null){var s=ep(Aa),a=ir.transition,d=$e;try{if(ir.transition=null,$e=16>s?16:s,bn===null)var m=!1;else{if(s=bn,bn=null,Aa=0,(Fe&6)!==0)throw Error(t(331));var y=Fe;for(Fe|=4,fe=s.current;fe!==null;){var E=fe,T=E.child;if((fe.flags&16)!==0){var D=E.deletions;if(D!==null){for(var O=0;O<D.length;O++){var W=D[O];for(fe=W;fe!==null;){var ee=fe;switch(ee.tag){case 0:case 11:case 15:Vs(8,ee,E)}var ne=ee.child;if(ne!==null)ne.return=ee,fe=ne;else for(;fe!==null;){ee=fe;var Q=ee.sibling,ue=ee.return;if(Zm(ee),ee===W){fe=null;break}if(Q!==null){Q.return=ue,fe=Q;break}fe=ue}}}var me=E.alternate;if(me!==null){var ye=me.child;if(ye!==null){me.child=null;do{var ot=ye.sibling;ye.sibling=null,ye=ot}while(ye!==null)}}fe=E}}if((E.subtreeFlags&2064)!==0&&T!==null)T.return=E,fe=T;else e:for(;fe!==null;){if(E=fe,(E.flags&2048)!==0)switch(E.tag){case 0:case 11:case 15:Vs(9,E,E.return)}var j=E.sibling;if(j!==null){j.return=E.return,fe=j;break e}fe=E.return}}var N=s.current;for(fe=N;fe!==null;){T=fe;var $=T.child;if((T.subtreeFlags&2064)!==0&&$!==null)$.return=T,fe=$;else e:for(T=N;fe!==null;){if(D=fe,(D.flags&2048)!==0)try{switch(D.tag){case 0:case 11:case 15:ba(9,D)}}catch(be){nt(D,D.return,be)}if(D===T){fe=null;break e}var ie=D.sibling;if(ie!==null){ie.return=D.return,fe=ie;break e}fe=D.return}}if(Fe=y,mn(),Tr&&typeof Tr.onPostCommitFiberRoot=="function")try{Tr.onPostCommitFiberRoot(Po,s)}catch{}m=!0}return m}finally{$e=d,ir.transition=a}}return!1}function hg(s,a,d){a=Ni(d,a),a=km(s,a,1),s=yn(s,a,1),a=kt(),s!==null&&(vs(s,1,a),Ut(s,a))}function nt(s,a,d){if(s.tag===3)hg(s,s,d);else for(;a!==null;){if(a.tag===3){hg(a,s,d);break}else if(a.tag===1){var m=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(xn===null||!xn.has(m))){s=Ni(d,s),s=Om(a,s,1),a=yn(a,s,1),s=kt(),a!==null&&(vs(a,1,s),Ut(a,s));break}}a=a.return}}function i1(s,a,d){var m=s.pingCache;m!==null&&m.delete(a),a=kt(),s.pingedLanes|=s.suspendedLanes&d,pt===s&&(St&d)===d&&(dt===4||dt===3&&(St&130023424)===St&&500>st()-Ru?Xn(s,0):Lu|=d),Ut(s,a)}function pg(s,a){a===0&&((s.mode&1)===0?a=1:(a=Mo,Mo<<=1,(Mo&130023424)===0&&(Mo=4194304)));var d=kt();s=Kr(s,a),s!==null&&(vs(s,a,d),Ut(s,d))}function s1(s){var a=s.memoizedState,d=0;a!==null&&(d=a.retryLane),pg(s,d)}function o1(s,a){var d=0;switch(s.tag){case 13:var m=s.stateNode,y=s.memoizedState;y!==null&&(d=y.retryLane);break;case 19:m=s.stateNode;break;default:throw Error(t(314))}m!==null&&m.delete(a),pg(s,d)}var mg;mg=function(s,a,d){if(s!==null)if(s.memoizedProps!==a.pendingProps||_t.current)Bt=!0;else{if((s.lanes&d)===0&&(a.flags&128)===0)return Bt=!1,zS(s,a,d);Bt=(s.flags&131072)!==0}else Bt=!1,Xe&&(a.flags&1048576)!==0&&Yp(a,na,a.index);switch(a.lanes=0,a.tag){case 2:var m=a.type;va(s,a),s=a.pendingProps;var y=Ti(a,At.current);Oi(a,d),y=su(null,a,m,s,y,d);var E=ou();return a.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Ft(m)?(E=!0,ea(a)):E=!1,a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,Jc(a),y.updater=ga,a.stateNode=y,y._reactInternals=a,fu(a,m,s,d),a=gu(null,a,m,!0,E,d)):(a.tag=0,Xe&&E&&$c(a),Dt(null,a,y,d),a=a.child),a;case 16:m=a.elementType;e:{switch(va(s,a),s=a.pendingProps,y=m._init,m=y(m._payload),a.type=m,y=a.tag=l1(m),s=gr(m,s),y){case 0:a=mu(null,a,m,s,d);break e;case 1:a=Hm(null,a,m,s,d);break e;case 11:a=_m(null,a,m,s,d);break e;case 14:a=Fm(null,a,m,gr(m.type,s),d);break e}throw Error(t(306,m,""))}return a;case 0:return m=a.type,y=a.pendingProps,y=a.elementType===m?y:gr(m,y),mu(s,a,m,y,d);case 1:return m=a.type,y=a.pendingProps,y=a.elementType===m?y:gr(m,y),Hm(s,a,m,y,d);case 3:e:{if($m(a),s===null)throw Error(t(387));m=a.pendingProps,E=a.memoizedState,y=E.element,nm(s,a),ca(a,m,null,d);var T=a.memoizedState;if(m=T.element,E.isDehydrated)if(E={element:m,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},a.updateQueue.baseState=E,a.memoizedState=E,a.flags&256){y=Ni(Error(t(423)),a),a=Gm(s,a,m,d,y);break e}else if(m!==y){y=Ni(Error(t(424)),a),a=Gm(s,a,m,d,y);break e}else for(Kt=fn(a.stateNode.containerInfo.firstChild),Vt=a,Xe=!0,mr=null,d=tm(a,null,m,d),a.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Ci(),m===y){a=Yr(s,a,d);break e}Dt(s,a,m,d)}a=a.child}return a;case 5:return om(a),s===null&&Vc(a),m=a.type,y=a.pendingProps,E=s!==null?s.memoizedProps:null,T=y.children,_c(m,y)?T=null:E!==null&&_c(m,E)&&(a.flags|=32),Um(s,a),Dt(s,a,T,d),a.child;case 6:return s===null&&Vc(a),null;case 13:return Wm(s,a,d);case 4:return Qc(a,a.stateNode.containerInfo),m=a.pendingProps,s===null?a.child=Di(a,null,m,d):Dt(s,a,m,d),a.child;case 11:return m=a.type,y=a.pendingProps,y=a.elementType===m?y:gr(m,y),_m(s,a,m,y,d);case 7:return Dt(s,a,a.pendingProps,d),a.child;case 8:return Dt(s,a,a.pendingProps.children,d),a.child;case 12:return Dt(s,a,a.pendingProps.children,d),a.child;case 10:e:{if(m=a.type._context,y=a.pendingProps,E=a.memoizedProps,T=y.value,We(oa,m._currentValue),m._currentValue=T,E!==null)if(pr(E.value,T)){if(E.children===y.children&&!_t.current){a=Yr(s,a,d);break e}}else for(E=a.child,E!==null&&(E.return=a);E!==null;){var D=E.dependencies;if(D!==null){T=E.child;for(var O=D.firstContext;O!==null;){if(O.context===m){if(E.tag===1){O=zr(-1,d&-d),O.tag=2;var W=E.updateQueue;if(W!==null){W=W.shared;var ee=W.pending;ee===null?O.next=O:(O.next=ee.next,ee.next=O),W.pending=O}}E.lanes|=d,O=E.alternate,O!==null&&(O.lanes|=d),Xc(E.return,d,a),D.lanes|=d;break}O=O.next}}else if(E.tag===10)T=E.type===a.type?null:E.child;else if(E.tag===18){if(T=E.return,T===null)throw Error(t(341));T.lanes|=d,D=T.alternate,D!==null&&(D.lanes|=d),Xc(T,d,a),T=E.sibling}else T=E.child;if(T!==null)T.return=E;else for(T=E;T!==null;){if(T===a){T=null;break}if(E=T.sibling,E!==null){E.return=T.return,T=E;break}T=T.return}E=T}Dt(s,a,y.children,d),a=a.child}return a;case 9:return y=a.type,m=a.pendingProps.children,Oi(a,d),y=rr(y),m=m(y),a.flags|=1,Dt(s,a,m,d),a.child;case 14:return m=a.type,y=gr(m,a.pendingProps),y=gr(m.type,y),Fm(s,a,m,y,d);case 15:return Bm(s,a,a.type,a.pendingProps,d);case 17:return m=a.type,y=a.pendingProps,y=a.elementType===m?y:gr(m,y),va(s,a),a.tag=1,Ft(m)?(s=!0,ea(a)):s=!1,Oi(a,d),Cm(a,m,y),fu(a,m,y,d),gu(null,a,m,!0,s,d);case 19:return Km(s,a,d);case 22:return jm(s,a,d)}throw Error(t(156,a.tag))};function gg(s,a){return qh(s,a)}function a1(s,a,d,m){this.tag=s,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sr(s,a,d,m){return new a1(s,a,d,m)}function _u(s){return s=s.prototype,!(!s||!s.isReactComponent)}function l1(s){if(typeof s=="function")return _u(s)?1:0;if(s!=null){if(s=s.$$typeof,s===le)return 11;if(s===de)return 14}return 2}function wn(s,a){var d=s.alternate;return d===null?(d=sr(s.tag,a,s.key,s.mode),d.elementType=s.elementType,d.type=s.type,d.stateNode=s.stateNode,d.alternate=s,s.alternate=d):(d.pendingProps=a,d.type=s.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=s.flags&14680064,d.childLanes=s.childLanes,d.lanes=s.lanes,d.child=s.child,d.memoizedProps=s.memoizedProps,d.memoizedState=s.memoizedState,d.updateQueue=s.updateQueue,a=s.dependencies,d.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},d.sibling=s.sibling,d.index=s.index,d.ref=s.ref,d}function Ca(s,a,d,m,y,E){var T=2;if(m=s,typeof s=="function")_u(s)&&(T=1);else if(typeof s=="string")T=5;else e:switch(s){case _:return Jn(d.children,y,E,a);case z:T=8,y|=8;break;case te:return s=sr(12,d,a,y|2),s.elementType=te,s.lanes=E,s;case re:return s=sr(13,d,a,y),s.elementType=re,s.lanes=E,s;case pe:return s=sr(19,d,a,y),s.elementType=pe,s.lanes=E,s;case xe:return Da(d,y,E,a);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case U:T=10;break e;case q:T=9;break e;case le:T=11;break e;case de:T=14;break e;case ce:T=16,m=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return a=sr(T,d,a,y),a.elementType=s,a.type=m,a.lanes=E,a}function Jn(s,a,d,m){return s=sr(7,s,m,a),s.lanes=d,s}function Da(s,a,d,m){return s=sr(22,s,m,a),s.elementType=xe,s.lanes=d,s.stateNode={isHidden:!1},s}function Fu(s,a,d){return s=sr(6,s,null,a),s.lanes=d,s}function Bu(s,a,d){return a=sr(4,s.children!==null?s.children:[],s.key,a),a.lanes=d,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}function c1(s,a,d,m,y){this.tag=a,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=dc(0),this.expirationTimes=dc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dc(0),this.identifierPrefix=m,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function ju(s,a,d,m,y,E,T,D,O){return s=new c1(s,a,d,D,O),a===1?(a=1,E===!0&&(a|=8)):a=0,E=sr(3,null,null,a),s.current=E,E.stateNode=s,E.memoizedState={element:m,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jc(E),s}function u1(s,a,d){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F,key:m==null?null:""+m,children:s,containerInfo:a,implementation:d}}function yg(s){if(!s)return pn;s=s._reactInternals;e:{if(Un(s)!==s||s.tag!==1)throw Error(t(170));var a=s;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Ft(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(s.tag===1){var d=s.type;if(Ft(d))return Vp(s,d,a)}return a}function vg(s,a,d,m,y,E,T,D,O){return s=ju(d,m,!0,s,y,E,T,D,O),s.context=yg(null),d=s.current,m=kt(),y=En(d),E=zr(m,y),E.callback=a??null,yn(d,E,y),s.current.lanes=y,vs(s,y,m),Ut(s,m),s}function ka(s,a,d,m){var y=a.current,E=kt(),T=En(y);return d=yg(d),a.context===null?a.context=d:a.pendingContext=d,a=zr(E,T),a.payload={element:s},m=m===void 0?null:m,m!==null&&(a.callback=m),s=yn(y,a,T),s!==null&&(xr(s,y,T,E),la(s,y,T)),T}function Oa(s){return s=s.current,s.child?(s.child.tag===5,s.child.stateNode):null}function xg(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var d=s.retryLane;s.retryLane=d!==0&&d<a?d:a}}function Uu(s,a){xg(s,a),(s=s.alternate)&&xg(s,a)}function d1(){return null}var bg=typeof reportError=="function"?reportError:function(s){console.error(s)};function Hu(s){this._internalRoot=s}Pa.prototype.render=Hu.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(t(409));ka(s,a,null,null)},Pa.prototype.unmount=Hu.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;qn(function(){ka(null,s,null,null)}),a[$r]=null}};function Pa(s){this._internalRoot=s}Pa.prototype.unstable_scheduleHydration=function(s){if(s){var a=np();s={blockedOn:null,target:s,priority:a};for(var d=0;d<cn.length&&a!==0&&a<cn[d].priority;d++);cn.splice(d,0,s),d===0&&op(s)}};function $u(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Na(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function Eg(){}function f1(s,a,d,m,y){if(y){if(typeof m=="function"){var E=m;m=function(){var W=Oa(T);E.call(W)}}var T=vg(a,m,s,0,null,!1,!1,"",Eg);return s._reactRootContainer=T,s[$r]=T.current,Os(s.nodeType===8?s.parentNode:s),qn(),T}for(;y=s.lastChild;)s.removeChild(y);if(typeof m=="function"){var D=m;m=function(){var W=Oa(O);D.call(W)}}var O=ju(s,0,!1,null,null,!1,!1,"",Eg);return s._reactRootContainer=O,s[$r]=O.current,Os(s.nodeType===8?s.parentNode:s),qn(function(){ka(a,O,d,m)}),O}function Ma(s,a,d,m,y){var E=d._reactRootContainer;if(E){var T=E;if(typeof y=="function"){var D=y;y=function(){var O=Oa(T);D.call(O)}}ka(a,T,s,y)}else T=f1(d,a,s,y,m);return Oa(T)}tp=function(s){switch(s.tag){case 3:var a=s.stateNode;if(a.current.memoizedState.isDehydrated){var d=ys(a.pendingLanes);d!==0&&(fc(a,d|1),Ut(a,st()),(Fe&6)===0&&(Fi=st()+500,mn()))}break;case 13:qn(function(){var m=Kr(s,1);if(m!==null){var y=kt();xr(m,s,1,y)}}),Uu(s,1)}},hc=function(s){if(s.tag===13){var a=Kr(s,134217728);if(a!==null){var d=kt();xr(a,s,134217728,d)}Uu(s,134217728)}},rp=function(s){if(s.tag===13){var a=En(s),d=Kr(s,a);if(d!==null){var m=kt();xr(d,s,a,m)}Uu(s,a)}},np=function(){return $e},ip=function(s,a){var d=$e;try{return $e=s,a()}finally{$e=d}},sc=function(s,a,d){switch(a){case"input":if(pi(s,d),a=d.name,d.type==="radio"&&a!=null){for(d=s;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<d.length;a++){var m=d[a];if(m!==s&&m.form===s.form){var y=Jo(m);if(!y)throw Error(t(90));Ke(m),pi(m,y)}}}break;case"textarea":Ph(s,d);break;case"select":a=d.value,a!=null&&sn(s,!!d.multiple,a,!1)}},$h=Pu,Gh=qn;var h1={usingClientEntryPoint:!1,Events:[Ms,Ii,Jo,Uh,Hh,Pu]},qs={findFiberByHostInstance:Hn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},p1={bundleType:qs.bundleType,version:qs.version,rendererPackageName:qs.rendererPackageName,rendererConfig:qs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=zh(s),s===null?null:s.stateNode},findFiberByHostInstance:qs.findFiberByHostInstance||d1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _a=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_a.isDisabled&&_a.supportsFiber)try{Po=_a.inject(p1),Tr=_a}catch{}}return Ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=h1,Ht.createPortal=function(s,a){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$u(a))throw Error(t(200));return u1(s,a,null,d)},Ht.createRoot=function(s,a){if(!$u(s))throw Error(t(299));var d=!1,m="",y=bg;return a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(y=a.onRecoverableError)),a=ju(s,1,!1,null,null,d,!1,m,y),s[$r]=a.current,Os(s.nodeType===8?s.parentNode:s),new Hu(a)},Ht.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=zh(a),s=s===null?null:s.stateNode,s},Ht.flushSync=function(s){return qn(s)},Ht.hydrate=function(s,a,d){if(!Na(a))throw Error(t(200));return Ma(null,s,a,!0,d)},Ht.hydrateRoot=function(s,a,d){if(!$u(s))throw Error(t(405));var m=d!=null&&d.hydratedSources||null,y=!1,E="",T=bg;if(d!=null&&(d.unstable_strictMode===!0&&(y=!0),d.identifierPrefix!==void 0&&(E=d.identifierPrefix),d.onRecoverableError!==void 0&&(T=d.onRecoverableError)),a=vg(a,null,s,1,d??null,y,!1,E,T),s[$r]=a.current,Os(s),m)for(s=0;s<m.length;s++)d=m[s],y=d._getVersion,y=y(d._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[d,y]:a.mutableSourceEagerHydrationData.push(d,y);return new Pa(a)},Ht.render=function(s,a,d){if(!Na(a))throw Error(t(200));return Ma(null,s,a,!1,d)},Ht.unmountComponentAtNode=function(s){if(!Na(s))throw Error(t(40));return s._reactRootContainer?(qn(function(){Ma(null,null,s,!1,function(){s._reactRootContainer=null,s[$r]=null})}),!0):!1},Ht.unstable_batchedUpdates=Pu,Ht.unstable_renderSubtreeIntoContainer=function(s,a,d,m){if(!Na(d))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return Ma(s,a,d,!1,m)},Ht.version="18.3.1-next-f1338f8080-20240426",Ht}var Cg;function rv(){if(Cg)return Vu.exports;Cg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Vu.exports=w1(),Vu.exports}var Dg;function I1(){if(Dg)return Fa;Dg=1;var r=rv();return Fa.createRoot=r.createRoot,Fa.hydrateRoot=r.hydrateRoot,Fa}var A1=I1(),Df=rv();const T1=Cf(Df);function lo(){return lo=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},lo.apply(this,arguments)}var Rn;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(Rn||(Rn={}));const kg="popstate";function L1(r){r===void 0&&(r={});function e(n,i){let{pathname:o,search:l,hash:c}=n.location;return jd("",{pathname:o,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(n,i){return typeof i=="string"?i:fl(i)}return C1(e,t,null,r)}function lt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function nv(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function R1(){return Math.random().toString(36).substr(2,8)}function Og(r,e){return{usr:r.state,key:r.key,idx:e}}function jd(r,e,t,n){return t===void 0&&(t=null),lo({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?os(e):e,{state:t,key:e&&e.key||n||R1()})}function fl(r){let{pathname:e="/",search:t="",hash:n=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function os(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substr(n),r=r.substr(0,n)),r&&(e.pathname=r)}return e}function C1(r,e,t,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:o=!1}=n,l=i.history,c=Rn.Pop,u=null,f=h();f==null&&(f=0,l.replaceState(lo({},l.state,{idx:f}),""));function h(){return(l.state||{idx:null}).idx}function p(){c=Rn.Pop;let S=h(),A=S==null?null:S-f;f=S,u&&u({action:c,location:b.location,delta:A})}function g(S,A){c=Rn.Push;let L=jd(b.location,S,A);f=h()+1;let R=Og(L,f),k=b.createHref(L);try{l.pushState(R,"",k)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;i.location.assign(k)}o&&u&&u({action:c,location:b.location,delta:1})}function v(S,A){c=Rn.Replace;let L=jd(b.location,S,A);f=h();let R=Og(L,f),k=b.createHref(L);l.replaceState(R,"",k),o&&u&&u({action:c,location:b.location,delta:0})}function x(S){let A=i.location.origin!=="null"?i.location.origin:i.location.href,L=typeof S=="string"?S:fl(S);return L=L.replace(/ $/,"%20"),lt(A,"No window.location.(origin|href) available to create URL for href: "+L),new URL(L,A)}let b={get action(){return c},get location(){return r(i,l)},listen(S){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(kg,p),u=S,()=>{i.removeEventListener(kg,p),u=null}},createHref(S){return e(i,S)},createURL:x,encodeLocation(S){let A=x(S);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:g,replace:v,go(S){return l.go(S)}};return b}var Pg;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(Pg||(Pg={}));function D1(r,e,t){return t===void 0&&(t="/"),k1(r,e,t)}function k1(r,e,t,n){let i=typeof e=="string"?os(e):e,o=kf(i.pathname||"/",t);if(o==null)return null;let l=iv(r);O1(l);let c=null;for(let u=0;c==null&&u<l.length;++u){let f=W1(o);c=H1(l[u],f)}return c}function iv(r,e,t,n){e===void 0&&(e=[]),t===void 0&&(t=[]),n===void 0&&(n="");let i=(o,l,c)=>{let u={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};u.relativePath.startsWith("/")&&(lt(u.relativePath.startsWith(n),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(n.length));let f=Dn([n,u.relativePath]),h=t.concat(u);o.children&&o.children.length>0&&(lt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),iv(o.children,e,h,f)),!(o.path==null&&!o.index)&&e.push({path:f,score:j1(f,o.index),routesMeta:h})};return r.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))i(o,l);else for(let u of sv(o.path))i(o,l,u)}),e}function sv(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,i=t.endsWith("?"),o=t.replace(/\?$/,"");if(n.length===0)return i?[o,""]:[o];let l=sv(n.join("/")),c=[];return c.push(...l.map(u=>u===""?o:[o,u].join("/"))),i&&c.push(...l),c.map(u=>r.startsWith("/")&&u===""?"/":u)}function O1(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:U1(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}const P1=/^:[\w-]+$/,N1=3,M1=2,_1=1,F1=10,B1=-2,Ng=r=>r==="*";function j1(r,e){let t=r.split("/"),n=t.length;return t.some(Ng)&&(n+=B1),e&&(n+=M1),t.filter(i=>!Ng(i)).reduce((i,o)=>i+(P1.test(o)?N1:o===""?_1:F1),n)}function U1(r,e){return r.length===e.length&&r.slice(0,-1).every((n,i)=>n===e[i])?r[r.length-1]-e[e.length-1]:0}function H1(r,e,t){let{routesMeta:n}=r,i={},o="/",l=[];for(let c=0;c<n.length;++c){let u=n[c],f=c===n.length-1,h=o==="/"?e:e.slice(o.length)||"/",p=$1({path:u.relativePath,caseSensitive:u.caseSensitive,end:f},h),g=u.route;if(!p)return null;Object.assign(i,p.params),l.push({params:i,pathname:Dn([o,p.pathname]),pathnameBase:Y1(Dn([o,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(o=Dn([o,p.pathnameBase]))}return l}function $1(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=G1(r.path,r.caseSensitive,r.end),i=e.match(t);if(!i)return null;let o=i[0],l=o.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:n.reduce((f,h,p)=>{let{paramName:g,isOptional:v}=h;if(g==="*"){let b=c[p]||"";l=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const x=c[p];return v&&!x?f[g]=void 0:f[g]=(x||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:l,pattern:r}}function G1(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),nv(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let n=[],i="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,u)=>(n.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(n.push({paramName:"*"}),i+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":r!==""&&r!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function W1(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return nv(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function kf(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}function V1(r,e){e===void 0&&(e="/");let{pathname:t,search:n="",hash:i=""}=typeof r=="string"?os(r):r;return{pathname:t?t.startsWith("/")?t:K1(t,e):e,search:q1(n),hash:X1(i)}}function K1(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Yu(r,e,t,n){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function z1(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function ov(r,e){let t=z1(r);return e?t.map((n,i)=>i===t.length-1?n.pathname:n.pathnameBase):t.map(n=>n.pathnameBase)}function av(r,e,t,n){n===void 0&&(n=!1);let i;typeof r=="string"?i=os(r):(i=lo({},r),lt(!i.pathname||!i.pathname.includes("?"),Yu("?","pathname","search",i)),lt(!i.pathname||!i.pathname.includes("#"),Yu("#","pathname","hash",i)),lt(!i.search||!i.search.includes("#"),Yu("#","search","hash",i)));let o=r===""||i.pathname==="",l=o?"/":i.pathname,c;if(l==null)c=t;else{let p=e.length-1;if(!n&&l.startsWith("..")){let g=l.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}c=p>=0?e[p]:"/"}let u=V1(i,c),f=l&&l!=="/"&&l.endsWith("/"),h=(o||l===".")&&t.endsWith("/");return!u.pathname.endsWith("/")&&(f||h)&&(u.pathname+="/"),u}const Dn=r=>r.join("/").replace(/\/\/+/g,"/"),Y1=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),q1=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,X1=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function Z1(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const lv=["post","put","patch","delete"];new Set(lv);const J1=["get",...lv];new Set(J1);function co(){return co=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},co.apply(this,arguments)}const Of=M.createContext(null),Q1=M.createContext(null),fi=M.createContext(null),jl=M.createContext(null),Bn=M.createContext({outlet:null,matches:[],isDataRoute:!1}),cv=M.createContext(null);function ew(r,e){let{relative:t}=e===void 0?{}:e;wo()||lt(!1);let{basename:n,navigator:i}=M.useContext(fi),{hash:o,pathname:l,search:c}=hv(r,{relative:t}),u=l;return n!=="/"&&(u=l==="/"?n:Dn([n,l])),i.createHref({pathname:u,search:c,hash:o})}function wo(){return M.useContext(jl)!=null}function hi(){return wo()||lt(!1),M.useContext(jl).location}function uv(r){M.useContext(fi).static||M.useLayoutEffect(r)}function dv(){let{isDataRoute:r}=M.useContext(Bn);return r?hw():tw()}function tw(){wo()||lt(!1);let r=M.useContext(Of),{basename:e,future:t,navigator:n}=M.useContext(fi),{matches:i}=M.useContext(Bn),{pathname:o}=hi(),l=JSON.stringify(ov(i,t.v7_relativeSplatPath)),c=M.useRef(!1);return uv(()=>{c.current=!0}),M.useCallback(function(f,h){if(h===void 0&&(h={}),!c.current)return;if(typeof f=="number"){n.go(f);return}let p=av(f,JSON.parse(l),o,h.relative==="path");r==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Dn([e,p.pathname])),(h.replace?n.replace:n.push)(p,h.state,h)},[e,n,l,o,r])}function fv(){let{matches:r}=M.useContext(Bn),e=r[r.length-1];return e?e.params:{}}function hv(r,e){let{relative:t}=e===void 0?{}:e,{future:n}=M.useContext(fi),{matches:i}=M.useContext(Bn),{pathname:o}=hi(),l=JSON.stringify(ov(i,n.v7_relativeSplatPath));return M.useMemo(()=>av(r,JSON.parse(l),o,t==="path"),[r,l,o,t])}function rw(r,e){return nw(r,e)}function nw(r,e,t,n){wo()||lt(!1);let{navigator:i}=M.useContext(fi),{matches:o}=M.useContext(Bn),l=o[o.length-1],c=l?l.params:{};l&&l.pathname;let u=l?l.pathnameBase:"/";l&&l.route;let f=hi(),h;if(e){var p;let S=typeof e=="string"?os(e):e;u==="/"||(p=S.pathname)!=null&&p.startsWith(u)||lt(!1),h=S}else h=f;let g=h.pathname||"/",v=g;if(u!=="/"){let S=u.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(S.length).join("/")}let x=D1(r,{pathname:v}),b=lw(x&&x.map(S=>Object.assign({},S,{params:Object.assign({},c,S.params),pathname:Dn([u,i.encodeLocation?i.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?u:Dn([u,i.encodeLocation?i.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),o,t,n);return e&&b?M.createElement(jl.Provider,{value:{location:co({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Rn.Pop}},b):b}function iw(){let r=fw(),e=Z1(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),t?M.createElement("pre",{style:i},t):null,null)}const sw=M.createElement(iw,null);class ow extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?M.createElement(Bn.Provider,{value:this.props.routeContext},M.createElement(cv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function aw(r){let{routeContext:e,match:t,children:n}=r,i=M.useContext(Of);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),M.createElement(Bn.Provider,{value:e},n)}function lw(r,e,t,n){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),n===void 0&&(n=null),r==null){var o;if(!t)return null;if(t.errors)r=t.matches;else if((o=n)!=null&&o.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let l=r,c=(i=t)==null?void 0:i.errors;if(c!=null){let h=l.findIndex(p=>p.route.id&&c?.[p.route.id]!==void 0);h>=0||lt(!1),l=l.slice(0,Math.min(l.length,h+1))}let u=!1,f=-1;if(t&&n&&n.v7_partialHydration)for(let h=0;h<l.length;h++){let p=l[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(f=h),p.route.id){let{loaderData:g,errors:v}=t,x=p.route.loader&&g[p.route.id]===void 0&&(!v||v[p.route.id]===void 0);if(p.route.lazy||x){u=!0,f>=0?l=l.slice(0,f+1):l=[l[0]];break}}}return l.reduceRight((h,p,g)=>{let v,x=!1,b=null,S=null;t&&(v=c&&p.route.id?c[p.route.id]:void 0,b=p.route.errorElement||sw,u&&(f<0&&g===0?(pw("route-fallback"),x=!0,S=null):f===g&&(x=!0,S=p.route.hydrateFallbackElement||null)));let A=e.concat(l.slice(0,g+1)),L=()=>{let R;return v?R=b:x?R=S:p.route.Component?R=M.createElement(p.route.Component,null):p.route.element?R=p.route.element:R=h,M.createElement(aw,{match:p,routeContext:{outlet:h,matches:A,isDataRoute:t!=null},children:R})};return t&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?M.createElement(ow,{location:t.location,revalidation:t.revalidation,component:b,error:v,children:L(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):L()},null)}var pv=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})(pv||{}),mv=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(mv||{});function cw(r){let e=M.useContext(Of);return e||lt(!1),e}function uw(r){let e=M.useContext(Q1);return e||lt(!1),e}function dw(r){let e=M.useContext(Bn);return e||lt(!1),e}function gv(r){let e=dw(),t=e.matches[e.matches.length-1];return t.route.id||lt(!1),t.route.id}function fw(){var r;let e=M.useContext(cv),t=uw(),n=gv();return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function hw(){let{router:r}=cw(pv.UseNavigateStable),e=gv(mv.UseNavigateStable),t=M.useRef(!1);return uv(()=>{t.current=!0}),M.useCallback(function(i,o){o===void 0&&(o={}),t.current&&(typeof i=="number"?r.navigate(i):r.navigate(i,co({fromRouteId:e},o)))},[r,e])}const Mg={};function pw(r,e,t){Mg[r]||(Mg[r]=!0)}function br(r){lt(!1)}function mw(r){let{basename:e="/",children:t=null,location:n,navigationType:i=Rn.Pop,navigator:o,static:l=!1,future:c}=r;wo()&&lt(!1);let u=e.replace(/^\/*/,"/"),f=M.useMemo(()=>({basename:u,navigator:o,static:l,future:co({v7_relativeSplatPath:!1},c)}),[u,c,o,l]);typeof n=="string"&&(n=os(n));let{pathname:h="/",search:p="",hash:g="",state:v=null,key:x="default"}=n,b=M.useMemo(()=>{let S=kf(h,u);return S==null?null:{location:{pathname:S,search:p,hash:g,state:v,key:x},navigationType:i}},[u,h,p,g,v,x,i]);return b==null?null:M.createElement(fi.Provider,{value:f},M.createElement(jl.Provider,{children:t,value:b}))}function gw(r){let{children:e,location:t}=r;return rw(Ud(e),t)}new Promise(()=>{});function Ud(r,e){e===void 0&&(e=[]);let t=[];return M.Children.forEach(r,(n,i)=>{if(!M.isValidElement(n))return;let o=[...e,i];if(n.type===M.Fragment){t.push.apply(t,Ud(n.props.children,o));return}n.type!==br&&lt(!1),!n.props.index||!n.props.children||lt(!1);let l={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=Ud(n.props.children,o)),t.push(l)}),t}function Hd(){return Hd=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Hd.apply(this,arguments)}function yw(r,e){if(r==null)return{};var t={},n=Object.keys(r),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(t[i]=r[i]);return t}function vw(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function xw(r,e){return r.button===0&&(!e||e==="_self")&&!vw(r)}const bw=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Ew="6";try{window.__reactRouterVersion=Ew}catch{}const Sw="startTransition",_g=b1[Sw];function ww(r){let{basename:e,children:t,future:n,window:i}=r,o=M.useRef();o.current==null&&(o.current=L1({window:i,v5Compat:!0}));let l=o.current,[c,u]=M.useState({action:l.action,location:l.location}),{v7_startTransition:f}=n||{},h=M.useCallback(p=>{f&&_g?_g(()=>u(p)):u(p)},[u,f]);return M.useLayoutEffect(()=>l.listen(h),[l,h]),M.createElement(mw,{basename:e,children:t,location:c.location,navigationType:c.action,navigator:l,future:n})}const Iw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Aw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rt=M.forwardRef(function(e,t){let{onClick:n,relative:i,reloadDocument:o,replace:l,state:c,target:u,to:f,preventScrollReset:h,viewTransition:p}=e,g=yw(e,bw),{basename:v}=M.useContext(fi),x,b=!1;if(typeof f=="string"&&Aw.test(f)&&(x=f,Iw))try{let R=new URL(window.location.href),k=f.startsWith("//")?new URL(R.protocol+f):new URL(f),C=kf(k.pathname,v);k.origin===R.origin&&C!=null?f=C+k.search+k.hash:b=!0}catch{}let S=ew(f,{relative:i}),A=Tw(f,{replace:l,state:c,target:u,preventScrollReset:h,relative:i,viewTransition:p});function L(R){n&&n(R),R.defaultPrevented||A(R)}return M.createElement("a",Hd({},g,{href:x||S,onClick:b||o?n:L,ref:t,target:u}))});var Fg;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(Fg||(Fg={}));var Bg;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(Bg||(Bg={}));function Tw(r,e){let{target:t,replace:n,state:i,preventScrollReset:o,relative:l,viewTransition:c}=e===void 0?{}:e,u=dv(),f=hi(),h=hv(r,{relative:l});return M.useCallback(p=>{if(xw(p,t)){p.preventDefault();let g=n!==void 0?n:fl(f)===fl(h);u(r,{replace:g,state:i,preventScrollReset:o,relative:l,viewTransition:c})}},[f,u,h,n,i,t,r,o,l,c])}const Lw=()=>{const[r,e]=M.useState(!1),t=hi(),n=i=>t.pathname===i?"text-[#E6C9A8]":"text-[#F5E6D3]";return w.jsxs("nav",{className:`fixed top-0 w-full flex justify-between items-center px-4 sm:px-6 lg:px-10 py-5 z-20 text-[#F5E6D3]\r
      transition-all duration-300 bg-transparent`,style:{backdropFilter:"blur(6px)"},children:[w.jsx(rt,{to:"/",className:"flex items-center",children:w.jsx("img",{src:"/Logo.webp",alt:"Logo",className:"h-24 w-auto"})}),w.jsxs("div",{className:"hidden md:flex space-x-14 text-[#F5E6D3]",children:[w.jsx(rt,{to:"/about",className:`hover:text-gray-300 ${n("/about")}`,children:"ABOUT"}),w.jsx(rt,{to:"/portfolio",className:`hover:text-gray-300 ${n("/portfolio")}`,children:"PORTFOLIO"}),w.jsx(rt,{to:"/contacts",className:`hover:text-gray-300 ${n("/contacts")}`,children:"CONTACTS"}),w.jsx(rt,{to:"/services",className:`hover:text-gray-300 ${n("/services")}`,children:"SERVICES"})]}),w.jsx("button",{className:"md:hidden text-[#F5E6D3] focus:outline-none",onClick:()=>e(!r),children:w.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:r?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})}),r&&w.jsxs("div",{className:"absolute top-full left-0 w-full bg-[#0d2637] bg-opacity-90 flex flex-col items-center space-y-5 py-5 md:hidden",children:[w.jsx(rt,{to:"/about",className:`hover:text-gray-300 ${n("/about")}`,onClick:()=>e(!1),children:"ABOUT"}),w.jsx(rt,{to:"/portfolio",className:`hover:text-gray-300 ${n("/portfolio")}`,onClick:()=>e(!1),children:"PORTFOLIO"}),w.jsx(rt,{to:"/contacts",className:`hover:text-gray-300 ${n("/contacts")}`,onClick:()=>e(!1),children:"CONTACTS"}),w.jsx(rt,{to:"/services",className:`hover:text-gray-300 ${n("/services")}`,onClick:()=>e(!1),children:"SERVICES"})]})]})},jg=()=>{};let Pf={},yv={},vv=null,xv={mark:jg,measure:jg};try{typeof window<"u"&&(Pf=window),typeof document<"u"&&(yv=document),typeof MutationObserver<"u"&&(vv=MutationObserver),typeof performance<"u"&&(xv=performance)}catch{}const{userAgent:Ug=""}=Pf.navigator||{},Pn=Pf,qe=yv,Hg=vv,Ba=xv;Pn.document;const nn=!!qe.documentElement&&!!qe.head&&typeof qe.addEventListener=="function"&&typeof qe.createElement=="function",bv=~Ug.indexOf("MSIE")||~Ug.indexOf("Trident/");var Je="classic",Ev="duotone",qt="sharp",Xt="sharp-duotone",Rw=[Je,Ev,qt,Xt],Cw={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds"}},$g={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},Dw=["kit"],kw=/fa(s|r|l|t|d|b|k|kd|ss|sr|sl|st|sds)?[\-\ ]/,Ow=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,Pw={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}},Nw={"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds"}},Mw={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds"}},_w={classic:["fas","far","fal","fat"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds"]},Fw={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid"}},Bw={classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds"}},Sv={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid"}},jw=["solid","regular","light","thin","duotone","brands"],wv=[1,2,3,4,5,6,7,8,9,10],Uw=wv.concat([11,12,13,14,15,16,17,18,19,20]),to={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},Hw=[...Object.keys(_w),...jw,"2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",to.GROUP,to.SWAP_OPACITY,to.PRIMARY,to.SECONDARY].concat(wv.map(r=>"".concat(r,"x"))).concat(Uw.map(r=>"w-".concat(r))),$w={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},Gw={kit:{"fa-kit":"fak"}},Ww={kit:{fak:"fa-kit"}},Gg={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}};const tn="___FONT_AWESOME___",$d=16,Iv="fa",Av="svg-inline--fa",li="data-fa-i2svg",Gd="data-fa-pseudo-element",Vw="data-fa-pseudo-element-pending",Nf="data-prefix",Mf="data-icon",Wg="fontawesome-i2svg",Kw="async",zw=["HTML","HEAD","STYLE","SCRIPT"],Tv=(()=>{try{return!0}catch{return!1}})(),Lv=[Je,qt,Xt];function Io(r){return new Proxy(r,{get(e,t){return t in e?e[t]:e[Je]}})}const Rv={...Sv};Rv[Je]={...Sv[Je],...$g.kit,...$g["kit-duotone"]};const si=Io(Rv),Wd={...Bw};Wd[Je]={...Wd[Je],...Gg.kit,...Gg["kit-duotone"]};const uo=Io(Wd),Vd={...Fw};Vd[Je]={...Vd[Je],...Ww.kit};const oi=Io(Vd),Kd={...Mw};Kd[Je]={...Kd[Je],...Gw.kit};const Yw=Io(Kd),qw=kw,Cv="fa-layers-text",Xw=Ow,Zw={...Cw};Io(Zw);const Jw=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],qu=to,Zi=new Set;Object.keys(uo[Je]).map(Zi.add.bind(Zi));Object.keys(uo[qt]).map(Zi.add.bind(Zi));Object.keys(uo[Xt]).map(Zi.add.bind(Zi));const Qw=[...Dw,...Hw],no=Pn.FontAwesomeConfig||{};function eI(r){var e=qe.querySelector("script["+r+"]");if(e)return e.getAttribute(r)}function tI(r){return r===""?!0:r==="false"?!1:r==="true"?!0:r}qe&&typeof qe.querySelector=="function"&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(e=>{let[t,n]=e;const i=tI(eI(t));i!=null&&(no[n]=i)});const Dv={styleDefault:"solid",familyDefault:"classic",cssPrefix:Iv,replacementClass:Av,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};no.familyPrefix&&(no.cssPrefix=no.familyPrefix);const Ji={...Dv,...no};Ji.autoReplaceSvg||(Ji.observeMutations=!1);const ve={};Object.keys(Dv).forEach(r=>{Object.defineProperty(ve,r,{enumerable:!0,set:function(e){Ji[r]=e,io.forEach(t=>t(ve))},get:function(){return Ji[r]}})});Object.defineProperty(ve,"familyPrefix",{enumerable:!0,set:function(r){Ji.cssPrefix=r,io.forEach(e=>e(ve))},get:function(){return Ji.cssPrefix}});Pn.FontAwesomeConfig=ve;const io=[];function rI(r){return io.push(r),()=>{io.splice(io.indexOf(r),1)}}const An=$d,Mr={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function nI(r){if(!r||!nn)return;const e=qe.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=r;const t=qe.head.childNodes;let n=null;for(let i=t.length-1;i>-1;i--){const o=t[i],l=(o.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(l)>-1&&(n=o)}return qe.head.insertBefore(e,n),r}const iI="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function fo(){let r=12,e="";for(;r-- >0;)e+=iI[Math.random()*62|0];return e}function as(r){const e=[];for(let t=(r||[]).length>>>0;t--;)e[t]=r[t];return e}function _f(r){return r.classList?as(r.classList):(r.getAttribute("class")||"").split(" ").filter(e=>e)}function kv(r){return"".concat(r).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function sI(r){return Object.keys(r||{}).reduce((e,t)=>e+"".concat(t,'="').concat(kv(r[t]),'" '),"").trim()}function Ul(r){return Object.keys(r||{}).reduce((e,t)=>e+"".concat(t,": ").concat(r[t].trim(),";"),"")}function Ff(r){return r.size!==Mr.size||r.x!==Mr.x||r.y!==Mr.y||r.rotate!==Mr.rotate||r.flipX||r.flipY}function oI(r){let{transform:e,containerWidth:t,iconWidth:n}=r;const i={transform:"translate(".concat(t/2," 256)")},o="translate(".concat(e.x*32,", ").concat(e.y*32,") "),l="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),c="rotate(".concat(e.rotate," 0 0)"),u={transform:"".concat(o," ").concat(l," ").concat(c)},f={transform:"translate(".concat(n/2*-1," -256)")};return{outer:i,inner:u,path:f}}function aI(r){let{transform:e,width:t=$d,height:n=$d,startCentered:i=!1}=r,o="";return i&&bv?o+="translate(".concat(e.x/An-t/2,"em, ").concat(e.y/An-n/2,"em) "):i?o+="translate(calc(-50% + ".concat(e.x/An,"em), calc(-50% + ").concat(e.y/An,"em)) "):o+="translate(".concat(e.x/An,"em, ").concat(e.y/An,"em) "),o+="scale(".concat(e.size/An*(e.flipX?-1:1),", ").concat(e.size/An*(e.flipY?-1:1),") "),o+="rotate(".concat(e.rotate,"deg) "),o}var lI=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    animation-delay: -1ms;
    animation-duration: 1ms;
    animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function Ov(){const r=Iv,e=Av,t=ve.cssPrefix,n=ve.replacementClass;let i=lI;if(t!==r||n!==e){const o=new RegExp("\\.".concat(r,"\\-"),"g"),l=new RegExp("\\--".concat(r,"\\-"),"g"),c=new RegExp("\\.".concat(e),"g");i=i.replace(o,".".concat(t,"-")).replace(l,"--".concat(t,"-")).replace(c,".".concat(n))}return i}let Vg=!1;function Xu(){ve.autoAddCss&&!Vg&&(nI(Ov()),Vg=!0)}var cI={mixout(){return{dom:{css:Ov,insertCss:Xu}}},hooks(){return{beforeDOMElementCreation(){Xu()},beforeI2svg(){Xu()}}}};const rn=Pn||{};rn[tn]||(rn[tn]={});rn[tn].styles||(rn[tn].styles={});rn[tn].hooks||(rn[tn].hooks={});rn[tn].shims||(rn[tn].shims=[]);var _r=rn[tn];const Pv=[],Nv=function(){qe.removeEventListener("DOMContentLoaded",Nv),hl=1,Pv.map(r=>r())};let hl=!1;nn&&(hl=(qe.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(qe.readyState),hl||qe.addEventListener("DOMContentLoaded",Nv));function uI(r){nn&&(hl?setTimeout(r,0):Pv.push(r))}function Ao(r){const{tag:e,attributes:t={},children:n=[]}=r;return typeof r=="string"?kv(r):"<".concat(e," ").concat(sI(t),">").concat(n.map(Ao).join(""),"</").concat(e,">")}function Kg(r,e,t){if(r&&r[e]&&r[e][t])return{prefix:e,iconName:t,icon:r[e][t]}}var Zu=function(e,t,n,i){var o=Object.keys(e),l=o.length,c=t,u,f,h;for(n===void 0?(u=1,h=e[o[0]]):(u=0,h=n);u<l;u++)f=o[u],h=c(h,e[f],f,e);return h};function dI(r){const e=[];let t=0;const n=r.length;for(;t<n;){const i=r.charCodeAt(t++);if(i>=55296&&i<=56319&&t<n){const o=r.charCodeAt(t++);(o&64512)==56320?e.push(((i&1023)<<10)+(o&1023)+65536):(e.push(i),t--)}else e.push(i)}return e}function zd(r){const e=dI(r);return e.length===1?e[0].toString(16):null}function fI(r,e){const t=r.length;let n=r.charCodeAt(e),i;return n>=55296&&n<=56319&&t>e+1&&(i=r.charCodeAt(e+1),i>=56320&&i<=57343)?(n-55296)*1024+i-56320+65536:n}function zg(r){return Object.keys(r).reduce((e,t)=>{const n=r[t];return!!n.icon?e[n.iconName]=n.icon:e[t]=n,e},{})}function Yd(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{skipHooks:n=!1}=t,i=zg(e);typeof _r.hooks.addPack=="function"&&!n?_r.hooks.addPack(r,zg(e)):_r.styles[r]={..._r.styles[r]||{},...i},r==="fas"&&Yd("fa",e)}const{styles:ni,shims:hI}=_r,pI={[Je]:Object.values(oi[Je]),[qt]:Object.values(oi[qt]),[Xt]:Object.values(oi[Xt])};let Bf=null,Mv={},_v={},Fv={},Bv={},jv={};const mI={[Je]:Object.keys(si[Je]),[qt]:Object.keys(si[qt]),[Xt]:Object.keys(si[Xt])};function gI(r){return~Qw.indexOf(r)}function yI(r,e){const t=e.split("-"),n=t[0],i=t.slice(1).join("-");return n===r&&i!==""&&!gI(i)?i:null}const Uv=()=>{const r=n=>Zu(ni,(i,o,l)=>(i[l]=Zu(o,n,{}),i),{});Mv=r((n,i,o)=>(i[3]&&(n[i[3]]=o),i[2]&&i[2].filter(c=>typeof c=="number").forEach(c=>{n[c.toString(16)]=o}),n)),_v=r((n,i,o)=>(n[o]=o,i[2]&&i[2].filter(c=>typeof c=="string").forEach(c=>{n[c]=o}),n)),jv=r((n,i,o)=>{const l=i[2];return n[o]=o,l.forEach(c=>{n[c]=o}),n});const e="far"in ni||ve.autoFetchSvg,t=Zu(hI,(n,i)=>{const o=i[0];let l=i[1];const c=i[2];return l==="far"&&!e&&(l="fas"),typeof o=="string"&&(n.names[o]={prefix:l,iconName:c}),typeof o=="number"&&(n.unicodes[o.toString(16)]={prefix:l,iconName:c}),n},{names:{},unicodes:{}});Fv=t.names,Bv=t.unicodes,Bf=Hl(ve.styleDefault,{family:ve.familyDefault})};rI(r=>{Bf=Hl(r.styleDefault,{family:ve.familyDefault})});Uv();function jf(r,e){return(Mv[r]||{})[e]}function vI(r,e){return(_v[r]||{})[e]}function Cn(r,e){return(jv[r]||{})[e]}function Hv(r){return Fv[r]||{prefix:null,iconName:null}}function xI(r){const e=Bv[r],t=jf("fas",r);return e||(t?{prefix:"fas",iconName:t}:null)||{prefix:null,iconName:null}}function Nn(){return Bf}const Uf=()=>({prefix:null,iconName:null,rest:[]});function Hl(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{family:t=Je}=e,n=si[t][r],i=uo[t][r]||uo[t][n],o=r in _r.styles?r:null;return i||o||null}const bI={[Je]:Object.keys(oi[Je]),[qt]:Object.keys(oi[qt]),[Xt]:Object.keys(oi[Xt])};function $l(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{skipLookups:t=!1}=e,n={[Je]:"".concat(ve.cssPrefix,"-").concat(Je),[qt]:"".concat(ve.cssPrefix,"-").concat(qt),[Xt]:"".concat(ve.cssPrefix,"-").concat(Xt)};let i=null,o=Je;const l=Rw.filter(u=>u!==Ev);l.forEach(u=>{(r.includes(n[u])||r.some(f=>bI[u].includes(f)))&&(o=u)});const c=r.reduce((u,f)=>{const h=yI(ve.cssPrefix,f);if(ni[f]?(f=pI[o].includes(f)?Yw[o][f]:f,i=f,u.prefix=f):mI[o].indexOf(f)>-1?(i=f,u.prefix=Hl(f,{family:o})):h?u.iconName=h:f!==ve.replacementClass&&!l.some(p=>f===n[p])&&u.rest.push(f),!t&&u.prefix&&u.iconName){const p=i==="fa"?Hv(u.iconName):{},g=Cn(u.prefix,u.iconName);p.prefix&&(i=null),u.iconName=p.iconName||g||u.iconName,u.prefix=p.prefix||u.prefix,u.prefix==="far"&&!ni.far&&ni.fas&&!ve.autoFetchSvg&&(u.prefix="fas")}return u},Uf());return(r.includes("fa-brands")||r.includes("fab"))&&(c.prefix="fab"),(r.includes("fa-duotone")||r.includes("fad"))&&(c.prefix="fad"),!c.prefix&&o===qt&&(ni.fass||ve.autoFetchSvg)&&(c.prefix="fass",c.iconName=Cn(c.prefix,c.iconName)||c.iconName),!c.prefix&&o===Xt&&(ni.fasds||ve.autoFetchSvg)&&(c.prefix="fasds",c.iconName=Cn(c.prefix,c.iconName)||c.iconName),(c.prefix==="fa"||i==="fa")&&(c.prefix=Nn()||"fas"),c}class EI{constructor(){this.definitions={}}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=t.reduce(this._pullDefinitions,{});Object.keys(i).forEach(o=>{this.definitions[o]={...this.definitions[o]||{},...i[o]},Yd(o,i[o]);const l=oi[Je][o];l&&Yd(l,i[o]),Uv()})}reset(){this.definitions={}}_pullDefinitions(e,t){const n=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(n).map(i=>{const{prefix:o,iconName:l,icon:c}=n[i],u=c[2];e[o]||(e[o]={}),u.length>0&&u.forEach(f=>{typeof f=="string"&&(e[o][f]=c)}),e[o][l]=c}),e}}let Yg=[],Wi={};const zi={},SI=Object.keys(zi);function wI(r,e){let{mixoutsTo:t}=e;return Yg=r,Wi={},Object.keys(zi).forEach(n=>{SI.indexOf(n)===-1&&delete zi[n]}),Yg.forEach(n=>{const i=n.mixout?n.mixout():{};if(Object.keys(i).forEach(o=>{typeof i[o]=="function"&&(t[o]=i[o]),typeof i[o]=="object"&&Object.keys(i[o]).forEach(l=>{t[o]||(t[o]={}),t[o][l]=i[o][l]})}),n.hooks){const o=n.hooks();Object.keys(o).forEach(l=>{Wi[l]||(Wi[l]=[]),Wi[l].push(o[l])})}n.provides&&n.provides(zi)}),t}function qd(r,e){for(var t=arguments.length,n=new Array(t>2?t-2:0),i=2;i<t;i++)n[i-2]=arguments[i];return(Wi[r]||[]).forEach(l=>{e=l.apply(null,[e,...n])}),e}function ci(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];(Wi[r]||[]).forEach(o=>{o.apply(null,t)})}function Mn(){const r=arguments[0],e=Array.prototype.slice.call(arguments,1);return zi[r]?zi[r].apply(null,e):void 0}function Xd(r){r.prefix==="fa"&&(r.prefix="fas");let{iconName:e}=r;const t=r.prefix||Nn();if(e)return e=Cn(t,e)||e,Kg($v.definitions,t,e)||Kg(_r.styles,t,e)}const $v=new EI,II=()=>{ve.autoReplaceSvg=!1,ve.observeMutations=!1,ci("noAuto")},AI={i2svg:function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return nn?(ci("beforeI2svg",r),Mn("pseudoElements2svg",r),Mn("i2svg",r)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e}=r;ve.autoReplaceSvg===!1&&(ve.autoReplaceSvg=!0),ve.observeMutations=!0,uI(()=>{LI({autoReplaceSvgRoot:e}),ci("watch",r)})}},TI={icon:r=>{if(r===null)return null;if(typeof r=="object"&&r.prefix&&r.iconName)return{prefix:r.prefix,iconName:Cn(r.prefix,r.iconName)||r.iconName};if(Array.isArray(r)&&r.length===2){const e=r[1].indexOf("fa-")===0?r[1].slice(3):r[1],t=Hl(r[0]);return{prefix:t,iconName:Cn(t,e)||e}}if(typeof r=="string"&&(r.indexOf("".concat(ve.cssPrefix,"-"))>-1||r.match(qw))){const e=$l(r.split(" "),{skipLookups:!0});return{prefix:e.prefix||Nn(),iconName:Cn(e.prefix,e.iconName)||e.iconName}}if(typeof r=="string"){const e=Nn();return{prefix:e,iconName:Cn(e,r)||r}}}},Qt={noAuto:II,config:ve,dom:AI,parse:TI,library:$v,findIconDefinition:Xd,toHtml:Ao},LI=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e=qe}=r;(Object.keys(_r.styles).length>0||ve.autoFetchSvg)&&nn&&ve.autoReplaceSvg&&Qt.dom.i2svg({node:e})};function Gl(r,e){return Object.defineProperty(r,"abstract",{get:e}),Object.defineProperty(r,"html",{get:function(){return r.abstract.map(t=>Ao(t))}}),Object.defineProperty(r,"node",{get:function(){if(!nn)return;const t=qe.createElement("div");return t.innerHTML=r.html,t.children}}),r}function RI(r){let{children:e,main:t,mask:n,attributes:i,styles:o,transform:l}=r;if(Ff(l)&&t.found&&!n.found){const{width:c,height:u}=t,f={x:c/u/2,y:.5};i.style=Ul({...o,"transform-origin":"".concat(f.x+l.x/16,"em ").concat(f.y+l.y/16,"em")})}return[{tag:"svg",attributes:i,children:e}]}function CI(r){let{prefix:e,iconName:t,children:n,attributes:i,symbol:o}=r;const l=o===!0?"".concat(e,"-").concat(ve.cssPrefix,"-").concat(t):o;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:{...i,id:l},children:n}]}]}function Hf(r){const{icons:{main:e,mask:t},prefix:n,iconName:i,transform:o,symbol:l,title:c,maskId:u,titleId:f,extra:h,watchable:p=!1}=r,{width:g,height:v}=t.found?t:e,x=n==="fak",b=[ve.replacementClass,i?"".concat(ve.cssPrefix,"-").concat(i):""].filter(C=>h.classes.indexOf(C)===-1).filter(C=>C!==""||!!C).concat(h.classes).join(" ");let S={children:[],attributes:{...h.attributes,"data-prefix":n,"data-icon":i,class:b,role:h.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(g," ").concat(v)}};const A=x&&!~h.classes.indexOf("fa-fw")?{width:"".concat(g/v*16*.0625,"em")}:{};p&&(S.attributes[li]=""),c&&(S.children.push({tag:"title",attributes:{id:S.attributes["aria-labelledby"]||"title-".concat(f||fo())},children:[c]}),delete S.attributes.title);const L={...S,prefix:n,iconName:i,main:e,mask:t,maskId:u,transform:o,symbol:l,styles:{...A,...h.styles}},{children:R,attributes:k}=t.found&&e.found?Mn("generateAbstractMask",L)||{children:[],attributes:{}}:Mn("generateAbstractIcon",L)||{children:[],attributes:{}};return L.children=R,L.attributes=k,l?CI(L):RI(L)}function qg(r){const{content:e,width:t,height:n,transform:i,title:o,extra:l,watchable:c=!1}=r,u={...l.attributes,...o?{title:o}:{},class:l.classes.join(" ")};c&&(u[li]="");const f={...l.styles};Ff(i)&&(f.transform=aI({transform:i,startCentered:!0,width:t,height:n}),f["-webkit-transform"]=f.transform);const h=Ul(f);h.length>0&&(u.style=h);const p=[];return p.push({tag:"span",attributes:u,children:[e]}),o&&p.push({tag:"span",attributes:{class:"sr-only"},children:[o]}),p}function DI(r){const{content:e,title:t,extra:n}=r,i={...n.attributes,...t?{title:t}:{},class:n.classes.join(" ")},o=Ul(n.styles);o.length>0&&(i.style=o);const l=[];return l.push({tag:"span",attributes:i,children:[e]}),t&&l.push({tag:"span",attributes:{class:"sr-only"},children:[t]}),l}const{styles:Ju}=_r;function Zd(r){const e=r[0],t=r[1],[n]=r.slice(4);let i=null;return Array.isArray(n)?i={tag:"g",attributes:{class:"".concat(ve.cssPrefix,"-").concat(qu.GROUP)},children:[{tag:"path",attributes:{class:"".concat(ve.cssPrefix,"-").concat(qu.SECONDARY),fill:"currentColor",d:n[0]}},{tag:"path",attributes:{class:"".concat(ve.cssPrefix,"-").concat(qu.PRIMARY),fill:"currentColor",d:n[1]}}]}:i={tag:"path",attributes:{fill:"currentColor",d:n}},{found:!0,width:e,height:t,icon:i}}const kI={found:!1,width:512,height:512};function OI(r,e){!Tv&&!ve.showMissingIcons&&r&&console.error('Icon with name "'.concat(r,'" and prefix "').concat(e,'" is missing.'))}function Jd(r,e){let t=e;return e==="fa"&&ve.styleDefault!==null&&(e=Nn()),new Promise((n,i)=>{if(t==="fa"){const o=Hv(r)||{};r=o.iconName||r,e=o.prefix||e}if(r&&e&&Ju[e]&&Ju[e][r]){const o=Ju[e][r];return n(Zd(o))}OI(r,e),n({...kI,icon:ve.showMissingIcons&&r?Mn("missingIconAbstract")||{}:{}})})}const Xg=()=>{},Qd=ve.measurePerformance&&Ba&&Ba.mark&&Ba.measure?Ba:{mark:Xg,measure:Xg},ro='FA "6.6.0"',PI=r=>(Qd.mark("".concat(ro," ").concat(r," begins")),()=>Gv(r)),Gv=r=>{Qd.mark("".concat(ro," ").concat(r," ends")),Qd.measure("".concat(ro," ").concat(r),"".concat(ro," ").concat(r," begins"),"".concat(ro," ").concat(r," ends"))};var $f={begin:PI,end:Gv};const tl=()=>{};function Zg(r){return typeof(r.getAttribute?r.getAttribute(li):null)=="string"}function NI(r){const e=r.getAttribute?r.getAttribute(Nf):null,t=r.getAttribute?r.getAttribute(Mf):null;return e&&t}function MI(r){return r&&r.classList&&r.classList.contains&&r.classList.contains(ve.replacementClass)}function _I(){return ve.autoReplaceSvg===!0?rl.replace:rl[ve.autoReplaceSvg]||rl.replace}function FI(r){return qe.createElementNS("http://www.w3.org/2000/svg",r)}function BI(r){return qe.createElement(r)}function Wv(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{ceFn:t=r.tag==="svg"?FI:BI}=e;if(typeof r=="string")return qe.createTextNode(r);const n=t(r.tag);return Object.keys(r.attributes||[]).forEach(function(o){n.setAttribute(o,r.attributes[o])}),(r.children||[]).forEach(function(o){n.appendChild(Wv(o,{ceFn:t}))}),n}function jI(r){let e=" ".concat(r.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}const rl={replace:function(r){const e=r[0];if(e.parentNode)if(r[1].forEach(t=>{e.parentNode.insertBefore(Wv(t),e)}),e.getAttribute(li)===null&&ve.keepOriginalSource){let t=qe.createComment(jI(e));e.parentNode.replaceChild(t,e)}else e.remove()},nest:function(r){const e=r[0],t=r[1];if(~_f(e).indexOf(ve.replacementClass))return rl.replace(r);const n=new RegExp("".concat(ve.cssPrefix,"-.*"));if(delete t[0].attributes.id,t[0].attributes.class){const o=t[0].attributes.class.split(" ").reduce((l,c)=>(c===ve.replacementClass||c.match(n)?l.toSvg.push(c):l.toNode.push(c),l),{toNode:[],toSvg:[]});t[0].attributes.class=o.toSvg.join(" "),o.toNode.length===0?e.removeAttribute("class"):e.setAttribute("class",o.toNode.join(" "))}const i=t.map(o=>Ao(o)).join(`
`);e.setAttribute(li,""),e.innerHTML=i}};function Jg(r){r()}function Vv(r,e){const t=typeof e=="function"?e:tl;if(r.length===0)t();else{let n=Jg;ve.mutateApproach===Kw&&(n=Pn.requestAnimationFrame||Jg),n(()=>{const i=_I(),o=$f.begin("mutate");r.map(i),o(),t()})}}let Gf=!1;function Kv(){Gf=!0}function ef(){Gf=!1}let pl=null;function Qg(r){if(!Hg||!ve.observeMutations)return;const{treeCallback:e=tl,nodeCallback:t=tl,pseudoElementsCallback:n=tl,observeMutationsRoot:i=qe}=r;pl=new Hg(o=>{if(Gf)return;const l=Nn();as(o).forEach(c=>{if(c.type==="childList"&&c.addedNodes.length>0&&!Zg(c.addedNodes[0])&&(ve.searchPseudoElements&&n(c.target),e(c.target)),c.type==="attributes"&&c.target.parentNode&&ve.searchPseudoElements&&n(c.target.parentNode),c.type==="attributes"&&Zg(c.target)&&~Jw.indexOf(c.attributeName))if(c.attributeName==="class"&&NI(c.target)){const{prefix:u,iconName:f}=$l(_f(c.target));c.target.setAttribute(Nf,u||l),f&&c.target.setAttribute(Mf,f)}else MI(c.target)&&t(c.target)})}),nn&&pl.observe(i,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function UI(){pl&&pl.disconnect()}function HI(r){const e=r.getAttribute("style");let t=[];return e&&(t=e.split(";").reduce((n,i)=>{const o=i.split(":"),l=o[0],c=o.slice(1);return l&&c.length>0&&(n[l]=c.join(":").trim()),n},{})),t}function $I(r){const e=r.getAttribute("data-prefix"),t=r.getAttribute("data-icon"),n=r.innerText!==void 0?r.innerText.trim():"";let i=$l(_f(r));return i.prefix||(i.prefix=Nn()),e&&t&&(i.prefix=e,i.iconName=t),i.iconName&&i.prefix||(i.prefix&&n.length>0&&(i.iconName=vI(i.prefix,r.innerText)||jf(i.prefix,zd(r.innerText))),!i.iconName&&ve.autoFetchSvg&&r.firstChild&&r.firstChild.nodeType===Node.TEXT_NODE&&(i.iconName=r.firstChild.data)),i}function GI(r){const e=as(r.attributes).reduce((i,o)=>(i.name!=="class"&&i.name!=="style"&&(i[o.name]=o.value),i),{}),t=r.getAttribute("title"),n=r.getAttribute("data-fa-title-id");return ve.autoA11y&&(t?e["aria-labelledby"]="".concat(ve.replacementClass,"-title-").concat(n||fo()):(e["aria-hidden"]="true",e.focusable="false")),e}function WI(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Mr,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function e0(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0};const{iconName:t,prefix:n,rest:i}=$I(r),o=GI(r),l=qd("parseNodeAttributes",{},r);let c=e.styleParser?HI(r):[];return{iconName:t,title:r.getAttribute("title"),titleId:r.getAttribute("data-fa-title-id"),prefix:n,transform:Mr,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:i,styles:c,attributes:o},...l}}const{styles:VI}=_r;function zv(r){const e=ve.autoReplaceSvg==="nest"?e0(r,{styleParser:!1}):e0(r);return~e.extra.classes.indexOf(Cv)?Mn("generateLayersText",r,e):Mn("generateSvgReplacementMutation",r,e)}let Ur=new Set;Lv.map(r=>{Ur.add("fa-".concat(r))});Object.keys(si[Je]).map(Ur.add.bind(Ur));Object.keys(si[qt]).map(Ur.add.bind(Ur));Object.keys(si[Xt]).map(Ur.add.bind(Ur));Ur=[...Ur];function t0(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!nn)return Promise.resolve();const t=qe.documentElement.classList,n=h=>t.add("".concat(Wg,"-").concat(h)),i=h=>t.remove("".concat(Wg,"-").concat(h)),o=ve.autoFetchSvg?Ur:Lv.map(h=>"fa-".concat(h)).concat(Object.keys(VI));o.includes("fa")||o.push("fa");const l=[".".concat(Cv,":not([").concat(li,"])")].concat(o.map(h=>".".concat(h,":not([").concat(li,"])"))).join(", ");if(l.length===0)return Promise.resolve();let c=[];try{c=as(r.querySelectorAll(l))}catch{}if(c.length>0)n("pending"),i("complete");else return Promise.resolve();const u=$f.begin("onTree"),f=c.reduce((h,p)=>{try{const g=zv(p);g&&h.push(g)}catch(g){Tv||g.name==="MissingIcon"&&console.error(g)}return h},[]);return new Promise((h,p)=>{Promise.all(f).then(g=>{Vv(g,()=>{n("active"),n("complete"),i("pending"),typeof e=="function"&&e(),u(),h()})}).catch(g=>{u(),p(g)})})}function KI(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;zv(r).then(t=>{t&&Vv([t],e)})}function zI(r){return function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=(e||{}).icon?e:Xd(e||{});let{mask:i}=t;return i&&(i=(i||{}).icon?i:Xd(i||{})),r(n,{...t,mask:i})}}const YI=function(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:t=Mr,symbol:n=!1,mask:i=null,maskId:o=null,title:l=null,titleId:c=null,classes:u=[],attributes:f={},styles:h={}}=e;if(!r)return;const{prefix:p,iconName:g,icon:v}=r;return Gl({type:"icon",...r},()=>(ci("beforeDOMElementCreation",{iconDefinition:r,params:e}),ve.autoA11y&&(l?f["aria-labelledby"]="".concat(ve.replacementClass,"-title-").concat(c||fo()):(f["aria-hidden"]="true",f.focusable="false")),Hf({icons:{main:Zd(v),mask:i?Zd(i.icon):{found:!1,width:null,height:null,icon:{}}},prefix:p,iconName:g,transform:{...Mr,...t},symbol:n,title:l,maskId:o,titleId:c,extra:{attributes:f,styles:h,classes:u}})))};var qI={mixout(){return{icon:zI(YI)}},hooks(){return{mutationObserverCallbacks(r){return r.treeCallback=t0,r.nodeCallback=KI,r}}},provides(r){r.i2svg=function(e){const{node:t=qe,callback:n=()=>{}}=e;return t0(t,n)},r.generateSvgReplacementMutation=function(e,t){const{iconName:n,title:i,titleId:o,prefix:l,transform:c,symbol:u,mask:f,maskId:h,extra:p}=t;return new Promise((g,v)=>{Promise.all([Jd(n,l),f.iconName?Jd(f.iconName,f.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(x=>{let[b,S]=x;g([e,Hf({icons:{main:b,mask:S},prefix:l,iconName:n,transform:c,symbol:u,maskId:h,title:i,titleId:o,extra:p,watchable:!0})])}).catch(v)})},r.generateAbstractIcon=function(e){let{children:t,attributes:n,main:i,transform:o,styles:l}=e;const c=Ul(l);c.length>0&&(n.style=c);let u;return Ff(o)&&(u=Mn("generateAbstractTransformGrouping",{main:i,transform:o,containerWidth:i.width,iconWidth:i.width})),t.push(u||i.icon),{children:t,attributes:n}}}},XI={mixout(){return{layer(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{classes:t=[]}=e;return Gl({type:"layer"},()=>{ci("beforeDOMElementCreation",{assembler:r,params:e});let n=[];return r(i=>{Array.isArray(i)?i.map(o=>{n=n.concat(o.abstract)}):n=n.concat(i.abstract)}),[{tag:"span",attributes:{class:["".concat(ve.cssPrefix,"-layers"),...t].join(" ")},children:n}]})}}}},ZI={mixout(){return{counter(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{title:t=null,classes:n=[],attributes:i={},styles:o={}}=e;return Gl({type:"counter",content:r},()=>(ci("beforeDOMElementCreation",{content:r,params:e}),DI({content:r.toString(),title:t,extra:{attributes:i,styles:o,classes:["".concat(ve.cssPrefix,"-layers-counter"),...n]}})))}}}},JI={mixout(){return{text(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:t=Mr,title:n=null,classes:i=[],attributes:o={},styles:l={}}=e;return Gl({type:"text",content:r},()=>(ci("beforeDOMElementCreation",{content:r,params:e}),qg({content:r,transform:{...Mr,...t},title:n,extra:{attributes:o,styles:l,classes:["".concat(ve.cssPrefix,"-layers-text"),...i]}})))}}},provides(r){r.generateLayersText=function(e,t){const{title:n,transform:i,extra:o}=t;let l=null,c=null;if(bv){const u=parseInt(getComputedStyle(e).fontSize,10),f=e.getBoundingClientRect();l=f.width/u,c=f.height/u}return ve.autoA11y&&!n&&(o.attributes["aria-hidden"]="true"),Promise.resolve([e,qg({content:e.innerHTML,width:l,height:c,transform:i,title:n,extra:o,watchable:!0})])}}};const QI=new RegExp('"',"ug"),r0=[1105920,1112319],n0={FontAwesome:{normal:"fas",400:"fas"},...Nw,...Pw,...$w},tf=Object.keys(n0).reduce((r,e)=>(r[e.toLowerCase()]=n0[e],r),{}),eA=Object.keys(tf).reduce((r,e)=>{const t=tf[e];return r[e]=t[900]||[...Object.entries(t)][0][1],r},{});function tA(r){const e=r.replace(QI,""),t=fI(e,0),n=t>=r0[0]&&t<=r0[1],i=e.length===2?e[0]===e[1]:!1;return{value:zd(i?e[0]:e),isSecondary:n||i}}function rA(r,e){const t=r.replace(/^['"]|['"]$/g,"").toLowerCase(),n=parseInt(e),i=isNaN(n)?"normal":n;return(tf[t]||{})[i]||eA[t]}function i0(r,e){const t="".concat(Vw).concat(e.replace(":","-"));return new Promise((n,i)=>{if(r.getAttribute(t)!==null)return n();const l=as(r.children).filter(g=>g.getAttribute(Gd)===e)[0],c=Pn.getComputedStyle(r,e),u=c.getPropertyValue("font-family"),f=u.match(Xw),h=c.getPropertyValue("font-weight"),p=c.getPropertyValue("content");if(l&&!f)return r.removeChild(l),n();if(f&&p!=="none"&&p!==""){const g=c.getPropertyValue("content");let v=rA(u,h);const{value:x,isSecondary:b}=tA(g),S=f[0].startsWith("FontAwesome");let A=jf(v,x),L=A;if(S){const R=xI(x);R.iconName&&R.prefix&&(A=R.iconName,v=R.prefix)}if(A&&!b&&(!l||l.getAttribute(Nf)!==v||l.getAttribute(Mf)!==L)){r.setAttribute(t,L),l&&r.removeChild(l);const R=WI(),{extra:k}=R;k.attributes[Gd]=e,Jd(A,v).then(C=>{const F=Hf({...R,icons:{main:C,mask:Uf()},prefix:v,iconName:L,extra:k,watchable:!0}),_=qe.createElementNS("http://www.w3.org/2000/svg","svg");e==="::before"?r.insertBefore(_,r.firstChild):r.appendChild(_),_.outerHTML=F.map(z=>Ao(z)).join(`
`),r.removeAttribute(t),n()}).catch(i)}else n()}else n()})}function nA(r){return Promise.all([i0(r,"::before"),i0(r,"::after")])}function iA(r){return r.parentNode!==document.head&&!~zw.indexOf(r.tagName.toUpperCase())&&!r.getAttribute(Gd)&&(!r.parentNode||r.parentNode.tagName!=="svg")}function s0(r){if(nn)return new Promise((e,t)=>{const n=as(r.querySelectorAll("*")).filter(iA).map(nA),i=$f.begin("searchPseudoElements");Kv(),Promise.all(n).then(()=>{i(),ef(),e()}).catch(()=>{i(),ef(),t()})})}var sA={hooks(){return{mutationObserverCallbacks(r){return r.pseudoElementsCallback=s0,r}}},provides(r){r.pseudoElements2svg=function(e){const{node:t=qe}=e;ve.searchPseudoElements&&s0(t)}}};let o0=!1;var oA={mixout(){return{dom:{unwatch(){Kv(),o0=!0}}}},hooks(){return{bootstrap(){Qg(qd("mutationObserverCallbacks",{}))},noAuto(){UI()},watch(r){const{observeMutationsRoot:e}=r;o0?ef():Qg(qd("mutationObserverCallbacks",{observeMutationsRoot:e}))}}}};const a0=r=>{let e={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return r.toLowerCase().split(" ").reduce((t,n)=>{const i=n.toLowerCase().split("-"),o=i[0];let l=i.slice(1).join("-");if(o&&l==="h")return t.flipX=!0,t;if(o&&l==="v")return t.flipY=!0,t;if(l=parseFloat(l),isNaN(l))return t;switch(o){case"grow":t.size=t.size+l;break;case"shrink":t.size=t.size-l;break;case"left":t.x=t.x-l;break;case"right":t.x=t.x+l;break;case"up":t.y=t.y-l;break;case"down":t.y=t.y+l;break;case"rotate":t.rotate=t.rotate+l;break}return t},e)};var aA={mixout(){return{parse:{transform:r=>a0(r)}}},hooks(){return{parseNodeAttributes(r,e){const t=e.getAttribute("data-fa-transform");return t&&(r.transform=a0(t)),r}}},provides(r){r.generateAbstractTransformGrouping=function(e){let{main:t,transform:n,containerWidth:i,iconWidth:o}=e;const l={transform:"translate(".concat(i/2," 256)")},c="translate(".concat(n.x*32,", ").concat(n.y*32,") "),u="scale(".concat(n.size/16*(n.flipX?-1:1),", ").concat(n.size/16*(n.flipY?-1:1),") "),f="rotate(".concat(n.rotate," 0 0)"),h={transform:"".concat(c," ").concat(u," ").concat(f)},p={transform:"translate(".concat(o/2*-1," -256)")},g={outer:l,inner:h,path:p};return{tag:"g",attributes:{...g.outer},children:[{tag:"g",attributes:{...g.inner},children:[{tag:t.icon.tag,children:t.icon.children,attributes:{...t.icon.attributes,...g.path}}]}]}}}};const Qu={x:0,y:0,width:"100%",height:"100%"};function l0(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return r.attributes&&(r.attributes.fill||e)&&(r.attributes.fill="black"),r}function lA(r){return r.tag==="g"?r.children:[r]}var cA={hooks(){return{parseNodeAttributes(r,e){const t=e.getAttribute("data-fa-mask"),n=t?$l(t.split(" ").map(i=>i.trim())):Uf();return n.prefix||(n.prefix=Nn()),r.mask=n,r.maskId=e.getAttribute("data-fa-mask-id"),r}}},provides(r){r.generateAbstractMask=function(e){let{children:t,attributes:n,main:i,mask:o,maskId:l,transform:c}=e;const{width:u,icon:f}=i,{width:h,icon:p}=o,g=oI({transform:c,containerWidth:h,iconWidth:u}),v={tag:"rect",attributes:{...Qu,fill:"white"}},x=f.children?{children:f.children.map(l0)}:{},b={tag:"g",attributes:{...g.inner},children:[l0({tag:f.tag,attributes:{...f.attributes,...g.path},...x})]},S={tag:"g",attributes:{...g.outer},children:[b]},A="mask-".concat(l||fo()),L="clip-".concat(l||fo()),R={tag:"mask",attributes:{...Qu,id:A,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"},children:[v,S]},k={tag:"defs",children:[{tag:"clipPath",attributes:{id:L},children:lA(p)},R]};return t.push(k,{tag:"rect",attributes:{fill:"currentColor","clip-path":"url(#".concat(L,")"),mask:"url(#".concat(A,")"),...Qu}}),{children:t,attributes:n}}}},uA={provides(r){let e=!1;Pn.matchMedia&&(e=Pn.matchMedia("(prefers-reduced-motion: reduce)").matches),r.missingIconAbstract=function(){const t=[],n={fill:"currentColor"},i={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};t.push({tag:"path",attributes:{...n,d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"}});const o={...i,attributeName:"opacity"},l={tag:"circle",attributes:{...n,cx:"256",cy:"364",r:"28"},children:[]};return e||l.children.push({tag:"animate",attributes:{...i,attributeName:"r",values:"28;14;28;28;14;28;"}},{tag:"animate",attributes:{...o,values:"1;0;1;1;0;1;"}}),t.push(l),t.push({tag:"path",attributes:{...n,opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"},children:e?[]:[{tag:"animate",attributes:{...o,values:"1;0;0;0;0;1;"}}]}),e||t.push({tag:"path",attributes:{...n,opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"},children:[{tag:"animate",attributes:{...o,values:"0;0;1;1;0;0;"}}]}),{tag:"g",attributes:{class:"missing"},children:t}}}},dA={hooks(){return{parseNodeAttributes(r,e){const t=e.getAttribute("data-fa-symbol"),n=t===null?!1:t===""?!0:t;return r.symbol=n,r}}}},fA=[cI,qI,XI,ZI,JI,sA,oA,aA,cA,uA,dA];wI(fA,{mixoutsTo:Qt});Qt.noAuto;Qt.config;Qt.library;Qt.dom;const rf=Qt.parse;Qt.findIconDefinition;Qt.toHtml;const hA=Qt.icon;Qt.layer;Qt.text;Qt.counter;var ed={exports:{}},td,c0;function pA(){if(c0)return td;c0=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return td=r,td}var rd,u0;function mA(){if(u0)return rd;u0=1;var r=pA();function e(){}function t(){}return t.resetWarningCache=e,rd=function(){function n(l,c,u,f,h,p){if(p!==r){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}n.isRequired=n;function i(){return n}var o={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:i,element:n,elementType:n,instanceOf:i,node:n,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return o.PropTypes=o,o},rd}var d0;function gA(){return d0||(d0=1,ed.exports=mA()()),ed.exports}var yA=gA();const Ne=Cf(yA);function f0(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Pr(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?f0(Object(t),!0).forEach(function(n){Vi(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):f0(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function ml(r){"@babel/helpers - typeof";return ml=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ml(r)}function Vi(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function vA(r,e){if(r==null)return{};var t={},n=Object.keys(r),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(t[i]=r[i]);return t}function xA(r,e){if(r==null)return{};var t=vA(r,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function nf(r){return bA(r)||EA(r)||SA(r)||wA()}function bA(r){if(Array.isArray(r))return sf(r)}function EA(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function SA(r,e){if(r){if(typeof r=="string")return sf(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return sf(r,e)}}function sf(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function wA(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IA(r){var e,t=r.beat,n=r.fade,i=r.beatFade,o=r.bounce,l=r.shake,c=r.flash,u=r.spin,f=r.spinPulse,h=r.spinReverse,p=r.pulse,g=r.fixedWidth,v=r.inverse,x=r.border,b=r.listItem,S=r.flip,A=r.size,L=r.rotation,R=r.pull,k=(e={"fa-beat":t,"fa-fade":n,"fa-beat-fade":i,"fa-bounce":o,"fa-shake":l,"fa-flash":c,"fa-spin":u,"fa-spin-reverse":h,"fa-spin-pulse":f,"fa-pulse":p,"fa-fw":g,"fa-inverse":v,"fa-border":x,"fa-li":b,"fa-flip":S===!0,"fa-flip-horizontal":S==="horizontal"||S==="both","fa-flip-vertical":S==="vertical"||S==="both"},Vi(e,"fa-".concat(A),typeof A<"u"&&A!==null),Vi(e,"fa-rotate-".concat(L),typeof L<"u"&&L!==null&&L!==0),Vi(e,"fa-pull-".concat(R),typeof R<"u"&&R!==null),Vi(e,"fa-swap-opacity",r.swapOpacity),e);return Object.keys(k).map(function(C){return k[C]?C:null}).filter(function(C){return C})}function AA(r){return r=r-0,r===r}function Yv(r){return AA(r)?r:(r=r.replace(/[\-_\s]+(.)?/g,function(e,t){return t?t.toUpperCase():""}),r.substr(0,1).toLowerCase()+r.substr(1))}var TA=["style"];function LA(r){return r.charAt(0).toUpperCase()+r.slice(1)}function RA(r){return r.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,t){var n=t.indexOf(":"),i=Yv(t.slice(0,n)),o=t.slice(n+1).trim();return i.startsWith("webkit")?e[LA(i)]=o:e[i]=o,e},{})}function qv(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string")return e;var n=(e.children||[]).map(function(u){return qv(r,u)}),i=Object.keys(e.attributes||{}).reduce(function(u,f){var h=e.attributes[f];switch(f){case"class":u.attrs.className=h,delete e.attributes.class;break;case"style":u.attrs.style=RA(h);break;default:f.indexOf("aria-")===0||f.indexOf("data-")===0?u.attrs[f.toLowerCase()]=h:u.attrs[Yv(f)]=h}return u},{attrs:{}}),o=t.style,l=o===void 0?{}:o,c=xA(t,TA);return i.attrs.style=Pr(Pr({},i.attrs.style),l),r.apply(void 0,[e.tag,Pr(Pr({},i.attrs),c)].concat(nf(n)))}var Xv=!1;try{Xv=!0}catch{}function CA(){if(!Xv&&console&&typeof console.error=="function"){var r;(r=console).error.apply(r,arguments)}}function h0(r){if(r&&ml(r)==="object"&&r.prefix&&r.iconName&&r.icon)return r;if(rf.icon)return rf.icon(r);if(r===null)return null;if(r&&ml(r)==="object"&&r.prefix&&r.iconName)return r;if(Array.isArray(r)&&r.length===2)return{prefix:r[0],iconName:r[1]};if(typeof r=="string")return{prefix:"fas",iconName:r}}function nd(r,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?Vi({},r,e):{}}var p0={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},Yi=Ze.forwardRef(function(r,e){var t=Pr(Pr({},p0),r),n=t.icon,i=t.mask,o=t.symbol,l=t.className,c=t.title,u=t.titleId,f=t.maskId,h=h0(n),p=nd("classes",[].concat(nf(IA(t)),nf((l||"").split(" ")))),g=nd("transform",typeof t.transform=="string"?rf.transform(t.transform):t.transform),v=nd("mask",h0(i)),x=hA(h,Pr(Pr(Pr(Pr({},p),g),v),{},{symbol:o,title:c,titleId:u,maskId:f}));if(!x)return CA("Could not find icon",h),null;var b=x.abstract,S={ref:e};return Object.keys(t).forEach(function(A){p0.hasOwnProperty(A)||(S[A]=t[A])}),DA(b[0],S)});Yi.displayName="FontAwesomeIcon";Yi.propTypes={beat:Ne.bool,border:Ne.bool,beatFade:Ne.bool,bounce:Ne.bool,className:Ne.string,fade:Ne.bool,flash:Ne.bool,mask:Ne.oneOfType([Ne.object,Ne.array,Ne.string]),maskId:Ne.string,fixedWidth:Ne.bool,inverse:Ne.bool,flip:Ne.oneOf([!0,!1,"horizontal","vertical","both"]),icon:Ne.oneOfType([Ne.object,Ne.array,Ne.string]),listItem:Ne.bool,pull:Ne.oneOf(["right","left"]),pulse:Ne.bool,rotation:Ne.oneOf([0,90,180,270]),shake:Ne.bool,size:Ne.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:Ne.bool,spinPulse:Ne.bool,spinReverse:Ne.bool,symbol:Ne.oneOfType([Ne.bool,Ne.string]),title:Ne.string,titleId:Ne.string,transform:Ne.oneOfType([Ne.string,Ne.object]),swapOpacity:Ne.bool};var DA=qv.bind(null,Ze.createElement);const kA={prefix:"fab",iconName:"tiktok",icon:[448,512,[],"e07b","M448,209.91a210.06,210.06,0,0,1-122.77-39.25V349.38A162.55,162.55,0,1,1,185,188.31V278.2a74.62,74.62,0,1,0,52.23,71.18V0l88,0a121.18,121.18,0,0,0,1.86,22.17h0A122.18,122.18,0,0,0,381,102.39a121.43,121.43,0,0,0,67,20.14Z"]},OA={prefix:"fab",iconName:"linkedin",icon:[448,512,[],"f08c","M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"]},PA={prefix:"fab",iconName:"instagram",icon:[448,512,[],"f16d","M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"]},NA={prefix:"fab",iconName:"facebook",icon:[512,512,[62e3],"f09a","M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256C0 376 82.7 476.8 194.2 504.5V334.2H141.4V256h52.8V222.3c0-87.1 39.4-127.5 125-127.5c16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1c-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H287V510.1C413.8 494.8 512 386.9 512 256h0z"]},Zv={prefix:"fab",iconName:"whatsapp",icon:[448,512,[],"f232","M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"]},MA={prefix:"fab",iconName:"pinterest",icon:[496,512,[],"f0d2","M496 256c0 137-111 248-248 248-25.6 0-50.2-3.9-73.4-11.1 10.1-16.5 25.2-43.5 30.8-65 3-11.6 15.4-59 15.4-59 8.1 15.4 31.7 28.5 56.8 28.5 74.8 0 128.7-68.8 128.7-154.3 0-81.9-66.9-143.2-152.9-143.2-107 0-163.9 71.8-163.9 150.1 0 36.4 19.4 81.7 50.3 96.1 4.7 2.2 7.2 1.2 8.3-3.3.8-3.4 5-20.3 6.9-28.1.6-2.5.3-4.7-1.7-7.1-10.1-12.5-18.3-35.3-18.3-56.6 0-54.7 41.4-107.6 112-107.6 60.9 0 103.6 41.5 103.6 100.9 0 67.1-33.9 113.6-78 113.6-24.3 0-42.6-20.1-36.7-44.8 7-29.5 20.5-61.3 20.5-82.6 0-19-10.2-34.9-31.4-34.9-24.9 0-44.9 25.7-44.9 60.2 0 22 7.4 36.8 7.4 36.8s-24.5 103.8-29 123.2c-5 21.4-3 51.6-.9 71.2C65.4 450.9 0 361.1 0 256 0 119 111 8 248 8s248 111 248 248z"]},_A=()=>w.jsx("a",{href:"https://wa.me/971544666066",target:"_blank",rel:"noopener noreferrer",className:`z-[10] fixed bottom-6 right-6 bg-green-500 rounded-full p-4 text-white text-3xl shadow-lg \r
      hover:bg-green-400 flex justify-center items-center`,style:{width:"80px",height:"80px"},children:w.jsx(Yi,{icon:Zv,size:"xl",style:{transform:"scale(1.2)"}})});function FA(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Jv={exports:{}};(function(r,e){(function(t){var n=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,o=/(?:\/|^)\.(?=\/)/g,l=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,c={buildAbsoluteURL:function(u,f,h){if(h=h||{},u=u.trim(),f=f.trim(),!f){if(!h.alwaysNormalize)return u;var p=c.parseURL(u);if(!p)throw new Error("Error trying to parse base URL.");return p.path=c.normalizePath(p.path),c.buildURLFromParts(p)}var g=c.parseURL(f);if(!g)throw new Error("Error trying to parse relative URL.");if(g.scheme)return h.alwaysNormalize?(g.path=c.normalizePath(g.path),c.buildURLFromParts(g)):f;var v=c.parseURL(u);if(!v)throw new Error("Error trying to parse base URL.");if(!v.netLoc&&v.path&&v.path[0]!=="/"){var x=i.exec(v.path);v.netLoc=x[1],v.path=x[2]}v.netLoc&&!v.path&&(v.path="/");var b={scheme:v.scheme,netLoc:g.netLoc,path:null,params:g.params,query:g.query,fragment:g.fragment};if(!g.netLoc&&(b.netLoc=v.netLoc,g.path[0]!=="/"))if(!g.path)b.path=v.path,g.params||(b.params=v.params,g.query||(b.query=v.query));else{var S=v.path,A=S.substring(0,S.lastIndexOf("/")+1)+g.path;b.path=c.normalizePath(A)}return b.path===null&&(b.path=h.alwaysNormalize?c.normalizePath(g.path):g.path),c.buildURLFromParts(b)},parseURL:function(u){var f=n.exec(u);return f?{scheme:f[1]||"",netLoc:f[2]||"",path:f[3]||"",params:f[4]||"",query:f[5]||"",fragment:f[6]||""}:null},normalizePath:function(u){for(u=u.split("").reverse().join("").replace(o,"");u.length!==(u=u.replace(l,"")).length;);return u.split("").reverse().join("")},buildURLFromParts:function(u){return u.scheme+u.netLoc+u.path+u.params+u.query+u.fragment}};r.exports=c})()})(Jv);var Wf=Jv.exports;function m0(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function xt(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?m0(Object(t),!0).forEach(function(n){UA(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):m0(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function BA(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function jA(r){var e=BA(r,"string");return typeof e=="symbol"?e:String(e)}function UA(r,e,t){return e=jA(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function ct(){return ct=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},ct.apply(this,arguments)}const he=Number.isFinite||function(r){return typeof r=="number"&&isFinite(r)},HA=Number.isSafeInteger||function(r){return typeof r=="number"&&Math.abs(r)<=$A},$A=Number.MAX_SAFE_INTEGER||9007199254740991;let I=(function(r){return r.MEDIA_ATTACHING="hlsMediaAttaching",r.MEDIA_ATTACHED="hlsMediaAttached",r.MEDIA_DETACHING="hlsMediaDetaching",r.MEDIA_DETACHED="hlsMediaDetached",r.BUFFER_RESET="hlsBufferReset",r.BUFFER_CODECS="hlsBufferCodecs",r.BUFFER_CREATED="hlsBufferCreated",r.BUFFER_APPENDING="hlsBufferAppending",r.BUFFER_APPENDED="hlsBufferAppended",r.BUFFER_EOS="hlsBufferEos",r.BUFFER_FLUSHING="hlsBufferFlushing",r.BUFFER_FLUSHED="hlsBufferFlushed",r.MANIFEST_LOADING="hlsManifestLoading",r.MANIFEST_LOADED="hlsManifestLoaded",r.MANIFEST_PARSED="hlsManifestParsed",r.LEVEL_SWITCHING="hlsLevelSwitching",r.LEVEL_SWITCHED="hlsLevelSwitched",r.LEVEL_LOADING="hlsLevelLoading",r.LEVEL_LOADED="hlsLevelLoaded",r.LEVEL_UPDATED="hlsLevelUpdated",r.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",r.LEVELS_UPDATED="hlsLevelsUpdated",r.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",r.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",r.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",r.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",r.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",r.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",r.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",r.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",r.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",r.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",r.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",r.CUES_PARSED="hlsCuesParsed",r.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",r.INIT_PTS_FOUND="hlsInitPtsFound",r.FRAG_LOADING="hlsFragLoading",r.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",r.FRAG_LOADED="hlsFragLoaded",r.FRAG_DECRYPTED="hlsFragDecrypted",r.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",r.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",r.FRAG_PARSING_METADATA="hlsFragParsingMetadata",r.FRAG_PARSED="hlsFragParsed",r.FRAG_BUFFERED="hlsFragBuffered",r.FRAG_CHANGED="hlsFragChanged",r.FPS_DROP="hlsFpsDrop",r.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",r.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",r.ERROR="hlsError",r.DESTROYING="hlsDestroying",r.KEY_LOADING="hlsKeyLoading",r.KEY_LOADED="hlsKeyLoaded",r.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",r.BACK_BUFFER_REACHED="hlsBackBufferReached",r.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",r})({}),Re=(function(r){return r.NETWORK_ERROR="networkError",r.MEDIA_ERROR="mediaError",r.KEY_SYSTEM_ERROR="keySystemError",r.MUX_ERROR="muxError",r.OTHER_ERROR="otherError",r})({}),K=(function(r){return r.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",r.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",r.KEY_SYSTEM_NO_SESSION="keySystemNoSession",r.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",r.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",r.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",r.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",r.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",r.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",r.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",r.MANIFEST_LOAD_ERROR="manifestLoadError",r.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",r.MANIFEST_PARSING_ERROR="manifestParsingError",r.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",r.LEVEL_EMPTY_ERROR="levelEmptyError",r.LEVEL_LOAD_ERROR="levelLoadError",r.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",r.LEVEL_PARSING_ERROR="levelParsingError",r.LEVEL_SWITCH_ERROR="levelSwitchError",r.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",r.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",r.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",r.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",r.FRAG_LOAD_ERROR="fragLoadError",r.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",r.FRAG_DECRYPT_ERROR="fragDecryptError",r.FRAG_PARSING_ERROR="fragParsingError",r.FRAG_GAP="fragGap",r.REMUX_ALLOC_ERROR="remuxAllocError",r.KEY_LOAD_ERROR="keyLoadError",r.KEY_LOAD_TIMEOUT="keyLoadTimeOut",r.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",r.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",r.BUFFER_APPEND_ERROR="bufferAppendError",r.BUFFER_APPENDING_ERROR="bufferAppendingError",r.BUFFER_STALLED_ERROR="bufferStalledError",r.BUFFER_FULL_ERROR="bufferFullError",r.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",r.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",r.INTERNAL_EXCEPTION="internalException",r.INTERNAL_ABORTED="aborted",r.UNKNOWN="unknown",r})({});const ti=function(){},of={trace:ti,debug:ti,log:ti,warn:ti,info:ti,error:ti};let so=of;function GA(r){const e=self.console[r];return e?e.bind(self.console,`[${r}] >`):ti}function WA(r,...e){e.forEach(function(t){so[t]=r[t]?r[t].bind(r):GA(t)})}function VA(r,e){if(typeof console=="object"&&r===!0||typeof r=="object"){WA(r,"debug","log","info","warn","error");try{so.log(`Debug logs enabled for "${e}" in hls.js version 1.5.19`)}catch{so=of}}else so=of}const B=so,KA=/^(\d+)x(\d+)$/,g0=/(.+?)=(".*?"|.*?)(?:,|$)/g;class tt{constructor(e){typeof e=="string"&&(e=tt.parseAttrList(e)),ct(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(t.length&1?"0":"")+t;const n=new Uint8Array(t.length/2);for(let i=0;i<t.length/2;i++)n[i]=parseInt(t.slice(i*2,i*2+2),16);return n}else return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const n=this[e];return n?parseFloat(n):t}enumeratedString(e){return this[e]}bool(e){return this[e]==="YES"}decimalResolution(e){const t=KA.exec(this[e]);if(t!==null)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e){let t;const n={};for(g0.lastIndex=0;(t=g0.exec(e))!==null;){let o=t[2];o.indexOf('"')===0&&o.lastIndexOf('"')===o.length-1&&(o=o.slice(1,-1));const l=t[1].trim();n[l]=o}return n}}function zA(r){return r!=="ID"&&r!=="CLASS"&&r!=="START-DATE"&&r!=="DURATION"&&r!=="END-DATE"&&r!=="END-ON-NEXT"}function YA(r){return r==="SCTE35-OUT"||r==="SCTE35-IN"}class Qv{constructor(e,t){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,t){const n=t.attr;for(const i in n)if(Object.prototype.hasOwnProperty.call(e,i)&&e[i]!==n[i]){B.warn(`DATERANGE tag attribute: "${i}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=i;break}e=ct(new tt({}),n,e)}if(this.attr=e,this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const n=new Date(this.attr["END-DATE"]);he(n.getTime())&&(this._endDate=n)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get startDate(){return this._startDate}get endDate(){if(this._endDate)return this._endDate;const e=this.duration;return e!==null?new Date(this._startDate.getTime()+e*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(he(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isValid(){return!!this.id&&!this._badValueForSameId&&he(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)}}class Wl{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var Ge={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class ex{constructor(e){this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams={[Ge.AUDIO]:null,[Ge.VIDEO]:null,[Ge.AUDIOVIDEO]:null},this.baseurl=e}setByteRange(e,t){const n=e.split("@",2);let i;n.length===1?i=t?.byteRangeEndOffset||0:i=parseInt(n[1]),this._byteRange=[i,parseInt(n[0])+i]}get byteRange(){return this._byteRange?this._byteRange:[]}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Wf.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}}class id extends ex{constructor(e,t){super(t),this._decryptdata=null,this.rawProgramDateTime=null,this.programDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.stats=new Wl,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const t=this.levelkeys.identity;if(t)this._decryptdata=t.getDecryptData(this.sn);else{const n=Object.keys(this.levelkeys);if(n.length===1)return this._decryptdata=this.levelkeys[n[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null||!he(this.programDateTime))return null;const e=he(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){const t=Object.keys(this.levelkeys),n=t.length;if(n>1||n===1&&this.levelkeys[t[0]].encrypted)return!0}return!1}setKeyFormat(e){if(this.levelkeys){const t=this.levelkeys[e];t&&!this._decryptdata&&(this._decryptdata=t.getDecryptData(this.sn))}}abortRequests(){var e,t;(e=this.loader)==null||e.abort(),(t=this.keyLoader)==null||t.abort()}setElementaryStreamInfo(e,t,n,i,o,l=!1){const{elementaryStreams:c}=this,u=c[e];if(!u){c[e]={startPTS:t,endPTS:n,startDTS:i,endDTS:o,partial:l};return}u.startPTS=Math.min(u.startPTS,t),u.endPTS=Math.max(u.endPTS,n),u.startDTS=Math.min(u.startDTS,i),u.endDTS=Math.max(u.endDTS,o)}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[Ge.AUDIO]=null,e[Ge.VIDEO]=null,e[Ge.AUDIOVIDEO]=null}}class qA extends ex{constructor(e,t,n,i,o){super(n),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.stats=new Wl,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=i;const l=e.enumeratedString("BYTERANGE");l&&this.setByteRange(l,o),o&&(this.fragOffset=o.fragOffset+o.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}const XA=10;class ZA{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const t=this.lastPartSn-e.lastPartSn,n=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!n||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||t===0&&n>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay}get hasProgramDateTime(){return this.fragments.length?he(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||XA}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var e;return(e=this.fragments)!=null&&e.length?this.fragments[this.fragments.length-1].end:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}function Vf(r){return Uint8Array.from(atob(r),e=>e.charCodeAt(0))}function JA(r){const e=af(r).subarray(0,16),t=new Uint8Array(16);return t.set(e,16-e.length),t}function QA(r){const e=function(n,i,o){const l=n[i];n[i]=n[o],n[o]=l};e(r,0,3),e(r,1,2),e(r,4,5),e(r,6,7)}function eT(r){const e=r.split(":");let t=null;if(e[0]==="data"&&e.length===2){const n=e[1].split(";"),i=n[n.length-1].split(",");if(i.length===2){const o=i[0]==="base64",l=i[1];o?(n.splice(-1,1),t=Vf(l)):t=JA(l)}}return t}function af(r){return Uint8Array.from(unescape(encodeURIComponent(r)),e=>e.charCodeAt(0))}const Qi=typeof self<"u"?self:void 0;var Ue={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},Gt={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function sd(r){switch(r){case Gt.FAIRPLAY:return Ue.FAIRPLAY;case Gt.PLAYREADY:return Ue.PLAYREADY;case Gt.WIDEVINE:return Ue.WIDEVINE;case Gt.CLEARKEY:return Ue.CLEARKEY}}var ja={CENC:"1077efecc0b24d02ace33c1e52e2fb4b",CLEARKEY:"e2719d58a985b3c9781ab030af78d30e",PLAYREADY:"9a04f07998404286ab92e65be0885f95",WIDEVINE:"edef8ba979d64acea3c827dcd51d21ed"};function od(r){if(r===ja.WIDEVINE)return Ue.WIDEVINE;if(r===ja.PLAYREADY)return Ue.PLAYREADY;if(r===ja.CENC||r===ja.CLEARKEY)return Ue.CLEARKEY}function ad(r){switch(r){case Ue.FAIRPLAY:return Gt.FAIRPLAY;case Ue.PLAYREADY:return Gt.PLAYREADY;case Ue.WIDEVINE:return Gt.WIDEVINE;case Ue.CLEARKEY:return Gt.CLEARKEY}}function Ua(r){const{drmSystems:e,widevineLicenseUrl:t}=r,n=e?[Ue.FAIRPLAY,Ue.WIDEVINE,Ue.PLAYREADY,Ue.CLEARKEY].filter(i=>!!e[i]):[];return!n[Ue.WIDEVINE]&&t&&n.push(Ue.WIDEVINE),n}const tx=(function(r){return Qi!=null&&(r=Qi.navigator)!=null&&r.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null})();function tT(r,e,t,n){let i;switch(r){case Ue.FAIRPLAY:i=["cenc","sinf"];break;case Ue.WIDEVINE:case Ue.PLAYREADY:i=["cenc"];break;case Ue.CLEARKEY:i=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${r}`)}return rT(i,e,t,n)}function rT(r,e,t,n){return[{initDataTypes:r,persistentState:n.persistentState||"optional",distinctiveIdentifier:n.distinctiveIdentifier||"optional",sessionTypes:n.sessionTypes||[n.sessionType||"temporary"],audioCapabilities:e.map(o=>({contentType:`audio/mp4; codecs="${o}"`,robustness:n.audioRobustness||"",encryptionScheme:n.audioEncryptionScheme||null})),videoCapabilities:t.map(o=>({contentType:`video/mp4; codecs="${o}"`,robustness:n.videoRobustness||"",encryptionScheme:n.videoEncryptionScheme||null}))}]}function rx(r){const e=new Uint16Array(r.buffer,r.byteOffset,r.byteLength/2),t=String.fromCharCode.apply(null,Array.from(e)),n=t.substring(t.indexOf("<"),t.length),l=new DOMParser().parseFromString(n,"text/xml").getElementsByTagName("KID")[0];if(l){const c=l.childNodes[0]?l.childNodes[0].nodeValue:l.getAttribute("VALUE");if(c){const u=Vf(c).subarray(0,16);return QA(u),u}}return null}function ai(r,e,t){return Uint8Array.prototype.slice?r.slice(e,t):new Uint8Array(Array.prototype.slice.call(r,e,t))}const Kf=(r,e)=>e+10<=r.length&&r[e]===73&&r[e+1]===68&&r[e+2]===51&&r[e+3]<255&&r[e+4]<255&&r[e+6]<128&&r[e+7]<128&&r[e+8]<128&&r[e+9]<128,nx=(r,e)=>e+10<=r.length&&r[e]===51&&r[e+1]===68&&r[e+2]===73&&r[e+3]<255&&r[e+4]<255&&r[e+6]<128&&r[e+7]<128&&r[e+8]<128&&r[e+9]<128,ho=(r,e)=>{const t=e;let n=0;for(;Kf(r,e);){n+=10;const i=Vl(r,e+6);n+=i,nx(r,e+10)&&(n+=10),e+=n}if(n>0)return r.subarray(t,t+n)},Vl=(r,e)=>{let t=0;return t=(r[e]&127)<<21,t|=(r[e+1]&127)<<14,t|=(r[e+2]&127)<<7,t|=r[e+3]&127,t},nT=(r,e)=>Kf(r,e)&&Vl(r,e+6)+10<=r.length-e,zf=r=>{const e=sx(r);for(let t=0;t<e.length;t++){const n=e[t];if(ix(n))return cT(n)}},ix=r=>r&&r.key==="PRIV"&&r.info==="com.apple.streaming.transportStreamTimestamp",iT=r=>{const e=String.fromCharCode(r[0],r[1],r[2],r[3]),t=Vl(r,4),n=10;return{type:e,size:t,data:r.subarray(n,n+t)}},sx=r=>{let e=0;const t=[];for(;Kf(r,e);){const n=Vl(r,e+6);e+=10;const i=e+n;for(;e+8<i;){const o=iT(r.subarray(e)),l=sT(o);l&&t.push(l),e+=o.size+10}nx(r,e)&&(e+=10)}return t},sT=r=>r.type==="PRIV"?oT(r):r.type[0]==="W"?lT(r):aT(r),oT=r=>{if(r.size<2)return;const e=jr(r.data,!0),t=new Uint8Array(r.data.subarray(e.length+1));return{key:r.type,info:e,data:t.buffer}},aT=r=>{if(r.size<2)return;if(r.type==="TXXX"){let t=1;const n=jr(r.data.subarray(t),!0);t+=n.length+1;const i=jr(r.data.subarray(t));return{key:r.type,info:n,data:i}}const e=jr(r.data.subarray(1));return{key:r.type,data:e}},lT=r=>{if(r.type==="WXXX"){if(r.size<2)return;let t=1;const n=jr(r.data.subarray(t),!0);t+=n.length+1;const i=jr(r.data.subarray(t));return{key:r.type,info:n,data:i}}const e=jr(r.data);return{key:r.type,data:e}},cT=r=>{if(r.data.byteLength===8){const e=new Uint8Array(r.data),t=e[3]&1;let n=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return n/=45,t&&(n+=4772185884e-2),Math.round(n)}},jr=(r,e=!1)=>{const t=uT();if(t){const f=t.decode(r);if(e){const h=f.indexOf("\0");return h!==-1?f.substring(0,h):f}return f.replace(/\0/g,"")}const n=r.length;let i,o,l,c="",u=0;for(;u<n;){if(i=r[u++],i===0&&e)return c;if(i===0||i===3)continue;switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:c+=String.fromCharCode(i);break;case 12:case 13:o=r[u++],c+=String.fromCharCode((i&31)<<6|o&63);break;case 14:o=r[u++],l=r[u++],c+=String.fromCharCode((i&15)<<12|(o&63)<<6|(l&63)<<0);break}}return c};let ld;function uT(){if(!navigator.userAgent.includes("PlayStation 4"))return!ld&&typeof self.TextDecoder<"u"&&(ld=new self.TextDecoder("utf-8")),ld}const Or={hexDump:function(r){let e="";for(let t=0;t<r.length;t++){let n=r[t].toString(16);n.length<2&&(n="0"+n),e+=n}return e}},gl=Math.pow(2,32)-1,dT=[].push,ox={video:1,audio:2,id3:3,text:4};function ft(r){return String.fromCharCode.apply(null,r)}function ax(r,e){const t=r[e]<<8|r[e+1];return t<0?65536+t:t}function Te(r,e){const t=lx(r,e);return t<0?4294967296+t:t}function y0(r,e){let t=Te(r,e);return t*=Math.pow(2,32),t+=Te(r,e+4),t}function lx(r,e){return r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3]}function cd(r,e,t){r[e]=t>>24,r[e+1]=t>>16&255,r[e+2]=t>>8&255,r[e+3]=t&255}function fT(r){const e=r.byteLength;for(let t=0;t<e;){const n=Te(r,t);if(n>8&&r[t+4]===109&&r[t+5]===111&&r[t+6]===111&&r[t+7]===102)return!0;t=n>1?t+n:e}return!1}function ke(r,e){const t=[];if(!e.length)return t;const n=r.byteLength;for(let i=0;i<n;){const o=Te(r,i),l=ft(r.subarray(i+4,i+8)),c=o>1?i+o:n;if(l===e[0])if(e.length===1)t.push(r.subarray(i+8,c));else{const u=ke(r.subarray(i+8,c),e.slice(1));u.length&&dT.apply(t,u)}i=c}return t}function hT(r){const e=[],t=r[0];let n=8;const i=Te(r,n);n+=4;let o=0,l=0;t===0?(o=Te(r,n),l=Te(r,n+4),n+=8):(o=y0(r,n),l=y0(r,n+8),n+=16),n+=2;let c=r.length+l;const u=ax(r,n);n+=2;for(let f=0;f<u;f++){let h=n;const p=Te(r,h);h+=4;const g=p&2147483647;if((p&2147483648)>>>31===1)return B.warn("SIDX has hierarchical references (not supported)"),null;const x=Te(r,h);h+=4,e.push({referenceSize:g,subsegmentDuration:x,info:{duration:x/i,start:c,end:c+g-1}}),c+=g,h+=4,n=h}return{earliestPresentationTime:o,timescale:i,version:t,referencesCount:u,references:e}}function cx(r){const e=[],t=ke(r,["moov","trak"]);for(let i=0;i<t.length;i++){const o=t[i],l=ke(o,["tkhd"])[0];if(l){let c=l[0];const u=Te(l,c===0?12:20),f=ke(o,["mdia","mdhd"])[0];if(f){c=f[0];const h=Te(f,c===0?12:20),p=ke(o,["mdia","hdlr"])[0];if(p){const g=ft(p.subarray(8,12)),v={soun:Ge.AUDIO,vide:Ge.VIDEO}[g];if(v){const x=ke(o,["mdia","minf","stbl","stsd"])[0],b=pT(x);e[u]={timescale:h,type:v},e[v]=xt({timescale:h,id:u},b)}}}}}return ke(r,["moov","mvex","trex"]).forEach(i=>{const o=Te(i,4),l=e[o];l&&(l.default={duration:Te(i,12),flags:Te(i,20)})}),e}function pT(r){const e=r.subarray(8),t=e.subarray(86),n=ft(e.subarray(4,8));let i=n;const o=n==="enca"||n==="encv";if(o){const c=ke(e,[n])[0].subarray(n==="enca"?28:78);ke(c,["sinf"]).forEach(f=>{const h=ke(f,["schm"])[0];if(h){const p=ft(h.subarray(4,8));if(p==="cbcs"||p==="cenc"){const g=ke(f,["frma"])[0];g&&(i=ft(g))}}})}switch(i){case"avc1":case"avc2":case"avc3":case"avc4":{const l=ke(t,["avcC"])[0];i+="."+Ha(l[1])+Ha(l[2])+Ha(l[3]);break}case"mp4a":{const l=ke(e,[n])[0],c=ke(l.subarray(28),["esds"])[0];if(c&&c.length>12){let u=4;if(c[u++]!==3)break;u=ud(c,u),u+=2;const f=c[u++];if(f&128&&(u+=2),f&64&&(u+=c[u++]),c[u++]!==4)break;u=ud(c,u);const h=c[u++];if(h===64)i+="."+Ha(h);else break;if(u+=12,c[u++]!==5)break;u=ud(c,u);const p=c[u++];let g=(p&248)>>3;g===31&&(g+=1+((p&7)<<3)+((c[u]&224)>>5)),i+="."+g}break}case"hvc1":case"hev1":{const l=ke(t,["hvcC"])[0],c=l[1],u=["","A","B","C"][c>>6],f=c&31,h=Te(l,2),p=(c&32)>>5?"H":"L",g=l[12],v=l.subarray(6,12);i+="."+u+f,i+="."+h.toString(16).toUpperCase(),i+="."+p+g;let x="";for(let b=v.length;b--;){const S=v[b];(S||x)&&(x="."+S.toString(16).toUpperCase()+x)}i+=x;break}case"dvh1":case"dvhe":{const l=ke(t,["dvcC"])[0],c=l[2]>>1&127,u=l[2]<<5&32|l[3]>>3&31;i+="."+kr(c)+"."+kr(u);break}case"vp09":{const l=ke(t,["vpcC"])[0],c=l[4],u=l[5],f=l[6]>>4&15;i+="."+kr(c)+"."+kr(u)+"."+kr(f);break}case"av01":{const l=ke(t,["av1C"])[0],c=l[1]>>>5,u=l[1]&31,f=l[2]>>>7?"H":"M",h=(l[2]&64)>>6,p=(l[2]&32)>>5,g=c===2&&h?p?12:10:h?10:8,v=(l[2]&16)>>4,x=(l[2]&8)>>3,b=(l[2]&4)>>2,S=l[2]&3;i+="."+c+"."+kr(u)+f+"."+kr(g)+"."+v+"."+x+b+S+"."+kr(1)+"."+kr(1)+"."+kr(1)+"."+0;break}}return{codec:i,encrypted:o}}function ud(r,e){const t=e+5;for(;r[e++]&128&&e<t;);return e}function Ha(r){return("0"+r.toString(16).toUpperCase()).slice(-2)}function kr(r){return(r<10?"0":"")+r}function mT(r,e){if(!r||!e)return r;const t=e.keyId;return t&&e.isCommonEncryption&&ke(r,["moov","trak"]).forEach(i=>{const l=ke(i,["mdia","minf","stbl","stsd"])[0].subarray(8);let c=ke(l,["enca"]);const u=c.length>0;u||(c=ke(l,["encv"])),c.forEach(f=>{const h=u?f.subarray(28):f.subarray(78);ke(h,["sinf"]).forEach(g=>{const v=ux(g);if(v){const x=v.subarray(8,24);x.some(b=>b!==0)||(B.log(`[eme] Patching keyId in 'enc${u?"a":"v"}>sinf>>tenc' box: ${Or.hexDump(x)} -> ${Or.hexDump(t)}`),v.set(t,8))}})})}),r}function ux(r){const e=ke(r,["schm"])[0];if(e){const t=ft(e.subarray(4,8));if(t==="cbcs"||t==="cenc")return ke(r,["schi","tenc"])[0]}return null}function gT(r,e){return ke(e,["moof","traf"]).reduce((t,n)=>{const i=ke(n,["tfdt"])[0],o=i[0],l=ke(n,["tfhd"]).reduce((c,u)=>{const f=Te(u,4),h=r[f];if(h){let p=Te(i,4);if(o===1){if(p===gl)return B.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),c;p*=gl+1,p+=Te(i,8)}const g=h.timescale||9e4,v=p/g;if(he(v)&&(c===null||v<c))return v}return c},null);return l!==null&&he(l)&&(t===null||l<t)?l:t},null)}function yT(r,e){let t=0,n=0,i=0;const o=ke(r,["moof","traf"]);for(let l=0;l<o.length;l++){const c=o[l],u=ke(c,["tfhd"])[0],f=Te(u,4),h=e[f];if(!h)continue;const p=h.default,g=Te(u,0)|p?.flags;let v=p?.duration;g&8&&(g&2?v=Te(u,12):v=Te(u,8));const x=h.timescale||9e4,b=ke(c,["trun"]);for(let S=0;S<b.length;S++){if(t=vT(b[S]),!t&&v){const A=Te(b[S],4);t=v*A}h.type===Ge.VIDEO?n+=t/x:h.type===Ge.AUDIO&&(i+=t/x)}}if(n===0&&i===0){let l=1/0,c=0,u=0;const f=ke(r,["sidx"]);for(let h=0;h<f.length;h++){const p=hT(f[h]);if(p!=null&&p.references){l=Math.min(l,p.earliestPresentationTime/p.timescale);const g=p.references.reduce((v,x)=>v+x.info.duration||0,0);c=Math.max(c,g+p.earliestPresentationTime/p.timescale),u=c-l}}if(u&&he(u))return u}return n||i}function vT(r){const e=Te(r,0);let t=8;e&1&&(t+=4),e&4&&(t+=4);let n=0;const i=Te(r,4);for(let o=0;o<i;o++){if(e&256){const l=Te(r,t);n+=l,t+=4}e&512&&(t+=4),e&1024&&(t+=4),e&2048&&(t+=4)}return n}function xT(r,e,t){ke(e,["moof","traf"]).forEach(n=>{ke(n,["tfhd"]).forEach(i=>{const o=Te(i,4),l=r[o];if(!l)return;const c=l.timescale||9e4;ke(n,["tfdt"]).forEach(u=>{const f=u[0],h=t*c;if(h){let p=Te(u,4);if(f===0)p-=h,p=Math.max(p,0),cd(u,4,p);else{p*=Math.pow(2,32),p+=Te(u,8),p-=h,p=Math.max(p,0);const g=Math.floor(p/(gl+1)),v=Math.floor(p%(gl+1));cd(u,4,g),cd(u,8,v)}}})})})}function bT(r){const e={valid:null,remainder:null},t=ke(r,["moof"]);if(t.length<2)return e.remainder=r,e;const n=t[t.length-1];return e.valid=ai(r,0,n.byteOffset-8),e.remainder=ai(r,n.byteOffset-8),e}function dr(r,e){const t=new Uint8Array(r.length+e.length);return t.set(r),t.set(e,r.length),t}function v0(r,e){const t=[],n=e.samples,i=e.timescale,o=e.id;let l=!1;return ke(n,["moof"]).map(u=>{const f=u.byteOffset-8;ke(u,["traf"]).map(p=>{const g=ke(p,["tfdt"]).map(v=>{const x=v[0];let b=Te(v,4);return x===1&&(b*=Math.pow(2,32),b+=Te(v,8)),b/i})[0];return g!==void 0&&(r=g),ke(p,["tfhd"]).map(v=>{const x=Te(v,4),b=Te(v,0)&16777215,S=(b&1)!==0,A=(b&2)!==0,L=(b&8)!==0;let R=0;const k=(b&16)!==0;let C=0;const F=(b&32)!==0;let _=8;x===o&&(S&&(_+=8),A&&(_+=4),L&&(R=Te(v,_),_+=4),k&&(C=Te(v,_),_+=4),F&&(_+=4),e.type==="video"&&(l=ET(e.codec)),ke(p,["trun"]).map(z=>{const te=z[0],U=Te(z,0)&16777215,q=(U&1)!==0;let le=0;const re=(U&4)!==0,pe=(U&256)!==0;let de=0;const ce=(U&512)!==0;let xe=0;const Z=(U&1024)!==0,X=(U&2048)!==0;let V=0;const P=Te(z,4);let G=8;q&&(le=Te(z,G),G+=4),re&&(G+=4);let ae=le+f;for(let ge=0;ge<P;ge++){if(pe?(de=Te(z,G),G+=4):de=R,ce?(xe=Te(z,G),G+=4):xe=C,Z&&(G+=4),X&&(te===0?V=Te(z,G):V=lx(z,G),G+=4),e.type===Ge.VIDEO){let we=0;for(;we<xe;){const Ee=Te(n,ae);if(ae+=4,ST(l,n[ae])){const De=n.subarray(ae,ae+Ee);dx(De,l?2:1,r+V/i,t)}ae+=Ee,we+=Ee+4}}r+=de/i}}))})})}),t}function ET(r){if(!r)return!1;const e=r.indexOf("."),t=e<0?r:r.substring(0,e);return t==="hvc1"||t==="hev1"||t==="dvh1"||t==="dvhe"}function ST(r,e){if(r){const t=e>>1&63;return t===39||t===40}else return(e&31)===6}function dx(r,e,t,n){const i=fx(r);let o=0;o+=e;let l=0,c=0,u=0;for(;o<i.length;){l=0;do{if(o>=i.length)break;u=i[o++],l+=u}while(u===255);c=0;do{if(o>=i.length)break;u=i[o++],c+=u}while(u===255);const f=i.length-o;let h=o;if(c<f)o+=c;else if(c>f){B.error(`Malformed SEI payload. ${c} is too small, only ${f} bytes left to parse.`);break}if(l===4){if(i[h++]===181){const g=ax(i,h);if(h+=2,g===49){const v=Te(i,h);if(h+=4,v===1195456820){const x=i[h++];if(x===3){const b=i[h++],S=31&b,A=64&b,L=A?2+S*3:0,R=new Uint8Array(L);if(A){R[0]=b;for(let k=1;k<L;k++)R[k]=i[h++]}n.push({type:x,payloadType:l,pts:t,bytes:R})}}}}}else if(l===5&&c>16){const p=[];for(let x=0;x<16;x++){const b=i[h++].toString(16);p.push(b.length==1?"0"+b:b),(x===3||x===5||x===7||x===9)&&p.push("-")}const g=c-16,v=new Uint8Array(g);for(let x=0;x<g;x++)v[x]=i[h++];n.push({payloadType:l,pts:t,uuid:p.join(""),userData:jr(v),userDataBytes:v})}}}function fx(r){const e=r.byteLength,t=[];let n=1;for(;n<e-2;)r[n]===0&&r[n+1]===0&&r[n+2]===3?(t.push(n+2),n+=2):n++;if(t.length===0)return r;const i=e-t.length,o=new Uint8Array(i);let l=0;for(n=0;n<i;l++,n++)l===t[0]&&(l++,t.shift()),o[n]=r[l];return o}function wT(r){const e=r[0];let t="",n="",i=0,o=0,l=0,c=0,u=0,f=0;if(e===0){for(;ft(r.subarray(f,f+1))!=="\0";)t+=ft(r.subarray(f,f+1)),f+=1;for(t+=ft(r.subarray(f,f+1)),f+=1;ft(r.subarray(f,f+1))!=="\0";)n+=ft(r.subarray(f,f+1)),f+=1;n+=ft(r.subarray(f,f+1)),f+=1,i=Te(r,12),o=Te(r,16),c=Te(r,20),u=Te(r,24),f=28}else if(e===1){f+=4,i=Te(r,f),f+=4;const p=Te(r,f);f+=4;const g=Te(r,f);for(f+=4,l=2**32*p+g,HA(l)||(l=Number.MAX_SAFE_INTEGER,B.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),c=Te(r,f),f+=4,u=Te(r,f),f+=4;ft(r.subarray(f,f+1))!=="\0";)t+=ft(r.subarray(f,f+1)),f+=1;for(t+=ft(r.subarray(f,f+1)),f+=1;ft(r.subarray(f,f+1))!=="\0";)n+=ft(r.subarray(f,f+1)),f+=1;n+=ft(r.subarray(f,f+1)),f+=1}const h=r.subarray(f,r.byteLength);return{schemeIdUri:t,value:n,timeScale:i,presentationTime:l,presentationTimeDelta:o,eventDuration:c,id:u,payload:h}}function IT(r,...e){const t=e.length;let n=8,i=t;for(;i--;)n+=e[i].byteLength;const o=new Uint8Array(n);for(o[0]=n>>24&255,o[1]=n>>16&255,o[2]=n>>8&255,o[3]=n&255,o.set(r,4),i=0,n=8;i<t;i++)o.set(e[i],n),n+=e[i].byteLength;return o}function AT(r,e,t){if(r.byteLength!==16)throw new RangeError("Invalid system id");let n,i;n=0,i=new Uint8Array;let o;n>0?(o=new Uint8Array(4),e.length>0&&new DataView(o.buffer).setUint32(0,e.length,!1)):o=new Uint8Array;const l=new Uint8Array(4);return t&&t.byteLength>0&&new DataView(l.buffer).setUint32(0,t.byteLength,!1),IT([112,115,115,104],new Uint8Array([n,0,0,0]),r,o,i,l,t||new Uint8Array)}function TT(r){const e=[];if(r instanceof ArrayBuffer){const t=r.byteLength;let n=0;for(;n+32<t;){const i=new DataView(r,n),o=LT(i);e.push(o),n+=o.size}}return e}function LT(r){const e=r.getUint32(0),t=r.byteOffset,n=r.byteLength;if(n<e)return{offset:t,size:n};if(r.getUint32(4)!==1886614376)return{offset:t,size:e};const o=r.getUint32(8)>>>24;if(o!==0&&o!==1)return{offset:t,size:e};const l=r.buffer,c=Or.hexDump(new Uint8Array(l,t+12,16)),u=r.getUint32(28);let f=null,h=null;if(o===0){if(e-32<u||u<22)return{offset:t,size:e};h=new Uint8Array(l,t+32,u)}else if(o===1){if(!u||n<t+32+u*16+16)return{offset:t,size:e};f=[];for(let p=0;p<u;p++)f.push(new Uint8Array(l,t+32+p*16,16))}return{version:o,systemId:c,kids:f,data:h,offset:t,size:e}}let $a={};class po{static clearKeyUriToKeyIdMap(){$a={}}constructor(e,t,n,i=[1],o=null){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=n,this.keyFormatVersions=i,this.iv=o,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&e!=="AES-128"}isSupported(){if(this.method){if(this.method==="AES-128"||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case Gt.FAIRPLAY:case Gt.WIDEVINE:case Gt.PLAYREADY:case Gt.CLEARKEY:return["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if(this.method==="AES-128"&&this.uri&&!this.iv){typeof e!="number"&&(this.method==="AES-128"&&!this.iv&&B.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0);const n=RT(e);return new po(this.method,this.uri,"identity",this.keyFormatVersions,n)}const t=eT(this.uri);if(t)switch(this.keyFormat){case Gt.WIDEVINE:this.pssh=t,t.length>=22&&(this.keyId=t.subarray(t.length-22,t.length-6));break;case Gt.PLAYREADY:{const n=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=AT(n,null,t),this.keyId=rx(t);break}default:{let n=t.subarray(0,16);if(n.length!==16){const i=new Uint8Array(16);i.set(n,16-n.length),n=i}this.keyId=n;break}}if(!this.keyId||this.keyId.byteLength!==16){let n=$a[this.uri];if(!n){const i=Object.keys($a).length%Number.MAX_SAFE_INTEGER;n=new Uint8Array(16),new DataView(n.buffer,12,4).setUint32(0,i),$a[this.uri]=n}this.keyId=n}return this}}function RT(r){const e=new Uint8Array(16);for(let t=12;t<16;t++)e[t]=r>>8*(15-t)&255;return e}const hx=/\{\$([a-zA-Z0-9-_]+)\}/g;function x0(r){return hx.test(r)}function $t(r,e,t){if(r.variableList!==null||r.hasVariableRefs)for(let n=t.length;n--;){const i=t[n],o=e[i];o&&(e[i]=lf(r,o))}}function lf(r,e){if(r.variableList!==null||r.hasVariableRefs){const t=r.variableList;return e.replace(hx,n=>{const i=n.substring(2,n.length-1),o=t?.[i];return o===void 0?(r.playlistParsingError||(r.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${i}"`)),n):o})}return e}function b0(r,e,t){let n=r.variableList;n||(r.variableList=n={});let i,o;if("QUERYPARAM"in e){i=e.QUERYPARAM;try{const l=new self.URL(t).searchParams;if(l.has(i))o=l.get(i);else throw new Error(`"${i}" does not match any query parameter in URI: "${t}"`)}catch(l){r.playlistParsingError||(r.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${l.message}`))}}else i=e.NAME,o=e.VALUE;i in n?r.playlistParsingError||(r.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${i}"`)):n[i]=o||""}function CT(r,e,t){const n=e.IMPORT;if(t&&n in t){let i=r.variableList;i||(r.variableList=i={}),i[n]=t[n]}else r.playlistParsingError||(r.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${n}"`))}function ui(r=!0){return typeof self>"u"?void 0:(r||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function DT(r){return typeof self<"u"&&r===self.ManagedMediaSource}const yl={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function kT(r,e){const t=yl[e];return!!t&&!!t[r.slice(0,4)]}function dd(r,e,t=!0){return!r.split(",").some(n=>!px(n,e,t))}function px(r,e,t=!0){var n;const i=ui(t);return(n=i?.isTypeSupported(mo(r,e)))!=null?n:!1}function mo(r,e){return`${e}/mp4;codecs="${r}"`}function E0(r){if(r){const e=r.substring(0,4);return yl.video[e]}return 2}function vl(r){return r.split(",").reduce((e,t)=>{const n=yl.video[t];return n?(n*2+e)/(e?3:2):(yl.audio[t]+e)/(e?2:1)},0)}const fd={};function OT(r,e=!0){if(fd[r])return fd[r];const t={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"]}[r];for(let n=0;n<t.length;n++)if(px(t[n],"audio",e))return fd[r]=t[n],t[n];return r}const PT=/flac|opus/i;function xl(r,e=!0){return r.replace(PT,t=>OT(t.toLowerCase(),e))}function S0(r,e){return r&&r!=="mp4a"?r:e&&e.split(",")[0]}function NT(r){const e=r.split(",");for(let t=0;t<e.length;t++){const n=e[t].split(".");if(n.length>2){let i=n.shift()+".";i+=parseInt(n.shift()).toString(16),i+=("000"+parseInt(n.shift()).toString(16)).slice(-4),e[t]=i}}return e.join(",")}const w0=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,I0=/#EXT-X-MEDIA:(.*)/g,MT=/^#EXT(?:INF|-X-TARGETDURATION):/m,A0=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),_T=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class Fr{static findGroup(e,t){for(let n=0;n<e.length;n++){const i=e[n];if(i.id===t)return i}}static resolve(e,t){return Wf.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return MT.test(e)}static parseMasterPlaylist(e,t){const n=x0(e),i={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:n},o=[];w0.lastIndex=0;let l;for(;(l=w0.exec(e))!=null;)if(l[1]){var c;const f=new tt(l[1]);$t(i,f,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);const h=lf(i,l[2]),p={attrs:f,bitrate:f.decimalInteger("BANDWIDTH")||f.decimalInteger("AVERAGE-BANDWIDTH"),name:f.NAME,url:Fr.resolve(h,t)},g=f.decimalResolution("RESOLUTION");g&&(p.width=g.width,p.height=g.height),FT(f.CODECS,p),(c=p.unknownCodecs)!=null&&c.length||o.push(p),i.levels.push(p)}else if(l[3]){const f=l[3],h=l[4];switch(f){case"SESSION-DATA":{const p=new tt(h);$t(i,p,["DATA-ID","LANGUAGE","VALUE","URI"]);const g=p["DATA-ID"];g&&(i.sessionData===null&&(i.sessionData={}),i.sessionData[g]=p);break}case"SESSION-KEY":{const p=T0(h,t,i);p.encrypted&&p.isSupported()?(i.sessionKeys===null&&(i.sessionKeys=[]),i.sessionKeys.push(p)):B.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${h}"`);break}case"DEFINE":{{const p=new tt(h);$t(i,p,["NAME","VALUE","QUERYPARAM"]),b0(i,p,t)}break}case"CONTENT-STEERING":{const p=new tt(h);$t(i,p,["SERVER-URI","PATHWAY-ID"]),i.contentSteering={uri:Fr.resolve(p["SERVER-URI"],t),pathwayId:p["PATHWAY-ID"]||"."};break}case"START":{i.startTimeOffset=L0(h);break}}}const u=o.length>0&&o.length<i.levels.length;return i.levels=u?o:i.levels,i.levels.length===0&&(i.playlistParsingError=new Error("no levels found in manifest")),i}static parseMasterPlaylistMedia(e,t,n){let i;const o={},l=n.levels,c={AUDIO:l.map(f=>({id:f.attrs.AUDIO,audioCodec:f.audioCodec})),SUBTITLES:l.map(f=>({id:f.attrs.SUBTITLES,textCodec:f.textCodec})),"CLOSED-CAPTIONS":[]};let u=0;for(I0.lastIndex=0;(i=I0.exec(e))!==null;){const f=new tt(i[1]),h=f.TYPE;if(h){const p=c[h],g=o[h]||[];o[h]=g,$t(n,f,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]);const v=f.LANGUAGE,x=f["ASSOC-LANGUAGE"],b=f.CHANNELS,S=f.CHARACTERISTICS,A=f["INSTREAM-ID"],L={attrs:f,bitrate:0,id:u++,groupId:f["GROUP-ID"]||"",name:f.NAME||v||"",type:h,default:f.bool("DEFAULT"),autoselect:f.bool("AUTOSELECT"),forced:f.bool("FORCED"),lang:v,url:f.URI?Fr.resolve(f.URI,t):""};if(x&&(L.assocLang=x),b&&(L.channels=b),S&&(L.characteristics=S),A&&(L.instreamId=A),p!=null&&p.length){const R=Fr.findGroup(p,L.groupId)||p[0];R0(L,R,"audioCodec"),R0(L,R,"textCodec")}g.push(L)}}return o}static parseLevelPlaylist(e,t,n,i,o,l){const c=new ZA(t),u=c.fragments;let f=null,h=0,p=0,g=0,v=0,x=null,b=new id(i,t),S,A,L,R=-1,k=!1,C=null;for(A0.lastIndex=0,c.m3u8=e,c.hasVariableRefs=x0(e);(S=A0.exec(e))!==null;){k&&(k=!1,b=new id(i,t),b.start=g,b.sn=h,b.cc=v,b.level=n,f&&(b.initSegment=f,b.rawProgramDateTime=f.rawProgramDateTime,f.rawProgramDateTime=null,C&&(b.setByteRange(C),C=null)));const te=S[1];if(te){b.duration=parseFloat(te);const U=(" "+S[2]).slice(1);b.title=U||null,b.tagList.push(U?["INF",te,U]:["INF",te])}else if(S[3]){if(he(b.duration)){b.start=g,L&&k0(b,L,c),b.sn=h,b.level=n,b.cc=v,u.push(b);const U=(" "+S[3]).slice(1);b.relurl=lf(c,U),C0(b,x),x=b,g+=b.duration,h++,p=0,k=!0}}else if(S[4]){const U=(" "+S[4]).slice(1);x?b.setByteRange(U,x):b.setByteRange(U)}else if(S[5])b.rawProgramDateTime=(" "+S[5]).slice(1),b.tagList.push(["PROGRAM-DATE-TIME",b.rawProgramDateTime]),R===-1&&(R=u.length);else{if(S=S[0].match(_T),!S){B.warn("No matches on slow regex match for level playlist!");continue}for(A=1;A<S.length&&!(typeof S[A]<"u");A++);const U=(" "+S[A]).slice(1),q=(" "+S[A+1]).slice(1),le=S[A+2]?(" "+S[A+2]).slice(1):"";switch(U){case"PLAYLIST-TYPE":c.type=q.toUpperCase();break;case"MEDIA-SEQUENCE":h=c.startSN=parseInt(q);break;case"SKIP":{const re=new tt(q);$t(c,re,["RECENTLY-REMOVED-DATERANGES"]);const pe=re.decimalInteger("SKIPPED-SEGMENTS");if(he(pe)){c.skippedSegments=pe;for(let ce=pe;ce--;)u.unshift(null);h+=pe}const de=re.enumeratedString("RECENTLY-REMOVED-DATERANGES");de&&(c.recentlyRemovedDateranges=de.split("	"));break}case"TARGETDURATION":c.targetduration=Math.max(parseInt(q),1);break;case"VERSION":c.version=parseInt(q);break;case"INDEPENDENT-SEGMENTS":case"EXTM3U":break;case"ENDLIST":c.live=!1;break;case"#":(q||le)&&b.tagList.push(le?[q,le]:[q]);break;case"DISCONTINUITY":v++,b.tagList.push(["DIS"]);break;case"GAP":b.gap=!0,b.tagList.push([U]);break;case"BITRATE":b.tagList.push([U,q]);break;case"DATERANGE":{const re=new tt(q);$t(c,re,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),$t(c,re,re.clientAttrs);const pe=new Qv(re,c.dateRanges[re.ID]);pe.isValid||c.skippedSegments?c.dateRanges[pe.id]=pe:B.warn(`Ignoring invalid DATERANGE tag: "${q}"`),b.tagList.push(["EXT-X-DATERANGE",q]);break}case"DEFINE":{{const re=new tt(q);$t(c,re,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in re?CT(c,re,l):b0(c,re,t)}break}case"DISCONTINUITY-SEQUENCE":v=parseInt(q);break;case"KEY":{const re=T0(q,t,c);if(re.isSupported()){if(re.method==="NONE"){L=void 0;break}L||(L={}),L[re.keyFormat]&&(L=ct({},L)),L[re.keyFormat]=re}else B.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${q}"`);break}case"START":c.startTimeOffset=L0(q);break;case"MAP":{const re=new tt(q);if($t(c,re,["BYTERANGE","URI"]),b.duration){const pe=new id(i,t);D0(pe,re,n,L),f=pe,b.initSegment=f,f.rawProgramDateTime&&!b.rawProgramDateTime&&(b.rawProgramDateTime=f.rawProgramDateTime)}else{const pe=b.byteRangeEndOffset;if(pe){const de=b.byteRangeStartOffset;C=`${pe-de}@${de}`}else C=null;D0(b,re,n,L),f=b,k=!0}break}case"SERVER-CONTROL":{const re=new tt(q);c.canBlockReload=re.bool("CAN-BLOCK-RELOAD"),c.canSkipUntil=re.optionalFloat("CAN-SKIP-UNTIL",0),c.canSkipDateRanges=c.canSkipUntil>0&&re.bool("CAN-SKIP-DATERANGES"),c.partHoldBack=re.optionalFloat("PART-HOLD-BACK",0),c.holdBack=re.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{const re=new tt(q);c.partTarget=re.decimalFloatingPoint("PART-TARGET");break}case"PART":{let re=c.partList;re||(re=c.partList=[]);const pe=p>0?re[re.length-1]:void 0,de=p++,ce=new tt(q);$t(c,ce,["BYTERANGE","URI"]);const xe=new qA(ce,b,t,de,pe);re.push(xe),b.duration+=xe.duration;break}case"PRELOAD-HINT":{const re=new tt(q);$t(c,re,["URI"]),c.preloadHint=re;break}case"RENDITION-REPORT":{const re=new tt(q);$t(c,re,["URI"]),c.renditionReports=c.renditionReports||[],c.renditionReports.push(re);break}default:B.warn(`line parsed but not handled: ${S}`);break}}}x&&!x.relurl?(u.pop(),g-=x.duration,c.partList&&(c.fragmentHint=x)):c.partList&&(C0(b,x),b.cc=v,c.fragmentHint=b,L&&k0(b,L,c));const F=u.length,_=u[0],z=u[F-1];if(g+=c.skippedSegments*c.targetduration,g>0&&F&&z){c.averagetargetduration=g/F;const te=z.sn;c.endSN=te!=="initSegment"?te:0,c.live||(z.endList=!0),_&&(c.startCC=_.cc)}else c.endSN=0,c.startCC=0;return c.fragmentHint&&(g+=c.fragmentHint.duration),c.totalduration=g,c.endCC=v,R>0&&BT(u,R),c}}function T0(r,e,t){var n,i;const o=new tt(r);$t(t,o,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);const l=(n=o.METHOD)!=null?n:"",c=o.URI,u=o.hexadecimalInteger("IV"),f=o.KEYFORMATVERSIONS,h=(i=o.KEYFORMAT)!=null?i:"identity";c&&o.IV&&!u&&B.error(`Invalid IV: ${o.IV}`);const p=c?Fr.resolve(c,e):"",g=(f||"1").split("/").map(Number).filter(Number.isFinite);return new po(l,p,h,g,u)}function L0(r){const t=new tt(r).decimalFloatingPoint("TIME-OFFSET");return he(t)?t:null}function FT(r,e){let t=(r||"").split(/[ ,]+/).filter(n=>n);["video","audio","text"].forEach(n=>{const i=t.filter(o=>kT(o,n));i.length&&(e[`${n}Codec`]=i.join(","),t=t.filter(o=>i.indexOf(o)===-1))}),e.unknownCodecs=t}function R0(r,e,t){const n=e[t];n&&(r[t]=n)}function BT(r,e){let t=r[e];for(let n=e;n--;){const i=r[n];if(!i)return;i.programDateTime=t.programDateTime-i.duration*1e3,t=i}}function C0(r,e){r.rawProgramDateTime?r.programDateTime=Date.parse(r.rawProgramDateTime):e!=null&&e.programDateTime&&(r.programDateTime=e.endProgramDateTime),he(r.programDateTime)||(r.programDateTime=null,r.rawProgramDateTime=null)}function D0(r,e,t,n){r.relurl=e.URI,e.BYTERANGE&&r.setByteRange(e.BYTERANGE),r.level=t,r.sn="initSegment",n&&(r.levelkeys=n),r.initSegment=null}function k0(r,e,t){r.levelkeys=e;const{encryptedFragments:n}=t;(!n.length||n[n.length-1].levelkeys!==e)&&Object.keys(e).some(i=>e[i].isCommonEncryption)&&n.push(r)}var Me={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},Le={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};function O0(r){const{type:e}=r;switch(e){case Me.AUDIO_TRACK:return Le.AUDIO;case Me.SUBTITLE_TRACK:return Le.SUBTITLE;default:return Le.MAIN}}function hd(r,e){let t=r.url;return(t===void 0||t.indexOf("data:")===0)&&(t=e.url),t}class jT{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.LEVEL_LOADING,this.onLevelLoading,this),e.on(I.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(I.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}unregisterListeners(){const{hls:e}=this;e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.LEVEL_LOADING,this.onLevelLoading,this),e.off(I.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(I.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}createInternalLoader(e){const t=this.hls.config,n=t.pLoader,i=t.loader,o=n||i,l=new o(t);return this.loaders[e.type]=l,l}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:n}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:Me.MANIFEST,url:n,deliveryDirectives:null})}onLevelLoading(e,t){const{id:n,level:i,pathwayId:o,url:l,deliveryDirectives:c}=t;this.load({id:n,level:i,pathwayId:o,responseType:"text",type:Me.LEVEL,url:l,deliveryDirectives:c})}onAudioTrackLoading(e,t){const{id:n,groupId:i,url:o,deliveryDirectives:l}=t;this.load({id:n,groupId:i,level:null,responseType:"text",type:Me.AUDIO_TRACK,url:o,deliveryDirectives:l})}onSubtitleTrackLoading(e,t){const{id:n,groupId:i,url:o,deliveryDirectives:l}=t;this.load({id:n,groupId:i,level:null,responseType:"text",type:Me.SUBTITLE_TRACK,url:o,deliveryDirectives:l})}load(e){var t;const n=this.hls.config;let i=this.getInternalLoader(e);if(i){const f=i.context;if(f&&f.url===e.url&&f.level===e.level){B.trace("[playlist-loader]: playlist request ongoing");return}B.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),i.abort()}let o;if(e.type===Me.MANIFEST?o=n.manifestLoadPolicy.default:o=ct({},n.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),i=this.createInternalLoader(e),he((t=e.deliveryDirectives)==null?void 0:t.part)){let f;if(e.type===Me.LEVEL&&e.level!==null?f=this.hls.levels[e.level].details:e.type===Me.AUDIO_TRACK&&e.id!==null?f=this.hls.audioTracks[e.id].details:e.type===Me.SUBTITLE_TRACK&&e.id!==null&&(f=this.hls.subtitleTracks[e.id].details),f){const h=f.partTarget,p=f.targetduration;if(h&&p){const g=Math.max(h*3,p*.8)*1e3;o=ct({},o,{maxTimeToFirstByteMs:Math.min(g,o.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(g,o.maxTimeToFirstByteMs)})}}}const l=o.errorRetry||o.timeoutRetry||{},c={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:l.maxNumRetry||0,retryDelay:l.retryDelayMs||0,maxRetryDelay:l.maxRetryDelayMs||0},u={onSuccess:(f,h,p,g)=>{const v=this.getInternalLoader(p);this.resetInternalLoader(p.type);const x=f.data;if(x.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(f,p,new Error("no EXTM3U delimiter"),g||null,h);return}h.parsing.start=performance.now(),Fr.isMediaPlaylist(x)?this.handleTrackOrLevelPlaylist(f,h,p,g||null,v):this.handleMasterPlaylist(f,h,p,g)},onError:(f,h,p,g)=>{this.handleNetworkError(h,p,!1,f,g)},onTimeout:(f,h,p)=>{this.handleNetworkError(h,p,!0,void 0,f)}};i.load(e,c,u)}handleMasterPlaylist(e,t,n,i){const o=this.hls,l=e.data,c=hd(e,n),u=Fr.parseMasterPlaylist(l,c);if(u.playlistParsingError){this.handleManifestParsingError(e,n,u.playlistParsingError,i,t);return}const{contentSteering:f,levels:h,sessionData:p,sessionKeys:g,startTimeOffset:v,variableList:x}=u;this.variableList=x;const{AUDIO:b=[],SUBTITLES:S,"CLOSED-CAPTIONS":A}=Fr.parseMasterPlaylistMedia(l,c,u);b.length&&!b.some(R=>!R.url)&&h[0].audioCodec&&!h[0].attrs.AUDIO&&(B.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),b.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new tt({}),bitrate:0,url:""})),o.trigger(I.MANIFEST_LOADED,{levels:h,audioTracks:b,subtitles:S,captions:A,contentSteering:f,url:c,stats:t,networkDetails:i,sessionData:p,sessionKeys:g,startTimeOffset:v,variableList:x})}handleTrackOrLevelPlaylist(e,t,n,i,o){const l=this.hls,{id:c,level:u,type:f}=n,h=hd(e,n),p=0,g=he(u)?u:he(c)?c:0,v=O0(n),x=Fr.parseLevelPlaylist(e.data,h,g,v,p,this.variableList);if(f===Me.MANIFEST){const b={attrs:new tt({}),bitrate:0,details:x,name:"",url:h};l.trigger(I.MANIFEST_LOADED,{levels:[b],audioTracks:[],url:h,stats:t,networkDetails:i,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),n.levelDetails=x,this.handlePlaylistLoaded(x,e,t,n,i,o)}handleManifestParsingError(e,t,n,i,o){this.hls.trigger(I.ERROR,{type:Re.NETWORK_ERROR,details:K.MANIFEST_PARSING_ERROR,fatal:t.type===Me.MANIFEST,url:e.url,err:n,error:n,reason:n.message,response:e,context:t,networkDetails:i,stats:o})}handleNetworkError(e,t,n=!1,i,o){let l=`A network ${n?"timeout":"error"+(i?" (status "+i.code+")":"")} occurred while loading ${e.type}`;e.type===Me.LEVEL?l+=`: ${e.level} id: ${e.id}`:(e.type===Me.AUDIO_TRACK||e.type===Me.SUBTITLE_TRACK)&&(l+=` id: ${e.id} group-id: "${e.groupId}"`);const c=new Error(l);B.warn(`[playlist-loader]: ${l}`);let u=K.UNKNOWN,f=!1;const h=this.getInternalLoader(e);switch(e.type){case Me.MANIFEST:u=n?K.MANIFEST_LOAD_TIMEOUT:K.MANIFEST_LOAD_ERROR,f=!0;break;case Me.LEVEL:u=n?K.LEVEL_LOAD_TIMEOUT:K.LEVEL_LOAD_ERROR,f=!1;break;case Me.AUDIO_TRACK:u=n?K.AUDIO_TRACK_LOAD_TIMEOUT:K.AUDIO_TRACK_LOAD_ERROR,f=!1;break;case Me.SUBTITLE_TRACK:u=n?K.SUBTITLE_TRACK_LOAD_TIMEOUT:K.SUBTITLE_LOAD_ERROR,f=!1;break}h&&this.resetInternalLoader(e.type);const p={type:Re.NETWORK_ERROR,details:u,fatal:f,url:e.url,loader:h,context:e,error:c,networkDetails:t,stats:o};if(i){const g=t?.url||e.url;p.response=xt({url:g,data:void 0},i)}this.hls.trigger(I.ERROR,p)}handlePlaylistLoaded(e,t,n,i,o,l){const c=this.hls,{type:u,level:f,id:h,groupId:p,deliveryDirectives:g}=i,v=hd(t,i),x=O0(i),b=typeof i.level=="number"&&x===Le.MAIN?f:void 0;if(!e.fragments.length){const A=new Error("No Segments found in Playlist");c.trigger(I.ERROR,{type:Re.NETWORK_ERROR,details:K.LEVEL_EMPTY_ERROR,fatal:!1,url:v,error:A,reason:A.message,response:t,context:i,level:b,parent:x,networkDetails:o,stats:n});return}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const S=e.playlistParsingError;if(S){c.trigger(I.ERROR,{type:Re.NETWORK_ERROR,details:K.LEVEL_PARSING_ERROR,fatal:!1,url:v,error:S,reason:S.message,response:t,context:i,level:b,parent:x,networkDetails:o,stats:n});return}switch(e.live&&l&&(l.getCacheAge&&(e.ageHeader=l.getCacheAge()||0),(!l.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),u){case Me.MANIFEST:case Me.LEVEL:c.trigger(I.LEVEL_LOADED,{details:e,level:b||0,id:h||0,stats:n,networkDetails:o,deliveryDirectives:g});break;case Me.AUDIO_TRACK:c.trigger(I.AUDIO_TRACK_LOADED,{details:e,id:h||0,groupId:p||"",stats:n,networkDetails:o,deliveryDirectives:g});break;case Me.SUBTITLE_TRACK:c.trigger(I.SUBTITLE_TRACK_LOADED,{details:e,id:h||0,groupId:p||"",stats:n,networkDetails:o,deliveryDirectives:g});break}}}function mx(r,e){let t;try{t=new Event("addtrack")}catch{t=document.createEvent("Event"),t.initEvent("addtrack",!1,!1)}t.track=r,e.dispatchEvent(t)}function gx(r,e){const t=r.mode;if(t==="disabled"&&(r.mode="hidden"),r.cues&&!r.cues.getCueById(e.id))try{if(r.addCue(e),!r.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(n){B.debug(`[texttrack-utils]: ${n}`);try{const i=new self.TextTrackCue(e.startTime,e.endTime,e.text);i.id=e.id,r.addCue(i)}catch(i){B.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${i}`)}}t==="disabled"&&(r.mode=t)}function Ki(r){const e=r.mode;if(e==="disabled"&&(r.mode="hidden"),r.cues)for(let t=r.cues.length;t--;)r.removeCue(r.cues[t]);e==="disabled"&&(r.mode=e)}function cf(r,e,t,n){const i=r.mode;if(i==="disabled"&&(r.mode="hidden"),r.cues&&r.cues.length>0){const o=HT(r.cues,e,t);for(let l=0;l<o.length;l++)(!n||n(o[l]))&&r.removeCue(o[l])}i==="disabled"&&(r.mode=i)}function UT(r,e){if(e<r[0].startTime)return 0;const t=r.length-1;if(e>r[t].endTime)return-1;let n=0,i=t;for(;n<=i;){const o=Math.floor((i+n)/2);if(e<r[o].startTime)i=o-1;else if(e>r[o].startTime&&n<t)n=o+1;else return o}return r[n].startTime-e<e-r[i].startTime?n:i}function HT(r,e,t){const n=[],i=UT(r,e);if(i>-1)for(let o=i,l=r.length;o<l;o++){const c=r[o];if(c.startTime>=e&&c.endTime<=t)n.push(c);else if(c.startTime>t)return n}return n}function nl(r){const e=[];for(let t=0;t<r.length;t++){const n=r[t];(n.kind==="subtitles"||n.kind==="captions")&&n.label&&e.push(r[t])}return e}var wr={audioId3:"org.id3",dateRange:"com.apple.quicktime.HLS",emsg:"https://aomedia.org/emsg/ID3"};const $T=.25;function uf(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function P0(r,e,t,n,i){let o=new r(e,t,"");try{o.value=n,i&&(o.type=i)}catch{o=new r(e,t,JSON.stringify(i?xt({type:i},n):n))}return o}const Ga=(()=>{const r=uf();try{r&&new r(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();function pd(r,e){return r.getTime()/1e3-e}function GT(r){return Uint8Array.from(r.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}class WT{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null}_registerListeners(){const{hls:e}=this;e.on(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(I.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(I.LEVEL_UPDATED,this.onLevelUpdated,this)}_unregisterListeners(){const{hls:e}=this;e.off(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(I.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(I.LEVEL_UPDATED,this.onLevelUpdated,this)}onMediaAttached(e,t){this.media=t.media}onMediaDetaching(){this.id3Track&&(Ki(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const n=e[t];if(n.kind==="metadata"&&n.label==="id3")return mx(n,this.media),n}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:n,enableID3MetadataCues:i}}}=this;if(!n&&!i)return;const{samples:o}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const l=uf();if(l)for(let c=0;c<o.length;c++){const u=o[c].type;if(u===wr.emsg&&!n||!i)continue;const f=sx(o[c].data);if(f){const h=o[c].pts;let p=h+o[c].duration;p>Ga&&(p=Ga),p-h<=0&&(p=h+$T);for(let v=0;v<f.length;v++){const x=f[v];if(!ix(x)){this.updateId3CueEnds(h,u);const b=P0(l,h,p,x,u);b&&this.id3Track.addCue(b)}}}}}updateId3CueEnds(e,t){var n;const i=(n=this.id3Track)==null?void 0:n.cues;if(i)for(let o=i.length;o--;){const l=i[o];l.type===t&&l.startTime<e&&l.endTime===Ga&&(l.endTime=e)}}onBufferFlushing(e,{startOffset:t,endOffset:n,type:i}){const{id3Track:o,hls:l}=this;if(!l)return;const{config:{enableEmsgMetadataCues:c,enableID3MetadataCues:u}}=l;if(o&&(c||u)){let f;i==="audio"?f=h=>h.type===wr.audioId3&&u:i==="video"?f=h=>h.type===wr.emsg&&c:f=h=>h.type===wr.audioId3&&u||h.type===wr.emsg&&c,cf(o,t,n,f)}}onLevelUpdated(e,{details:t}){if(!this.media||!t.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{dateRangeCuesAppended:n,id3Track:i}=this,{dateRanges:o}=t,l=Object.keys(o);if(i){const h=Object.keys(n).filter(p=>!l.includes(p));for(let p=h.length;p--;){const g=h[p];Object.keys(n[g].cues).forEach(v=>{i.removeCue(n[g].cues[v])}),delete n[g]}}const c=t.fragments[t.fragments.length-1];if(l.length===0||!he(c?.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const u=c.programDateTime/1e3-c.start,f=uf();for(let h=0;h<l.length;h++){const p=l[h],g=o[p],v=pd(g.startDate,u),x=n[p],b=x?.cues||{};let S=x?.durationKnown||!1,A=Ga;const L=g.endDate;if(L)A=pd(L,u),S=!0;else if(g.endOnNext&&!S){const k=l.reduce((C,F)=>{if(F!==g.id){const _=o[F];if(_.class===g.class&&_.startDate>g.startDate&&(!C||g.startDate<C.startDate))return _}return C},null);k&&(A=pd(k.startDate,u),S=!0)}const R=Object.keys(g.attr);for(let k=0;k<R.length;k++){const C=R[k];if(!zA(C))continue;const F=b[C];if(F)S&&!x.durationKnown&&(F.endTime=A);else if(f){let _=g.attr[C];YA(C)&&(_=GT(_));const z=P0(f,v,A,{key:C,data:_},wr.dateRange);z&&(z.id=p,this.id3Track.addCue(z),b[C]=z)}}n[p]={cues:b,dateRange:g,durationKnown:S}}}}class VT{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=()=>this.timeupdate(),this.hls=e,this.config=e.config,this.registerListeners()}get latency(){return this._latency||0}get maxLatency(){const{config:e,levelDetails:t}=this;return e.liveMaxLatencyDuration!==void 0?e.liveMaxLatencyDuration:t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const{levelDetails:e}=this;if(e===null)return null;const{holdBack:t,partHoldBack:n,targetduration:i}=e,{liveSyncDuration:o,liveSyncDurationCount:l,lowLatencyMode:c}=this.config,u=this.hls.userConfig;let f=c&&n||t;(u.liveSyncDuration||u.liveSyncDurationCount||f===0)&&(f=o!==void 0?o:l*i);const h=i;return f+Math.min(this.stallCount*1,h)}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency,n=this.levelDetails;if(e===null||t===null||n===null)return null;const i=n.edge,o=e-t-this.edgeStalled,l=i-n.totalduration,c=i-(this.config.lowLatencyMode&&n.partTarget||n.targetduration);return Math.min(Math.max(l,o),c)}get drift(){const{levelDetails:e}=this;return e===null?1:e.drift}get edgeStalled(){const{levelDetails:e}=this;if(e===null)return 0;const t=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e,levelDetails:t}=this;if(!e||!t)return 0;const n=e.buffered.length;return(n?e.buffered.end(n-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null}registerListeners(){this.hls.on(I.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(I.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(I.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(I.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(I.ERROR,this.onError,this)}unregisterListeners(){this.hls.off(I.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(I.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(I.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(I.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(I.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)}onManifestLoading(){this.levelDetails=null,this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:t}){this.levelDetails=t,t.advanced&&this.timeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)}onError(e,t){var n;t.details===K.BUFFER_STALLED_ERROR&&(this.stallCount++,(n=this.levelDetails)!=null&&n.live&&B.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))}timeupdate(){const{media:e,levelDetails:t}=this;if(!e||!t)return;this.currentTime=e.currentTime;const n=this.computeLatency();if(n===null)return;this._latency=n;const{lowLatencyMode:i,maxLiveSyncPlaybackRate:o}=this.config;if(!i||o===1||!t.live)return;const l=this.targetLatency;if(l===null)return;const c=n-l,u=Math.min(this.maxLatency,l+t.targetduration);if(c<u&&c>.05&&this.forwardBufferLength>1){const h=Math.min(2,Math.max(1,o)),p=Math.round(2/(1+Math.exp(-.75*c-this.edgeStalled))*20)/20;e.playbackRate=Math.min(h,Math.max(1,p))}else e.playbackRate!==1&&e.playbackRate!==0&&(e.playbackRate=1)}estimateLiveEdge(){const{levelDetails:e}=this;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}const df=["NONE","TYPE-0","TYPE-1",null];function KT(r){return df.indexOf(r)>-1}const bl=["SDR","PQ","HLG"];function zT(r){return!!r&&bl.indexOf(r)>-1}var il={No:"",Yes:"YES",v2:"v2"};function N0(r){const{canSkipUntil:e,canSkipDateRanges:t,age:n}=r,i=n<e/2;return e&&i?t?il.v2:il.Yes:il.No}class M0{constructor(e,t,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=n}addDirectives(e){const t=new self.URL(e);return this.msn!==void 0&&t.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class es{constructor(e){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(t=>!!t).map(t=>t.substring(0,4)).join(","),this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return _0(this._audioGroups,e)}hasSubtitleGroup(e){return _0(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,t){if(t){if(e==="audio"){let n=this._audioGroups;n||(n=this._audioGroups=[]),n.indexOf(t)===-1&&n.push(t)}else if(e==="text"){let n=this._subtitleGroups;n||(n=this._subtitleGroups=[]),n.indexOf(t)===-1&&n.push(t)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function _0(r,e){return!e||!r?!1:r.indexOf(e)!==-1}function md(r,e){const t=e.startPTS;if(he(t)){let n=0,i;e.sn>r.sn?(n=t-r.start,i=r):(n=r.start-t,i=e),i.duration!==n&&(i.duration=n)}else e.sn>r.sn?r.cc===e.cc&&r.minEndPTS?e.start=r.start+(r.minEndPTS-r.start):e.start=r.start+r.duration:e.start=Math.max(r.start-e.duration,0)}function yx(r,e,t,n,i,o){n-t<=0&&(B.warn("Fragment should have a positive duration",e),n=t+e.duration,o=i+e.duration);let c=t,u=n;const f=e.startPTS,h=e.endPTS;if(he(f)){const S=Math.abs(f-t);he(e.deltaPTS)?e.deltaPTS=Math.max(S,e.deltaPTS):e.deltaPTS=S,c=Math.max(t,f),t=Math.min(t,f),i=Math.min(i,e.startDTS),u=Math.min(n,h),n=Math.max(n,h),o=Math.max(o,e.endDTS)}const p=t-e.start;e.start!==0&&(e.start=t),e.duration=n-e.start,e.startPTS=t,e.maxStartPTS=c,e.startDTS=i,e.endPTS=n,e.minEndPTS=u,e.endDTS=o;const g=e.sn;if(!r||g<r.startSN||g>r.endSN)return 0;let v;const x=g-r.startSN,b=r.fragments;for(b[x]=e,v=x;v>0;v--)md(b[v],b[v-1]);for(v=x;v<b.length-1;v++)md(b[v],b[v+1]);return r.fragmentHint&&md(b[b.length-1],r.fragmentHint),r.PTSKnown=r.alignedSliding=!0,p}function YT(r,e){let t=null;const n=r.fragments;for(let c=n.length-1;c>=0;c--){const u=n[c].initSegment;if(u){t=u;break}}r.fragmentHint&&delete r.fragmentHint.endPTS;let i;ZT(r,e,(c,u,f,h)=>{if(e.skippedSegments&&u.cc!==c.cc){const p=c.cc-u.cc;for(let g=f;g<h.length;g++)h[g].cc+=p}he(c.startPTS)&&he(c.endPTS)&&(u.start=u.startPTS=c.startPTS,u.startDTS=c.startDTS,u.maxStartPTS=c.maxStartPTS,u.endPTS=c.endPTS,u.endDTS=c.endDTS,u.minEndPTS=c.minEndPTS,u.duration=c.endPTS-c.startPTS,u.duration&&(i=u),e.PTSKnown=e.alignedSliding=!0),u.elementaryStreams=c.elementaryStreams,u.loader=c.loader,u.stats=c.stats,c.initSegment&&(u.initSegment=c.initSegment,t=c.initSegment)});const o=e.fragments;if(t&&(e.fragmentHint?o.concat(e.fragmentHint):o).forEach(u=>{var f;u&&(!u.initSegment||u.initSegment.relurl===((f=t)==null?void 0:f.relurl))&&(u.initSegment=t)}),e.skippedSegments){if(e.deltaUpdateFailed=o.some(c=>!c),e.deltaUpdateFailed){B.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let c=e.skippedSegments;c--;)o.shift();e.startSN=o[0].sn}else e.canSkipDateRanges&&(e.dateRanges=qT(r.dateRanges,e.dateRanges,e.recentlyRemovedDateranges));e.startCC=e.fragments[0].cc,e.endCC=o[o.length-1].cc}XT(r.partList,e.partList,(c,u)=>{u.elementaryStreams=c.elementaryStreams,u.stats=c.stats}),i?yx(e,i,i.startPTS,i.endPTS,i.startDTS,i.endDTS):vx(r,e),o.length&&(e.totalduration=e.edge-o[0].start),e.driftStartTime=r.driftStartTime,e.driftStart=r.driftStart;const l=e.advancedDateTime;if(e.advanced&&l){const c=e.edge;e.driftStart||(e.driftStartTime=l,e.driftStart=c),e.driftEndTime=l,e.driftEnd=c}else e.driftEndTime=r.driftEndTime,e.driftEnd=r.driftEnd,e.advancedDateTime=r.advancedDateTime}function qT(r,e,t){const n=ct({},r);return t&&t.forEach(i=>{delete n[i]}),Object.keys(e).forEach(i=>{const o=new Qv(e[i].attr,n[i]);o.isValid?n[i]=o:B.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${JSON.stringify(e[i].attr)}"`)}),n}function XT(r,e,t){if(r&&e){let n=0;for(let i=0,o=r.length;i<=o;i++){const l=r[i],c=e[i+n];l&&c&&l.index===c.index&&l.fragment.sn===c.fragment.sn?t(l,c):n--}}}function ZT(r,e,t){const n=e.skippedSegments,i=Math.max(r.startSN,e.startSN)-e.startSN,o=(r.fragmentHint?1:0)+(n?e.endSN:Math.min(r.endSN,e.endSN))-e.startSN,l=e.startSN-r.startSN,c=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,u=r.fragmentHint?r.fragments.concat(r.fragmentHint):r.fragments;for(let f=i;f<=o;f++){const h=u[l+f];let p=c[f];n&&!p&&f<n&&(p=e.fragments[f]=h),h&&p&&t(h,p,f,c)}}function vx(r,e){const t=e.startSN+e.skippedSegments-r.startSN,n=r.fragments;t<0||t>=n.length||ff(e,n[t].start)}function ff(r,e){if(e){const t=r.fragments;for(let n=r.skippedSegments;n<t.length;n++)t[n].start+=e;r.fragmentHint&&(r.fragmentHint.start+=e)}}function JT(r,e=1/0){let t=1e3*r.targetduration;if(r.updated){const n=r.fragments;if(n.length&&t*4>e){const o=n[n.length-1].duration*1e3;o<t&&(t=o)}}else t/=2;return Math.round(t)}function QT(r,e,t){if(!(r!=null&&r.details))return null;const n=r.details;let i=n.fragments[e-n.startSN];return i||(i=n.fragmentHint,i&&i.sn===e)?i:e<n.startSN&&t&&t.sn===e?t:null}function F0(r,e,t){var n;return r!=null&&r.details?xx((n=r.details)==null?void 0:n.partList,e,t):null}function xx(r,e,t){if(r)for(let n=r.length;n--;){const i=r[n];if(i.index===t&&i.fragment.sn===e)return i}return null}function bx(r){r.forEach((e,t)=>{const{details:n}=e;n!=null&&n.fragments&&n.fragments.forEach(i=>{i.level=t})})}function El(r){switch(r.details){case K.FRAG_LOAD_TIMEOUT:case K.KEY_LOAD_TIMEOUT:case K.LEVEL_LOAD_TIMEOUT:case K.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function B0(r,e){const t=El(e);return r.default[`${t?"timeout":"error"}Retry`]}function Yf(r,e){const t=r.backoff==="linear"?1:Math.pow(2,e);return Math.min(t*r.retryDelayMs,r.maxRetryDelayMs)}function j0(r){return xt(xt({},r),{errorRetry:null,timeoutRetry:null})}function Sl(r,e,t,n){if(!r)return!1;const i=n?.code,o=e<r.maxNumRetry&&(eL(i)||!!t);return r.shouldRetry?r.shouldRetry(r,e,t,n,o):o}function eL(r){return r===0&&navigator.onLine===!1||!!r&&(r<400||r>499)}const Ex={search:function(r,e){let t=0,n=r.length-1,i=null,o=null;for(;t<=n;){i=(t+n)/2|0,o=r[i];const l=e(o);if(l>0)t=i+1;else if(l<0)n=i-1;else return o}return null}};function tL(r,e,t){if(e===null||!Array.isArray(r)||!r.length||!he(e))return null;const n=r[0].programDateTime;if(e<(n||0))return null;const i=r[r.length-1].endProgramDateTime;if(e>=(i||0))return null;t=t||0;for(let o=0;o<r.length;++o){const l=r[o];if(nL(e,t,l))return l}return null}function wl(r,e,t=0,n=0,i=.005){let o=null;if(r){o=e[r.sn-e[0].sn+1]||null;const c=r.endDTS-t;c>0&&c<15e-7&&(t+=15e-7)}else t===0&&e[0].start===0&&(o=e[0]);if(o&&((!r||r.level===o.level)&&hf(t,n,o)===0||rL(o,r,Math.min(i,n))))return o;const l=Ex.search(e,hf.bind(null,t,n));return l&&(l!==r||!o)?l:o}function rL(r,e,t){if(e&&e.start===0&&e.level<r.level&&(e.endPTS||0)>0){const n=e.tagList.reduce((i,o)=>(o[0]==="INF"&&(i+=parseFloat(o[1])),i),t);return r.start<=n}return!1}function hf(r=0,e=0,t){if(t.start<=r&&t.start+t.duration>r)return 0;const n=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0));return t.start+t.duration-n<=r?1:t.start-n>r&&t.start?-1:0}function nL(r,e,t){const n=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0))*1e3;return(t.endProgramDateTime||0)-n>r}function iL(r,e){return Ex.search(r,t=>t.cc<e?1:t.cc>e?-1:0)}var wt={DoNothing:0,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,RetryRequest:5},Er={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2};class sL{constructor(e){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=e,this.log=B.log.bind(B,"[info]:"),this.warn=B.warn.bind(B,"[warning]:"),this.error=B.error.bind(B,"[error]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(I.ERROR,this.onError,this),e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(I.ERROR,this.onError,this),e.off(I.ERROR,this.onErrorOut,this),e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return e?.type===Le.MAIN?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,t){var n,i;if(t.fatal)return;const o=this.hls,l=t.context;switch(t.details){case K.FRAG_LOAD_ERROR:case K.FRAG_LOAD_TIMEOUT:case K.KEY_LOAD_ERROR:case K.KEY_LOAD_TIMEOUT:t.errorAction=this.getFragRetryOrSwitchAction(t);return;case K.FRAG_PARSING_ERROR:if((n=t.frag)!=null&&n.gap){t.errorAction={action:wt.DoNothing,flags:Er.None};return}case K.FRAG_GAP:case K.FRAG_DECRYPT_ERROR:{t.errorAction=this.getFragRetryOrSwitchAction(t),t.errorAction.action=wt.SendAlternateToPenaltyBox;return}case K.LEVEL_EMPTY_ERROR:case K.LEVEL_PARSING_ERROR:{var c,u;const f=t.parent===Le.MAIN?t.level:o.loadLevel;t.details===K.LEVEL_EMPTY_ERROR&&((c=t.context)!=null&&(u=c.levelDetails)!=null&&u.live)?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,f):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,f))}return;case K.LEVEL_LOAD_ERROR:case K.LEVEL_LOAD_TIMEOUT:typeof l?.level=="number"&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,l.level));return;case K.AUDIO_TRACK_LOAD_ERROR:case K.AUDIO_TRACK_LOAD_TIMEOUT:case K.SUBTITLE_LOAD_ERROR:case K.SUBTITLE_TRACK_LOAD_TIMEOUT:if(l){const f=o.levels[o.loadLevel];if(f&&(l.type===Me.AUDIO_TRACK&&f.hasAudioGroup(l.groupId)||l.type===Me.SUBTITLE_TRACK&&f.hasSubtitleGroup(l.groupId))){t.errorAction=this.getPlaylistRetryOrSwitchAction(t,o.loadLevel),t.errorAction.action=wt.SendAlternateToPenaltyBox,t.errorAction.flags=Er.MoveAllAlternatesMatchingHost;return}}return;case K.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const f=o.levels[o.loadLevel],h=f?.attrs["HDCP-LEVEL"];h?t.errorAction={action:wt.SendAlternateToPenaltyBox,flags:Er.MoveAllAlternatesMatchingHDCP,hdcpLevel:h}:this.keySystemError(t)}return;case K.BUFFER_ADD_CODEC_ERROR:case K.REMUX_ALLOC_ERROR:case K.BUFFER_APPEND_ERROR:t.errorAction=this.getLevelSwitchAction(t,(i=t.level)!=null?i:o.loadLevel);return;case K.INTERNAL_EXCEPTION:case K.BUFFER_APPENDING_ERROR:case K.BUFFER_FULL_ERROR:case K.LEVEL_SWITCH_ERROR:case K.BUFFER_STALLED_ERROR:case K.BUFFER_SEEK_OVER_HOLE:case K.BUFFER_NUDGE_ON_STALL:t.errorAction={action:wt.DoNothing,flags:Er.None};return}t.type===Re.KEY_SYSTEM_ERROR&&this.keySystemError(t)}keySystemError(e){const t=this.getVariantLevelIndex(e.frag);e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,t)}getPlaylistRetryOrSwitchAction(e,t){const n=this.hls,i=B0(n.config.playlistLoadPolicy,e),o=this.playlistError++;if(Sl(i,o,El(e),e.response))return{action:wt.RetryRequest,flags:Er.None,retryConfig:i,retryCount:o};const c=this.getLevelSwitchAction(e,t);return i&&(c.retryConfig=i,c.retryCount=o),c}getFragRetryOrSwitchAction(e){const t=this.hls,n=this.getVariantLevelIndex(e.frag),i=t.levels[n],{fragLoadPolicy:o,keyLoadPolicy:l}=t.config,c=B0(e.details.startsWith("key")?l:o,e),u=t.levels.reduce((h,p)=>h+p.fragmentError,0);if(i&&(e.details!==K.FRAG_GAP&&i.fragmentError++,Sl(c,u,El(e),e.response)))return{action:wt.RetryRequest,flags:Er.None,retryConfig:c,retryCount:u};const f=this.getLevelSwitchAction(e,n);return c&&(f.retryConfig=c,f.retryCount=u),f}getLevelSwitchAction(e,t){const n=this.hls;t==null&&(t=n.loadLevel);const i=this.hls.levels[t];if(i){var o,l;const f=e.details;i.loadError++,f===K.BUFFER_APPEND_ERROR&&i.fragmentError++;let h=-1;const{levels:p,loadLevel:g,minAutoLevel:v,maxAutoLevel:x}=n;n.autoLevelEnabled||(n.loadLevel=-1);const b=(o=e.frag)==null?void 0:o.type,A=(b===Le.AUDIO&&f===K.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(f===K.BUFFER_ADD_CODEC_ERROR||f===K.BUFFER_APPEND_ERROR))&&p.some(({audioCodec:F})=>i.audioCodec!==F),R=e.sourceBufferName==="video"&&(f===K.BUFFER_ADD_CODEC_ERROR||f===K.BUFFER_APPEND_ERROR)&&p.some(({codecSet:F,audioCodec:_})=>i.codecSet!==F&&i.audioCodec===_),{type:k,groupId:C}=(l=e.context)!=null?l:{};for(let F=p.length;F--;){const _=(F+g)%p.length;if(_!==g&&_>=v&&_<=x&&p[_].loadError===0){var c,u;const z=p[_];if(f===K.FRAG_GAP&&b===Le.MAIN&&e.frag){const te=p[_].details;if(te){const U=wl(e.frag,te.fragments,e.frag.start);if(U!=null&&U.gap)continue}}else{if(k===Me.AUDIO_TRACK&&z.hasAudioGroup(C)||k===Me.SUBTITLE_TRACK&&z.hasSubtitleGroup(C))continue;if(b===Le.AUDIO&&(c=i.audioGroups)!=null&&c.some(te=>z.hasAudioGroup(te))||b===Le.SUBTITLE&&(u=i.subtitleGroups)!=null&&u.some(te=>z.hasSubtitleGroup(te))||A&&i.audioCodec===z.audioCodec||!A&&i.audioCodec!==z.audioCodec||R&&i.codecSet===z.codecSet)continue}h=_;break}}if(h>-1&&n.loadLevel!==h)return e.levelRetry=!0,this.playlistError=0,{action:wt.SendAlternateToPenaltyBox,flags:Er.None,nextAutoLevel:h}}return{action:wt.SendAlternateToPenaltyBox,flags:Er.MoveAllAlternatesMatchingHost}}onErrorOut(e,t){var n;switch((n=t.errorAction)==null?void 0:n.action){case wt.DoNothing:break;case wt.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(t),!t.errorAction.resolved&&t.details!==K.FRAG_GAP?t.fatal=!0:/MediaSource readyState: ended/.test(t.error.message)&&(this.warn(`MediaSource ended after "${t.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(t.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const t=this.hls,n=e.errorAction;if(!n)return;const{flags:i,hdcpLevel:o,nextAutoLevel:l}=n;switch(i){case Er.None:this.switchLevel(e,l);break;case Er.MoveAllAlternatesMatchingHDCP:o&&(t.maxHdcpLevel=df[df.indexOf(o)-1],n.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`);break}n.resolved||this.switchLevel(e,l)}switchLevel(e,t){t!==void 0&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)}}class qf{constructor(e,t){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=B.log.bind(B,`${t}:`),this.warn=B.warn.bind(B,`${t}:`),this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t,n){const i=t?.renditionReports;if(i){let o=-1;for(let l=0;l<i.length;l++){const c=i[l];let u;try{u=new self.URL(c.URI,t.url).href}catch(f){B.warn(`Could not construct new URL for Rendition Report: ${f}`),u=c.URI||""}if(u===e){o=l;break}else u===e.substring(0,u.length)&&(o=l)}if(o!==-1){const l=i[o],c=parseInt(l["LAST-MSN"])||t?.lastPartSn;let u=parseInt(l["LAST-PART"])||t?.lastPartIndex;if(this.hls.config.lowLatencyMode){const h=Math.min(t.age-t.partTarget,t.targetduration);u>=0&&h>t.partTarget&&(u+=1)}const f=n&&N0(n);return new M0(c,u>=0?u:void 0,f)}}}loadPlaylist(e){this.requestScheduled===-1&&(this.requestScheduled=self.performance.now())}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}shouldReloadPlaylist(e){return this.timer===-1&&this.requestScheduled===-1&&this.shouldLoadPlaylist(e)}playlistLoaded(e,t,n){const{details:i,stats:o}=t,l=self.performance.now(),c=o.loading.first?Math.max(0,l-o.loading.first):0;if(i.advancedDateTime=Date.now()-c,i.live||n!=null&&n.live){if(i.reloaded(n),n&&this.log(`live playlist ${e} ${i.advanced?"REFRESHED "+i.lastPartSn+"-"+i.lastPartIndex:i.updated?"UPDATED":"MISSED"}`),n&&i.fragments.length>0&&YT(n,i),!this.canLoad||!i.live)return;let u,f,h;if(i.canBlockReload&&i.endSN&&i.advanced){const S=this.hls.config.lowLatencyMode,A=i.lastPartSn,L=i.endSN,R=i.lastPartIndex,k=R!==-1,C=A===L,F=S?0:R;k?(f=C?L+1:A,h=C?F:R+1):f=L+1;const _=i.age,z=_+i.ageHeader;let te=Math.min(z-i.partTarget,i.targetduration*1.5);if(te>0){if(n&&te>n.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${n.tuneInGoal} to: ${te} with playlist age: ${i.age}`),te=0;else{const U=Math.floor(te/i.targetduration);if(f+=U,h!==void 0){const q=Math.round(te%i.targetduration/i.partTarget);h+=q}this.log(`CDN Tune-in age: ${i.ageHeader}s last advanced ${_.toFixed(2)}s goal: ${te} skip sn ${U} to part ${h}`)}i.tuneInGoal=te}if(u=this.getDeliveryDirectives(i,t.deliveryDirectives,f,h),S||!C){this.loadPlaylist(u);return}}else(i.canBlockReload||i.canSkipUntil)&&(u=this.getDeliveryDirectives(i,t.deliveryDirectives,f,h));const p=this.hls.mainForwardBufferInfo,g=p?p.end-p.len:0,v=(i.edge-g)*1e3,x=JT(i,v);i.updated&&l>this.requestScheduled+x&&(this.requestScheduled=o.loading.start),f!==void 0&&i.canBlockReload?this.requestScheduled=o.loading.first+x-(i.partTarget*1e3||1e3):this.requestScheduled===-1||this.requestScheduled+x<l?this.requestScheduled=l:this.requestScheduled-l<=0&&(this.requestScheduled+=x);let b=this.requestScheduled-l;b=Math.max(0,b),this.log(`reload live playlist ${e} in ${Math.round(b)} ms`),this.timer=self.setTimeout(()=>this.loadPlaylist(u),b)}else this.clearTimer()}getDeliveryDirectives(e,t,n,i){let o=N0(e);return t!=null&&t.skip&&e.deltaUpdateFailed&&(n=t.msn,i=t.part,o=il.No),new M0(n,i,o)}checkRetry(e){const t=e.details,n=El(e),i=e.errorAction,{action:o,retryCount:l=0,retryConfig:c}=i||{},u=!!i&&!!c&&(o===wt.RetryRequest||!i.resolved&&o===wt.SendAlternateToPenaltyBox);if(u){var f;if(this.requestScheduled=-1,l>=c.maxNumRetry)return!1;if(n&&(f=e.context)!=null&&f.deliveryDirectives)this.warn(`Retrying playlist loading ${l+1}/${c.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const h=Yf(c,l);this.timer=self.setTimeout(()=>this.loadPlaylist(),h),this.warn(`Retrying playlist loading ${l+1}/${c.maxNumRetry} after "${t}" in ${h}ms`)}e.levelRetry=!0,i.resolved=!0}return u}}class ji{constructor(e,t=0,n=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=n}sample(e,t){const n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class oL{constructor(e,t,n,i=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new ji(e),this.fast_=new ji(t),this.defaultTTFB_=i,this.ttfb_=new ji(e)}update(e,t){const{slow_:n,fast_:i,ttfb_:o}=this;n.halfLife!==e&&(this.slow_=new ji(e,n.getEstimate(),n.getTotalWeight())),i.halfLife!==t&&(this.fast_=new ji(t,i.getEstimate(),i.getTotalWeight())),o.halfLife!==e&&(this.ttfb_=new ji(e,o.getEstimate(),o.getTotalWeight()))}sample(e,t){e=Math.max(e,this.minDelayMs_);const n=8*t,i=e/1e3,o=n/i;this.fast_.sample(i,o),this.slow_.sample(i,o)}sampleTTFB(e){const t=e/1e3,n=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(n,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}destroy(){}}const Sx={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]},U0={};function aL(r,e,t,n,i,o){const l=r.audioCodec?r.audioGroups:null,c=o?.audioCodec,u=o?.channels,f=u?parseInt(u):c?1/0:2;let h=null;if(l!=null&&l.length)try{l.length===1&&l[0]?h=e.groups[l[0]].channels:h=l.reduce((p,g)=>{if(g){const v=e.groups[g];if(!v)throw new Error(`Audio track group ${g} not found`);Object.keys(v.channels).forEach(x=>{p[x]=(p[x]||0)+v.channels[x]})}return p},{2:0})}catch{return!0}return r.videoCodec!==void 0&&(r.width>1920&&r.height>1088||r.height>1920&&r.width>1088||r.frameRate>Math.max(n,30)||r.videoRange!=="SDR"&&r.videoRange!==t||r.bitrate>Math.max(i,8e6))||!!h&&he(f)&&Object.keys(h).some(p=>parseInt(p)>f)}function lL(r,e,t){const n=r.videoCodec,i=r.audioCodec;if(!n||!i||!t)return Promise.resolve(Sx);const o={width:r.width,height:r.height,bitrate:Math.ceil(Math.max(r.bitrate*.9,r.averageBitrate)),framerate:r.frameRate||30},l=r.videoRange;l!=="SDR"&&(o.transferFunction=l.toLowerCase());const c=n.split(",").map(u=>({type:"media-source",video:xt(xt({},o),{},{contentType:mo(u,"video")})}));return i&&r.audioGroups&&r.audioGroups.forEach(u=>{var f;u&&((f=e.groups[u])==null||f.tracks.forEach(h=>{if(h.groupId===u){const p=h.channels||"",g=parseFloat(p);he(g)&&g>2&&c.push.apply(c,i.split(",").map(v=>({type:"media-source",audio:{contentType:mo(v,"audio"),channels:""+g}})))}}))}),Promise.all(c.map(u=>{const f=cL(u);return U0[f]||(U0[f]=t.decodingInfo(u))})).then(u=>({supported:!u.some(f=>!f.supported),configurations:c,decodingInfoResults:u})).catch(u=>({supported:!1,configurations:c,decodingInfoResults:[],error:u}))}function cL(r){const{audio:e,video:t}=r,n=t||e;if(n){const i=n.contentType.split('"')[1];if(t)return`r${t.height}x${t.width}f${Math.ceil(t.framerate)}${t.transferFunction||"sd"}_${i}_${Math.ceil(t.bitrate/1e5)}`;if(e)return`c${e.channels}${e.spatialRendering?"s":"n"}_${i}`}return""}function uL(){if(typeof matchMedia=="function"){const r=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(r.media!==e.media)return r.matches===!0}return!1}function dL(r,e){let t=!1,n=[];return r&&(t=r!=="SDR",n=[r]),e&&(n=e.allowedVideoRanges||bl.slice(0),t=e.preferHDR!==void 0?e.preferHDR:uL(),t?n=n.filter(i=>i!=="SDR"):n=["SDR"]),{preferHDR:t,allowedVideoRanges:n}}function fL(r,e,t,n,i){const o=Object.keys(r),l=n?.channels,c=n?.audioCodec,u=l&&parseInt(l)===2;let f=!0,h=!1,p=1/0,g=1/0,v=1/0,x=0,b=[];const{preferHDR:S,allowedVideoRanges:A}=dL(e,i);for(let C=o.length;C--;){const F=r[o[C]];f=F.channels[2]>0,p=Math.min(p,F.minHeight),g=Math.min(g,F.minFramerate),v=Math.min(v,F.minBitrate);const _=A.filter(z=>F.videoRanges[z]>0);_.length>0&&(h=!0,b=_)}p=he(p)?p:0,g=he(g)?g:0;const L=Math.max(1080,p),R=Math.max(30,g);return v=he(v)?v:t,t=Math.max(v,t),h||(e=void 0,b=[]),{codecSet:o.reduce((C,F)=>{const _=r[F];if(F===C)return C;if(_.minBitrate>t)return Xr(F,`min bitrate of ${_.minBitrate} > current estimate of ${t}`),C;if(!_.hasDefaultAudio)return Xr(F,"no renditions with default or auto-select sound found"),C;if(c&&F.indexOf(c.substring(0,4))%5!==0)return Xr(F,`audio codec preference "${c}" not found`),C;if(l&&!u){if(!_.channels[l])return Xr(F,`no renditions with ${l} channel sound found (channels options: ${Object.keys(_.channels)})`),C}else if((!c||u)&&f&&_.channels[2]===0)return Xr(F,"no renditions with stereo sound found"),C;return _.minHeight>L?(Xr(F,`min resolution of ${_.minHeight} > maximum of ${L}`),C):_.minFramerate>R?(Xr(F,`min framerate of ${_.minFramerate} > maximum of ${R}`),C):b.some(z=>_.videoRanges[z]>0)?_.maxScore<x?(Xr(F,`max score of ${_.maxScore} < selected max of ${x}`),C):C&&(vl(F)>=vl(C)||_.fragmentError>r[C].fragmentError)?C:(x=_.maxScore,F):(Xr(F,`no variants with VIDEO-RANGE of ${JSON.stringify(b)} found`),C)},void 0),videoRanges:b,preferHDR:S,minFramerate:g,minBitrate:v}}function Xr(r,e){B.log(`[abr] start candidates with "${r}" ignored because ${e}`)}function hL(r){return r.reduce((e,t)=>{let n=e.groups[t.groupId];n||(n=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),n.tracks.push(t);const i=t.channels||"2";return n.channels[i]=(n.channels[i]||0)+1,n.hasDefault=n.hasDefault||t.default,n.hasAutoSelect=n.hasAutoSelect||t.autoselect,n.hasDefault&&(e.hasDefaultAudio=!0),n.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function pL(r,e,t,n){return r.slice(t,n+1).reduce((i,o)=>{if(!o.codecSet)return i;const l=o.audioGroups;let c=i[o.codecSet];c||(i[o.codecSet]=c={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!l,fragmentError:0}),c.minBitrate=Math.min(c.minBitrate,o.bitrate);const u=Math.min(o.height,o.width);return c.minHeight=Math.min(c.minHeight,u),c.minFramerate=Math.min(c.minFramerate,o.frameRate),c.maxScore=Math.max(c.maxScore,o.score),c.fragmentError+=o.fragmentError,c.videoRanges[o.videoRange]=(c.videoRanges[o.videoRange]||0)+1,l&&l.forEach(f=>{if(!f)return;const h=e.groups[f];h&&(c.hasDefaultAudio=c.hasDefaultAudio||e.hasDefaultAudio?h.hasDefault:h.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(h.channels).forEach(p=>{c.channels[p]=(c.channels[p]||0)+h.channels[p]}))}),i},{})}function Br(r,e,t){if("attrs"in r){const n=e.indexOf(r);if(n!==-1)return n}for(let n=0;n<e.length;n++){const i=e[n];if(qi(r,i,t))return n}return-1}function qi(r,e,t){const{groupId:n,name:i,lang:o,assocLang:l,characteristics:c,default:u}=r,f=r.forced;return(n===void 0||e.groupId===n)&&(i===void 0||e.name===i)&&(o===void 0||e.lang===o)&&(o===void 0||e.assocLang===l)&&(u===void 0||e.default===u)&&(f===void 0||e.forced===f)&&(c===void 0||mL(c,e.characteristics))&&(t===void 0||t(r,e))}function mL(r,e=""){const t=r.split(","),n=e.split(",");return t.length===n.length&&!t.some(i=>n.indexOf(i)===-1)}function Ui(r,e){const{audioCodec:t,channels:n}=r;return(t===void 0||(e.audioCodec||"").substring(0,4)===t.substring(0,4))&&(n===void 0||n===(e.channels||"2"))}function gL(r,e,t,n,i){const o=e[n],c=e.reduce((g,v,x)=>{const b=v.uri;return(g[b]||(g[b]=[])).push(x),g},{})[o.uri];c.length>1&&(n=Math.max.apply(Math,c));const u=o.videoRange,f=o.frameRate,h=o.codecSet.substring(0,4),p=H0(e,n,g=>{if(g.videoRange!==u||g.frameRate!==f||g.codecSet.substring(0,4)!==h)return!1;const v=g.audioGroups,x=t.filter(b=>!v||v.indexOf(b.groupId)!==-1);return Br(r,x,i)>-1});return p>-1?p:H0(e,n,g=>{const v=g.audioGroups,x=t.filter(b=>!v||v.indexOf(b.groupId)!==-1);return Br(r,x,i)>-1})}function H0(r,e,t){for(let n=e;n>-1;n--)if(t(r[n]))return n;for(let n=e+1;n<r.length;n++)if(t(r[n]))return n;return-1}class yL{constructor(e){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this._abandonRulesCheck=()=>{const{fragCurrent:t,partCurrent:n,hls:i}=this,{autoLevelEnabled:o,media:l}=i;if(!t||!l)return;const c=performance.now(),u=n?n.stats:t.stats,f=n?n.duration:t.duration,h=c-u.loading.start,p=i.minAutoLevel;if(u.aborted||u.loaded&&u.loaded===u.total||t.level<=p){this.clearTimer(),this._nextAutoLevel=-1;return}if(!o||l.paused||!l.playbackRate||!l.readyState)return;const g=i.mainForwardBufferInfo;if(g===null)return;const v=this.bwEstimator.getEstimateTTFB(),x=Math.abs(l.playbackRate);if(h<=Math.max(v,1e3*(f/(x*2))))return;const b=g.len/x,S=u.loading.first?u.loading.first-u.loading.start:-1,A=u.loaded&&S>-1,L=this.getBwEstimate(),R=i.levels,k=R[t.level],C=u.total||Math.max(u.loaded,Math.round(f*k.averageBitrate/8));let F=A?h-S:h;F<1&&A&&(F=Math.min(h,u.loaded*8/L));const _=A?u.loaded*1e3/F:0,z=_?(C-u.loaded)/_:C*8/L+v/1e3;if(z<=b)return;const te=_?_*8:L;let U=Number.POSITIVE_INFINITY,q;for(q=t.level-1;q>p;q--){const re=R[q].maxBitrate;if(U=this.getTimeToLoadFrag(v/1e3,te,f*re,!R[q].details),U<b)break}if(U>=z||U>f*10)return;i.nextLoadLevel=i.nextAutoLevel=q,A?this.bwEstimator.sample(h-Math.min(v,S),u.loaded):this.bwEstimator.sampleTTFB(h);const le=R[q].maxBitrate;this.getBwEstimate()*this.hls.config.abrBandWidthUpFactor>le&&this.resetEstimator(le),this.clearTimer(),B.warn(`[abr] Fragment ${t.sn}${n?" part "+n.index:""} of level ${t.level} is loading too slowly;
      Time to underbuffer: ${b.toFixed(3)} s
      Estimated load time for current fragment: ${z.toFixed(3)} s
      Estimated load time for down switch fragment: ${U.toFixed(3)} s
      TTFB estimate: ${S|0} ms
      Current BW estimate: ${he(L)?L|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${q} @ ${le|0} bps`),i.trigger(I.FRAG_LOAD_EMERGENCY_ABORTED,{frag:t,part:n,stats:u})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(B.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new oL(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.FRAG_LOADING,this.onFragLoading,this),e.on(I.FRAG_LOADED,this.onFragLoaded,this),e.on(I.FRAG_BUFFERED,this.onFragBuffered,this),e.on(I.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(I.LEVEL_LOADED,this.onLevelLoaded,this),e.on(I.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(I.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(I.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.FRAG_LOADING,this.onFragLoading,this),e.off(I.FRAG_LOADED,this.onFragLoaded,this),e.off(I.FRAG_BUFFERED,this.onFragBuffered,this),e.off(I.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(I.LEVEL_LOADED,this.onLevelLoaded,this),e.off(I.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(I.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(I.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,t){const n=t.frag;if(!this.ignoreFragment(n)){if(!n.bitrateTest){var i;this.fragCurrent=n,this.partCurrent=(i=t.part)!=null?i:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,t){this.clearTimer()}onError(e,t){if(!t.fatal)switch(t.details){case K.BUFFER_ADD_CODEC_ERROR:case K.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case K.FRAG_LOAD_TIMEOUT:{const n=t.frag,{fragCurrent:i,partCurrent:o}=this;if(n&&i&&n.sn===i.sn&&n.level===i.level){const l=performance.now(),c=o?o.stats:n.stats,u=l-c.loading.start,f=c.loading.first?c.loading.first-c.loading.start:-1;if(c.loaded&&f>-1){const p=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(u-Math.min(p,f),c.loaded)}else this.bwEstimator.sampleTTFB(u)}break}}}getTimeToLoadFrag(e,t,n,i){const o=e+n/t,l=i?this.lastLevelLoadSec:0;return o+l}onLevelLoaded(e,t){const n=this.hls.config,{loading:i}=t.stats,o=i.end-i.start;he(o)&&(this.lastLevelLoadSec=o/1e3),t.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD)}onFragLoaded(e,{frag:t,part:n}){const i=n?n.stats:t.stats;if(t.type===Le.MAIN&&this.bwEstimator.sampleTTFB(i.loading.first-i.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),t.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const o=n?n.duration:t.duration,l=this.hls.levels[t.level],c=(l.loaded?l.loaded.bytes:0)+i.loaded,u=(l.loaded?l.loaded.duration:0)+o;l.loaded={bytes:c,duration:u},l.realBitrate=Math.round(8*c/u)}if(t.bitrateTest){const o={stats:i,frag:t,part:n,id:t.type};this.onFragBuffered(I.FRAG_BUFFERED,o),t.bitrateTest=!1}else this.lastLoadedFragLevel=t.level}}onFragBuffered(e,t){const{frag:n,part:i}=t,o=i!=null&&i.stats.loaded?i.stats:n.stats;if(o.aborted||this.ignoreFragment(n))return;const l=o.parsing.end-o.loading.start-Math.min(o.loading.first-o.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(l,o.loaded),o.bwEstimate=this.getBwEstimate(),n.bitrateTest?this.bitrateTestDelay=l/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==Le.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:t}=this.hls,n=this.getBwEstimate(),i=this.hls.config.maxStarvationDelay,o=this.findBestLevel(n,t,e,0,i,1,1);if(o>-1)return o;const l=this.hls.firstLevel,c=Math.min(Math.max(l,t),e);return B.warn(`[abr] Could not find best starting auto level. Defaulting to first in playlist ${l} clamped to ${c}`),c}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,n=this.bwEstimator.canEstimate(),i=this.lastLoadedFragLevel>-1;if(e!==-1&&(!n||!i||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const o=n&&i?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const l=this.hls.levels;if(l.length>Math.max(e,o)&&l[e].loadError<=l[o].loadError)return e}return this._nextAutoLevel=o,this.nextAutoLevelKey=this.getAutoLevelKey(),o}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:n}=this,{maxAutoLevel:i,config:o,minAutoLevel:l}=n,c=t?t.duration:e?e.duration:0,u=this.getBwEstimate(),f=this.getStarvationDelay();let h=o.abrBandWidthFactor,p=o.abrBandWidthUpFactor;if(f){const S=this.findBestLevel(u,l,i,f,0,h,p);if(S>=0)return S}let g=c?Math.min(c,o.maxStarvationDelay):o.maxStarvationDelay;if(!f){const S=this.bitrateTestDelay;S&&(g=(c?Math.min(c,o.maxLoadingDelay):o.maxLoadingDelay)-S,B.info(`[abr] bitrate test took ${Math.round(1e3*S)}ms, set first fragment max fetchDuration to ${Math.round(1e3*g)} ms`),h=p=1)}const v=this.findBestLevel(u,l,i,f,g,h,p);if(B.info(`[abr] ${f?"rebuffering expected":"buffer is empty"}, optimal quality level ${v}`),v>-1)return v;const x=n.levels[l],b=n.levels[n.loadLevel];return x?.bitrate<b?.bitrate?l:n.loadLevel}getStarvationDelay(){const e=this.hls,t=e.media;if(!t)return 1/0;const n=t&&t.playbackRate!==0?Math.abs(t.playbackRate):1,i=e.mainForwardBufferInfo;return(i?i.len:0)/n}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,t,n,i,o,l,c){var u;const f=i+o,h=this.lastLoadedFragLevel,p=h===-1?this.hls.firstLevel:h,{fragCurrent:g,partCurrent:v}=this,{levels:x,allAudioTracks:b,loadLevel:S,config:A}=this.hls;if(x.length===1)return 0;const L=x[p],R=!!(L!=null&&(u=L.details)!=null&&u.live),k=S===-1||h===-1;let C,F="SDR",_=L?.frameRate||0;const{audioPreference:z,videoPreference:te}=A,U=this.audioTracksByGroup||(this.audioTracksByGroup=hL(b));if(k){if(this.firstSelection!==-1)return this.firstSelection;const de=this.codecTiers||(this.codecTiers=pL(x,U,t,n)),ce=fL(de,F,e,z,te),{codecSet:xe,videoRanges:Z,minFramerate:X,minBitrate:V,preferHDR:P}=ce;C=xe,F=P?Z[Z.length-1]:Z[0],_=X,e=Math.max(e,V),B.log(`[abr] picked start tier ${JSON.stringify(ce)}`)}else C=L?.codecSet,F=L?.videoRange;const q=v?v.duration:g?g.duration:0,le=this.bwEstimator.getEstimateTTFB()/1e3,re=[];for(let de=n;de>=t;de--){var pe;const ce=x[de],xe=de>p;if(!ce)continue;if(A.useMediaCapabilities&&!ce.supportedResult&&!ce.supportedPromise){const ge=navigator.mediaCapabilities;typeof ge?.decodingInfo=="function"&&aL(ce,U,F,_,e,z)?(ce.supportedPromise=lL(ce,U,ge),ce.supportedPromise.then(we=>{if(!this.hls)return;ce.supportedResult=we;const Ee=this.hls.levels,De=Ee.indexOf(ce);we.error?B.warn(`[abr] MediaCapabilities decodingInfo error: "${we.error}" for level ${De} ${JSON.stringify(we)}`):we.supported||(B.warn(`[abr] Unsupported MediaCapabilities decodingInfo result for level ${De} ${JSON.stringify(we)}`),De>-1&&Ee.length>1&&(B.log(`[abr] Removing unsupported level ${De}`),this.hls.removeLevel(De)))})):ce.supportedResult=Sx}if(C&&ce.codecSet!==C||F&&ce.videoRange!==F||xe&&_>ce.frameRate||!xe&&_>0&&_<ce.frameRate||ce.supportedResult&&!((pe=ce.supportedResult.decodingInfoResults)!=null&&pe[0].smooth)){re.push(de);continue}const Z=ce.details,X=(v?Z?.partTarget:Z?.averagetargetduration)||q;let V;xe?V=c*e:V=l*e;const P=q&&i>=q*2&&o===0?x[de].averageBitrate:x[de].maxBitrate,G=this.getTimeToLoadFrag(le,V,P*X,Z===void 0);if(V>=P&&(de===h||ce.loadError===0&&ce.fragmentError===0)&&(G<=le||!he(G)||R&&!this.bitrateTestDelay||G<f)){const ge=this.forcedAutoLevel;return de!==S&&(ge===-1||ge!==S)&&(re.length&&B.trace(`[abr] Skipped level(s) ${re.join(",")} of ${n} max with CODECS and VIDEO-RANGE:"${x[re[0]].codecs}" ${x[re[0]].videoRange}; not compatible with "${L.codecs}" ${F}`),B.info(`[abr] switch candidate:${p}->${de} adjustedbw(${Math.round(V)})-bitrate=${Math.round(V-P)} ttfb:${le.toFixed(1)} avgDuration:${X.toFixed(1)} maxFetchDuration:${f.toFixed(1)} fetchDuration:${G.toFixed(1)} firstSelection:${k} codecSet:${C} videoRange:${F} hls.loadLevel:${S}`)),k&&(this.firstSelection=de),de}}return-1}set nextAutoLevel(e){const{maxAutoLevel:t,minAutoLevel:n}=this.hls,i=Math.min(Math.max(e,n),t);this._nextAutoLevel!==i&&(this.nextAutoLevelKey="",this._nextAutoLevel=i)}}class vL{constructor(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}var yt={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class xL{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(I.BUFFER_APPENDED,this.onBufferAppended,this),e.on(I.FRAG_BUFFERED,this.onFragBuffered,this),e.on(I.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:e}=this;e.off(I.BUFFER_APPENDED,this.onBufferAppended,this),e.off(I.FRAG_BUFFERED,this.onFragBuffered,this),e.off(I.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const n=this.activePartLists[t];if(n)for(let i=n.length;i--;){const o=n[i];if(!o)break;const l=o.end;if(o.start<=e&&l!==null&&e<=l)return o}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){const{fragments:n}=this,i=Object.keys(n);for(let o=i.length;o--;){const l=n[i[o]];if(l?.body.type===t&&l.buffered){const c=l.body;if(c.start<=e&&e<=c.end)return c}}return null}detectEvictedFragments(e,t,n,i){this.timeRanges&&(this.timeRanges[e]=t);const o=i?.fragment.sn||-1;Object.keys(this.fragments).forEach(l=>{const c=this.fragments[l];if(!c||o>=c.body.sn)return;if(!c.buffered&&!c.loaded){c.body.type===n&&this.removeFragment(c.body);return}const u=c.range[e];u&&u.time.some(f=>{const h=!this.isTimeBuffered(f.startPTS,f.endPTS,t);return h&&this.removeFragment(c.body),h})})}detectPartialFragments(e){const t=this.timeRanges,{frag:n,part:i}=e;if(!t||n.sn==="initSegment")return;const o=Hi(n),l=this.fragments[o];if(!l||l.buffered&&n.gap)return;const c=!n.relurl;Object.keys(t).forEach(u=>{const f=n.elementaryStreams[u];if(!f)return;const h=t[u],p=c||f.partial===!0;l.range[u]=this.getBufferedTimes(n,i,p,h)}),l.loaded=null,Object.keys(l.range).length?(l.buffered=!0,(l.body.endList=n.endList||l.body.endList)&&(this.endListFragments[l.body.type]=l),Wa(l)||this.removeParts(n.sn-1,n.type)):this.removeFragment(l.body)}removeParts(e,t){const n=this.activePartLists[t];n&&(this.activePartLists[t]=n.filter(i=>i.fragment.sn>=e))}fragBuffered(e,t){const n=Hi(e);let i=this.fragments[n];!i&&t&&(i=this.fragments[n]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),i&&(i.loaded=null,i.buffered=!0)}getBufferedTimes(e,t,n,i){const o={time:[],partial:n},l=e.start,c=e.end,u=e.minEndPTS||c,f=e.maxStartPTS||l;for(let h=0;h<i.length;h++){const p=i.start(h)-this.bufferPadding,g=i.end(h)+this.bufferPadding;if(f>=p&&u<=g){o.time.push({startPTS:Math.max(l,i.start(h)),endPTS:Math.min(c,i.end(h))});break}else if(l<g&&c>p){const v=Math.max(l,i.start(h)),x=Math.min(c,i.end(h));x>v&&(o.partial=!0,o.time.push({startPTS:v,endPTS:x}))}else if(c<=p)break}return o}getPartialFragment(e){let t=null,n,i,o,l=0;const{bufferPadding:c,fragments:u}=this;return Object.keys(u).forEach(f=>{const h=u[f];h&&Wa(h)&&(i=h.body.start-c,o=h.body.end+c,e>=i&&e<=o&&(n=Math.min(e-i,o-e),l<=n&&(t=h.body,l=n)))}),t}isEndListAppended(e){const t=this.endListFragments[e];return t!==void 0&&(t.buffered||Wa(t))}getState(e){const t=Hi(e),n=this.fragments[t];return n?n.buffered?Wa(n)?yt.PARTIAL:yt.OK:yt.APPENDING:yt.NOT_LOADED}isTimeBuffered(e,t,n){let i,o;for(let l=0;l<n.length;l++){if(i=n.start(l)-this.bufferPadding,o=n.end(l)+this.bufferPadding,e>=i&&t<=o)return!0;if(t<=i)return!1}return!1}onFragLoaded(e,t){const{frag:n,part:i}=t;if(n.sn==="initSegment"||n.bitrateTest)return;const o=i?null:t,l=Hi(n);this.fragments[l]={body:n,appendedPTS:null,loaded:o,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:n,part:i,timeRanges:o}=t;if(n.sn==="initSegment")return;const l=n.type;if(i){let c=this.activePartLists[l];c||(this.activePartLists[l]=c=[]),c.push(i)}this.timeRanges=o,Object.keys(o).forEach(c=>{const u=o[c];this.detectEvictedFragments(c,u,l,i)})}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=Hi(e);return!!this.fragments[t]}hasParts(e){var t;return!!((t=this.activePartLists[e])!=null&&t.length)}removeFragmentsInRange(e,t,n,i,o){i&&!this.hasGaps||Object.keys(this.fragments).forEach(l=>{const c=this.fragments[l];if(!c)return;const u=c.body;u.type!==n||i&&!u.gap||u.start<t&&u.end>e&&(c.buffered||o)&&this.removeFragment(u)})}removeFragment(e){const t=Hi(e);e.stats.loaded=0,e.clearElementaryStreamInfo();const n=this.activePartLists[e.type];if(n){const i=e.sn;this.activePartLists[e.type]=n.filter(o=>o.fragment.sn!==i)}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1}}function Wa(r){var e,t,n;return r.buffered&&(r.body.gap||((e=r.range.video)==null?void 0:e.partial)||((t=r.range.audio)==null?void 0:t.partial)||((n=r.range.audiovideo)==null?void 0:n.partial))}function Hi(r){return`${r.type}_${r.level}_${r.sn}`}const bL={length:0,start:()=>0,end:()=>0};class Ve{static isBuffered(e,t){try{if(e){const n=Ve.getBuffered(e);for(let i=0;i<n.length;i++)if(t>=n.start(i)&&t<=n.end(i))return!0}}catch{}return!1}static bufferInfo(e,t,n){try{if(e){const i=Ve.getBuffered(e),o=[];let l;for(l=0;l<i.length;l++)o.push({start:i.start(l),end:i.end(l)});return this.bufferedInfo(o,t,n)}}catch{}return{len:0,start:t,end:t,nextStart:void 0}}static bufferedInfo(e,t,n){t=Math.max(0,t),e.sort(function(f,h){const p=f.start-h.start;return p||h.end-f.end});let i=[];if(n)for(let f=0;f<e.length;f++){const h=i.length;if(h){const p=i[h-1].end;e[f].start-p<n?e[f].end>p&&(i[h-1].end=e[f].end):i.push(e[f])}else i.push(e[f])}else i=e;let o=0,l,c=t,u=t;for(let f=0;f<i.length;f++){const h=i[f].start,p=i[f].end;if(t+n>=h&&t<p)c=h,u=p,o=u-t;else if(t+n<h){l=h;break}}return{len:o,start:c||0,end:u||0,nextStart:l}}static getBuffered(e){try{return e.buffered}catch(t){return B.log("failed to get media.buffered",t),bL}}}class Xf{constructor(e,t,n,i=0,o=-1,l=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=Va(),this.buffering={audio:Va(),video:Va(),audiovideo:Va()},this.level=e,this.sn=t,this.id=n,this.size=i,this.part=o,this.partial=l}}function Va(){return{start:0,executeStart:0,executeEnd:0,end:0}}function sl(r,e){for(let n=0,i=r.length;n<i;n++){var t;if(((t=r[n])==null?void 0:t.cc)===e)return r[n]}return null}function EL(r,e,t){return!!(e&&(t.endCC>t.startCC||r&&r.cc<t.startCC))}function SL(r,e){const t=r.fragments,n=e.fragments;if(!n.length||!t.length){B.log("No fragments to align");return}const i=sl(t,n[0].cc);if(!i||i&&!i.startPTS){B.log("No frag in previous level to align on");return}return i}function $0(r,e){if(r){const t=r.start+e;r.start=r.startPTS=t,r.endPTS=t+r.duration}}function wx(r,e){const t=e.fragments;for(let n=0,i=t.length;n<i;n++)$0(t[n],r);e.fragmentHint&&$0(e.fragmentHint,r),e.alignedSliding=!0}function wL(r,e,t){e&&(IL(r,t,e),!t.alignedSliding&&e&&Il(t,e),!t.alignedSliding&&e&&!t.skippedSegments&&vx(e,t))}function IL(r,e,t){if(EL(r,t,e)){const n=SL(t,e);n&&he(n.start)&&(B.log(`Adjusting PTS using last level due to CC increase within current level ${e.url}`),wx(n.start,e))}}function Il(r,e){if(!r.hasProgramDateTime||!e.hasProgramDateTime)return;const t=r.fragments,n=e.fragments;if(!t.length||!n.length)return;let i,o;const l=Math.min(e.endCC,r.endCC);e.startCC<l&&r.startCC<l&&(i=sl(n,l),o=sl(t,l)),(!i||!o)&&(i=n[Math.floor(n.length/2)],o=sl(t,i.cc)||t[Math.floor(t.length/2)]);const c=i.programDateTime,u=o.programDateTime;if(!c||!u)return;const f=(u-c)/1e3-(o.start-i.start);wx(f,r)}const G0=Math.pow(2,17);class AL{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const n=e.url;if(!n)return Promise.reject(new Jr({type:Re.NETWORK_ERROR,details:K.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${n?"part list":"url"}`),networkDetails:null}));this.abort();const i=this.config,o=i.fLoader,l=i.loader;return new Promise((c,u)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(v=>v[0]==="GAP")){u(V0(e));return}else e.gap=!1;const f=this.loader=e.loader=o?new o(i):new l(i),h=W0(e),p=j0(i.fragLoadPolicy.default),g={loadPolicy:p,timeout:p.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:G0};e.stats=f.stats,f.load(h,g,{onSuccess:(v,x,b,S)=>{this.resetLoader(e,f);let A=v.data;b.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(A.slice(0,16)),A=A.slice(16)),c({frag:e,part:null,payload:A,networkDetails:S})},onError:(v,x,b,S)=>{this.resetLoader(e,f),u(new Jr({type:Re.NETWORK_ERROR,details:K.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:xt({url:n,data:void 0},v),error:new Error(`HTTP Error ${v.code} ${v.text}`),networkDetails:b,stats:S}))},onAbort:(v,x,b)=>{this.resetLoader(e,f),u(new Jr({type:Re.NETWORK_ERROR,details:K.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:b,stats:v}))},onTimeout:(v,x,b)=>{this.resetLoader(e,f),u(new Jr({type:Re.NETWORK_ERROR,details:K.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${g.timeout}ms`),networkDetails:b,stats:v}))},onProgress:(v,x,b,S)=>{t&&t({frag:e,part:null,payload:b,networkDetails:S})}})})}loadPart(e,t,n){this.abort();const i=this.config,o=i.fLoader,l=i.loader;return new Promise((c,u)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap){u(V0(e,t));return}const f=this.loader=e.loader=o?new o(i):new l(i),h=W0(e,t),p=j0(i.fragLoadPolicy.default),g={loadPolicy:p,timeout:p.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:G0};t.stats=f.stats,f.load(h,g,{onSuccess:(v,x,b,S)=>{this.resetLoader(e,f),this.updateStatsFromPart(e,t);const A={frag:e,part:t,payload:v.data,networkDetails:S};n(A),c(A)},onError:(v,x,b,S)=>{this.resetLoader(e,f),u(new Jr({type:Re.NETWORK_ERROR,details:K.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:xt({url:h.url,data:void 0},v),error:new Error(`HTTP Error ${v.code} ${v.text}`),networkDetails:b,stats:S}))},onAbort:(v,x,b)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,f),u(new Jr({type:Re.NETWORK_ERROR,details:K.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:b,stats:v}))},onTimeout:(v,x,b)=>{this.resetLoader(e,f),u(new Jr({type:Re.NETWORK_ERROR,details:K.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error(`Timeout after ${g.timeout}ms`),networkDetails:b,stats:v}))}})})}updateStatsFromPart(e,t){const n=e.stats,i=t.stats,o=i.total;if(n.loaded+=i.loaded,o){const u=Math.round(e.duration/t.duration),f=Math.min(Math.round(n.loaded/o),u),p=(u-f)*Math.round(n.loaded/f);n.total=n.loaded+p}else n.total=Math.max(n.loaded,n.total);const l=n.loading,c=i.loading;l.start?l.first+=c.first-c.start:(l.start=c.start,l.first=c.first),l.end=c.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function W0(r,e=null){const t=e||r,n={frag:r,part:e,responseType:"arraybuffer",url:t.url,headers:{},rangeStart:0,rangeEnd:0},i=t.byteRangeStartOffset,o=t.byteRangeEndOffset;if(he(i)&&he(o)){var l;let c=i,u=o;if(r.sn==="initSegment"&&((l=r.decryptdata)==null?void 0:l.method)==="AES-128"){const f=o-i;f%16&&(u=o+(16-f%16)),i!==0&&(n.resetIV=!0,c=i-16)}n.rangeStart=c,n.rangeEnd=u}return n}function V0(r,e){const t=new Error(`GAP ${r.gap?"tag":"attribute"} found`),n={type:Re.MEDIA_ERROR,details:K.FRAG_GAP,fatal:!1,frag:r,error:t,networkDetails:null};return e&&(n.part=e),(e||r).stats.aborted=!0,new Jr(n)}class Jr extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class TL{constructor(e,t){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=t}decrypt(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)}}class LL{constructor(e,t){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=t}expandKey(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}function RL(r){const e=r.byteLength,t=e&&new DataView(r.buffer).getUint8(e-1);return t?ai(r,0,e-t):r}class CL{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),n=new Uint32Array(4);for(let i=0;i<4;i++)n[i]=t.getUint32(i*4);return n}initTable(){const e=this.sBox,t=this.invSBox,n=this.subMix,i=n[0],o=n[1],l=n[2],c=n[3],u=this.invSubMix,f=u[0],h=u[1],p=u[2],g=u[3],v=new Uint32Array(256);let x=0,b=0,S=0;for(S=0;S<256;S++)S<128?v[S]=S<<1:v[S]=S<<1^283;for(S=0;S<256;S++){let A=b^b<<1^b<<2^b<<3^b<<4;A=A>>>8^A&255^99,e[x]=A,t[A]=x;const L=v[x],R=v[L],k=v[R];let C=v[A]*257^A*16843008;i[x]=C<<24|C>>>8,o[x]=C<<16|C>>>16,l[x]=C<<8|C>>>24,c[x]=C,C=k*16843009^R*65537^L*257^x*16843008,f[A]=C<<24|C>>>8,h[A]=C<<16|C>>>16,p[A]=C<<8|C>>>24,g[A]=C,x?(x=L^v[v[v[k^L]]],b^=v[v[b]]):x=b=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let n=!0,i=0;for(;i<t.length&&n;)n=t[i]===this.key[i],i++;if(n)return;this.key=t;const o=this.keySize=t.length;if(o!==4&&o!==6&&o!==8)throw new Error("Invalid aes key size="+o);const l=this.ksRows=(o+6+1)*4;let c,u;const f=this.keySchedule=new Uint32Array(l),h=this.invKeySchedule=new Uint32Array(l),p=this.sBox,g=this.rcon,v=this.invSubMix,x=v[0],b=v[1],S=v[2],A=v[3];let L,R;for(c=0;c<l;c++){if(c<o){L=f[c]=t[c];continue}R=L,c%o===0?(R=R<<8|R>>>24,R=p[R>>>24]<<24|p[R>>>16&255]<<16|p[R>>>8&255]<<8|p[R&255],R^=g[c/o|0]<<24):o>6&&c%o===4&&(R=p[R>>>24]<<24|p[R>>>16&255]<<16|p[R>>>8&255]<<8|p[R&255]),f[c]=L=(f[c-o]^R)>>>0}for(u=0;u<l;u++)c=l-u,u&3?R=f[c]:R=f[c-4],u<4||c<=4?h[u]=R:h[u]=x[p[R>>>24]]^b[p[R>>>16&255]]^S[p[R>>>8&255]]^A[p[R&255]],h[u]=h[u]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,t,n){const i=this.keySize+6,o=this.invKeySchedule,l=this.invSBox,c=this.invSubMix,u=c[0],f=c[1],h=c[2],p=c[3],g=this.uint8ArrayToUint32Array_(n);let v=g[0],x=g[1],b=g[2],S=g[3];const A=new Int32Array(e),L=new Int32Array(A.length);let R,k,C,F,_,z,te,U,q,le,re,pe,de,ce;const xe=this.networkToHostOrderSwap;for(;t<A.length;){for(q=xe(A[t]),le=xe(A[t+1]),re=xe(A[t+2]),pe=xe(A[t+3]),_=q^o[0],z=pe^o[1],te=re^o[2],U=le^o[3],de=4,ce=1;ce<i;ce++)R=u[_>>>24]^f[z>>16&255]^h[te>>8&255]^p[U&255]^o[de],k=u[z>>>24]^f[te>>16&255]^h[U>>8&255]^p[_&255]^o[de+1],C=u[te>>>24]^f[U>>16&255]^h[_>>8&255]^p[z&255]^o[de+2],F=u[U>>>24]^f[_>>16&255]^h[z>>8&255]^p[te&255]^o[de+3],_=R,z=k,te=C,U=F,de=de+4;R=l[_>>>24]<<24^l[z>>16&255]<<16^l[te>>8&255]<<8^l[U&255]^o[de],k=l[z>>>24]<<24^l[te>>16&255]<<16^l[U>>8&255]<<8^l[_&255]^o[de+1],C=l[te>>>24]<<24^l[U>>16&255]<<16^l[_>>8&255]<<8^l[z&255]^o[de+2],F=l[U>>>24]<<24^l[_>>16&255]<<16^l[z>>8&255]<<8^l[te&255]^o[de+3],L[t]=xe(R^v),L[t+1]=xe(F^x),L[t+2]=xe(C^b),L[t+3]=xe(k^S),v=q,x=le,b=re,S=pe,t=t+4}return L.buffer}}const DL=16;class Zf{constructor(e,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const n=self.crypto;n&&(this.subtle=n.subtle||n.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const n=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?RL(n):n}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,n){return this.useSoftware?new Promise((i,o)=>{this.softwareDecrypt(new Uint8Array(e),t,n);const l=this.flush();l?i(l.buffer):o(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),t,n)}softwareDecrypt(e,t,n){const{currentIV:i,currentResult:o,remainderData:l}=this;this.logOnce("JS AES decrypt"),l&&(e=dr(l,e),this.remainderData=null);const c=this.getValidChunk(e);if(!c.length)return null;i&&(n=i);let u=this.softwareDecrypter;u||(u=this.softwareDecrypter=new CL),u.expandKey(t);const f=o;return this.currentResult=u.decrypt(c.buffer,0,n),this.currentIV=ai(c,-16).buffer,f||null}webCryptoDecrypt(e,t,n){if(this.key!==t||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,t,n));this.key=t,this.fastAesKey=new LL(this.subtle,t)}return this.fastAesKey.expandKey().then(i=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new TL(this.subtle,new Uint8Array(n)).decrypt(e.buffer,i)):Promise.reject(new Error("web crypto not initialized"))).catch(i=>(B.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${i.name}: ${i.message}`),this.onWebCryptoError(e,t,n)))}onWebCryptoError(e,t,n){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,n);const i=this.flush();if(i)return i.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")}getValidChunk(e){let t=e;const n=e.length-e.length%DL;return n!==e.length&&(t=ai(e,0,n),this.remainderData=ai(e,n)),t}logOnce(e){this.logEnabled&&(B.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const kL={toString:function(r){let e="";const t=r.length;for(let n=0;n<t;n++)e+=`[${r.start(n).toFixed(3)}-${r.end(n).toFixed(3)}]`;return e}},J={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class Jf extends vL{constructor(e,t,n,i,o){super(),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=J.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.loadedmetadata=!1,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.onvseeking=null,this.onvended=null,this.logPrefix="",this.log=void 0,this.warn=void 0,this.playlistType=o,this.logPrefix=i,this.log=B.log.bind(B,`${i}:`),this.warn=B.warn.bind(B,`${i}:`),this.hls=e,this.fragmentLoader=new AL(e.config),this.keyLoader=n,this.fragmentTracker=t,this.config=e.config,this.decrypter=new Zf(e.config),e.on(I.MANIFEST_LOADED,this.onManifestLoaded,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=J.STOPPED}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}_streamEnded(e,t){if(t.live||e.nextStart||!e.end||!this.media)return!1;const n=t.partList;if(n!=null&&n.length){const o=n[n.length-1];return Ve.isBuffered(this.media,o.start+o.duration/2)}const i=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(i)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null){var e;return(e=this.levelLastLoaded)==null?void 0:e.details}}onMediaAttached(e,t){const n=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),n.addEventListener("seeking",this.onvseeking),n.addEventListener("ended",this.onvended);const i=this.config;this.levels&&i.autoStartLoad&&this.state===J.STOPPED&&this.startLoad(i.startPosition)}onMediaDetaching(){const e=this.media;e!=null&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&this.onvseeking&&this.onvended&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}onMediaSeeking(){const{config:e,fragCurrent:t,media:n,mediaBuffer:i,state:o}=this,l=n?n.currentTime:0,c=Ve.bufferInfo(i||n,l,e.maxBufferHole);if(this.log(`media seeking to ${he(l)?l.toFixed(3):l}, state: ${o}`),this.state===J.ENDED)this.resetLoadingState();else if(t){const u=e.maxFragLookUpTolerance,f=t.start-u,h=t.start+t.duration+u;if(!c.len||h<c.start||f>c.end){const p=l>h;(l<f||p)&&(p&&t.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),t.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}n&&(this.fragmentTracker.removeFragmentsInRange(l,1/0,this.playlistType,!0),this.lastCurrentTime=l),!this.loadedmetadata&&!c.len&&(this.nextLoadPosition=this.startPosition=l),this.tickImmediate()}onMediaEnded(){this.startPosition=this.lastCurrentTime=0}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset,this.initPTS=[]}onHandlerDestroying(){this.hls.off(I.MANIFEST_LOADED,this.onManifestLoaded,this),this.stopLoad(),super.onHandlerDestroying(),this.hls=null}onHandlerDestroyed(){this.state=J.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,n){this._loadFragForPlayback(e,t,n)}_loadFragForPlayback(e,t,n){const i=o=>{if(this.fragContextChanged(e)){this.warn(`Fragment ${e.sn}${o.part?" p: "+o.part.index:""} of level ${e.level} was dropped during download.`),this.fragmentTracker.removeFragment(e);return}e.stats.chunkCount++,this._handleFragmentLoadProgress(o)};this._doFragLoad(e,t,n,i).then(o=>{if(!o)return;const l=this.state;if(this.fragContextChanged(e)){(l===J.FRAG_LOADING||!this.fragCurrent&&l===J.PARSING)&&(this.fragmentTracker.removeFragment(e),this.state=J.IDLE);return}"payload"in o&&(this.log(`Loaded fragment ${e.sn} of level ${e.level}`),this.hls.trigger(I.FRAG_LOADED,o)),this._handleFragmentLoadComplete(o)}).catch(o=>{this.state===J.STOPPED||this.state===J.ERROR||(this.warn(`Frag error: ${o?.message||o}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var t;const{fragmentTracker:n}=this;if(n.getState(e)===yt.APPENDING){const o=e.type,l=this.getFwdBufferInfo(this.mediaBuffer,o),c=Math.max(e.duration,l?l.len:this.config.maxBufferLength),u=this.backtrackFragment;((u?e.sn-u.sn:0)===1||this.reduceMaxBufferLength(c,e.duration))&&n.removeFragment(e)}else((t=this.mediaBuffer)==null?void 0:t.buffered.length)===0?n.removeAllFragments():n.hasParts(e.type)&&(n.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),n.getState(e)===yt.PARTIAL&&n.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}flushMainBuffer(e,t,n=null){if(!(e-t))return;const i={startOffset:e,endOffset:t,type:n};this.hls.trigger(I.BUFFER_FLUSHING,i)}_loadInitSegment(e,t){this._doFragLoad(e,t).then(n=>{if(!n||this.fragContextChanged(e)||!this.levels)throw new Error("init load aborted");return n}).then(n=>{const{hls:i}=this,{payload:o}=n,l=e.decryptdata;if(o&&o.byteLength>0&&l!=null&&l.key&&l.iv&&l.method==="AES-128"){const c=self.performance.now();return this.decrypter.decrypt(new Uint8Array(o),l.key.buffer,l.iv.buffer).catch(u=>{throw i.trigger(I.ERROR,{type:Re.MEDIA_ERROR,details:K.FRAG_DECRYPT_ERROR,fatal:!1,error:u,reason:u.message,frag:e}),u}).then(u=>{const f=self.performance.now();return i.trigger(I.FRAG_DECRYPTED,{frag:e,payload:u,stats:{tstart:c,tdecrypt:f}}),n.payload=u,this.completeInitSegmentLoad(n)})}return this.completeInitSegmentLoad(n)}).catch(n=>{this.state===J.STOPPED||this.state===J.ERROR||(this.warn(n),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:t}=this;if(!t)throw new Error("init load aborted, missing levels");const n=e.frag.stats;this.state=J.IDLE,e.frag.data=new Uint8Array(e.payload),n.parsing.start=n.buffering.start=self.performance.now(),n.parsing.end=n.buffering.end=self.performance.now(),this.tick()}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.sn!==t.sn||e.level!==t.level}fragBufferedComplete(e,t){var n,i,o,l;const c=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.playlistType===Le.MAIN?"level":"track"} ${e.level} (frag:[${((n=e.startPTS)!=null?n:NaN).toFixed(3)}-${((i=e.endPTS)!=null?i:NaN).toFixed(3)}] > buffer:${c?kL.toString(Ve.getBuffered(c)):"(detached)"})`),e.sn!=="initSegment"){var u;if(e.type!==Le.SUBTITLE){const h=e.elementaryStreams;if(!Object.keys(h).some(p=>!!h[p])){this.state=J.IDLE;return}}const f=(u=this.levels)==null?void 0:u[e.level];f!=null&&f.fragmentError&&(this.log(`Resetting level fragment error count of ${f.fragmentError} on frag buffered`),f.fragmentError=0)}this.state=J.IDLE,c&&(!this.loadedmetadata&&e.type==Le.MAIN&&c.buffered.length&&((o=this.fragCurrent)==null?void 0:o.sn)===((l=this.fragPrevious)==null?void 0:l.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())}seekToStartPos(){}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:n,part:i,partsLoaded:o}=e,l=!o||o.length===0||o.some(u=>!u),c=new Xf(n.level,n.sn,n.stats.chunkCount+1,0,i?i.index:-1,!l);t.flush(c)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t,n=null,i){var o;const l=t?.details;if(!this.levels||!l)throw new Error(`frag load aborted, missing level${l?"":" detail"}s`);let c=null;if(e.encrypted&&!((o=e.decryptdata)!=null&&o.key)?(this.log(`Loading key for ${e.sn} of [${l.startSN}-${l.endSN}], ${this.logPrefix==="[stream-controller]"?"level":"track"} ${e.level}`),this.state=J.KEY_LOADING,this.fragCurrent=e,c=this.keyLoader.load(e).then(h=>{if(!this.fragContextChanged(h.frag))return this.hls.trigger(I.KEY_LOADED,h),this.state===J.KEY_LOADING&&(this.state=J.IDLE),h}),this.hls.trigger(I.KEY_LOADING,{frag:e}),this.fragCurrent===null&&(c=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))):!e.encrypted&&l.encryptedFragments.length&&this.keyLoader.loadClear(e,l.encryptedFragments),n=Math.max(e.start,n||0),this.config.lowLatencyMode&&e.sn!=="initSegment"){const h=l.partList;if(h&&i){n>e.end&&l.fragmentHint&&(e=l.fragmentHint);const p=this.getNextPart(h,e,n);if(p>-1){const g=h[p];this.log(`Loading part sn: ${e.sn} p: ${g.index} cc: ${e.cc} of playlist [${l.startSN}-${l.endSN}] parts [0-${p}-${h.length-1}] ${this.logPrefix==="[stream-controller]"?"level":"track"}: ${e.level}, target: ${parseFloat(n.toFixed(3))}`),this.nextLoadPosition=g.start+g.duration,this.state=J.FRAG_LOADING;let v;return c?v=c.then(x=>!x||this.fragContextChanged(x.frag)?null:this.doFragPartsLoad(e,g,t,i)).catch(x=>this.handleFragLoadError(x)):v=this.doFragPartsLoad(e,g,t,i).catch(x=>this.handleFragLoadError(x)),this.hls.trigger(I.FRAG_LOADING,{frag:e,part:g,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):v}else if(!e.url||this.loadedEndOfParts(h,n))return Promise.resolve(null)}}this.log(`Loading fragment ${e.sn} cc: ${e.cc} ${l?"of ["+l.startSN+"-"+l.endSN+"] ":""}${this.logPrefix==="[stream-controller]"?"level":"track"}: ${e.level}, target: ${parseFloat(n.toFixed(3))}`),he(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=J.FRAG_LOADING;const u=this.config.progressive;let f;return u&&c?f=c.then(h=>!h||this.fragContextChanged(h?.frag)?null:this.fragmentLoader.load(e,i)).catch(h=>this.handleFragLoadError(h)):f=Promise.all([this.fragmentLoader.load(e,u?i:void 0),c]).then(([h])=>(!u&&h&&i&&i(h),h)).catch(h=>this.handleFragLoadError(h)),this.hls.trigger(I.FRAG_LOADING,{frag:e,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):f}doFragPartsLoad(e,t,n,i){return new Promise((o,l)=>{var c;const u=[],f=(c=n.details)==null?void 0:c.partList,h=p=>{this.fragmentLoader.loadPart(e,p,i).then(g=>{u[p.index]=g;const v=g.part;this.hls.trigger(I.FRAG_LOADED,g);const x=F0(n,e.sn,p.index+1)||xx(f,e.sn,p.index+1);if(x)h(x);else return o({frag:e,part:v,partsLoaded:u})}).catch(l)};h(t)})}handleFragLoadError(e){if("data"in e){const t=e.data;e.data&&t.details===K.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(I.ERROR,t)}else this.hls.trigger(I.ERROR,{type:Re.OTHER_ERROR,details:K.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==J.PARSING){!this.fragCurrent&&this.state!==J.STOPPED&&this.state!==J.ERROR&&(this.state=J.IDLE);return}const{frag:n,part:i,level:o}=t,l=self.performance.now();n.stats.parsing.end=l,i&&(i.stats.parsing.end=l),this.updateLevelTiming(n,i,o,e.partial)}getCurrentContext(e){const{levels:t,fragCurrent:n}=this,{level:i,sn:o,part:l}=e;if(!(t!=null&&t[i]))return this.warn(`Levels object was unset while buffering fragment ${o} of level ${i}. The current chunk will not be buffered.`),null;const c=t[i],u=l>-1?F0(c,o,l):null,f=u?u.fragment:QT(c,o,n);return f?(n&&n!==f&&(f.stats=n.stats),{frag:f,part:u,level:c}):null}bufferFragmentData(e,t,n,i,o){var l;if(!e||this.state!==J.PARSING)return;const{data1:c,data2:u}=e;let f=c;if(c&&u&&(f=dr(c,u)),!((l=f)!=null&&l.length))return;const h={type:e.type,frag:t,part:n,chunkMeta:i,parent:t.type,data:f};if(this.hls.trigger(I.BUFFER_APPENDING,h),e.dropped&&e.independent&&!n){if(o)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!Ve.isBuffered(t,t.currentTime)){this.flushMainBuffer(0,e.start);return}const n=t.currentTime,i=Ve.bufferInfo(t,n,0),o=e.duration,l=Math.min(this.config.maxFragLookUpTolerance*2,o*.25),c=Math.max(Math.min(e.start-l,i.end-l),n+l);e.start-c>l&&this.flushMainBuffer(c,e.start)}getFwdBufferInfo(e,t){const n=this.getLoadPosition();return he(n)?this.getFwdBufferInfoAtPos(e,n,t):null}getFwdBufferInfoAtPos(e,t,n){const{config:{maxBufferHole:i}}=this,o=Ve.bufferInfo(e,t,i);if(o.len===0&&o.nextStart!==void 0){const l=this.fragmentTracker.getBufferedFrag(t,n);if(l&&o.nextStart<l.end)return Ve.bufferInfo(e,t,Math.max(o.nextStart,i))}return o}getMaxBufferLength(e){const{config:t}=this;let n;return e?n=Math.max(8*t.maxBufferSize/e,t.maxBufferLength):n=t.maxBufferLength,Math.min(n,t.maxMaxBufferLength)}reduceMaxBufferLength(e,t){const n=this.config,i=Math.max(Math.min(e-t,n.maxBufferLength),t),o=Math.max(e-t*3,n.maxMaxBufferLength/2,i);return o>=i?(n.maxMaxBufferLength=o,this.warn(`Reduce max buffer length to ${o}s`),!0):!1}getAppendedFrag(e,t=Le.MAIN){const n=this.fragmentTracker.getAppendedFrag(e,Le.MAIN);return n&&"fragment"in n?n.fragment:n}getNextFragment(e,t){const n=t.fragments,i=n.length;if(!i)return null;const{config:o}=this,l=n[0].start;let c;if(t.live){const u=o.initialLiveManifestSize;if(i<u)return this.warn(`Not enough fragments to start playback (have: ${i}, need: ${u})`),null;(!t.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<l)&&(c=this.getInitialLiveFragment(t,n),this.startPosition=this.nextLoadPosition=c?this.hls.liveSyncPosition||c.start:e)}else e<=l&&(c=n[0]);if(!c){const u=o.lowLatencyMode?t.partEnd:t.fragmentEnd;c=this.getFragmentAtPosition(e,u,t)}return this.mapToInitFragWhenRequired(c)}isLoopLoading(e,t){const n=this.fragmentTracker.getState(e);return(n===yt.OK||n===yt.PARTIAL&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,n,i,o){const l=e.gap,c=this.getNextFragment(this.nextLoadPosition,t);if(c===null)return c;if(e=c,l&&e&&!e.gap&&n.nextStart){const u=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,n.nextStart,i);if(u!==null&&n.len+u.len>=o)return this.log(`buffer full after gaps in "${i}" playlist starting at sn: ${e.sn}`),null}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!(e!=null&&e.initSegment.data)&&!this.bitrateTest?e.initSegment:e}getNextPart(e,t,n){let i=-1,o=!1,l=!0;for(let c=0,u=e.length;c<u;c++){const f=e[c];if(l=l&&!f.independent,i>-1&&n<f.start)break;const h=f.loaded;h?i=-1:(o||f.independent||l)&&f.fragment===t&&(i=c),o=h}return i}loadedEndOfParts(e,t){const n=e[e.length-1];return n&&t>n.start&&n.loaded}getInitialLiveFragment(e,t){const n=this.fragPrevious;let i=null;if(n){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${n.programDateTime}`),i=tL(t,n.endProgramDateTime,this.config.maxFragLookUpTolerance)),!i){const o=n.sn+1;if(o>=e.startSN&&o<=e.endSN){const l=t[o-e.startSN];n.cc===l.cc&&(i=l,this.log(`Live playlist, switching playlist, load frag with next SN: ${i.sn}`))}i||(i=iL(t,n.cc),i&&this.log(`Live playlist, switching playlist, load frag with same CC: ${i.sn}`))}}else{const o=this.hls.liveSyncPosition;o!==null&&(i=this.getFragmentAtPosition(o,this.bitrateTest?e.fragmentEnd:e.edge,e))}return i}getFragmentAtPosition(e,t,n){const{config:i}=this;let{fragPrevious:o}=this,{fragments:l,endSN:c}=n;const{fragmentHint:u}=n,{maxFragLookUpTolerance:f}=i,h=n.partList,p=!!(i.lowLatencyMode&&h!=null&&h.length&&u);p&&u&&!this.bitrateTest&&(l=l.concat(u),c=u.sn);let g;if(e<t){const v=e>t-f?0:f;g=wl(o,l,e,v)}else g=l[l.length-1];if(g){const v=g.sn-n.startSN,x=this.fragmentTracker.getState(g);if((x===yt.OK||x===yt.PARTIAL&&g.gap)&&(o=g),o&&g.sn===o.sn&&(!p||h[0].fragment.sn>g.sn)&&o&&g.level===o.level){const S=l[v+1];g.sn<c&&this.fragmentTracker.getState(S)!==yt.OK?g=S:g=null}}return g}synchronizeToLiveEdge(e){const{config:t,media:n}=this;if(!n)return;const i=this.hls.liveSyncPosition,o=n.currentTime,l=e.fragments[0].start,c=e.edge,u=o>=l-t.maxFragLookUpTolerance&&o<=c;if(i!==null&&n.duration>i&&(o<i||!u)){const f=t.liveMaxLatencyDuration!==void 0?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;(!u&&n.readyState<4||o<c-f)&&(this.loadedmetadata||(this.nextLoadPosition=i),n.readyState&&(this.warn(`Playback: ${o.toFixed(3)} is located too far from the end of live sliding playlist: ${c}, reset currentTime to : ${i.toFixed(3)}`),n.currentTime=i))}}alignPlaylists(e,t,n){const i=e.fragments.length;if(!i)return this.warn("No fragments in live playlist"),0;const o=e.fragments[0].start,l=!t,c=e.alignedSliding&&he(o);if(l||!c&&!o){const{fragPrevious:u}=this;wL(u,n,e);const f=e.fragments[0].start;return this.log(`Live playlist sliding: ${f.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} prev-sn: ${u?u.sn:"na"} fragments: ${i}`),f}return o}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,t){let n=this.startPosition;if(n<t&&(n=-1),n===-1||this.lastCurrentTime===-1){const i=this.startTimeOffset!==null,o=i?this.startTimeOffset:e.startTimeOffset;o!==null&&he(o)?(n=t+o,o<0&&(n+=e.totalduration),n=Math.min(Math.max(t,n),t+e.totalduration),this.log(`Start time offset ${o} found in ${i?"multivariant":"media"} playlist, adjust startPosition to ${n}`),this.startPosition=n):e.live?n=this.hls.liveSyncPosition||t:this.startPosition=n=0,this.lastCurrentTime=n}this.nextLoadPosition=n}getLoadPosition(){const{media:e}=this;let t=0;return this.loadedmetadata&&e?t=e.currentTime:this.nextLoadPosition&&(t=this.nextLoadPosition),t}handleFragLoadAborted(e,t){this.transmuxer&&e.sn!=="initSegment"&&e.stats.aborted&&(this.warn(`Fragment ${e.sn}${t?" part "+t.index:""} of level ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==J.FRAG_LOADING_WAITING_RETRY)&&(this.state=J.IDLE)}onFragmentOrKeyLoadError(e,t){if(t.chunkMeta&&!t.frag){const h=this.getCurrentContext(t.chunkMeta);h&&(t.frag=h.frag)}const n=t.frag;if(!n||n.type!==e||!this.levels)return;if(this.fragContextChanged(n)){var i;this.warn(`Frag load error must match current frag to retry ${n.url} > ${(i=this.fragCurrent)==null?void 0:i.url}`);return}const o=t.details===K.FRAG_GAP;o&&this.fragmentTracker.fragBuffered(n,!0);const l=t.errorAction,{action:c,retryCount:u=0,retryConfig:f}=l||{};if(l&&c===wt.RetryRequest&&f){this.resetStartWhenNotLoaded(this.levelLastLoaded);const h=Yf(f,u);this.warn(`Fragment ${n.sn} of ${e} ${n.level} errored with ${t.details}, retrying loading ${u+1}/${f.maxNumRetry} in ${h}ms`),l.resolved=!0,this.retryDate=self.performance.now()+h,this.state=J.FRAG_LOADING_WAITING_RETRY}else if(f&&l)if(this.resetFragmentErrors(e),u<f.maxNumRetry)!o&&c!==wt.RemoveAlternatePermanently&&(l.resolved=!0);else{B.warn(`${t.details} reached or exceeded max retry (${u})`);return}else l?.action===wt.SendAlternateToPenaltyBox?this.state=J.WAITING_LEVEL:this.state=J.ERROR;this.tickImmediate()}reduceLengthAndFlushBuffer(e){if(this.state===J.PARSING||this.state===J.PARSED){const t=e.frag,n=e.parent,i=this.getFwdBufferInfo(this.mediaBuffer,n),o=i&&i.len>.5;o&&this.reduceMaxBufferLength(i.len,t?.duration||10);const l=!o;return l&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${n} buffer`),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),l}return!1}resetFragmentErrors(e){e===Le.AUDIO&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==J.STOPPED&&(this.state=J.IDLE)}afterBufferFlushed(e,t,n){if(!e)return;const i=Ve.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,i,n),this.state===J.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=J.IDLE}resetStartWhenNotLoaded(e){if(!this.loadedmetadata){this.startFragRequested=!1;const t=e?e.details:null;t!=null&&t.live?(this.startPosition=-1,this.setStartPosition(t,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.warn(`The loading context changed while buffering fragment ${e.sn} of level ${e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,n,i){var o;const l=n.details;if(!l){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((u,f)=>{const h=e.elementaryStreams[f];if(h){const p=h.endPTS-h.startPTS;if(p<=0)return this.warn(`Could not parse fragment ${e.sn} ${f} duration reliably (${p})`),u||!1;const g=i?0:yx(l,e,h.startPTS,h.endPTS,h.startDTS,h.endDTS);return this.hls.trigger(I.LEVEL_PTS_UPDATED,{details:l,level:n,drift:g,type:f,frag:e,start:h.startPTS,end:h.endPTS}),!0}return u},!1)&&((o=this.transmuxer)==null?void 0:o.error)===null){const u=new Error(`Found no media in fragment ${e.sn} of level ${e.level} resetting transmuxer to fallback to playlist timing`);if(n.fragmentError===0&&(n.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)),this.warn(u.message),this.hls.trigger(I.ERROR,{type:Re.MEDIA_ERROR,details:K.FRAG_PARSING_ERROR,fatal:!1,error:u,frag:e,reason:`Found no media in msn ${e.sn} of level "${n.url}"`}),!this.hls)return;this.resetTransmuxer()}this.state=J.PARSED,this.hls.trigger(I.FRAG_PARSED,{frag:e,part:t})}resetTransmuxer(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}}class Ix{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let n;if(e.length)e.length===1?n=e[0]:n=OL(e,t);else return new Uint8Array(0);return this.reset(),n}reset(){this.chunks.length=0,this.dataLength=0}}function OL(r,e){const t=new Uint8Array(e);let n=0;for(let i=0;i<r.length;i++){const o=r[i];t.set(o,n),n+=o.length}return t}function PL(){return typeof __HLS_WORKER_BUNDLE__=="function"}function NL(){const r=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),e=self.URL.createObjectURL(r);return{worker:new self.Worker(e),objectURL:e}}function ML(r){const e=new self.URL(r,self.location.href).href;return{worker:new self.Worker(e),scriptURL:e}}function Nr(r="",e=9e4){return{type:r,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class Qf{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,n,i){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,n){}demux(e,t){this.cachedData&&(e=dr(this.cachedData,e),this.cachedData=null);let n=ho(e,0),i=n?n.length:0,o;const l=this._audioTrack,c=this._id3Track,u=n?zf(n):void 0,f=e.length;for((this.basePTS===null||this.frameIndex===0&&he(u))&&(this.basePTS=_L(u,t,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),n&&n.length>0&&c.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:wr.audioId3,duration:Number.POSITIVE_INFINITY});i<f;){if(this.canParse(e,i)){const h=this.appendFrame(l,e,i);h?(this.frameIndex++,this.lastPTS=h.sample.pts,i+=h.length,o=i):i=f}else nT(e,i)?(n=ho(e,i),c.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:wr.audioId3,duration:Number.POSITIVE_INFINITY}),i+=n.length,o=i):i++;if(i===f&&o!==f){const h=ai(e,o);this.cachedData?this.cachedData=dr(this.cachedData,h):this.cachedData=h}}return{audioTrack:l,videoTrack:Nr(),id3Track:c,textTrack:Nr()}}demuxSampleAes(e,t,n){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:Nr(),id3Track:this._id3Track,textTrack:Nr()}}destroy(){}}const _L=(r,e,t)=>{if(he(r))return r*90;const n=t?t.baseTime*9e4/t.timescale:0;return e*9e4+n};function FL(r,e,t,n){let i,o,l,c;const u=navigator.userAgent.toLowerCase(),f=n,h=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];i=((e[t+2]&192)>>>6)+1;const p=(e[t+2]&60)>>>2;if(p>h.length-1){const g=new Error(`invalid ADTS sampling index:${p}`);r.emit(I.ERROR,I.ERROR,{type:Re.MEDIA_ERROR,details:K.FRAG_PARSING_ERROR,fatal:!0,error:g,reason:g.message});return}return l=(e[t+2]&1)<<2,l|=(e[t+3]&192)>>>6,B.log(`manifest codec:${n}, ADTS type:${i}, samplingIndex:${p}`),/firefox/i.test(u)?p>=6?(i=5,c=new Array(4),o=p-3):(i=2,c=new Array(2),o=p):u.indexOf("android")!==-1?(i=2,c=new Array(2),o=p):(i=5,c=new Array(4),n&&(n.indexOf("mp4a.40.29")!==-1||n.indexOf("mp4a.40.5")!==-1)||!n&&p>=6?o=p-3:((n&&n.indexOf("mp4a.40.2")!==-1&&(p>=6&&l===1||/vivaldi/i.test(u))||!n&&l===1)&&(i=2,c=new Array(2)),o=p)),c[0]=i<<3,c[0]|=(p&14)>>1,c[1]|=(p&1)<<7,c[1]|=l<<3,i===5&&(c[1]|=(o&14)>>1,c[2]=(o&1)<<7,c[2]|=8,c[3]=0),{config:c,samplerate:h[p],channelCount:l,codec:"mp4a.40."+i,manifestCodec:f}}function Ax(r,e){return r[e]===255&&(r[e+1]&246)===240}function Tx(r,e){return r[e+1]&1?7:9}function eh(r,e){return(r[e+3]&3)<<11|r[e+4]<<3|(r[e+5]&224)>>>5}function BL(r,e){return e+5<r.length}function Al(r,e){return e+1<r.length&&Ax(r,e)}function jL(r,e){return BL(r,e)&&Ax(r,e)&&eh(r,e)<=r.length-e}function UL(r,e){if(Al(r,e)){const t=Tx(r,e);if(e+t>=r.length)return!1;const n=eh(r,e);if(n<=t)return!1;const i=e+n;return i===r.length||Al(r,i)}return!1}function Lx(r,e,t,n,i){if(!r.samplerate){const o=FL(e,t,n,i);if(!o)return;r.config=o.config,r.samplerate=o.samplerate,r.channelCount=o.channelCount,r.codec=o.codec,r.manifestCodec=o.manifestCodec,B.log(`parsed codec:${r.codec}, rate:${o.samplerate}, channels:${o.channelCount}`)}}function Rx(r){return 1024*9e4/r}function HL(r,e){const t=Tx(r,e);if(e+t<=r.length){const n=eh(r,e)-t;if(n>0)return{headerLength:t,frameLength:n}}}function Cx(r,e,t,n,i){const o=Rx(r.samplerate),l=n+i*o,c=HL(e,t);let u;if(c){const{frameLength:p,headerLength:g}=c,v=g+p,x=Math.max(0,t+v-e.length);x?(u=new Uint8Array(v-g),u.set(e.subarray(t+g,e.length),0)):u=e.subarray(t+g,t+v);const b={unit:u,pts:l};return x||r.samples.push(b),{sample:b,length:v,missing:x}}const f=e.length-t;return u=new Uint8Array(f),u.set(e.subarray(t,e.length),0),{sample:{unit:u,pts:l},length:f,missing:-1}}let Ka=null;const $L=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],GL=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],WL=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],VL=[0,1,1,4];function Dx(r,e,t,n,i){if(t+24>e.length)return;const o=kx(e,t);if(o&&t+o.frameLength<=e.length){const l=o.samplesPerFrame*9e4/o.sampleRate,c=n+i*l,u={unit:e.subarray(t,t+o.frameLength),pts:c,dts:c};return r.config=[],r.channelCount=o.channelCount,r.samplerate=o.sampleRate,r.samples.push(u),{sample:u,length:o.frameLength,missing:0}}}function kx(r,e){const t=r[e+1]>>3&3,n=r[e+1]>>1&3,i=r[e+2]>>4&15,o=r[e+2]>>2&3;if(t!==1&&i!==0&&i!==15&&o!==3){const l=r[e+2]>>1&1,c=r[e+3]>>6,u=t===3?3-n:n===3?3:4,f=$L[u*14+i-1]*1e3,p=GL[(t===3?0:t===2?1:2)*3+o],g=c===3?1:2,v=WL[t][n],x=VL[n],b=v*8*x,S=Math.floor(v*f/p+l)*x;if(Ka===null){const R=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Ka=R?parseInt(R[1]):0}return Ka&&Ka<=87&&n===2&&f>=224e3&&c===0&&(r[e+3]=r[e+3]|128),{sampleRate:p,channelCount:g,frameLength:S,samplesPerFrame:b}}}function th(r,e){return r[e]===255&&(r[e+1]&224)===224&&(r[e+1]&6)!==0}function Ox(r,e){return e+1<r.length&&th(r,e)}function KL(r,e){return th(r,e)&&4<=r.length-e}function Px(r,e){if(e+1<r.length&&th(r,e)){const n=kx(r,e);let i=4;n!=null&&n.frameLength&&(i=n.frameLength);const o=e+i;return o===r.length||Ox(r,o)}return!1}class zL extends Qf{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,n,i){super.resetInitSegment(e,t,n,i),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=ho(e,0);let n=t?.length||0;if(Px(e,n))return!1;for(let i=e.length;n<i;n++)if(UL(e,n))return B.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return jL(e,t)}appendFrame(e,t,n){Lx(e,this.observer,t,n,e.manifestCodec);const i=Cx(e,t,n,this.basePTS,this.frameIndex);if(i&&i.missing===0)return i}}const YL=/\/emsg[-/]ID3/i;class qL{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,n,i){const o=this.videoTrack=Nr("video",1),l=this.audioTrack=Nr("audio",1),c=this.txtTrack=Nr("text",1);if(this.id3Track=Nr("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const u=cx(e);if(u.video){const{id:f,timescale:h,codec:p}=u.video;o.id=f,o.timescale=c.timescale=h,o.codec=p}if(u.audio){const{id:f,timescale:h,codec:p}=u.audio;l.id=f,l.timescale=h,l.codec=p}c.id=ox.text,o.sampleDuration=0,o.duration=l.duration=i}resetContiguity(){this.remainderData=null}static probe(e){return fT(e)}demux(e,t){this.timeOffset=t;let n=e;const i=this.videoTrack,o=this.txtTrack;if(this.config.progressive){this.remainderData&&(n=dr(this.remainderData,e));const c=bT(n);this.remainderData=c.remainder,i.samples=c.valid||new Uint8Array}else i.samples=n;const l=this.extractID3Track(i,t);return o.samples=v0(t,i),{videoTrack:i,audioTrack:this.audioTrack,id3Track:l,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,n=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const i=this.extractID3Track(t,this.timeOffset);return n.samples=v0(e,t),{videoTrack:t,audioTrack:Nr(),id3Track:i,textTrack:Nr()}}extractID3Track(e,t){const n=this.id3Track;if(e.samples.length){const i=ke(e.samples,["emsg"]);i&&i.forEach(o=>{const l=wT(o);if(YL.test(l.schemeIdUri)){const c=he(l.presentationTime)?l.presentationTime/l.timeScale:t+l.presentationTimeDelta/l.timeScale;let u=l.eventDuration===4294967295?Number.POSITIVE_INFINITY:l.eventDuration/l.timeScale;u<=.001&&(u=Number.POSITIVE_INFINITY);const f=l.payload;n.samples.push({data:f,len:f.byteLength,dts:c,pts:c,type:wr.emsg,duration:u})}})}return n}demuxSampleAes(e,t,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){}}const Nx=(r,e)=>{let t=0,n=5;e+=n;const i=new Uint32Array(1),o=new Uint32Array(1),l=new Uint8Array(1);for(;n>0;){l[0]=r[e];const c=Math.min(n,8),u=8-c;o[0]=4278190080>>>24+u<<u,i[0]=(l[0]&o[0])>>u,t=t?t<<c|i[0]:i[0],e+=1,n-=c}return t};class XL extends Qf{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,t,n,i){super.resetInitSegment(e,t,n,i),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}canParse(e,t){return t+64<e.length}appendFrame(e,t,n){const i=Mx(e,t,n,this.basePTS,this.frameIndex);if(i!==-1)return{sample:e.samples[e.samples.length-1],length:i,missing:0}}static probe(e){if(!e)return!1;const t=ho(e,0);if(!t)return!1;const n=t.length;return e[n]===11&&e[n+1]===119&&zf(t)!==void 0&&Nx(e,n)<16}}function Mx(r,e,t,n,i){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return-1;const o=e[t+4]>>6;if(o>=3)return-1;const c=[48e3,44100,32e3][o],u=e[t+4]&63,h=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][u*3+o]*2;if(t+h>e.length)return-1;const p=e[t+6]>>5;let g=0;p===2?g+=2:(p&1&&p!==1&&(g+=2),p&4&&(g+=2));const v=(e[t+6]<<8|e[t+7])>>12-g&1,b=[2,1,2,3,3,4,4,5][p]+v,S=e[t+5]>>3,A=e[t+5]&7,L=new Uint8Array([o<<6|S<<1|A>>2,(A&3)<<6|p<<3|v<<2|u>>4,u<<4&224]),R=1536/c*9e4,k=n+i*R,C=e.subarray(t,t+h);return r.config=L,r.channelCount=b,r.samplerate=c,r.samples.push({unit:C,pts:k}),h}class ZL{constructor(){this.VideoSample=null}createVideoSample(e,t,n,i){return{key:e,frame:!1,pts:t,dts:n,units:[],debug:i,length:0}}getLastNalUnit(e){var t;let n=this.VideoSample,i;if((!n||n.units.length===0)&&(n=e[e.length-1]),(t=n)!=null&&t.units){const o=n.units;i=o[o.length-1]}return i}pushAccessUnit(e,t){if(e.units.length&&e.frame){if(e.pts===void 0){const n=t.samples,i=n.length;if(i){const o=n[i-1];e.pts=o.pts,e.dts=o.dts}else{t.dropped++;return}}t.samples.push(e)}e.debug.length&&B.log(e.pts+"/"+e.dts+":"+e.debug)}}class K0{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,n=e.byteLength-t,i=new Uint8Array(4),o=Math.min(4,t);if(o===0)throw new Error("no bytes available");i.set(e.subarray(n,n+o)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=o*8,this.bytesAvailable-=o}skipBits(e){let t;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const n=this.word>>>32-t;if(e>32&&B.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return t=e-t,t>0&&this.bitsAvailable?n<<t|this.readBits(t):n}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if((this.word&2147483648>>>e)!==0)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}skipScalingList(e){let t=8,n=8,i;for(let o=0;o<e;o++)n!==0&&(i=this.readEG(),n=(t+i+256)%256),t=n===0?t:n}readSPS(){let e=0,t=0,n=0,i=0,o,l,c;const u=this.readUByte.bind(this),f=this.readBits.bind(this),h=this.readUEG.bind(this),p=this.readBoolean.bind(this),g=this.skipBits.bind(this),v=this.skipEG.bind(this),x=this.skipUEG.bind(this),b=this.skipScalingList.bind(this);u();const S=u();if(f(5),g(3),u(),x(),S===100||S===110||S===122||S===244||S===44||S===83||S===86||S===118||S===128){const F=h();if(F===3&&g(1),x(),x(),g(1),p())for(l=F!==3?8:12,c=0;c<l;c++)p()&&(c<6?b(16):b(64))}x();const A=h();if(A===0)h();else if(A===1)for(g(1),v(),v(),o=h(),c=0;c<o;c++)v();x(),g(1);const L=h(),R=h(),k=f(1);k===0&&g(1),g(1),p()&&(e=h(),t=h(),n=h(),i=h());let C=[1,1];if(p()&&p())switch(u()){case 1:C=[1,1];break;case 2:C=[12,11];break;case 3:C=[10,11];break;case 4:C=[16,11];break;case 5:C=[40,33];break;case 6:C=[24,11];break;case 7:C=[20,11];break;case 8:C=[32,11];break;case 9:C=[80,33];break;case 10:C=[18,11];break;case 11:C=[15,11];break;case 12:C=[64,33];break;case 13:C=[160,99];break;case 14:C=[4,3];break;case 15:C=[3,2];break;case 16:C=[2,1];break;case 255:{C=[u()<<8|u(),u()<<8|u()];break}}return{width:Math.ceil((L+1)*16-e*2-t*2),height:(2-k)*(R+1)*16-(k?2:4)*(n+i),pixelRatio:C}}readSliceType(){return this.readUByte(),this.readUEG(),this.readUEG()}}class JL extends ZL{parseAVCPES(e,t,n,i,o){const l=this.parseAVCNALu(e,n.data);let c=this.VideoSample,u,f=!1;n.data=null,c&&l.length&&!e.audFound&&(this.pushAccessUnit(c,e),c=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts,"")),l.forEach(h=>{var p;switch(h.type){case 1:{let b=!1;u=!0;const S=h.data;if(f&&S.length>4){const A=new K0(S).readSliceType();(A===2||A===4||A===7||A===9)&&(b=!0)}if(b){var g;(g=c)!=null&&g.frame&&!c.key&&(this.pushAccessUnit(c,e),c=this.VideoSample=null)}c||(c=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts,"")),c.frame=!0,c.key=b;break}case 5:u=!0,(p=c)!=null&&p.frame&&!c.key&&(this.pushAccessUnit(c,e),c=this.VideoSample=null),c||(c=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts,"")),c.key=!0,c.frame=!0;break;case 6:{u=!0,dx(h.data,1,n.pts,t.samples);break}case 7:{var v,x;u=!0,f=!0;const b=h.data,A=new K0(b).readSPS();if(!e.sps||e.width!==A.width||e.height!==A.height||((v=e.pixelRatio)==null?void 0:v[0])!==A.pixelRatio[0]||((x=e.pixelRatio)==null?void 0:x[1])!==A.pixelRatio[1]){e.width=A.width,e.height=A.height,e.pixelRatio=A.pixelRatio,e.sps=[b],e.duration=o;const L=b.subarray(1,4);let R="avc1.";for(let k=0;k<3;k++){let C=L[k].toString(16);C.length<2&&(C="0"+C),R+=C}e.codec=R}break}case 8:u=!0,e.pps=[h.data];break;case 9:u=!0,e.audFound=!0,c&&this.pushAccessUnit(c,e),c=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts,"");break;case 12:u=!0;break;default:u=!1,c&&(c.debug+="unknown NAL "+h.type+" ");break}c&&u&&c.units.push(h)}),i&&c&&(this.pushAccessUnit(c,e),this.VideoSample=null)}parseAVCNALu(e,t){const n=t.byteLength;let i=e.naluState||0;const o=i,l=[];let c=0,u,f,h,p=-1,g=0;for(i===-1&&(p=0,g=t[0]&31,i=0,c=1);c<n;){if(u=t[c++],!i){i=u?0:1;continue}if(i===1){i=u?0:2;continue}if(!u)i=3;else if(u===1){if(f=c-i-1,p>=0){const v={data:t.subarray(p,f),type:g};l.push(v)}else{const v=this.getLastNalUnit(e.samples);v&&(o&&c<=4-o&&v.state&&(v.data=v.data.subarray(0,v.data.byteLength-o)),f>0&&(v.data=dr(v.data,t.subarray(0,f)),v.state=0))}c<n?(h=t[c]&31,p=c,g=h,i=0):i=-1}else i=0}if(p>=0&&i>=0){const v={data:t.subarray(p,n),type:g,state:i};l.push(v)}if(l.length===0){const v=this.getLastNalUnit(e.samples);v&&(v.data=dr(v.data,t))}return e.naluState=i,l}}class QL{constructor(e,t,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new Zf(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer)}decryptAacSample(e,t,n){const i=e[t].unit;if(i.length<=16)return;const o=i.subarray(16,i.length-i.length%16),l=o.buffer.slice(o.byteOffset,o.byteOffset+o.length);this.decryptBuffer(l).then(c=>{const u=new Uint8Array(c);i.set(u,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,n)})}decryptAacSamples(e,t,n){for(;;t++){if(t>=e.length){n();return}if(!(e[t].unit.length<32)&&(this.decryptAacSample(e,t,n),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const t=Math.floor((e.length-48)/160)*16+16,n=new Int8Array(t);let i=0;for(let o=32;o<e.length-16;o+=160,i+=16)n.set(e.subarray(o,o+16),i);return n}getAvcDecryptedUnit(e,t){const n=new Uint8Array(t);let i=0;for(let o=32;o<e.length-16;o+=160,i+=16)e.set(n.subarray(i,i+16),o);return e}decryptAvcSample(e,t,n,i,o){const l=fx(o.data),c=this.getAvcEncryptedData(l);this.decryptBuffer(c.buffer).then(u=>{o.data=this.getAvcDecryptedUnit(l,u),this.decrypter.isSync()||this.decryptAvcSamples(e,t,n+1,i)})}decryptAvcSamples(e,t,n,i){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,n=0){if(t>=e.length){i();return}const o=e[t].units;for(;!(n>=o.length);n++){const l=o[n];if(!(l.data.length<=48||l.type!==1&&l.type!==5)&&(this.decryptAvcSample(e,t,n,i,l),!this.decrypter.isSync()))return}}}}const gt=188;class Ln{constructor(e,t,n){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.videoParser=new JL}static probe(e){const t=Ln.syncOffset(e);return t>0&&B.warn(`MPEG2-TS detected but first sync word found @ offset ${t}`),t!==-1}static syncOffset(e){const t=e.length;let n=Math.min(gt*5,t-gt)+1,i=0;for(;i<n;){let o=!1,l=-1,c=0;for(let u=i;u<t;u+=gt)if(e[u]===71&&(t-u===gt||e[u+gt]===71)){if(c++,l===-1&&(l=u,l!==0&&(n=Math.min(l+gt*99,e.length-gt)+1)),o||(o=pf(e,u)===0),o&&c>1&&(l===0&&c>2||u+gt>n))return l}else{if(c)return-1;break}i++}return-1}static createTrack(e,t){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:ox[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?t:void 0}}resetInitSegment(e,t,n,i){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=Ln.createTrack("video"),this._audioTrack=Ln.createTrack("audio",i),this._id3Track=Ln.createTrack("id3"),this._txtTrack=Ln.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=n,this._duration=i}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:t,_id3Track:n}=this;e&&(e.pesData=null),t&&(t.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,t,n=!1,i=!1){n||(this.sampleAes=null);let o;const l=this._videoTrack,c=this._audioTrack,u=this._id3Track,f=this._txtTrack;let h=l.pid,p=l.pesData,g=c.pid,v=u.pid,x=c.pesData,b=u.pesData,S=null,A=this.pmtParsed,L=this._pmtId,R=e.length;if(this.remainderData&&(e=dr(this.remainderData,e),R=e.length,this.remainderData=null),R<gt&&!i)return this.remainderData=e,{audioTrack:c,videoTrack:l,id3Track:u,textTrack:f};const k=Math.max(0,Ln.syncOffset(e));R-=(R-k)%gt,R<e.byteLength&&!i&&(this.remainderData=new Uint8Array(e.buffer,R,e.buffer.byteLength-R));let C=0;for(let _=k;_<R;_+=gt)if(e[_]===71){const z=!!(e[_+1]&64),te=pf(e,_),U=(e[_+3]&48)>>4;let q;if(U>1){if(q=_+5+e[_+4],q===_+gt)continue}else q=_+4;switch(te){case h:z&&(p&&(o=$i(p))&&this.videoParser.parseAVCPES(l,f,o,!1,this._duration),p={data:[],size:0}),p&&(p.data.push(e.subarray(q,_+gt)),p.size+=_+gt-q);break;case g:if(z){if(x&&(o=$i(x)))switch(c.segmentCodec){case"aac":this.parseAACPES(c,o);break;case"mp3":this.parseMPEGPES(c,o);break;case"ac3":this.parseAC3PES(c,o);break}x={data:[],size:0}}x&&(x.data.push(e.subarray(q,_+gt)),x.size+=_+gt-q);break;case v:z&&(b&&(o=$i(b))&&this.parseID3PES(u,o),b={data:[],size:0}),b&&(b.data.push(e.subarray(q,_+gt)),b.size+=_+gt-q);break;case 0:z&&(q+=e[q]+1),L=this._pmtId=eR(e,q);break;case L:{z&&(q+=e[q]+1);const le=tR(e,q,this.typeSupported,n,this.observer);h=le.videoPid,h>0&&(l.pid=h,l.segmentCodec=le.segmentVideoCodec),g=le.audioPid,g>0&&(c.pid=g,c.segmentCodec=le.segmentAudioCodec),v=le.id3Pid,v>0&&(u.pid=v),S!==null&&!A&&(B.warn(`MPEG-TS PMT found at ${_} after unknown PID '${S}'. Backtracking to sync byte @${k} to parse all TS packets.`),S=null,_=k-188),A=this.pmtParsed=!0;break}case 17:case 8191:break;default:S=te;break}}else C++;C>0&&Tl(this.observer,new Error(`Found ${C} TS packet/s that do not start with 0x47`)),l.pesData=p,c.pesData=x,u.pesData=b;const F={audioTrack:c,videoTrack:l,id3Track:u,textTrack:f};return i&&this.extractRemainingSamples(F),F}flush(){const{remainderData:e}=this;this.remainderData=null;let t;return e?t=this.demux(e,-1,!1,!0):t={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:n,id3Track:i,textTrack:o}=e,l=n.pesData,c=t.pesData,u=i.pesData;let f;if(l&&(f=$i(l))?(this.videoParser.parseAVCPES(n,o,f,!0,this._duration),n.pesData=null):n.pesData=l,c&&(f=$i(c))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,f);break;case"mp3":this.parseMPEGPES(t,f);break;case"ac3":this.parseAC3PES(t,f);break}t.pesData=null}else c!=null&&c.size&&B.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=c;u&&(f=$i(u))?(this.parseID3PES(i,f),i.pesData=null):i.pesData=u}demuxSampleAes(e,t,n){const i=this.demux(e,n,!0,!this.config.progressive),o=this.sampleAes=new QL(this.observer,this.config,t);return this.decrypt(i,o)}decrypt(e,t){return new Promise(n=>{const{audioTrack:i,videoTrack:o}=e;i.samples&&i.segmentCodec==="aac"?t.decryptAacSamples(i.samples,0,()=>{o.samples?t.decryptAvcSamples(o.samples,0,0,()=>{n(e)}):n(e)}):o.samples&&t.decryptAvcSamples(o.samples,0,0,()=>{n(e)})})}destroy(){this._duration=0}parseAACPES(e,t){let n=0;const i=this.aacOverFlow;let o=t.data;if(i){this.aacOverFlow=null;const p=i.missing,g=i.sample.unit.byteLength;if(p===-1)o=dr(i.sample.unit,o);else{const v=g-p;i.sample.unit.set(o.subarray(0,p),v),e.samples.push(i.sample),n=i.missing}}let l,c;for(l=n,c=o.length;l<c-1&&!Al(o,l);l++);if(l!==n){let p;const g=l<c-1;if(g?p=`AAC PES did not start with ADTS header,offset:${l}`:p="No ADTS header found in AAC PES",Tl(this.observer,new Error(p),g),!g)return}Lx(e,this.observer,o,l,this.audioCodec);let u;if(t.pts!==void 0)u=t.pts;else if(i){const p=Rx(e.samplerate);u=i.sample.pts+p}else{B.warn("[tsdemuxer]: AAC PES unknown PTS");return}let f=0,h;for(;l<c;)if(h=Cx(e,o,l,u,f),l+=h.length,h.missing){this.aacOverFlow=h;break}else for(f++;l<c-1&&!Al(o,l);l++);}parseMPEGPES(e,t){const n=t.data,i=n.length;let o=0,l=0;const c=t.pts;if(c===void 0){B.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;l<i;)if(Ox(n,l)){const u=Dx(e,n,l,c,o);if(u)l+=u.length,o++;else break}else l++}parseAC3PES(e,t){{const n=t.data,i=t.pts;if(i===void 0){B.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const o=n.length;let l=0,c=0,u;for(;c<o&&(u=Mx(e,n,c,i,l++))>0;)c+=u}}parseID3PES(e,t){if(t.pts===void 0){B.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const n=ct({},t,{type:this._videoTrack?wr.emsg:wr.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(n)}}function pf(r,e){return((r[e+1]&31)<<8)+r[e+2]}function eR(r,e){return(r[e+10]&31)<<8|r[e+11]}function tR(r,e,t,n,i){const o={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},l=(r[e+1]&15)<<8|r[e+2],c=e+3+l-4,u=(r[e+10]&15)<<8|r[e+11];for(e+=12+u;e<c;){const f=pf(r,e),h=(r[e+3]&15)<<8|r[e+4];switch(r[e]){case 207:if(!n){gd("ADTS AAC");break}case 15:o.audioPid===-1&&(o.audioPid=f);break;case 21:o.id3Pid===-1&&(o.id3Pid=f);break;case 219:if(!n){gd("H.264");break}case 27:o.videoPid===-1&&(o.videoPid=f,o.segmentVideoCodec="avc");break;case 3:case 4:!t.mpeg&&!t.mp3?B.log("MPEG audio found, not supported in this browser"):o.audioPid===-1&&(o.audioPid=f,o.segmentAudioCodec="mp3");break;case 193:if(!n){gd("AC-3");break}case 129:t.ac3?o.audioPid===-1&&(o.audioPid=f,o.segmentAudioCodec="ac3"):B.log("AC-3 audio found, not supported in this browser");break;case 6:if(o.audioPid===-1&&h>0){let p=e+5,g=h;for(;g>2;){r[p]===106&&(t.ac3!==!0?B.log("AC-3 audio found, not supported in this browser for now"):(o.audioPid=f,o.segmentAudioCodec="ac3"));const x=r[p+1]+2;p+=x,g-=x}}break;case 194:case 135:return Tl(i,new Error("Unsupported EC-3 in M2TS found")),o;case 36:return Tl(i,new Error("Unsupported HEVC in M2TS found")),o}e+=h+5}return o}function Tl(r,e,t){B.warn(`parsing error: ${e.message}`),r.emit(I.ERROR,I.ERROR,{type:Re.MEDIA_ERROR,details:K.FRAG_PARSING_ERROR,fatal:!1,levelRetry:t,error:e,reason:e.message})}function gd(r){B.log(`${r} with AES-128-CBC encryption found in unencrypted stream`)}function $i(r){let e=0,t,n,i,o,l;const c=r.data;if(!r||r.size===0)return null;for(;c[0].length<19&&c.length>1;)c[0]=dr(c[0],c[1]),c.splice(1,1);if(t=c[0],(t[0]<<16)+(t[1]<<8)+t[2]===1){if(n=(t[4]<<8)+t[5],n&&n>r.size-6)return null;const f=t[7];f&192&&(o=(t[9]&14)*536870912+(t[10]&255)*4194304+(t[11]&254)*16384+(t[12]&255)*128+(t[13]&254)/2,f&64?(l=(t[14]&14)*536870912+(t[15]&255)*4194304+(t[16]&254)*16384+(t[17]&255)*128+(t[18]&254)/2,o-l>60*9e4&&(B.warn(`${Math.round((o-l)/9e4)}s delta between PTS and DTS, align them`),o=l)):l=o),i=t[8];let h=i+9;if(r.size<=h)return null;r.size-=h;const p=new Uint8Array(r.size);for(let g=0,v=c.length;g<v;g++){t=c[g];let x=t.byteLength;if(h)if(h>x){h-=x;continue}else t=t.subarray(h),x-=h,h=0;p.set(t,e),e+=x}return n&&(n-=i+3),{data:p,pts:o,dts:l,len:n}}return null}class rR extends Qf{resetInitSegment(e,t,n,i){super.resetInitSegment(e,t,n,i),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=ho(e,0);let n=t?.length||0;if(t&&e[n]===11&&e[n+1]===119&&zf(t)!==void 0&&Nx(e,n)<=16)return!1;for(let i=e.length;n<i;n++)if(Px(e,n))return B.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return KL(e,t)}appendFrame(e,t,n){if(this.basePTS!==null)return Dx(e,t,n,this.basePTS,this.frameIndex)}}class z0{static getSilentFrame(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const Tn=Math.pow(2,32)-1;class H{static init(){H.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in H.types)H.types.hasOwnProperty(e)&&(H.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);H.HDLR_TYPES={video:t,audio:n};const i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),o=new Uint8Array([0,0,0,0,0,0,0,0]);H.STTS=H.STSC=H.STCO=o,H.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),H.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),H.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),H.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const l=new Uint8Array([105,115,111,109]),c=new Uint8Array([97,118,99,49]),u=new Uint8Array([0,0,0,1]);H.FTYP=H.box(H.types.ftyp,l,u,l,c),H.DINF=H.box(H.types.dinf,H.box(H.types.dref,i))}static box(e,...t){let n=8,i=t.length;const o=i;for(;i--;)n+=t[i].byteLength;const l=new Uint8Array(n);for(l[0]=n>>24&255,l[1]=n>>16&255,l[2]=n>>8&255,l[3]=n&255,l.set(e,4),i=0,n=8;i<o;i++)l.set(t[i],n),n+=t[i].byteLength;return l}static hdlr(e){return H.box(H.types.hdlr,H.HDLR_TYPES[e])}static mdat(e){return H.box(H.types.mdat,e)}static mdhd(e,t){t*=e;const n=Math.floor(t/(Tn+1)),i=Math.floor(t%(Tn+1));return H.box(H.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24,n>>16&255,n>>8&255,n&255,i>>24,i>>16&255,i>>8&255,i&255,85,196,0,0]))}static mdia(e){return H.box(H.types.mdia,H.mdhd(e.timescale,e.duration),H.hdlr(e.type),H.minf(e))}static mfhd(e){return H.box(H.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?H.box(H.types.minf,H.box(H.types.smhd,H.SMHD),H.DINF,H.stbl(e)):H.box(H.types.minf,H.box(H.types.vmhd,H.VMHD),H.DINF,H.stbl(e))}static moof(e,t,n){return H.box(H.types.moof,H.mfhd(e),H.traf(n,t))}static moov(e){let t=e.length;const n=[];for(;t--;)n[t]=H.trak(e[t]);return H.box.apply(null,[H.types.moov,H.mvhd(e[0].timescale,e[0].duration)].concat(n).concat(H.mvex(e)))}static mvex(e){let t=e.length;const n=[];for(;t--;)n[t]=H.trex(e[t]);return H.box.apply(null,[H.types.mvex,...n])}static mvhd(e,t){t*=e;const n=Math.floor(t/(Tn+1)),i=Math.floor(t%(Tn+1)),o=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24,n>>16&255,n>>8&255,n&255,i>>24,i>>16&255,i>>8&255,i&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return H.box(H.types.mvhd,o)}static sdtp(e){const t=e.samples||[],n=new Uint8Array(4+t.length);let i,o;for(i=0;i<t.length;i++)o=t[i].flags,n[i+4]=o.dependsOn<<4|o.isDependedOn<<2|o.hasRedundancy;return H.box(H.types.sdtp,n)}static stbl(e){return H.box(H.types.stbl,H.stsd(e),H.box(H.types.stts,H.STTS),H.box(H.types.stsc,H.STSC),H.box(H.types.stsz,H.STSZ),H.box(H.types.stco,H.STCO))}static avc1(e){let t=[],n=[],i,o,l;for(i=0;i<e.sps.length;i++)o=e.sps[i],l=o.byteLength,t.push(l>>>8&255),t.push(l&255),t=t.concat(Array.prototype.slice.call(o));for(i=0;i<e.pps.length;i++)o=e.pps[i],l=o.byteLength,n.push(l>>>8&255),n.push(l&255),n=n.concat(Array.prototype.slice.call(o));const c=H.box(H.types.avcC,new Uint8Array([1,t[3],t[4],t[5],255,224|e.sps.length].concat(t).concat([e.pps.length]).concat(n))),u=e.width,f=e.height,h=e.pixelRatio[0],p=e.pixelRatio[1];return H.box(H.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,u&255,f>>8&255,f&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),c,H.box(H.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),H.box(H.types.pasp,new Uint8Array([h>>24,h>>16&255,h>>8&255,h&255,p>>24,p>>16&255,p>>8&255,p&255])))}static esds(e){const t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))}static audioStsd(e){const t=e.samplerate;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,t&255,0,0])}static mp4a(e){return H.box(H.types.mp4a,H.audioStsd(e),H.box(H.types.esds,H.esds(e)))}static mp3(e){return H.box(H.types[".mp3"],H.audioStsd(e))}static ac3(e){return H.box(H.types["ac-3"],H.audioStsd(e),H.box(H.types.dac3,e.config))}static stsd(e){return e.type==="audio"?e.segmentCodec==="mp3"&&e.codec==="mp3"?H.box(H.types.stsd,H.STSD,H.mp3(e)):e.segmentCodec==="ac3"?H.box(H.types.stsd,H.STSD,H.ac3(e)):H.box(H.types.stsd,H.STSD,H.mp4a(e)):H.box(H.types.stsd,H.STSD,H.avc1(e))}static tkhd(e){const t=e.id,n=e.duration*e.timescale,i=e.width,o=e.height,l=Math.floor(n/(Tn+1)),c=Math.floor(n%(Tn+1));return H.box(H.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,t&255,0,0,0,0,l>>24,l>>16&255,l>>8&255,l&255,c>>24,c>>16&255,c>>8&255,c&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,i&255,0,0,o>>8&255,o&255,0,0]))}static traf(e,t){const n=H.sdtp(e),i=e.id,o=Math.floor(t/(Tn+1)),l=Math.floor(t%(Tn+1));return H.box(H.types.traf,H.box(H.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255])),H.box(H.types.tfdt,new Uint8Array([1,0,0,0,o>>24,o>>16&255,o>>8&255,o&255,l>>24,l>>16&255,l>>8&255,l&255])),H.trun(e,n.length+16+20+8+16+8+8),n)}static trak(e){return e.duration=e.duration||4294967295,H.box(H.types.trak,H.tkhd(e),H.mdia(e))}static trex(e){const t=e.id;return H.box(H.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const n=e.samples||[],i=n.length,o=12+16*i,l=new Uint8Array(o);let c,u,f,h,p,g;for(t+=8+o,l.set([e.type==="video"?1:0,0,15,1,i>>>24&255,i>>>16&255,i>>>8&255,i&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255],0),c=0;c<i;c++)u=n[c],f=u.duration,h=u.size,p=u.flags,g=u.cts,l.set([f>>>24&255,f>>>16&255,f>>>8&255,f&255,h>>>24&255,h>>>16&255,h>>>8&255,h&255,p.isLeading<<2|p.dependsOn,p.isDependedOn<<6|p.hasRedundancy<<4|p.paddingValue<<1|p.isNonSync,p.degradPrio&61440,p.degradPrio&15,g>>>24&255,g>>>16&255,g>>>8&255,g&255],12+16*c);return H.box(H.types.trun,l)}static initSegment(e){H.types||H.init();const t=H.moov(e);return dr(H.FTYP,t)}}H.types=void 0;H.HDLR_TYPES=void 0;H.STTS=void 0;H.STSC=void 0;H.STCO=void 0;H.STSZ=void 0;H.VMHD=void 0;H.SMHD=void 0;H.STSD=void 0;H.FTYP=void 0;H.DINF=void 0;const _x=9e4;function rh(r,e,t=1,n=!1){const i=r*e*t;return n?Math.round(i):i}function nR(r,e,t=1,n=!1){return rh(r,e,1/t,n)}function Zs(r,e=!1){return rh(r,1e3,1/_x,e)}function iR(r,e=1){return rh(r,_x,1/e)}const sR=10*1e3,Y0=1024,oR=1152,aR=1536;let Gi=null,yd=null;class ol{constructor(e,t,n,i=""){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.ISGenerated=!1,Gi===null){const l=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Gi=l?parseInt(l[1]):0}if(yd===null){const o=navigator.userAgent.match(/Safari\/(\d+)/i);yd=o?parseInt(o[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){B.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){B.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){B.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let t=!1;const n=e[0].pts,i=e.reduce((o,l)=>{let c=l.pts,u=c-o;return u<-4294967296&&(t=!0,c=lr(c,n),u=c-o),u>0?o:c},n);return t&&B.debug("PTS rollover detected"),i}remux(e,t,n,i,o,l,c,u){let f,h,p,g,v,x,b=o,S=o;const A=e.pid>-1,L=t.pid>-1,R=t.samples.length,k=e.samples.length>0,C=c&&R>0||R>1;if((!A||k)&&(!L||C)||this.ISGenerated||c){if(this.ISGenerated){var _,z,te,U;const pe=this.videoTrackConfig;pe&&(t.width!==pe.width||t.height!==pe.height||((_=t.pixelRatio)==null?void 0:_[0])!==((z=pe.pixelRatio)==null?void 0:z[0])||((te=t.pixelRatio)==null?void 0:te[1])!==((U=pe.pixelRatio)==null?void 0:U[1]))&&this.resetInitSegment()}else p=this.generateIS(e,t,o,l);const q=this.isVideoContiguous;let le=-1,re;if(C&&(le=lR(t.samples),!q&&this.config.forceKeyFrameOnDiscontinuity))if(x=!0,le>0){B.warn(`[mp4-remuxer]: Dropped ${le} out of ${R} video samples due to a missing keyframe`);const pe=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(le),t.dropped+=le,S+=(t.samples[0].pts-pe)/t.inputTimeScale,re=S}else le===-1&&(B.warn(`[mp4-remuxer]: No keyframe found out of ${R} video samples`),x=!1);if(this.ISGenerated){if(k&&C){const pe=this.getVideoStartPts(t.samples),ce=(lr(e.samples[0].pts,pe)-pe)/t.inputTimeScale;b+=Math.max(0,ce),S+=Math.max(0,-ce)}if(k){if(e.samplerate||(B.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),p=this.generateIS(e,t,o,l)),h=this.remuxAudio(e,b,this.isAudioContiguous,l,L||C||u===Le.AUDIO?S:void 0),C){const pe=h?h.endPTS-h.startPTS:0;t.inputTimeScale||(B.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),p=this.generateIS(e,t,o,l)),f=this.remuxVideo(t,S,q,pe)}}else C&&(f=this.remuxVideo(t,S,q,0));f&&(f.firstKeyFrame=le,f.independent=le!==-1,f.firstKeyFramePTS=re)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(n.samples.length&&(v=Fx(n,o,this._initPTS,this._initDTS)),i.samples.length&&(g=Bx(i,o,this._initPTS))),{audio:h,video:f,initSegment:p,independent:x,text:g,id3:v}}generateIS(e,t,n,i){const o=e.samples,l=t.samples,c=this.typeSupported,u={},f=this._initPTS;let h=!f||i,p="audio/mp4",g,v,x;if(h&&(g=v=1/0),e.config&&o.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":c.mpeg?(p="audio/mpeg",e.codec=""):c.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}u.audio={id:"audio",container:p,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&c.mpeg?new Uint8Array(0):H.initSegment([e]),metadata:{channelCount:e.channelCount}},h&&(x=e.inputTimeScale,!f||x!==f.timescale?g=v=o[0].pts-Math.round(x*n):h=!1)}if(t.sps&&t.pps&&l.length){if(t.timescale=t.inputTimeScale,u.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:H.initSegment([t]),metadata:{width:t.width,height:t.height}},h)if(x=t.inputTimeScale,!f||x!==f.timescale){const b=this.getVideoStartPts(l),S=Math.round(x*n);v=Math.min(v,lr(l[0].dts,b)-S),g=Math.min(g,b-S)}else h=!1;this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(u).length)return this.ISGenerated=!0,h?(this._initPTS={baseTime:g,timescale:x},this._initDTS={baseTime:v,timescale:x}):g=x=void 0,{tracks:u,initPTS:g,timescale:x}}remuxVideo(e,t,n,i){const o=e.inputTimeScale,l=e.samples,c=[],u=l.length,f=this._initPTS;let h=this.nextAvcDts,p=8,g=this.videoSampleDuration,v,x,b=Number.POSITIVE_INFINITY,S=Number.NEGATIVE_INFINITY,A=!1;if(!n||h===null){const X=t*o,V=l[0].pts-lr(l[0].dts,l[0].pts);Gi&&h!==null&&Math.abs(X-V-h)<15e3?n=!0:h=X-V}const L=f.baseTime*o/f.timescale;for(let X=0;X<u;X++){const V=l[X];V.pts=lr(V.pts-L,h),V.dts=lr(V.dts-L,h),V.dts<l[X>0?X-1:X].dts&&(A=!0)}A&&l.sort(function(X,V){const P=X.dts-V.dts,G=X.pts-V.pts;return P||G}),v=l[0].dts,x=l[l.length-1].dts;const R=x-v,k=R?Math.round(R/(u-1)):g||e.inputTimeScale/30;if(n){const X=v-h,V=X>k,P=X<-1;if((V||P)&&(V?B.warn(`AVC: ${Zs(X,!0)} ms (${X}dts) hole between fragments detected at ${t.toFixed(3)}`):B.warn(`AVC: ${Zs(-X,!0)} ms (${X}dts) overlapping between fragments detected at ${t.toFixed(3)}`),!P||h>=l[0].pts||Gi)){v=h;const G=l[0].pts-X;if(V)l[0].dts=v,l[0].pts=G;else for(let ae=0;ae<l.length&&!(l[ae].dts>G);ae++)l[ae].dts-=X,l[ae].pts-=X;B.log(`Video: Initial PTS/DTS adjusted: ${Zs(G,!0)}/${Zs(v,!0)}, delta: ${Zs(X,!0)} ms`)}}v=Math.max(0,v);let C=0,F=0,_=v;for(let X=0;X<u;X++){const V=l[X],P=V.units,G=P.length;let ae=0;for(let ge=0;ge<G;ge++)ae+=P[ge].data.length;F+=ae,C+=G,V.length=ae,V.dts<_?(V.dts=_,_+=k/4|0||1):_=V.dts,b=Math.min(V.pts,b),S=Math.max(V.pts,S)}x=l[u-1].dts;const z=F+4*C+8;let te;try{te=new Uint8Array(z)}catch(X){this.observer.emit(I.ERROR,I.ERROR,{type:Re.MUX_ERROR,details:K.REMUX_ALLOC_ERROR,fatal:!1,error:X,bytes:z,reason:`fail allocating video mdat ${z}`});return}const U=new DataView(te.buffer);U.setUint32(0,z),te.set(H.types.mdat,4);let q=!1,le=Number.POSITIVE_INFINITY,re=Number.POSITIVE_INFINITY,pe=Number.NEGATIVE_INFINITY,de=Number.NEGATIVE_INFINITY;for(let X=0;X<u;X++){const V=l[X],P=V.units;let G=0;for(let we=0,Ee=P.length;we<Ee;we++){const De=P[we],Y=De.data,se=De.data.byteLength;U.setUint32(p,se),p+=4,te.set(Y,p),p+=se,G+=4+se}let ae;if(X<u-1)g=l[X+1].dts-V.dts,ae=l[X+1].pts-V.pts;else{const we=this.config,Ee=X>0?V.dts-l[X-1].dts:k;if(ae=X>0?V.pts-l[X-1].pts:k,we.stretchShortVideoTrack&&this.nextAudioPts!==null){const De=Math.floor(we.maxBufferHole*o),Y=(i?b+i*o:this.nextAudioPts)-V.pts;Y>De?(g=Y-Ee,g<0?g=Ee:q=!0,B.log(`[mp4-remuxer]: It is approximately ${Y/90} ms to the next segment; using duration ${g/90} ms for the last video frame.`)):g=Ee}else g=Ee}const ge=Math.round(V.pts-V.dts);le=Math.min(le,g),pe=Math.max(pe,g),re=Math.min(re,ae),de=Math.max(de,ae),c.push(new q0(V.key,g,G,ge))}if(c.length){if(Gi){if(Gi<70){const X=c[0].flags;X.dependsOn=2,X.isNonSync=0}}else if(yd&&de-re<pe-le&&k/pe<.025&&c[0].cts===0){B.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let X=v;for(let V=0,P=c.length;V<P;V++){const G=X+c[V].duration,ae=X+c[V].cts;if(V<P-1){const ge=G+c[V+1].cts;c[V].duration=ge-ae}else c[V].duration=V?c[V-1].duration:k;c[V].cts=0,X=G}}}g=q||!g?k:g,this.nextAvcDts=h=x+g,this.videoSampleDuration=g,this.isVideoContiguous=!0;const Z={data1:H.moof(e.sequenceNumber++,v,ct({},e,{samples:c})),data2:te,startPTS:b/o,endPTS:(S+g)/o,startDTS:v/o,endDTS:h/o,type:"video",hasAudio:!1,hasVideo:!0,nb:c.length,dropped:e.dropped};return e.samples=[],e.dropped=0,Z}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return oR;case"ac3":return aR;default:return Y0}}remuxAudio(e,t,n,i,o){const l=e.inputTimeScale,c=e.samplerate?e.samplerate:l,u=l/c,f=this.getSamplesPerFrame(e),h=f*u,p=this._initPTS,g=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,v=[],x=o!==void 0;let b=e.samples,S=g?0:8,A=this.nextAudioPts||-1;const L=t*l,R=p.baseTime*l/p.timescale;if(this.isAudioContiguous=n=n||b.length&&A>0&&(i&&Math.abs(L-A)<9e3||Math.abs(lr(b[0].pts-R,L)-A)<20*h),b.forEach(function(ce){ce.pts=lr(ce.pts-R,L)}),!n||A<0){if(b=b.filter(ce=>ce.pts>=0),!b.length)return;o===0?A=0:i&&!x?A=Math.max(0,L):A=b[0].pts}if(e.segmentCodec==="aac"){const ce=this.config.maxAudioFramesDrift;for(let xe=0,Z=A;xe<b.length;xe++){const X=b[xe],V=X.pts,P=V-Z,G=Math.abs(1e3*P/l);if(P<=-ce*h&&x)xe===0&&(B.warn(`Audio frame @ ${(V/l).toFixed(3)}s overlaps nextAudioPts by ${Math.round(1e3*P/l)} ms.`),this.nextAudioPts=A=Z=V);else if(P>=ce*h&&G<sR&&x){let ae=Math.round(P/h);Z=V-ae*h,Z<0&&(ae--,Z+=h),xe===0&&(this.nextAudioPts=A=Z),B.warn(`[mp4-remuxer]: Injecting ${ae} audio frame @ ${(Z/l).toFixed(3)}s due to ${Math.round(1e3*P/l)} ms gap.`);for(let ge=0;ge<ae;ge++){const we=Math.max(Z,0);let Ee=z0.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);Ee||(B.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),Ee=X.unit.subarray()),b.splice(xe,0,{unit:Ee,pts:we}),Z+=h,xe++}}X.pts=Z,Z+=h}}let k=null,C=null,F,_=0,z=b.length;for(;z--;)_+=b[z].unit.byteLength;for(let ce=0,xe=b.length;ce<xe;ce++){const Z=b[ce],X=Z.unit;let V=Z.pts;if(C!==null){const G=v[ce-1];G.duration=Math.round((V-C)/u)}else if(n&&e.segmentCodec==="aac"&&(V=A),k=V,_>0){_+=S;try{F=new Uint8Array(_)}catch(G){this.observer.emit(I.ERROR,I.ERROR,{type:Re.MUX_ERROR,details:K.REMUX_ALLOC_ERROR,fatal:!1,error:G,bytes:_,reason:`fail allocating audio mdat ${_}`});return}g||(new DataView(F.buffer).setUint32(0,_),F.set(H.types.mdat,4))}else return;F.set(X,S);const P=X.byteLength;S+=P,v.push(new q0(!0,f,P,0)),C=V}const te=v.length;if(!te)return;const U=v[v.length-1];this.nextAudioPts=A=C+u*U.duration;const q=g?new Uint8Array(0):H.moof(e.sequenceNumber++,k/u,ct({},e,{samples:v}));e.samples=[];const le=k/l,re=A/l,de={data1:q,data2:F,startPTS:le,endPTS:re,startDTS:le,endDTS:re,type:"audio",hasAudio:!0,hasVideo:!1,nb:te};return this.isAudioContiguous=!0,de}remuxEmptyAudio(e,t,n,i){const o=e.inputTimeScale,l=e.samplerate?e.samplerate:o,c=o/l,u=this.nextAudioPts,f=this._initDTS,h=f.baseTime*9e4/f.timescale,p=(u!==null?u:i.startDTS*o)+h,g=i.endDTS*o+h,v=c*Y0,x=Math.ceil((g-p)/v),b=z0.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(B.warn("[mp4-remuxer]: remux empty Audio"),!b){B.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");return}const S=[];for(let A=0;A<x;A++){const L=p+A*v;S.push({unit:b,pts:L,dts:L})}return e.samples=S,this.remuxAudio(e,t,n,!1)}}function lr(r,e){let t;if(e===null)return r;for(e<r?t=-8589934592:t=8589934592;Math.abs(r-e)>4294967296;)r+=t;return r}function lR(r){for(let e=0;e<r.length;e++)if(r[e].key)return e;return-1}function Fx(r,e,t,n){const i=r.samples.length;if(!i)return;const o=r.inputTimeScale;for(let c=0;c<i;c++){const u=r.samples[c];u.pts=lr(u.pts-t.baseTime*o/t.timescale,e*o)/o,u.dts=lr(u.dts-n.baseTime*o/n.timescale,e*o)/o}const l=r.samples;return r.samples=[],{samples:l}}function Bx(r,e,t){const n=r.samples.length;if(!n)return;const i=r.inputTimeScale;for(let l=0;l<n;l++){const c=r.samples[l];c.pts=lr(c.pts-t.baseTime*i/t.timescale,e*i)/i}r.samples.sort((l,c)=>l.pts-c.pts);const o=r.samples;return r.samples=[],{samples:o}}class q0{constructor(e,t,n,i){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=t,this.size=n,this.cts=i,this.flags={isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:e?2:1,isNonSync:e?0:1}}}class cR{constructor(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}destroy(){}resetTimeStamp(e){this.initPTS=e,this.lastEndTime=null}resetNextTimestamp(){this.lastEndTime=null}resetInitSegment(e,t,n,i){this.audioCodec=t,this.videoCodec=n,this.generateInitSegment(mT(e,i)),this.emitInitSegment=!0}generateInitSegment(e){let{audioCodec:t,videoCodec:n}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const i=this.initData=cx(e);i.audio&&(t=X0(i.audio,Ge.AUDIO)),i.video&&(n=X0(i.video,Ge.VIDEO));const o={};i.audio&&i.video?o.audiovideo={container:"video/mp4",codec:t+","+n,initSegment:e,id:"main"}:i.audio?o.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:i.video?o.video={container:"video/mp4",codec:n,initSegment:e,id:"main"}:B.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=o}remux(e,t,n,i,o,l){var c,u;let{initPTS:f,lastEndTime:h}=this;const p={audio:void 0,video:void 0,text:i,id3:n,initSegment:void 0};he(h)||(h=this.lastEndTime=o||0);const g=t.samples;if(!(g!=null&&g.length))return p;const v={initPTS:void 0,timescale:1};let x=this.initData;if((c=x)!=null&&c.length||(this.generateInitSegment(g),x=this.initData),!((u=x)!=null&&u.length))return B.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),p;this.emitInitSegment&&(v.tracks=this.initTracks,this.emitInitSegment=!1);const b=yT(g,x),S=gT(x,g),A=S===null?o:S;(uR(f,A,o,b)||v.timescale!==f.timescale&&l)&&(v.initPTS=A-o,f&&f.timescale===1&&B.warn(`Adjusting initPTS by ${v.initPTS-f.baseTime}`),this.initPTS=f={baseTime:v.initPTS,timescale:1});const L=e?A-f.baseTime/f.timescale:h,R=L+b;xT(x,g,f.baseTime/f.timescale),b>0?this.lastEndTime=R:(B.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const k=!!x.audio,C=!!x.video;let F="";k&&(F+="audio"),C&&(F+="video");const _={data1:g,startPTS:L,startDTS:L,endPTS:R,endDTS:R,type:F,hasAudio:k,hasVideo:C,nb:1,dropped:0};return p.audio=_.type==="audio"?_:void 0,p.video=_.type!=="audio"?_:void 0,p.initSegment=v,p.id3=Fx(n,o,f,f),i.samples.length&&(p.text=Bx(i,o,f)),p}}function uR(r,e,t,n){if(r===null)return!0;const i=Math.max(n,1),o=e-r.baseTime/r.timescale;return Math.abs(o-t)>i}function X0(r,e){const t=r?.codec;if(t&&t.length>4)return t;if(e===Ge.AUDIO){if(t==="ec-3"||t==="ac-3"||t==="alac")return t;if(t==="fLaC"||t==="Opus")return xl(t,!1);const n="mp4a.40.5";return B.info(`Parsed audio codec "${t}" or audio object type not handled. Using "${n}"`),n}return B.warn(`Unhandled video codec "${t}"`),t==="hvc1"||t==="hev1"?"hvc1.1.6.L120.90":t==="av01"?"av01.0.04M.08":"avc1.42e01e"}let Qr;try{Qr=self.performance.now.bind(self.performance)}catch{B.debug("Unable to use Performance API on this environment"),Qr=Qi?.Date.now}const al=[{demux:qL,remux:cR},{demux:Ln,remux:ol},{demux:zL,remux:ol},{demux:rR,remux:ol}];al.splice(2,0,{demux:XL,remux:ol});class Z0{constructor(e,t,n,i,o){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=n,this.vendor=i,this.id=o}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,n,i){const o=n.transmuxing;o.executeStart=Qr();let l=new Uint8Array(e);const{currentTransmuxState:c,transmuxConfig:u}=this;i&&(this.currentTransmuxState=i);const{contiguous:f,discontinuity:h,trackSwitch:p,accurateTimeOffset:g,timeOffset:v,initSegmentChange:x}=i||c,{audioCodec:b,videoCodec:S,defaultInitPts:A,duration:L,initSegmentData:R}=u,k=dR(l,t);if(k&&k.method==="AES-128"){const z=this.getDecrypter();if(z.isSync()){let te=z.softwareDecrypt(l,k.key.buffer,k.iv.buffer);if(n.part>-1&&(te=z.flush()),!te)return o.executeEnd=Qr(),vd(n);l=new Uint8Array(te)}else return this.decryptionPromise=z.webCryptoDecrypt(l,k.key.buffer,k.iv.buffer).then(te=>{const U=this.push(te,null,n);return this.decryptionPromise=null,U}),this.decryptionPromise}const C=this.needsProbing(h,p);if(C){const z=this.configureTransmuxer(l);if(z)return B.warn(`[transmuxer] ${z.message}`),this.observer.emit(I.ERROR,I.ERROR,{type:Re.MEDIA_ERROR,details:K.FRAG_PARSING_ERROR,fatal:!1,error:z,reason:z.message}),o.executeEnd=Qr(),vd(n)}(h||p||x||C)&&this.resetInitSegment(R,b,S,L,t),(h||x||C)&&this.resetInitialTimestamp(A),f||this.resetContiguity();const F=this.transmux(l,k,v,g,n),_=this.currentTransmuxState;return _.contiguous=!0,_.discontinuity=!1,_.trackSwitch=!1,o.executeEnd=Qr(),F}flush(e){const t=e.transmuxing;t.executeStart=Qr();const{decrypter:n,currentTransmuxState:i,decryptionPromise:o}=this;if(o)return o.then(()=>this.flush(e));const l=[],{timeOffset:c}=i;if(n){const p=n.flush();p&&l.push(this.push(p,null,e))}const{demuxer:u,remuxer:f}=this;if(!u||!f)return t.executeEnd=Qr(),[vd(e)];const h=u.flush(c);return ll(h)?h.then(p=>(this.flushRemux(l,p,e),l)):(this.flushRemux(l,h,e),l)}flushRemux(e,t,n){const{audioTrack:i,videoTrack:o,id3Track:l,textTrack:c}=t,{accurateTimeOffset:u,timeOffset:f}=this.currentTransmuxState;B.log(`[transmuxer.ts]: Flushed fragment ${n.sn}${n.part>-1?" p: "+n.part:""} of level ${n.level}`);const h=this.remuxer.remux(i,o,l,c,f,u,!0,this.id);e.push({remuxResult:h,chunkMeta:n}),n.transmuxing.executeEnd=Qr()}resetInitialTimestamp(e){const{demuxer:t,remuxer:n}=this;!t||!n||(t.resetTimeStamp(e),n.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;!e||!t||(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,n,i,o){const{demuxer:l,remuxer:c}=this;!l||!c||(l.resetInitSegment(e,t,n,i),c.resetInitSegment(e,t,n,o))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,n,i,o){let l;return t&&t.method==="SAMPLE-AES"?l=this.transmuxSampleAes(e,t,n,i,o):l=this.transmuxUnencrypted(e,n,i,o),l}transmuxUnencrypted(e,t,n,i){const{audioTrack:o,videoTrack:l,id3Track:c,textTrack:u}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(o,l,c,u,t,n,!1,this.id),chunkMeta:i}}transmuxSampleAes(e,t,n,i,o){return this.demuxer.demuxSampleAes(e,t,n).then(l=>({remuxResult:this.remuxer.remux(l.audioTrack,l.videoTrack,l.id3Track,l.textTrack,n,i,!1,this.id),chunkMeta:o}))}configureTransmuxer(e){const{config:t,observer:n,typeSupported:i,vendor:o}=this;let l;for(let g=0,v=al.length;g<v;g++){var c;if((c=al[g].demux)!=null&&c.probe(e)){l=al[g];break}}if(!l)return new Error("Failed to find demuxer by probing fragment data");const u=this.demuxer,f=this.remuxer,h=l.remux,p=l.demux;(!f||!(f instanceof h))&&(this.remuxer=new h(n,t,i,o)),(!u||!(u instanceof p))&&(this.demuxer=new p(n,t,i),this.probe=p.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new Zf(this.config)),e}}function dR(r,e){let t=null;return r.byteLength>0&&e?.key!=null&&e.iv!==null&&e.method!=null&&(t=e),t}const vd=r=>({remuxResult:{},chunkMeta:r});function ll(r){return"then"in r&&r.then instanceof Function}class fR{constructor(e,t,n,i,o){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=n,this.duration=i,this.defaultInitPts=o||null}}class hR{constructor(e,t,n,i,o,l){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=n,this.trackSwitch=i,this.timeOffset=o,this.initSegmentChange=l}}var jx={exports:{}};(function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function i(u,f,h){this.fn=u,this.context=f,this.once=h||!1}function o(u,f,h,p,g){if(typeof h!="function")throw new TypeError("The listener must be a function");var v=new i(h,p||u,g),x=t?t+f:f;return u._events[x]?u._events[x].fn?u._events[x]=[u._events[x],v]:u._events[x].push(v):(u._events[x]=v,u._eventsCount++),u}function l(u,f){--u._eventsCount===0?u._events=new n:delete u._events[f]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var f=[],h,p;if(this._eventsCount===0)return f;for(p in h=this._events)e.call(h,p)&&f.push(t?p.slice(1):p);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(h)):f},c.prototype.listeners=function(f){var h=t?t+f:f,p=this._events[h];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,v=p.length,x=new Array(v);g<v;g++)x[g]=p[g].fn;return x},c.prototype.listenerCount=function(f){var h=t?t+f:f,p=this._events[h];return p?p.fn?1:p.length:0},c.prototype.emit=function(f,h,p,g,v,x){var b=t?t+f:f;if(!this._events[b])return!1;var S=this._events[b],A=arguments.length,L,R;if(S.fn){switch(S.once&&this.removeListener(f,S.fn,void 0,!0),A){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,h),!0;case 3:return S.fn.call(S.context,h,p),!0;case 4:return S.fn.call(S.context,h,p,g),!0;case 5:return S.fn.call(S.context,h,p,g,v),!0;case 6:return S.fn.call(S.context,h,p,g,v,x),!0}for(R=1,L=new Array(A-1);R<A;R++)L[R-1]=arguments[R];S.fn.apply(S.context,L)}else{var k=S.length,C;for(R=0;R<k;R++)switch(S[R].once&&this.removeListener(f,S[R].fn,void 0,!0),A){case 1:S[R].fn.call(S[R].context);break;case 2:S[R].fn.call(S[R].context,h);break;case 3:S[R].fn.call(S[R].context,h,p);break;case 4:S[R].fn.call(S[R].context,h,p,g);break;default:if(!L)for(C=1,L=new Array(A-1);C<A;C++)L[C-1]=arguments[C];S[R].fn.apply(S[R].context,L)}}return!0},c.prototype.on=function(f,h,p){return o(this,f,h,p,!1)},c.prototype.once=function(f,h,p){return o(this,f,h,p,!0)},c.prototype.removeListener=function(f,h,p,g){var v=t?t+f:f;if(!this._events[v])return this;if(!h)return l(this,v),this;var x=this._events[v];if(x.fn)x.fn===h&&(!g||x.once)&&(!p||x.context===p)&&l(this,v);else{for(var b=0,S=[],A=x.length;b<A;b++)(x[b].fn!==h||g&&!x[b].once||p&&x[b].context!==p)&&S.push(x[b]);S.length?this._events[v]=S.length===1?S[0]:S:l(this,v)}return this},c.prototype.removeAllListeners=function(f){var h;return f?(h=t?t+f:f,this._events[h]&&l(this,h)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=t,c.EventEmitter=c,r.exports=c})(jx);var pR=jx.exports,nh=FA(pR);class Ux{constructor(e,t,n,i){this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;const o=e.config;this.hls=e,this.id=t,this.useWorker=!!o.enableWorker,this.onTransmuxComplete=n,this.onFlush=i;const l=(f,h)=>{h=h||{},h.frag=this.frag,h.id=this.id,f===I.ERROR&&(this.error=h.error),this.hls.trigger(f,h)};this.observer=new nh,this.observer.on(I.FRAG_DECRYPTED,l),this.observer.on(I.ERROR,l);const c=ui(o.preferManagedMediaSource)||{isTypeSupported:()=>!1},u={mpeg:c.isTypeSupported("audio/mpeg"),mp3:c.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:c.isTypeSupported('audio/mp4; codecs="ac-3"')};if(this.useWorker&&typeof Worker<"u"&&(o.workerPath||PL())){try{o.workerPath?(B.log(`loading Web Worker ${o.workerPath} for "${t}"`),this.workerContext=ML(o.workerPath)):(B.log(`injecting Web Worker for "${t}"`),this.workerContext=NL()),this.onwmsg=p=>this.onWorkerMessage(p);const{worker:h}=this.workerContext;h.addEventListener("message",this.onwmsg),h.onerror=p=>{const g=new Error(`${p.message}  (${p.filename}:${p.lineno})`);o.enableWorker=!1,B.warn(`Error in "${t}" Web Worker, fallback to inline`),this.hls.trigger(I.ERROR,{type:Re.OTHER_ERROR,details:K.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:g})},h.postMessage({cmd:"init",typeSupported:u,vendor:"",id:t,config:JSON.stringify(o)})}catch(h){B.warn(`Error setting up "${t}" Web Worker, fallback to inline`,h),this.resetWorker(),this.error=null,this.transmuxer=new Z0(this.observer,u,o,"",t)}return}this.transmuxer=new Z0(this.observer,u,o,"",t)}resetWorker(){if(this.workerContext){const{worker:e,objectURL:t}=this.workerContext;t&&self.URL.revokeObjectURL(t),e.removeEventListener("message",this.onwmsg),e.onerror=null,e.terminate(),this.workerContext=null}}destroy(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{const t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null}push(e,t,n,i,o,l,c,u,f,h){var p,g;f.transmuxing.start=self.performance.now();const{transmuxer:v}=this,x=l?l.start:o.start,b=o.decryptdata,S=this.frag,A=!(S&&o.cc===S.cc),L=!(S&&f.level===S.level),R=S?f.sn-S.sn:-1,k=this.part?f.part-this.part.index:-1,C=R===0&&f.id>1&&f.id===S?.stats.chunkCount,F=!L&&(R===1||R===0&&(k===1||C&&k<=0)),_=self.performance.now();(L||R||o.stats.parsing.start===0)&&(o.stats.parsing.start=_),l&&(k||!F)&&(l.stats.parsing.start=_);const z=!(S&&((p=o.initSegment)==null?void 0:p.url)===((g=S.initSegment)==null?void 0:g.url)),te=new hR(A,F,u,L,x,z);if(!F||A||z){B.log(`[transmuxer-interface, ${o.type}]: Starting new transmux session for sn: ${f.sn} p: ${f.part} level: ${f.level} id: ${f.id}
        discontinuity: ${A}
        trackSwitch: ${L}
        contiguous: ${F}
        accurateTimeOffset: ${u}
        timeOffset: ${x}
        initSegmentChange: ${z}`);const U=new fR(n,i,t,c,h);this.configureTransmuxer(U)}if(this.frag=o,this.part=l,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:e,decryptdata:b,chunkMeta:f,state:te},e instanceof ArrayBuffer?[e]:[]);else if(v){const U=v.push(e,b,f,te);ll(U)?(v.async=!0,U.then(q=>{this.handleTransmuxComplete(q)}).catch(q=>{this.transmuxerError(q,f,"transmuxer-interface push error")})):(v.async=!1,this.handleTransmuxComplete(U))}}flush(e){e.transmuxing.start=self.performance.now();const{transmuxer:t}=this;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:e});else if(t){let n=t.flush(e);ll(n)||t.async?(ll(n)||(n=Promise.resolve(n)),n.then(o=>{this.handleFlushResult(o,e)}).catch(o=>{this.transmuxerError(o,e,"transmuxer-interface flush error")})):this.handleFlushResult(n,e)}}transmuxerError(e,t,n){this.hls&&(this.error=e,this.hls.trigger(I.ERROR,{type:Re.MEDIA_ERROR,details:K.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,fatal:!1,error:e,err:e,reason:n}))}handleFlushResult(e,t){e.forEach(n=>{this.handleTransmuxComplete(n)}),this.onFlush(t)}onWorkerMessage(e){const t=e.data;if(!(t!=null&&t.event)){B.warn(`worker message received with no ${t?"event name":"data"}`);return}const n=this.hls;if(this.hls)switch(t.event){case"init":{var i;const o=(i=this.workerContext)==null?void 0:i.objectURL;o&&self.URL.revokeObjectURL(o);break}case"transmuxComplete":{this.handleTransmuxComplete(t.data);break}case"flush":{this.onFlush(t.data);break}case"workerLog":B[t.data.logType]&&B[t.data.logType](t.data.message);break;default:{t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,n.trigger(t.event,t.data);break}}}configureTransmuxer(e){const{transmuxer:t}=this;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:e}):t&&t.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}function Hx(r,e){if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(!ts(r[t].attrs,e[t].attrs))return!1;return!0}function ts(r,e,t){const n=r["STABLE-RENDITION-ID"];return n&&!t?n===e["STABLE-RENDITION-ID"]:!(t||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(i=>r[i]!==e[i])}function mf(r,e){return e.label.toLowerCase()===r.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(r.lang||"").toLowerCase())}const J0=100;class mR extends Jf{constructor(e,t,n){super(e,t,n,"[audio-stream-controller]",Le.AUDIO),this.videoBuffer=null,this.videoTrackCC=-1,this.waitingVideoCC=-1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null}_registerListeners(){const{hls:e}=this;e.on(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.LEVEL_LOADED,this.onLevelLoaded,this),e.on(I.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(I.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(I.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(I.ERROR,this.onError,this),e.on(I.BUFFER_RESET,this.onBufferReset,this),e.on(I.BUFFER_CREATED,this.onBufferCreated,this),e.on(I.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(I.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(I.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(I.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.LEVEL_LOADED,this.onLevelLoaded,this),e.off(I.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(I.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(I.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(I.ERROR,this.onError,this),e.off(I.BUFFER_RESET,this.onBufferReset,this),e.off(I.BUFFER_CREATED,this.onBufferCreated,this),e.off(I.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(I.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(I.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(I.FRAG_BUFFERED,this.onFragBuffered,this)}onInitPtsFound(e,{frag:t,id:n,initPTS:i,timescale:o}){if(n==="main"){const l=t.cc;this.initPTS[t.cc]={baseTime:i,timescale:o},this.log(`InitPTS for cc: ${l} found from main: ${i}`),this.videoTrackCC=l,this.state===J.WAITING_INIT_PTS&&this.tick()}}startLoad(e){if(!this.levels){this.startPosition=e,this.state=J.STOPPED;return}const t=this.lastCurrentTime;this.stopLoad(),this.setInterval(J0),t>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${t.toFixed(3)}`),e=t,this.state=J.IDLE):(this.loadedmetadata=!1,this.state=J.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}doTick(){switch(this.state){case J.IDLE:this.doTickIdle();break;case J.WAITING_TRACK:{var e;const{levels:n,trackId:i}=this,o=n==null||(e=n[i])==null?void 0:e.details;if(o){if(this.waitForCdnTuneIn(o))break;this.state=J.WAITING_INIT_PTS}break}case J.FRAG_LOADING_WAITING_RETRY:{var t;const n=performance.now(),i=this.retryDate;if(!i||n>=i||(t=this.media)!=null&&t.seeking){const{levels:o,trackId:l}=this;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(o?.[l]||null),this.state=J.IDLE}break}case J.WAITING_INIT_PTS:{const n=this.waitingData;if(n){const{frag:i,part:o,cache:l,complete:c}=n;if(this.initPTS[i.cc]!==void 0){this.waitingData=null,this.waitingVideoCC=-1,this.state=J.FRAG_LOADING;const u=l.flush(),f={frag:i,part:o,payload:u,networkDetails:null};this._handleFragmentLoadProgress(f),c&&super._handleFragmentLoadComplete(f)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log(`Waiting fragment cc (${i.cc}) cancelled because video is at cc ${this.videoTrackCC}`),this.clearWaitingFragment();else{const u=this.getLoadPosition(),f=Ve.bufferInfo(this.mediaBuffer,u,this.config.maxBufferHole);hf(f.end,this.config.maxFragLookUpTolerance,i)<0&&(this.log(`Waiting fragment cc (${i.cc}) @ ${i.start} cancelled because another fragment at ${f.end} is needed`),this.clearWaitingFragment())}}else this.state=J.IDLE}}this.onTickEnd()}clearWaitingFragment(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=J.IDLE)}resetLoadingState(){this.clearWaitingFragment(),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){const{hls:e,levels:t,media:n,trackId:i}=this,o=e.config;if(!this.buffering||!n&&(this.startFragRequested||!o.startFragPrefetch)||!(t!=null&&t[i]))return;const l=t[i],c=l.details;if(!c||c.live&&this.levelLastLoaded!==l||this.waitForCdnTuneIn(c)){this.state=J.WAITING_TRACK;return}const u=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&u&&(this.bufferFlushed=!1,this.afterBufferFlushed(u,Ge.AUDIO,Le.AUDIO));const f=this.getFwdBufferInfo(u,Le.AUDIO);if(f===null)return;const{bufferedTrack:h,switchingTrack:p}=this;if(!p&&this._streamEnded(f,c)){e.trigger(I.BUFFER_EOS,{type:"audio"}),this.state=J.ENDED;return}const g=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,Le.MAIN),v=f.len,x=this.getMaxBufferLength(g?.len),b=c.fragments,S=b[0].start;let A=this.flushing?this.getLoadPosition():f.end;if(p&&n){const C=this.getLoadPosition();h&&!ts(p.attrs,h.attrs)&&(A=C),c.PTSKnown&&C<S&&(f.end>S||f.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),n.currentTime=S+.05)}if(v>=x&&!p&&A<b[b.length-1].start)return;let L=this.getNextFragment(A,c),R=!1;if(L&&this.isLoopLoading(L,A)&&(R=!!L.gap,L=this.getNextFragmentLoopLoading(L,c,f,Le.MAIN,x)),!L){this.bufferFlushed=!0;return}const k=g&&L.start>g.end+c.targetduration;if(k||!(g!=null&&g.len)&&f.len){const C=this.getAppendedFrag(L.start,Le.MAIN);if(C===null||(R||(R=!!C.gap||!!k&&g.len===0),k&&!R||R&&f.nextStart&&f.nextStart<C.end))return}this.loadFragment(L,l,A)}getMaxBufferLength(e){const t=super.getMaxBufferLength();return e?Math.min(Math.max(t,e),this.config.maxMaxBufferLength):t}onMediaDetaching(){this.videoBuffer=null,this.bufferFlushed=this.flushing=!1,super.onMediaDetaching()}onAudioTracksUpdated(e,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map(n=>new es(n))}onAudioTrackSwitching(e,t){const n=!!t.url;this.trackId=t.id;const{fragCurrent:i}=this;i&&(i.abortRequests(),this.removeUnbufferedFrags(i.start)),this.resetLoadingState(),n?this.setInterval(J0):this.resetTransmuxer(),n?(this.switchingTrack=t,this.state=J.IDLE,this.flushAudioIfNeeded(t)):(this.switchingTrack=null,this.bufferedTrack=t,this.state=J.STOPPED),this.tick()}onManifestLoading(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=this.flushing=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1}onLevelLoaded(e,t){this.mainDetails=t.details,this.cachedTrackLoadedData!==null&&(this.hls.trigger(I.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)}onAudioTrackLoaded(e,t){var n;if(this.mainDetails==null){this.cachedTrackLoadedData=t;return}const{levels:i}=this,{details:o,id:l}=t;if(!i){this.warn(`Audio tracks were reset while loading level ${l}`);return}this.log(`Audio track ${l} loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""},duration:${o.totalduration}`);const c=i[l];let u=0;if(o.live||(n=c.details)!=null&&n.live){this.checkLiveUpdate(o);const h=this.mainDetails;if(o.deltaUpdateFailed||!h)return;if(!c.details&&o.hasProgramDateTime&&h.hasProgramDateTime)Il(o,h),u=o.fragments[0].start;else{var f;u=this.alignPlaylists(o,c.details,(f=this.levelLastLoaded)==null?void 0:f.details)}}c.details=o,this.levelLastLoaded=c,!this.startFragRequested&&(this.mainDetails||!o.live)&&this.setStartPosition(this.mainDetails||o,u),this.state===J.WAITING_TRACK&&!this.waitForCdnTuneIn(o)&&(this.state=J.IDLE),this.tick()}_handleFragmentLoadProgress(e){var t;const{frag:n,part:i,payload:o}=e,{config:l,trackId:c,levels:u}=this;if(!u){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}const f=u[c];if(!f){this.warn("Audio track is undefined on fragment load progress");return}const h=f.details;if(!h){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(n.start);return}const p=l.defaultAudioCodec||f.audioCodec||"mp4a.40.2";let g=this.transmuxer;g||(g=this.transmuxer=new Ux(this.hls,Le.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const v=this.initPTS[n.cc],x=(t=n.initSegment)==null?void 0:t.data;if(v!==void 0){const S=i?i.index:-1,A=S!==-1,L=new Xf(n.level,n.sn,n.stats.chunkCount,o.byteLength,S,A);g.push(o,x,p,"",n,i,h.totalduration,!1,L,v)}else{this.log(`Unknown video PTS for cc ${n.cc}, waiting for video PTS before demuxing audio frag ${n.sn} of [${h.startSN} ,${h.endSN}],track ${c}`);const{cache:b}=this.waitingData=this.waitingData||{frag:n,part:i,cache:new Ix,complete:!1};b.push(new Uint8Array(o)),this.waitingVideoCC=this.videoTrackCC,this.state=J.WAITING_INIT_PTS}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1}onBufferCreated(e,t){const n=t.tracks.audio;n&&(this.mediaBuffer=n.buffer||null),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer||null)}onFragBuffered(e,t){const{frag:n,part:i}=t;if(n.type!==Le.AUDIO){if(!this.loadedmetadata&&n.type===Le.MAIN){const o=this.videoBuffer||this.media;o&&Ve.getBuffered(o).length&&(this.loadedmetadata=!0)}return}if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${i?" p: "+i.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(n.sn!=="initSegment"){this.fragPrevious=n;const o=this.switchingTrack;o&&(this.bufferedTrack=o,this.switchingTrack=null,this.hls.trigger(I.AUDIO_TRACK_SWITCHED,xt({},o)))}this.fragBufferedComplete(n,i)}onError(e,t){var n;if(t.fatal){this.state=J.ERROR;return}switch(t.details){case K.FRAG_GAP:case K.FRAG_PARSING_ERROR:case K.FRAG_DECRYPT_ERROR:case K.FRAG_LOAD_ERROR:case K.FRAG_LOAD_TIMEOUT:case K.KEY_LOAD_ERROR:case K.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Le.AUDIO,t);break;case K.AUDIO_TRACK_LOAD_ERROR:case K.AUDIO_TRACK_LOAD_TIMEOUT:case K.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===J.WAITING_TRACK&&((n=t.context)==null?void 0:n.type)===Me.AUDIO_TRACK&&(this.state=J.IDLE);break;case K.BUFFER_APPEND_ERROR:case K.BUFFER_FULL_ERROR:if(!t.parent||t.parent!=="audio")return;if(t.details===K.BUFFER_APPEND_ERROR){this.resetLoadingState();return}this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case K.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onBufferFlushing(e,{type:t}){t!==Ge.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:t}){if(t!==Ge.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===J.ENDED&&(this.state=J.IDLE);const n=this.mediaBuffer||this.media;n&&(this.afterBufferFlushed(n,t,Le.AUDIO),this.tick())}}_handleTransmuxComplete(e){var t;const n="audio",{hls:i}=this,{remuxResult:o,chunkMeta:l}=e,c=this.getCurrentContext(l);if(!c){this.resetWhenMissingContext(l);return}const{frag:u,part:f,level:h}=c,{details:p}=h,{audio:g,text:v,id3:x,initSegment:b}=o;if(this.fragContextChanged(u)||!p){this.fragmentTracker.removeFragment(u);return}if(this.state=J.PARSING,this.switchingTrack&&g&&this.completeAudioSwitch(this.switchingTrack),b!=null&&b.tracks){const S=u.initSegment||u;this._bufferInitSegment(h,b.tracks,S,l),i.trigger(I.FRAG_PARSING_INIT_SEGMENT,{frag:S,id:n,tracks:b.tracks})}if(g){const{startPTS:S,endPTS:A,startDTS:L,endDTS:R}=g;f&&(f.elementaryStreams[Ge.AUDIO]={startPTS:S,endPTS:A,startDTS:L,endDTS:R}),u.setElementaryStreamInfo(Ge.AUDIO,S,A,L,R),this.bufferFragmentData(g,u,f,l)}if(x!=null&&(t=x.samples)!=null&&t.length){const S=ct({id:n,frag:u,details:p},x);i.trigger(I.FRAG_PARSING_METADATA,S)}if(v){const S=ct({id:n,frag:u,details:p},v);i.trigger(I.FRAG_PARSING_USERDATA,S)}}_bufferInitSegment(e,t,n,i){if(this.state!==J.PARSING)return;t.video&&delete t.video;const o=t.audio;if(!o)return;o.id="audio";const l=e.audioCodec;this.log(`Init audio buffer, container:${o.container}, codecs[level/parsed]=[${l}/${o.codec}]`),l&&l.split(",").length===1&&(o.levelCodec=l),this.hls.trigger(I.BUFFER_CODECS,t);const c=o.initSegment;if(c!=null&&c.byteLength){const u={type:"audio",frag:n,part:null,chunkMeta:i,parent:n.type,data:c};this.hls.trigger(I.BUFFER_APPENDING,u)}this.tickImmediate()}loadFragment(e,t,n){const i=this.fragmentTracker.getState(e);if(this.fragCurrent=e,this.switchingTrack||i===yt.NOT_LOADED||i===yt.PARTIAL){var o;if(e.sn==="initSegment")this._loadInitSegment(e,t);else if((o=t.details)!=null&&o.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=J.WAITING_INIT_PTS;const l=this.mainDetails;l&&l.fragments[0].start!==t.details.fragments[0].start&&Il(t.details,l)}else this.startFragRequested=!0,super.loadFragment(e,t,n)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){const{media:t,bufferedTrack:n}=this,i=n?.attrs,o=e.attrs;t&&i&&(i.CHANNELS!==o.CHANNELS||n.name!==e.name||n.lang!==e.lang)&&(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null)}completeAudioSwitch(e){const{hls:t}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(I.AUDIO_TRACK_SWITCHED,xt({},e))}}class gR extends qf{constructor(e){super(e,"[audio-track-controller]"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.MANIFEST_PARSED,this.onManifestParsed,this),e.on(I.LEVEL_LOADING,this.onLevelLoading,this),e.on(I.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(I.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(I.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.MANIFEST_PARSED,this.onManifestParsed,this),e.off(I.LEVEL_LOADING,this.onLevelLoading,this),e.off(I.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(I.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(I.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:n,groupId:i,details:o}=t,l=this.tracksInGroup[n];if(!l||l.groupId!==i){this.warn(`Audio track with id:${n} and group:${i} not found in active group ${l?.groupId}`);return}const c=l.details;l.details=t.details,this.log(`Audio track ${n} "${l.name}" lang:${l.lang} group:${i} loaded [${o.startSN}-${o.endSN}]`),n===this.trackId&&this.playlistLoaded(n,t,c)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const n=t.audioGroups||null,i=this.groupIds;let o=this.currentTrack;if(!n||i?.length!==n?.length||n!=null&&n.some(c=>i?.indexOf(c)===-1)){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const c=this.tracks.filter(g=>!n||n.indexOf(g.groupId)!==-1);if(c.length)this.selectDefaultTrack&&!c.some(g=>g.default)&&(this.selectDefaultTrack=!1),c.forEach((g,v)=>{g.id=v});else if(!o&&!this.tracksInGroup.length)return;this.tracksInGroup=c;const u=this.hls.config.audioPreference;if(!o&&u){const g=Br(u,c,Ui);if(g>-1)o=c[g];else{const v=Br(u,this.tracks);o=this.tracks[v]}}let f=this.findTrackId(o);f===-1&&o&&(f=this.findTrackId(null));const h={audioTracks:c};this.log(`Updating audio tracks, ${c.length} track(s) found in group(s): ${n?.join(",")}`),this.hls.trigger(I.AUDIO_TRACKS_UPDATED,h);const p=this.trackId;if(f!==-1&&p===-1)this.setAudioTrack(f);else if(c.length&&p===-1){var l;const g=new Error(`No audio track selected for current audio group-ID(s): ${(l=this.groupIds)==null?void 0:l.join(",")} track count: ${c.length}`);this.warn(g.message),this.hls.trigger(I.ERROR,{type:Re.MEDIA_ERROR,details:K.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:g})}}else this.shouldReloadPlaylist(o)&&this.setAudioTrack(this.trackId)}onError(e,t){t.fatal||!t.context||t.context.type===Me.AUDIO_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&(this.requestScheduled=-1,this.checkRetry(t))}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const t=this.hls;if(t.config.audioPreference=e,e){const n=this.allAudioTracks;if(this.selectDefaultTrack=!1,n.length){const i=this.currentTrack;if(i&&qi(e,i,Ui))return i;const o=Br(e,this.tracksInGroup,Ui);if(o>-1){const l=this.tracksInGroup[o];return this.setAudioTrack(o),l}else if(i){let l=t.loadLevel;l===-1&&(l=t.firstAutoLevel);const c=gL(e,t.levels,n,l,Ui);if(c===-1)return null;t.nextLoadLevel=c}if(e.channels||e.audioCodec){const l=Br(e,n);if(l>-1)return n[l]}}}return null}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length){this.warn(`Invalid audio track id: ${e}`);return}this.clearTimer(),this.selectDefaultTrack=!1;const n=this.currentTrack,i=t[e],o=i.details&&!i.details.live;if(e===this.trackId&&i===n&&o||(this.log(`Switching to audio-track ${e} "${i.name}" lang:${i.lang} group:${i.groupId} channels:${i.channels}`),this.trackId=e,this.currentTrack=i,this.hls.trigger(I.AUDIO_TRACK_SWITCHING,xt({},i)),o))return;const l=this.switchParams(i.url,n?.details,i.details);this.loadPlaylist(l)}findTrackId(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){const i=t[n];if(!(this.selectDefaultTrack&&!i.default)&&(!e||qi(e,i,Ui)))return n}if(e){const{name:n,lang:i,assocLang:o,characteristics:l,audioCodec:c,channels:u}=e;for(let f=0;f<t.length;f++){const h=t[f];if(qi({name:n,lang:i,assocLang:o,characteristics:l,audioCodec:c,channels:u},h,Ui))return f}for(let f=0;f<t.length;f++){const h=t[f];if(ts(e.attrs,h.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return f}for(let f=0;f<t.length;f++){const h=t[f];if(ts(e.attrs,h.attrs,["LANGUAGE"]))return f}}return-1}loadPlaylist(e){const t=this.currentTrack;if(this.shouldLoadPlaylist(t)&&t){super.loadPlaylist();const n=t.id,i=t.groupId;let o=t.url;if(e)try{o=e.addDirectives(o)}catch(l){this.warn(`Could not construct new URL with HLS Delivery Directives: ${l}`)}this.log(`loading audio-track playlist ${n} "${t.name}" lang:${t.lang} group:${i}`),this.clearTimer(),this.hls.trigger(I.AUDIO_TRACK_LOADING,{url:o,id:n,groupId:i,deliveryDirectives:e||null})}}}const Q0=500;class yR extends Jf{constructor(e,t,n){super(e,t,n,"[subtitle-stream-controller]",Le.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}_registerListeners(){const{hls:e}=this;e.on(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.LEVEL_LOADED,this.onLevelLoaded,this),e.on(I.ERROR,this.onError,this),e.on(I.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(I.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(I.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(I.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(I.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(I.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.LEVEL_LOADED,this.onLevelLoaded,this),e.off(I.ERROR,this.onError,this),e.off(I.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(I.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(I.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(I.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(I.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(I.FRAG_BUFFERED,this.onFragBuffered,this)}startLoad(e){this.stopLoad(),this.state=J.IDLE,this.setInterval(Q0),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}onManifestLoading(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()}onMediaDetaching(){this.tracksBuffered=[],super.onMediaDetaching()}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:n,success:i}=t;if(this.fragPrevious=n,this.state=J.IDLE,!i)return;const o=this.tracksBuffered[this.currentTrackId];if(!o)return;let l;const c=n.start;for(let f=0;f<o.length;f++)if(c>=o[f].start&&c<=o[f].end){l=o[f];break}const u=n.start+n.duration;l?l.end=u:(l={start:c,end:u},o.push(l)),this.fragmentTracker.fragBuffered(n),this.fragBufferedComplete(n,null)}onBufferFlushing(e,t){const{startOffset:n,endOffset:i}=t;if(n===0&&i!==Number.POSITIVE_INFINITY){const o=i-1;if(o<=0)return;t.endOffsetSubtitles=Math.max(0,o),this.tracksBuffered.forEach(l=>{for(let c=0;c<l.length;){if(l[c].end<=o){l.shift();continue}else if(l[c].start<o)l[c].start=o;else break;c++}}),this.fragmentTracker.removeFragmentsInRange(n,o,Le.SUBTITLE)}}onFragBuffered(e,t){if(!this.loadedmetadata&&t.frag.type===Le.MAIN){var n;(n=this.media)!=null&&n.buffered.length&&(this.loadedmetadata=!0)}}onError(e,t){const n=t.frag;n?.type===Le.SUBTITLE&&(t.details===K.FRAG_GAP&&this.fragmentTracker.fragBuffered(n,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==J.STOPPED&&(this.state=J.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:t}){if(this.levels&&Hx(this.levels,t)){this.levels=t.map(n=>new es(n));return}this.tracksBuffered=[],this.levels=t.map(n=>{const i=new es(n);return this.tracksBuffered[i.id]=[],i}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,Le.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,t){var n;if(this.currentTrackId=t.id,!((n=this.levels)!=null&&n.length)||this.currentTrackId===-1){this.clearInterval();return}const i=this.levels[this.currentTrackId];i!=null&&i.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,i&&this.setInterval(Q0)}onSubtitleTrackLoaded(e,t){var n;const{currentTrackId:i,levels:o}=this,{details:l,id:c}=t;if(!o){this.warn(`Subtitle tracks were reset while loading level ${c}`);return}const u=o[c];if(c>=o.length||!u)return;this.log(`Subtitle track ${c} loaded [${l.startSN},${l.endSN}]${l.lastPartSn?`[part-${l.lastPartSn}-${l.lastPartIndex}]`:""},duration:${l.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let f=0;if(l.live||(n=u.details)!=null&&n.live){const p=this.mainDetails;if(l.deltaUpdateFailed||!p)return;const g=p.fragments[0];if(!u.details)l.hasProgramDateTime&&p.hasProgramDateTime?(Il(l,p),f=l.fragments[0].start):g&&(f=g.start,ff(l,f));else{var h;f=this.alignPlaylists(l,u.details,(h=this.levelLastLoaded)==null?void 0:h.details),f===0&&g&&(f=g.start,ff(l,f))}}u.details=l,this.levelLastLoaded=u,c===i&&(!this.startFragRequested&&(this.mainDetails||!l.live)&&this.setStartPosition(this.mainDetails||l,f),this.tick(),l.live&&!this.fragCurrent&&this.media&&this.state===J.IDLE&&(wl(null,l.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),u.details=void 0)))}_handleFragmentLoadComplete(e){const{frag:t,payload:n}=e,i=t.decryptdata,o=this.hls;if(!this.fragContextChanged(t)&&n&&n.byteLength>0&&i!=null&&i.key&&i.iv&&i.method==="AES-128"){const l=performance.now();this.decrypter.decrypt(new Uint8Array(n),i.key.buffer,i.iv.buffer).catch(c=>{throw o.trigger(I.ERROR,{type:Re.MEDIA_ERROR,details:K.FRAG_DECRYPT_ERROR,fatal:!1,error:c,reason:c.message,frag:t}),c}).then(c=>{const u=performance.now();o.trigger(I.FRAG_DECRYPTED,{frag:t,payload:c,stats:{tstart:l,tdecrypt:u}})}).catch(c=>{this.warn(`${c.name}: ${c.message}`),this.state=J.IDLE})}}doTick(){if(!this.media){this.state=J.IDLE;return}if(this.state===J.IDLE){const{currentTrackId:e,levels:t}=this,n=t?.[e];if(!n||!t.length||!n.details)return;const{config:i}=this,o=this.getLoadPosition(),l=Ve.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],o,i.maxBufferHole),{end:c,len:u}=l,f=this.getFwdBufferInfo(this.media,Le.MAIN),h=n.details,p=this.getMaxBufferLength(f?.len)+h.levelTargetDuration;if(u>p)return;const g=h.fragments,v=g.length,x=h.edge;let b=null;const S=this.fragPrevious;if(c<x){const A=i.maxFragLookUpTolerance,L=c>x-A?0:A;b=wl(S,g,Math.max(g[0].start,c),L),!b&&S&&S.start<g[0].start&&(b=g[0])}else b=g[v-1];if(!b)return;if(b=this.mapToInitFragWhenRequired(b),b.sn!=="initSegment"){const A=b.sn-h.startSN,L=g[A-1];L&&L.cc===b.cc&&this.fragmentTracker.getState(L)===yt.NOT_LOADED&&(b=L)}this.fragmentTracker.getState(b)===yt.NOT_LOADED&&this.loadFragment(b,n,c)}}getMaxBufferLength(e){const t=super.getMaxBufferLength();return e?Math.max(t,e):t}loadFragment(e,t,n){this.fragCurrent=e,e.sn==="initSegment"?this._loadInitSegment(e,t):(this.startFragRequested=!0,super.loadFragment(e,t,n))}get mediaBufferTimeRanges(){return new vR(this.tracksBuffered[this.currentTrackId]||[])}}class vR{constructor(e){this.buffered=void 0;const t=(n,i,o)=>{if(i=i>>>0,i>o-1)throw new DOMException(`Failed to execute '${n}' on 'TimeRanges': The index provided (${i}) is greater than the maximum bound (${o})`);return e[i][n]};this.buffered={get length(){return e.length},end(n){return t("end",n,e.length)},start(n){return t("start",n,e.length)}}}}class xR extends qf{constructor(e){super(e,"[subtitle-track-controller]"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let t=null;const n=nl(this.media.textTracks);for(let o=0;o<n.length;o++)if(n[o].mode==="hidden")t=n[o];else if(n[o].mode==="showing"){t=n[o];break}const i=this.findTrackForTextTrack(t);this.subtitleTrack!==i&&this.setSubtitleTrack(i)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.MANIFEST_PARSED,this.onManifestParsed,this),e.on(I.LEVEL_LOADING,this.onLevelLoading,this),e.on(I.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(I.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(I.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.MANIFEST_PARSED,this.onManifestParsed,this),e.off(I.LEVEL_LOADING,this.onLevelLoading,this),e.off(I.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(I.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(I.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(){if(!this.media)return;self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),nl(this.media.textTracks).forEach(t=>{Ki(t)}),this.subtitleTrack=-1,this.media=null}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:n,groupId:i,details:o}=t,l=this.tracksInGroup[n];if(!l||l.groupId!==i){this.warn(`Subtitle track with id:${n} and group:${i} not found in active group ${l?.groupId}`);return}const c=l.details;l.details=t.details,this.log(`Subtitle track ${n} "${l.name}" lang:${l.lang} group:${i} loaded [${o.startSN}-${o.endSN}]`),n===this.trackId&&this.playlistLoaded(n,t,c)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const n=t.subtitleGroups||null,i=this.groupIds;let o=this.currentTrack;if(!n||i?.length!==n?.length||n!=null&&n.some(l=>i?.indexOf(l)===-1)){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const l=this.tracks.filter(h=>!n||n.indexOf(h.groupId)!==-1);if(l.length)this.selectDefaultTrack&&!l.some(h=>h.default)&&(this.selectDefaultTrack=!1),l.forEach((h,p)=>{h.id=p});else if(!o&&!this.tracksInGroup.length)return;this.tracksInGroup=l;const c=this.hls.config.subtitlePreference;if(!o&&c){this.selectDefaultTrack=!1;const h=Br(c,l);if(h>-1)o=l[h];else{const p=Br(c,this.tracks);o=this.tracks[p]}}let u=this.findTrackId(o);u===-1&&o&&(u=this.findTrackId(null));const f={subtitleTracks:l};this.log(`Updating subtitle tracks, ${l.length} track(s) found in "${n?.join(",")}" group-id`),this.hls.trigger(I.SUBTITLE_TRACKS_UPDATED,f),u!==-1&&this.trackId===-1&&this.setSubtitleTrack(u)}else this.shouldReloadPlaylist(o)&&this.setSubtitleTrack(this.trackId)}findTrackId(e){const t=this.tracksInGroup,n=this.selectDefaultTrack;for(let i=0;i<t.length;i++){const o=t[i];if(!(n&&!o.default||!n&&!e)&&(!e||qi(o,e)))return i}if(e){for(let i=0;i<t.length;i++){const o=t[i];if(ts(e.attrs,o.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return i}for(let i=0;i<t.length;i++){const o=t[i];if(ts(e.attrs,o.attrs,["LANGUAGE"]))return i}}return-1}findTrackForTextTrack(e){if(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){const i=t[n];if(mf(i,e))return n}}return-1}onError(e,t){t.fatal||!t.context||t.context.type===Me.SUBTITLE_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){const t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){const n=this.currentTrack;if(n&&qi(e,n))return n;const i=Br(e,this.tracksInGroup);if(i>-1){const o=this.tracksInGroup[i];return this.setSubtitleTrack(i),o}else{if(n)return null;{const o=Br(e,t);if(o>-1)return t[o]}}}}return null}loadPlaylist(e){super.loadPlaylist();const t=this.currentTrack;if(this.shouldLoadPlaylist(t)&&t){const n=t.id,i=t.groupId;let o=t.url;if(e)try{o=e.addDirectives(o)}catch(l){this.warn(`Could not construct new URL with HLS Delivery Directives: ${l}`)}this.log(`Loading subtitle playlist for id ${n}`),this.hls.trigger(I.SUBTITLE_TRACK_LOADING,{url:o,id:n,groupId:i,deliveryDirectives:e||null})}}toggleTrackModes(){const{media:e}=this;if(!e)return;const t=nl(e.textTracks),n=this.currentTrack;let i;if(n&&(i=t.filter(o=>mf(n,o))[0],i||this.warn(`Unable to find subtitle TextTrack with name "${n.name}" and language "${n.lang}"`)),[].slice.call(t).forEach(o=>{o.mode!=="disabled"&&o!==i&&(o.mode="disabled")}),i){const o=this.subtitleDisplay?"showing":"hidden";i.mode!==o&&(i.mode=o)}}setSubtitleTrack(e){const t=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=t.length||!he(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.clearTimer(),this.selectDefaultTrack=!1;const n=this.currentTrack,i=t[e]||null;if(this.trackId=e,this.currentTrack=i,this.toggleTrackModes(),!i){this.hls.trigger(I.SUBTITLE_TRACK_SWITCH,{id:e});return}const o=!!i.details&&!i.details.live;if(e===this.trackId&&i===n&&o)return;this.log(`Switching to subtitle-track ${e}`+(i?` "${i.name}" lang:${i.lang} group:${i.groupId}`:""));const{id:l,groupId:c="",name:u,type:f,url:h}=i;this.hls.trigger(I.SUBTITLE_TRACK_SWITCH,{id:l,groupId:c,name:u,type:f,url:h});const p=this.switchParams(i.url,n?.details,i.details);this.loadPlaylist(p)}}class bR{constructor(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}append(e,t,n){const i=this.queues[t];i.push(e),i.length===1&&!n&&this.executeNext(t)}insertAbort(e,t){this.queues[t].unshift(e),this.executeNext(t)}appendBlocker(e){let t;const n=new Promise(o=>{t=o}),i={execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};return this.append(i,e),n}executeNext(e){const t=this.queues[e];if(t.length){const n=t[0];try{n.execute()}catch(i){B.warn(`[buffer-operation-queue]: Exception executing "${e}" SourceBuffer operation: ${i}`),n.onError(i);const o=this.buffers[e];o!=null&&o.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues[e].shift(),this.executeNext(e)}current(e){return this.queues[e][0]}}const ey=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/;class ER{constructor(e){this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendSource=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this.log=void 0,this.warn=void 0,this.error=void 0,this._onEndStreaming=n=>{this.hls&&this.hls.pauseBuffering()},this._onStartStreaming=n=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=()=>{const{media:n,mediaSource:i}=this;this.log("Media source opened"),n&&(n.removeEventListener("emptied",this._onMediaEmptied),this.updateMediaElementDuration(),this.hls.trigger(I.MEDIA_ATTACHED,{media:n,mediaSource:i})),i&&i.removeEventListener("sourceopen",this._onMediaSourceOpen),this.checkPendingTracks()},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:n,_objectUrl:i}=this;n!==i&&B.error(`Media element src was set while attaching MediaSource (${i} > ${n})`)},this.hls=e;const t="[buffer-controller]";this.appendSource=DT(ui(e.config.preferManagedMediaSource)),this.log=B.log.bind(B,t),this.warn=B.warn.bind(B,t),this.error=B.error.bind(B,t),this._initSourceBuffer(),this.registerListeners()}hasSourceTypes(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null,this.hls=null}registerListeners(){const{hls:e}=this;e.on(I.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.MANIFEST_PARSED,this.onManifestParsed,this),e.on(I.BUFFER_RESET,this.onBufferReset,this),e.on(I.BUFFER_APPENDING,this.onBufferAppending,this),e.on(I.BUFFER_CODECS,this.onBufferCodecs,this),e.on(I.BUFFER_EOS,this.onBufferEos,this),e.on(I.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(I.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(I.FRAG_PARSED,this.onFragParsed,this),e.on(I.FRAG_CHANGED,this.onFragChanged,this)}unregisterListeners(){const{hls:e}=this;e.off(I.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.MANIFEST_PARSED,this.onManifestParsed,this),e.off(I.BUFFER_RESET,this.onBufferReset,this),e.off(I.BUFFER_APPENDING,this.onBufferAppending,this),e.off(I.BUFFER_CODECS,this.onBufferCodecs,this),e.off(I.BUFFER_EOS,this.onBufferEos,this),e.off(I.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(I.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(I.FRAG_PARSED,this.onFragParsed,this),e.off(I.FRAG_CHANGED,this.onFragChanged,this)}_initSourceBuffer(){this.sourceBuffer={},this.operationQueue=new bR(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.appendErrors={audio:0,video:0,audiovideo:0},this.lastMpegAudioChunk=null}onManifestLoading(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){let n=2;(t.audio&&!t.video||!t.altAudio)&&(n=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=n,this.log(`${this.bufferCodecEventsExpected} bufferCodec event(s) expected`)}onMediaAttaching(e,t){const n=this.media=t.media,i=ui(this.appendSource);if(n&&i){var o;const l=this.mediaSource=new i;this.log(`created media source: ${(o=l.constructor)==null?void 0:o.name}`),l.addEventListener("sourceopen",this._onMediaSourceOpen),l.addEventListener("sourceended",this._onMediaSourceEnded),l.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(l.addEventListener("startstreaming",this._onStartStreaming),l.addEventListener("endstreaming",this._onEndStreaming));const c=this._objectUrl=self.URL.createObjectURL(l);if(this.appendSource)try{n.removeAttribute("src");const u=self.ManagedMediaSource;n.disableRemotePlayback=n.disableRemotePlayback||u&&l instanceof u,ty(n),SR(n,c),n.load()}catch{n.src=c}else n.src=c;n.addEventListener("emptied",this._onMediaEmptied)}}onMediaDetaching(){const{media:e,mediaSource:t,_objectUrl:n}=this;if(t){if(this.log("media source detaching"),t.readyState==="open")try{t.endOfStream()}catch(i){this.warn(`onMediaDetaching: ${i.message} while calling endOfStream`)}this.onBufferReset(),t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(t.removeEventListener("startstreaming",this._onStartStreaming),t.removeEventListener("endstreaming",this._onEndStreaming)),e&&(e.removeEventListener("emptied",this._onMediaEmptied),n&&self.URL.revokeObjectURL(n),this.mediaSrc===n?(e.removeAttribute("src"),this.appendSource&&ty(e),e.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(I.MEDIA_DETACHED,void 0)}onBufferReset(){this.getSourceBufferTypes().forEach(e=>{this.resetBuffer(e)}),this._initSourceBuffer(),this.hls.resumeBuffering()}resetBuffer(e){const t=this.sourceBuffer[e];try{if(t){var n;this.removeBufferListeners(e),this.sourceBuffer[e]=void 0,(n=this.mediaSource)!=null&&n.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(t)}}catch(i){this.warn(`onBufferReset ${e}`,i)}}onBufferCodecs(e,t){const n=this.getSourceBufferTypes().length,i=Object.keys(t);if(i.forEach(l=>{if(n){const u=this.tracks[l];if(u&&typeof u.buffer.changeType=="function"){var c;const{id:f,codec:h,levelCodec:p,container:g,metadata:v}=t[l],x=S0(u.codec,u.levelCodec),b=x?.replace(ey,"$1");let S=S0(h,p);const A=(c=S)==null?void 0:c.replace(ey,"$1");if(S&&b!==A){l.slice(0,5)==="audio"&&(S=xl(S,this.appendSource));const L=`${g};codecs=${S}`;this.appendChangeType(l,L),this.log(`switching codec ${x} to ${S}`),this.tracks[l]={buffer:u.buffer,codec:h,container:g,levelCodec:p,metadata:v,id:f}}}}else this.pendingTracks[l]=t[l]}),n)return;const o=Math.max(this.bufferCodecEventsExpected-1,0);this.bufferCodecEventsExpected!==o&&(this.log(`${o} bufferCodec event(s) expected ${i.join(",")}`),this.bufferCodecEventsExpected=o),this.mediaSource&&this.mediaSource.readyState==="open"&&this.checkPendingTracks()}appendChangeType(e,t){const{operationQueue:n}=this,i={execute:()=>{const o=this.sourceBuffer[e];o&&(this.log(`changing ${e} sourceBuffer type to ${t}`),o.changeType(t)),n.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:o=>{this.warn(`Failed to change ${e} SourceBuffer type`,o)}};n.append(i,e,!!this.pendingTracks[e])}onBufferAppending(e,t){const{hls:n,operationQueue:i,tracks:o}=this,{data:l,type:c,frag:u,part:f,chunkMeta:h}=t,p=h.buffering[c],g=self.performance.now();p.start=g;const v=u.stats.buffering,x=f?f.stats.buffering:null;v.start===0&&(v.start=g),x&&x.start===0&&(x.start=g);const b=o.audio;let S=!1;c==="audio"&&b?.container==="audio/mpeg"&&(S=!this.lastMpegAudioChunk||h.id===1||this.lastMpegAudioChunk.sn!==h.sn,this.lastMpegAudioChunk=h);const A=u.start,L={execute:()=>{if(p.executeStart=self.performance.now(),S){const R=this.sourceBuffer[c];if(R){const k=A-R.timestampOffset;Math.abs(k)>=.1&&(this.log(`Updating audio SourceBuffer timestampOffset to ${A} (delta: ${k}) sn: ${u.sn})`),R.timestampOffset=A)}}this.appendExecutor(l,c)},onStart:()=>{},onComplete:()=>{const R=self.performance.now();p.executeEnd=p.end=R,v.first===0&&(v.first=R),x&&x.first===0&&(x.first=R);const{sourceBuffer:k}=this,C={};for(const F in k)C[F]=Ve.getBuffered(k[F]);this.appendErrors[c]=0,c==="audio"||c==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(I.BUFFER_APPENDED,{type:c,frag:u,part:f,chunkMeta:h,parent:u.type,timeRanges:C})},onError:R=>{const k={type:Re.MEDIA_ERROR,parent:u.type,details:K.BUFFER_APPEND_ERROR,sourceBufferName:c,frag:u,part:f,chunkMeta:h,error:R,err:R,fatal:!1};if(R.code===DOMException.QUOTA_EXCEEDED_ERR)k.details=K.BUFFER_FULL_ERROR;else{const C=++this.appendErrors[c];k.details=K.BUFFER_APPEND_ERROR,this.warn(`Failed ${C}/${n.config.appendErrorMaxRetry} times to append segment in "${c}" sourceBuffer`),C>=n.config.appendErrorMaxRetry&&(k.fatal=!0)}n.trigger(I.ERROR,k)}};i.append(L,c,!!this.pendingTracks[c])}onBufferFlushing(e,t){const{operationQueue:n}=this,i=o=>({execute:this.removeExecutor.bind(this,o,t.startOffset,t.endOffset),onStart:()=>{},onComplete:()=>{this.hls.trigger(I.BUFFER_FLUSHED,{type:o})},onError:l=>{this.warn(`Failed to remove from ${o} SourceBuffer`,l)}});t.type?n.append(i(t.type),t.type):this.getSourceBufferTypes().forEach(o=>{n.append(i(o),o)})}onFragParsed(e,t){const{frag:n,part:i}=t,o=[],l=i?i.elementaryStreams:n.elementaryStreams;l[Ge.AUDIOVIDEO]?o.push("audiovideo"):(l[Ge.AUDIO]&&o.push("audio"),l[Ge.VIDEO]&&o.push("video"));const c=()=>{const u=self.performance.now();n.stats.buffering.end=u,i&&(i.stats.buffering.end=u);const f=i?i.stats:n.stats;this.hls.trigger(I.FRAG_BUFFERED,{frag:n,part:i,stats:f,id:n.type})};o.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${n.type} level: ${n.level} sn: ${n.sn}`),this.blockBuffers(c,o)}onFragChanged(e,t){this.trimBuffers()}onBufferEos(e,t){this.getSourceBufferTypes().reduce((i,o)=>{const l=this.sourceBuffer[o];return l&&(!t.type||t.type===o)&&(l.ending=!0,l.ended||(l.ended=!0,this.log(`${o} sourceBuffer now EOS`))),i&&!!(!l||l.ended)},!0)&&(this.log("Queueing mediaSource.endOfStream()"),this.blockBuffers(()=>{this.getSourceBufferTypes().forEach(o=>{const l=this.sourceBuffer[o];l&&(l.ending=!1)});const{mediaSource:i}=this;if(!i||i.readyState!=="open"){i&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${i.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),i.endOfStream()}))}onLevelUpdated(e,{details:t}){t.fragments.length&&(this.details=t,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())}trimBuffers(){const{hls:e,details:t,media:n}=this;if(!n||t===null||!this.getSourceBufferTypes().length)return;const o=e.config,l=n.currentTime,c=t.levelTargetDuration,u=t.live&&o.liveBackBufferLength!==null?o.liveBackBufferLength:o.backBufferLength;if(he(u)&&u>0){const f=Math.max(u,c),h=Math.floor(l/c)*c-f;this.flushBackBuffer(l,c,h)}if(he(o.frontBufferFlushThreshold)&&o.frontBufferFlushThreshold>0){const f=Math.max(o.maxBufferLength,o.frontBufferFlushThreshold),h=Math.max(f,c),p=Math.floor(l/c)*c+h;this.flushFrontBuffer(l,c,p)}}flushBackBuffer(e,t,n){const{details:i,sourceBuffer:o}=this;this.getSourceBufferTypes().forEach(c=>{const u=o[c];if(u){const f=Ve.getBuffered(u);if(f.length>0&&n>f.start(0)){if(this.hls.trigger(I.BACK_BUFFER_REACHED,{bufferEnd:n}),i!=null&&i.live)this.hls.trigger(I.LIVE_BACK_BUFFER_REACHED,{bufferEnd:n});else if(u.ended&&f.end(f.length-1)-e<t*2){this.log(`Cannot flush ${c} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(I.BUFFER_FLUSHING,{startOffset:0,endOffset:n,type:c})}}})}flushFrontBuffer(e,t,n){const{sourceBuffer:i}=this;this.getSourceBufferTypes().forEach(l=>{const c=i[l];if(c){const u=Ve.getBuffered(c),f=u.length;if(f<2)return;const h=u.start(f-1),p=u.end(f-1);if(n>h||e>=h&&e<=p)return;if(c.ended&&e-p<2*t){this.log(`Cannot flush ${l} front buffer while SourceBuffer is in ended state`);return}this.hls.trigger(I.BUFFER_FLUSHING,{startOffset:h,endOffset:1/0,type:l})}})}updateMediaElementDuration(){if(!this.details||!this.media||!this.mediaSource||this.mediaSource.readyState!=="open")return;const{details:e,hls:t,media:n,mediaSource:i}=this,o=e.fragments[0].start+e.totalduration,l=n.duration,c=he(i.duration)?i.duration:0;e.live&&t.config.liveDurationInfinity?(i.duration=1/0,this.updateSeekableRange(e)):(o>c&&o>l||!he(l))&&(this.log(`Updating Media Source duration to ${o.toFixed(3)}`),i.duration=o)}updateSeekableRange(e){const t=this.mediaSource,n=e.fragments;if(n.length&&e.live&&t!=null&&t.setLiveSeekableRange){const o=Math.max(0,n[0].start),l=Math.max(o,o+e.totalduration);this.log(`Media Source duration is set to ${t.duration}. Setting seekable range to ${o}-${l}.`),t.setLiveSeekableRange(o,l)}}checkPendingTracks(){const{bufferCodecEventsExpected:e,operationQueue:t,pendingTracks:n}=this,i=Object.keys(n).length;if(i&&(!e||i===2||"audiovideo"in n)){this.createSourceBuffers(n),this.pendingTracks={};const o=this.getSourceBufferTypes();if(o.length)this.hls.trigger(I.BUFFER_CREATED,{tracks:this.tracks}),o.forEach(l=>{t.executeNext(l)});else{const l=new Error("could not create source buffer for media codec(s)");this.hls.trigger(I.ERROR,{type:Re.MEDIA_ERROR,details:K.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:l,reason:l.message})}}}createSourceBuffers(e){const{sourceBuffer:t,mediaSource:n}=this;if(!n)throw Error("createSourceBuffers called when mediaSource was null");for(const o in e)if(!t[o]){var i;const l=e[o];if(!l)throw Error(`source buffer exists for track ${o}, however track does not`);let c=((i=l.levelCodec)==null?void 0:i.indexOf(","))===-1?l.levelCodec:l.codec;c&&o.slice(0,5)==="audio"&&(c=xl(c,this.appendSource));const u=`${l.container};codecs=${c}`;this.log(`creating sourceBuffer(${u})`);try{const f=t[o]=n.addSourceBuffer(u),h=o;this.addBufferListener(h,"updatestart",this._onSBUpdateStart),this.addBufferListener(h,"updateend",this._onSBUpdateEnd),this.addBufferListener(h,"error",this._onSBUpdateError),this.appendSource&&this.addBufferListener(h,"bufferedchange",(p,g)=>{const v=g.removedRanges;v!=null&&v.length&&this.hls.trigger(I.BUFFER_FLUSHED,{type:o})}),this.tracks[o]={buffer:f,codec:c,container:l.container,levelCodec:l.levelCodec,metadata:l.metadata,id:l.id}}catch(f){this.error(`error while trying to add sourceBuffer: ${f.message}`),this.hls.trigger(I.ERROR,{type:Re.MEDIA_ERROR,details:K.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:f,sourceBufferName:o,mimeType:u})}}}get mediaSrc(){var e,t;const n=((e=this.media)==null||(t=e.querySelector)==null?void 0:t.call(e,"source"))||this.media;return n?.src}_onSBUpdateStart(e){const{operationQueue:t}=this;t.current(e).onStart()}_onSBUpdateEnd(e){var t;if(((t=this.mediaSource)==null?void 0:t.readyState)==="closed"){this.resetBuffer(e);return}const{operationQueue:n}=this;n.current(e).onComplete(),n.shiftAndExecuteNext(e)}_onSBUpdateError(e,t){var n;const i=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(n=this.mediaSource)==null?void 0:n.readyState}`);this.error(`${i}`,t),this.hls.trigger(I.ERROR,{type:Re.MEDIA_ERROR,details:K.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:i,fatal:!1});const o=this.operationQueue.current(e);o&&o.onError(i)}removeExecutor(e,t,n){const{media:i,mediaSource:o,operationQueue:l,sourceBuffer:c}=this,u=c[e];if(!i||!o||!u){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),l.shiftAndExecuteNext(e);return}const f=he(i.duration)?i.duration:1/0,h=he(o.duration)?o.duration:1/0,p=Math.max(0,t),g=Math.min(n,f,h);g>p&&(!u.ending||u.ended)?(u.ended=!1,this.log(`Removing [${p},${g}] from the ${e} SourceBuffer`),u.remove(p,g)):l.shiftAndExecuteNext(e)}appendExecutor(e,t){const n=this.sourceBuffer[t];if(!n){if(!this.pendingTracks[t])throw new Error(`Attempting to append to the ${t} SourceBuffer, but it does not exist`);return}n.ended=!1,n.appendBuffer(e)}blockBuffers(e,t=this.getSourceBufferTypes()){if(!t.length){this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);return}const{operationQueue:n}=this,i=t.map(o=>n.appendBlocker(o));Promise.all(i).then(()=>{e(),t.forEach(o=>{const l=this.sourceBuffer[o];l!=null&&l.updating||n.shiftAndExecuteNext(o)})})}getSourceBufferTypes(){return Object.keys(this.sourceBuffer)}addBufferListener(e,t,n){const i=this.sourceBuffer[e];if(!i)return;const o=n.bind(this,e);this.listeners[e].push({event:t,listener:o}),i.addEventListener(t,o)}removeBufferListeners(e){const t=this.sourceBuffer[e];t&&this.listeners[e].forEach(n=>{t.removeEventListener(n.event,n.listener)})}}function ty(r){const e=r.querySelectorAll("source");[].slice.call(e).forEach(t=>{r.removeChild(t)})}function SR(r,e){const t=self.document.createElement("source");t.type="video/mp4",t.src=e,r.appendChild(t)}const wR={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},$x=r=>String.fromCharCode(wR[r]||r),Sr=15,Zr=100,IR={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},AR={17:2,18:4,21:6,22:8,23:10,19:13,20:15},TR={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},LR={25:2,26:4,29:6,30:8,31:10,27:13,28:15},RR=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class CR{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const n=typeof t=="function"?t():t;B.log(`${this.time} [${e}] ${n}`)}}}const Qn=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].toString(16));return t};class Gx{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let n=0;n<t.length;n++){const i=t[n];e.hasOwnProperty(i)&&(this[i]=e[i])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class DR{constructor(){this.uchar=" ",this.penState=new Gx}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class kR{constructor(e){this.chars=[],this.pos=0,this.currPenState=new Gx,this.cueStartTime=null,this.logger=void 0;for(let t=0;t<Zr;t++)this.chars.push(new DR);this.logger=e}equals(e){for(let t=0;t<Zr;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0}copy(e){for(let t=0;t<Zr;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<Zr;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>Zr&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=Zr)}moveCursor(e){const t=this.pos+e;if(e>1)for(let n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=$x(e);if(this.pos>=Zr){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1)}clearFromPos(e){let t;for(t=e;t<Zr;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let n=0;n<Zr;n++){const i=this.chars[n].uchar;i!==" "&&(t=!1),e.push(i)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class xd{constructor(e){this.rows=[],this.currRow=Sr-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let t=0;t<Sr;t++)this.rows.push(new kR(e));this.logger=e}reset(){for(let e=0;e<Sr;e++)this.rows[e].clear();this.currRow=Sr-1}equals(e){let t=!0;for(let n=0;n<Sr;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t}copy(e){for(let t=0;t<Sr;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<Sr;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+JSON.stringify(e));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let c=0;c<Sr;c++)this.rows[c].clear();const o=this.currRow+1-this.nrRollUpRows,l=this.lastOutputScreen;if(l){const c=l.rows[o].cueStartTime,u=this.logger.time;if(c!==null&&u!==null&&c<u)for(let f=0;f<this.nrRollUpRows;f++)this.rows[t-this.nrRollUpRows+f+1].copy(l.rows[o+f])}}this.currRow=t;const n=this.rows[this.currRow];if(e.indent!==null){const o=e.indent,l=Math.max(o-1,0);n.setCursor(e.indent),e.color=n.chars[l].penState.foreground}const i={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(i)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let n="",i=-1;for(let o=0;o<Sr;o++){const l=this.rows[o].getTextString();l&&(i=o+1,e?t.push("Row "+i+": '"+l+"'"):t.push(l.trim()))}return t.length>0&&(e?n="["+t.join(" | ")+"]":n=t.join(`
`)),n}getTextAndFormat(){return this.rows}}class ry{constructor(e,t,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new xd(n),this.nonDisplayedMemory=new xd(n),this.lastOutputScreen=new xd(n),this.currRollUpRow=this.displayedMemory.rows[Sr-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[Sr-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let n=0;n<e.length;n++)this.writeScreen.insertChar(e[n]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>t+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{const n=Math.floor(e/2)-16,i=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=i[n]}this.logger.log(2,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)}outputDataUpdate(e=!1){const t=this.logger.time;t!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=t:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class ny{constructor(e,t,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory=PR(),this.logger=void 0;const i=this.logger=new CR;this.channels=[null,new ry(e,t,i),new ry(e+1,n,i)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){this.logger.time=e;for(let n=0;n<t.length;n+=2){const i=t[n]&127,o=t[n+1]&127;let l=!1,c=null;if(i===0&&o===0)continue;this.logger.log(3,()=>"["+Qn([t[n],t[n+1]])+"] -> ("+Qn([i,o])+")");const u=this.cmdHistory;if(i>=16&&i<=31){if(OR(i,o,u)){za(null,null,u),this.logger.log(3,()=>"Repeated command ("+Qn([i,o])+") is dropped");continue}za(i,o,this.cmdHistory),l=this.parseCmd(i,o),l||(l=this.parseMidrow(i,o)),l||(l=this.parsePAC(i,o)),l||(l=this.parseBackgroundAttributes(i,o))}else za(null,null,u);if(!l&&(c=this.parseChars(i,o),c)){const h=this.currentChannel;h&&h>0?this.channels[h].insertChars(c):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!l&&!c&&this.logger.log(2,()=>"Couldn't parse cleaned data "+Qn([i,o])+" orig: "+Qn([t[n],t[n+1]]))}}parseCmd(e,t){const n=(e===20||e===28||e===21||e===29)&&t>=32&&t<=47,i=(e===23||e===31)&&t>=33&&t<=35;if(!(n||i))return!1;const o=e===20||e===21||e===23?1:2,l=this.channels[o];return e===20||e===21||e===28||e===29?t===32?l.ccRCL():t===33?l.ccBS():t===34?l.ccAOF():t===35?l.ccAON():t===36?l.ccDER():t===37?l.ccRU(2):t===38?l.ccRU(3):t===39?l.ccRU(4):t===40?l.ccFON():t===41?l.ccRDC():t===42?l.ccTR():t===43?l.ccRTD():t===44?l.ccEDM():t===45?l.ccCR():t===46?l.ccENM():t===47&&l.ccEOC():l.ccTO(t-32),this.currentChannel=o,!0}parseMidrow(e,t){let n=0;if((e===17||e===25)&&t>=32&&t<=47){if(e===17?n=1:n=2,n!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const i=this.channels[n];return i?(i.ccMIDROW(t),this.logger.log(3,()=>"MIDROW ("+Qn([e,t])+")"),!0):!1}return!1}parsePAC(e,t){let n;const i=(e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127,o=(e===16||e===24)&&t>=64&&t<=95;if(!(i||o))return!1;const l=e<=23?1:2;t>=64&&t<=95?n=l===1?IR[e]:TR[e]:n=l===1?AR[e]:LR[e];const c=this.channels[l];return c?(c.setPAC(this.interpretPAC(n,t)),this.currentChannel=l,!0):!1}interpretPAC(e,t){let n;const i={color:null,italics:!1,indent:null,underline:!1,row:e};return t>95?n=t-96:n=t-64,i.underline=(n&1)===1,n<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(i.italics=!0,i.color="white"):i.indent=Math.floor((n-16)/2)*4,i}parseChars(e,t){let n,i=null,o=null;if(e>=25?(n=2,o=e-8):(n=1,o=e),o>=17&&o<=19){let l;o===17?l=t+80:o===18?l=t+112:l=t+144,this.logger.log(2,()=>"Special char '"+$x(l)+"' in channel "+n),i=[l]}else e>=32&&e<=127&&(i=t===0?[e]:[e,t]);return i&&this.logger.log(3,()=>"Char codes =  "+Qn(i).join(",")),i}parseBackgroundAttributes(e,t){const n=(e===16||e===24)&&t>=32&&t<=47,i=(e===23||e===31)&&t>=45&&t<=47;if(!(n||i))return!1;let o;const l={};e===16||e===24?(o=Math.floor((t-32)/2),l.background=RR[o],t%2===1&&(l.background=l.background+"_semi")):t===45?l.background="transparent":(l.foreground="black",t===47&&(l.underline=!0));const c=e<=23?1:2;return this.channels[c].setBkgData(l),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}za(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const n=this.channels[t];n&&n.cueSplitAtTime(e)}}}function za(r,e,t){t.a=r,t.b=e}function OR(r,e,t){return t.a===r&&t.b===e}function PR(){return{a:null,b:null}}class Ya{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,n){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}var ih=(function(){if(Qi!=null&&Qi.VTTCue)return self.VTTCue;const r=["","lr","rl"],e=["start","middle","end","left","right"];function t(c,u){if(typeof u!="string"||!Array.isArray(c))return!1;const f=u.toLowerCase();return~c.indexOf(f)?f:!1}function n(c){return t(r,c)}function i(c){return t(e,c)}function o(c,...u){let f=1;for(;f<arguments.length;f++){const h=arguments[f];for(const p in h)c[p]=h[p]}return c}function l(c,u,f){const h=this,p={enumerable:!0};h.hasBeenReset=!1;let g="",v=!1,x=c,b=u,S=f,A=null,L="",R=!0,k="auto",C="start",F=50,_="middle",z=50,te="middle";Object.defineProperty(h,"id",o({},p,{get:function(){return g},set:function(U){g=""+U}})),Object.defineProperty(h,"pauseOnExit",o({},p,{get:function(){return v},set:function(U){v=!!U}})),Object.defineProperty(h,"startTime",o({},p,{get:function(){return x},set:function(U){if(typeof U!="number")throw new TypeError("Start time must be set to a number.");x=U,this.hasBeenReset=!0}})),Object.defineProperty(h,"endTime",o({},p,{get:function(){return b},set:function(U){if(typeof U!="number")throw new TypeError("End time must be set to a number.");b=U,this.hasBeenReset=!0}})),Object.defineProperty(h,"text",o({},p,{get:function(){return S},set:function(U){S=""+U,this.hasBeenReset=!0}})),Object.defineProperty(h,"region",o({},p,{get:function(){return A},set:function(U){A=U,this.hasBeenReset=!0}})),Object.defineProperty(h,"vertical",o({},p,{get:function(){return L},set:function(U){const q=n(U);if(q===!1)throw new SyntaxError("An invalid or illegal string was specified.");L=q,this.hasBeenReset=!0}})),Object.defineProperty(h,"snapToLines",o({},p,{get:function(){return R},set:function(U){R=!!U,this.hasBeenReset=!0}})),Object.defineProperty(h,"line",o({},p,{get:function(){return k},set:function(U){if(typeof U!="number"&&U!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");k=U,this.hasBeenReset=!0}})),Object.defineProperty(h,"lineAlign",o({},p,{get:function(){return C},set:function(U){const q=i(U);if(!q)throw new SyntaxError("An invalid or illegal string was specified.");C=q,this.hasBeenReset=!0}})),Object.defineProperty(h,"position",o({},p,{get:function(){return F},set:function(U){if(U<0||U>100)throw new Error("Position must be between 0 and 100.");F=U,this.hasBeenReset=!0}})),Object.defineProperty(h,"positionAlign",o({},p,{get:function(){return _},set:function(U){const q=i(U);if(!q)throw new SyntaxError("An invalid or illegal string was specified.");_=q,this.hasBeenReset=!0}})),Object.defineProperty(h,"size",o({},p,{get:function(){return z},set:function(U){if(U<0||U>100)throw new Error("Size must be between 0 and 100.");z=U,this.hasBeenReset=!0}})),Object.defineProperty(h,"align",o({},p,{get:function(){return te},set:function(U){const q=i(U);if(!q)throw new SyntaxError("An invalid or illegal string was specified.");te=q,this.hasBeenReset=!0}})),h.displayState=void 0}return l.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},l})();class NR{decode(e,t){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function Wx(r){function e(n,i,o,l){return(n|0)*3600+(i|0)*60+(o|0)+parseFloat(l||0)}const t=r.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return t?parseFloat(t[2])>59?e(t[2],t[3],0,t[4]):e(t[1],t[2],t[3],t[4]):null}class MR{constructor(){this.values=Object.create(null)}set(e,t){!this.get(e)&&t!==""&&(this.values[e]=t)}get(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,n){for(let i=0;i<n.length;++i)if(t===n[i]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const n=parseFloat(t);if(n>=0&&n<=100)return this.set(e,n),!0}return!1}}function Vx(r,e,t,n){const i=n?r.split(n):[r];for(const o in i){if(typeof i[o]!="string")continue;const l=i[o].split(t);if(l.length!==2)continue;const c=l[0],u=l[1];e(c,u)}}const gf=new ih(0,0,""),qa=gf.align==="middle"?"middle":"center";function _R(r,e,t){const n=r;function i(){const c=Wx(r);if(c===null)throw new Error("Malformed timestamp: "+n);return r=r.replace(/^[^\sa-zA-Z-]+/,""),c}function o(c,u){const f=new MR;Vx(c,function(g,v){let x;switch(g){case"region":for(let b=t.length-1;b>=0;b--)if(t[b].id===v){f.set(g,t[b].region);break}break;case"vertical":f.alt(g,v,["rl","lr"]);break;case"line":x=v.split(","),f.integer(g,x[0]),f.percent(g,x[0])&&f.set("snapToLines",!1),f.alt(g,x[0],["auto"]),x.length===2&&f.alt("lineAlign",x[1],["start",qa,"end"]);break;case"position":x=v.split(","),f.percent(g,x[0]),x.length===2&&f.alt("positionAlign",x[1],["start",qa,"end","line-left","line-right","auto"]);break;case"size":f.percent(g,v);break;case"align":f.alt(g,v,["start",qa,"end","left","right"]);break}},/:/,/\s/),u.region=f.get("region",null),u.vertical=f.get("vertical","");let h=f.get("line","auto");h==="auto"&&gf.line===-1&&(h=-1),u.line=h,u.lineAlign=f.get("lineAlign","start"),u.snapToLines=f.get("snapToLines",!0),u.size=f.get("size",100),u.align=f.get("align",qa);let p=f.get("position","auto");p==="auto"&&gf.position===50&&(p=u.align==="start"||u.align==="left"?0:u.align==="end"||u.align==="right"?100:50),u.position=p}function l(){r=r.replace(/^\s+/,"")}if(l(),e.startTime=i(),l(),r.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+n);r=r.slice(3),l(),e.endTime=i(),l(),o(r,e)}function Kx(r){return r.replace(/<br(?: \/)?>/gi,`
`)}class FR{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new NR,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));function n(){let o=t.buffer,l=0;for(o=Kx(o);l<o.length&&o[l]!=="\r"&&o[l]!==`
`;)++l;const c=o.slice(0,l);return o[l]==="\r"&&++l,o[l]===`
`&&++l,t.buffer=o.slice(l),c}function i(o){Vx(o,function(l,c){},/:/)}try{let o="";if(t.state==="INITIAL"){if(!/\r\n|\n/.test(t.buffer))return this;o=n();const c=o.match(/^()?WEBVTT([ \t].*)?$/);if(!(c!=null&&c[0]))throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let l=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(l?l=!1:o=n(),t.state){case"HEADER":/:/.test(o)?i(o):o||(t.state="ID");continue;case"NOTE":o||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(o)){t.state="NOTE";break}if(!o)continue;if(t.cue=new ih(0,0,""),t.state="CUE",o.indexOf("-->")===-1){t.cue.id=o;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{_R(o,t.cue,t.regionList)}catch{t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const c=o.indexOf("-->")!==-1;if(!o||c&&(l=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(t.cue===null)continue;t.cue.text&&(t.cue.text+=`
`),t.cue.text+=o}continue;case"BADCUE":o||(t.state="ID")}}}catch{t.state==="CUETEXT"&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state=t.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this}}const BR=/\r\n|\n\r|\n|\r/g,bd=function(e,t,n=0){return e.slice(n,n+t.length)===t},jR=function(e){let t=parseInt(e.slice(-3));const n=parseInt(e.slice(-6,-4)),i=parseInt(e.slice(-9,-7)),o=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!he(t)||!he(n)||!he(i)||!he(o))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+=1e3*n,t+=60*1e3*i,t+=3600*1e3*o,t},Ed=function(e){let t=5381,n=e.length;for(;n;)t=t*33^e.charCodeAt(--n);return(t>>>0).toString()};function sh(r,e,t){return Ed(r.toString())+Ed(e.toString())+Ed(t)}const UR=function(e,t,n){let i=e[t],o=e[i.prevCC];if(!o||!o.new&&i.new){e.ccOffset=e.presentationOffset=i.start,i.new=!1;return}for(;(l=o)!=null&&l.new;){var l;e.ccOffset+=i.start-o.start,i.new=!1,i=o,o=e[i.prevCC]}e.presentationOffset=n};function HR(r,e,t,n,i,o,l){const c=new FR,u=jr(new Uint8Array(r)).trim().replace(BR,`
`).split(`
`),f=[],h=e?iR(e.baseTime,e.timescale):0;let p="00:00.000",g=0,v=0,x,b=!0;c.oncue=function(S){const A=t[n];let L=t.ccOffset;const R=(g-h)/9e4;if(A!=null&&A.new&&(v!==void 0?L=t.ccOffset=A.start:UR(t,n,R)),R){if(!e){x=new Error("Missing initPTS for VTT MPEGTS");return}L=R-t.presentationOffset}const k=S.endTime-S.startTime,C=lr((S.startTime+L-v)*9e4,i*9e4)/9e4;S.startTime=Math.max(C,0),S.endTime=Math.max(C+k,0);const F=S.text.trim();S.text=decodeURIComponent(encodeURIComponent(F)),S.id||(S.id=sh(S.startTime,S.endTime,F)),S.endTime>0&&f.push(S)},c.onparsingerror=function(S){x=S},c.onflush=function(){if(x){l(x);return}o(f)},u.forEach(S=>{if(b)if(bd(S,"X-TIMESTAMP-MAP=")){b=!1,S.slice(16).split(",").forEach(A=>{bd(A,"LOCAL:")?p=A.slice(6):bd(A,"MPEGTS:")&&(g=parseInt(A.slice(7)))});try{v=jR(p)/1e3}catch(A){x=A}return}else S===""&&(b=!1);c.parse(S+`
`)}),c.flush()}const Sd="stpp.ttml.im1t",zx=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Yx=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,$R={left:"start",center:"center",right:"end",start:"start",end:"end"};function iy(r,e,t,n){const i=ke(new Uint8Array(r),["mdat"]);if(i.length===0){n(new Error("Could not parse IMSC1 mdat"));return}const o=i.map(c=>jr(c)),l=nR(e.baseTime,1,e.timescale);try{o.forEach(c=>t(GR(c,l)))}catch(c){n(c)}}function GR(r,e){const i=new DOMParser().parseFromString(r,"text/xml").getElementsByTagName("tt")[0];if(!i)throw new Error("Invalid ttml");const o={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},l=Object.keys(o).reduce((p,g)=>(p[g]=i.getAttribute(`ttp:${g}`)||o[g],p),{}),c=i.getAttribute("xml:space")!=="preserve",u=sy(wd(i,"styling","style")),f=sy(wd(i,"layout","region")),h=wd(i,"body","[begin]");return[].map.call(h,p=>{const g=qx(p,c);if(!g||!p.hasAttribute("begin"))return null;const v=Ad(p.getAttribute("begin"),l),x=Ad(p.getAttribute("dur"),l);let b=Ad(p.getAttribute("end"),l);if(v===null)throw oy(p);if(b===null){if(x===null)throw oy(p);b=v+x}const S=new ih(v-e,b-e,g);S.id=sh(S.startTime,S.endTime,S.text);const A=f[p.getAttribute("region")],L=u[p.getAttribute("style")],R=WR(A,L,u),{textAlign:k}=R;if(k){const C=$R[k];C&&(S.lineAlign=C),S.align=k}return ct(S,R),S}).filter(p=>p!==null)}function wd(r,e,t){const n=r.getElementsByTagName(e)[0];return n?[].slice.call(n.querySelectorAll(t)):[]}function sy(r){return r.reduce((e,t)=>{const n=t.getAttribute("xml:id");return n&&(e[n]=t),e},{})}function qx(r,e){return[].slice.call(r.childNodes).reduce((t,n,i)=>{var o;return n.nodeName==="br"&&i?t+`
`:(o=n.childNodes)!=null&&o.length?qx(n,e):e?t+n.textContent.trim().replace(/\s+/g," "):t+n.textContent},"")}function WR(r,e,t){const n="http://www.w3.org/ns/ttml#styling";let i=null;const o=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],l=r!=null&&r.hasAttribute("style")?r.getAttribute("style"):null;return l&&t.hasOwnProperty(l)&&(i=t[l]),o.reduce((c,u)=>{const f=Id(e,n,u)||Id(r,n,u)||Id(i,n,u);return f&&(c[u]=f),c},{})}function Id(r,e,t){return r&&r.hasAttributeNS(e,t)?r.getAttributeNS(e,t):null}function oy(r){return new Error(`Could not parse ttml timestamp ${r}`)}function Ad(r,e){if(!r)return null;let t=Wx(r);return t===null&&(zx.test(r)?t=VR(r,e):Yx.test(r)&&(t=KR(r,e))),t}function VR(r,e){const t=zx.exec(r),n=(t[4]|0)+(t[5]|0)/e.subFrameRate;return(t[1]|0)*3600+(t[2]|0)*60+(t[3]|0)+n/e.frameRate}function KR(r,e){const t=Yx.exec(r),n=Number(t[1]);switch(t[2]){case"h":return n*3600;case"m":return n*60;case"ms":return n*1e3;case"f":return n/e.frameRate;case"t":return n/e.tickRate}return n}class zR{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=ly(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(I.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(I.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(I.FRAG_LOADING,this.onFragLoading,this),e.on(I.FRAG_LOADED,this.onFragLoaded,this),e.on(I.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(I.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(I.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(I.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(I.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(I.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(I.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(I.FRAG_LOADING,this.onFragLoading,this),e.off(I.FRAG_LOADED,this.onFragLoaded,this),e.off(I.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(I.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(I.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(I.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(I.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){if(this.config.enableCEA708Captions&&(!this.cea608Parser1||!this.cea608Parser2)){const e=new Ya(this,"textTrack1"),t=new Ya(this,"textTrack2"),n=new Ya(this,"textTrack3"),i=new Ya(this,"textTrack4");this.cea608Parser1=new ny(1,e,t),this.cea608Parser2=new ny(3,n,i)}}addCues(e,t,n,i,o){let l=!1;for(let c=o.length;c--;){const u=o[c],f=YR(u[0],u[1],t,n);if(f>=0&&(u[0]=Math.min(u[0],t),u[1]=Math.max(u[1],n),l=!0,f/(n-t)>.5))return}if(l||o.push([t,n]),this.config.renderTextTracksNatively){const c=this.captionsTracks[e];this.Cues.newCue(c,t,n,i)}else{const c=this.Cues.newCue(null,t,n,i);this.hls.trigger(I.CUES_PARSED,{type:"captions",cues:c,track:e})}}onInitPtsFound(e,{frag:t,id:n,initPTS:i,timescale:o}){const{unparsedVttFrags:l}=this;n==="main"&&(this.initPTS[t.cc]={baseTime:i,timescale:o}),l.length&&(this.unparsedVttFrags=[],l.forEach(c=>{this.onFragLoaded(I.FRAG_LOADED,c)}))}getExistingTrack(e,t){const{media:n}=this;if(n)for(let i=0;i<n.textTracks.length;i++){const o=n.textTracks[i];if(ay(o,{name:e,lang:t}))return o}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:n,media:i}=this,{label:o,languageCode:l}=t[e],c=this.getExistingTrack(o,l);if(c)n[e]=c,Ki(n[e]),mx(n[e],i);else{const u=this.createTextTrack("captions",o,l);u&&(u[e]=!0,n[e]=u)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const n=t.label,i={_id:e,label:n,kind:"captions",default:t.media?!!t.media.default:!1,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=i,this.hls.trigger(I.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[i]})}createTextTrack(e,t,n){const i=this.media;if(i)return i.addTextTrack(e,t,n)}onMediaAttaching(e,t){this.media=t.media,this._cleanTracks()}onMediaDetaching(){const{captionsTracks:e}=this;Object.keys(e).forEach(t=>{Ki(e[t]),delete e[t]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=ly(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let n=0;n<t.length;n++)Ki(t[n])}onSubtitleTracksUpdated(e,t){const n=t.subtitleTracks||[],i=n.some(o=>o.textCodec===Sd);if(this.config.enableWebVTT||i&&this.config.enableIMSC1){if(Hx(this.tracks,n)){this.tracks=n;return}if(this.textTracks=[],this.tracks=n,this.config.renderTextTracksNatively){const l=this.media,c=l?nl(l.textTracks):null;if(this.tracks.forEach((u,f)=>{let h;if(c){let p=null;for(let g=0;g<c.length;g++)if(c[g]&&ay(c[g],u)){p=c[g],c[g]=null;break}p&&(h=p)}if(h)Ki(h);else{const p=Xx(u);h=this.createTextTrack(p,u.name,u.lang),h&&(h.mode="disabled")}h&&this.textTracks.push(h)}),c!=null&&c.length){const u=c.filter(f=>f!==null).map(f=>f.label);u.length&&B.warn(`Media element contains unused subtitle tracks: ${u.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const l=this.tracks.map(c=>({label:c.name,kind:c.type.toLowerCase(),default:c.default,subtitleTrack:c}));this.hls.trigger(I.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:l})}}}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(n=>{const i=/(?:CC|SERVICE)([1-4])/.exec(n.instreamId);if(!i)return;const o=`textTrack${i[1]}`,l=this.captionsProperties[o];l&&(l.label=n.name,n.lang&&(l.languageCode=n.lang),l.media=n)})}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return t?.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){if(this.enabled&&t.frag.type===Le.MAIN){var n,i;const{cea608Parser1:o,cea608Parser2:l,lastSn:c}=this,{cc:u,sn:f}=t.frag,h=(n=(i=t.part)==null?void 0:i.index)!=null?n:-1;o&&l&&(f!==c+1||f===c&&h!==this.lastPartIndex+1||u!==this.lastCc)&&(o.reset(),l.reset()),this.lastCc=u,this.lastSn=f,this.lastPartIndex=h}}onFragLoaded(e,t){const{frag:n,payload:i}=t;if(n.type===Le.SUBTITLE)if(i.byteLength){const o=n.decryptdata,l="stats"in t;if(o==null||!o.encrypted||l){const c=this.tracks[n.level],u=this.vttCCs;u[n.cc]||(u[n.cc]={start:n.start,prevCC:this.prevCC,new:!0},this.prevCC=n.cc),c&&c.textCodec===Sd?this._parseIMSC1(n,i):this._parseVTTs(t)}}else this.hls.trigger(I.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const n=this.hls;iy(t,this.initPTS[e.cc],i=>{this._appendCues(i,e.level),n.trigger(I.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},i=>{B.log(`Failed to parse IMSC1: ${i}`),n.trigger(I.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:i})})}_parseVTTs(e){var t;const{frag:n,payload:i}=e,{initPTS:o,unparsedVttFrags:l}=this,c=o.length-1;if(!o[n.cc]&&c===-1){l.push(e);return}const u=this.hls,f=(t=n.initSegment)!=null&&t.data?dr(n.initSegment.data,new Uint8Array(i)):i;HR(f,this.initPTS[n.cc],this.vttCCs,n.cc,n.start,h=>{this._appendCues(h,n.level),u.trigger(I.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:n})},h=>{const p=h.message==="Missing initPTS for VTT MPEGTS";p?l.push(e):this._fallbackToIMSC1(n,i),B.log(`Failed to parse VTT cue: ${h}`),!(p&&c>n.cc)&&u.trigger(I.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:h})})}_fallbackToIMSC1(e,t){const n=this.tracks[e.level];n.textCodec||iy(t,this.initPTS[e.cc],()=>{n.textCodec=Sd,this._parseIMSC1(e,t)},()=>{n.textCodec="wvtt"})}_appendCues(e,t){const n=this.hls;if(this.config.renderTextTracksNatively){const i=this.textTracks[t];if(!i||i.mode==="disabled")return;e.forEach(o=>gx(i,o))}else{const i=this.tracks[t];if(!i)return;const o=i.default?"default":"subtitles"+t;n.trigger(I.CUES_PARSED,{type:"subtitles",cues:e,track:o})}}onFragDecrypted(e,t){const{frag:n}=t;n.type===Le.SUBTITLE&&this.onFragLoaded(I.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){this.initCea608Parsers();const{cea608Parser1:n,cea608Parser2:i}=this;if(!this.enabled||!n||!i)return;const{frag:o,samples:l}=t;if(!(o.type===Le.MAIN&&this.closedCaptionsForLevel(o)==="NONE"))for(let c=0;c<l.length;c++){const u=l[c].bytes;if(u){const f=this.extractCea608Data(u);n.addData(l[c].pts,f[0]),i.addData(l[c].pts,f[1])}}}onBufferFlushing(e,{startOffset:t,endOffset:n,endOffsetSubtitles:i,type:o}){const{media:l}=this;if(!(!l||l.currentTime<n)){if(!o||o==="video"){const{captionsTracks:c}=this;Object.keys(c).forEach(u=>cf(c[u],t,n))}if(this.config.renderTextTracksNatively&&t===0&&i!==void 0){const{textTracks:c}=this;Object.keys(c).forEach(u=>cf(c[u],t,i))}}}extractCea608Data(e){const t=[[],[]],n=e[0]&31;let i=2;for(let o=0;o<n;o++){const l=e[i++],c=127&e[i++],u=127&e[i++];if(c===0&&u===0)continue;if((4&l)!==0){const h=3&l;(h===0||h===1)&&(t[h].push(c),t[h].push(u))}}return t}}function Xx(r){return r.characteristics&&/transcribes-spoken-dialog/gi.test(r.characteristics)&&/describes-music-and-sound/gi.test(r.characteristics)?"captions":"subtitles"}function ay(r,e){return!!r&&r.kind===Xx(e)&&mf(e,r)}function YR(r,e,t,n){return Math.min(e,n)-Math.max(r,t)}function ly(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}class oh{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(I.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(I.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(I.MANIFEST_PARSED,this.onManifestParsed,this),e.on(I.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(I.BUFFER_CODECS,this.onBufferCodecs,this),e.on(I.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(I.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(I.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(I.MANIFEST_PARSED,this.onManifestParsed,this),e.off(I.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(I.BUFFER_CODECS,this.onBufferCodecs,this),e.off(I.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const n=this.hls.levels[t.droppedLevel];this.isLevelAllowed(n)&&this.restrictedLevels.push({bitrate:n.bitrate,height:n.height,width:n.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,t){const n=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,n.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onLevelsUpdated(e,t){this.timer&&he(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping()}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const t=this.hls,n=this.getMaxLevel(e.length-1);n!==this.autoLevelCapping&&B.log(`Setting autoLevelCapping to ${n}: ${e[n].height}p@${e[n].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),t.autoLevelCapping=n,t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const n=t.filter((i,o)=>this.isLevelAllowed(i)&&o<=e);return this.clientRect=null,oh.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const n=e.getBoundingClientRect();t.width=n.width,t.height=n.height,!t.width&&!t.height&&(t.width=n.right-n.left||e.width||0,t.height=n.bottom-n.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return e}isLevelAllowed(e){return!this.restrictedLevels.some(n=>e.bitrate===n.bitrate&&e.width===n.width&&e.height===n.height)}static getMaxLevelByMediaSize(e,t,n){if(!(e!=null&&e.length))return-1;const i=(c,u)=>u?c.width!==u.width||c.height!==u.height:!0;let o=e.length-1;const l=Math.max(t,n);for(let c=0;c<e.length;c+=1){const u=e[c];if((u.width>=l||u.height>=l)&&i(u,e[c+1])){o=c;break}}return o}}class qR{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(I.MEDIA_ATTACHING,this.onMediaAttaching,this)}unregisterListeners(){this.hls.off(I.MEDIA_ATTACHING,this.onMediaAttaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const n=this.hls.config;if(n.capLevelOnFPSDrop){const i=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=i,i&&typeof i.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}}checkFPS(e,t,n){const i=performance.now();if(t){if(this.lastTime){const o=i-this.lastTime,l=n-this.lastDroppedFrames,c=t-this.lastDecodedFrames,u=1e3*l/o,f=this.hls;if(f.trigger(I.FPS_DROP,{currentDropped:l,currentDecoded:c,totalDroppedFrames:n}),u>0&&l>f.config.fpsDroppedMonitoringThreshold*c){let h=f.currentLevel;B.warn("drop FPS ratio greater than max allowed value for currentLevel: "+h),h>0&&(f.autoLevelCapping===-1||f.autoLevelCapping>=h)&&(h=h-1,f.trigger(I.FPS_DROP_LEVEL_CAPPING,{level:h,droppedLevel:f.currentLevel}),f.autoLevelCapping=h,this.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=n,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}const Xa="[eme]";class Xi{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=Xi.CDMCleanupPromise?[Xi.CDMCleanupPromise]:[],this.debug=B.debug.bind(B,Xa),this.log=B.log.bind(B,Xa),this.warn=B.warn.bind(B,Xa),this.error=B.error.bind(B,Xa),this.onMediaEncrypted=t=>{const{initDataType:n,initData:i}=t,o=`"${t.type}" event: init data type: "${n}"`;if(this.debug(o),i!==null){if(!this.keyFormatPromise){let l=Object.keys(this.keySystemAccessPromises);l.length||(l=Ua(this.config));const c=l.map(ad).filter(u=>!!u);this.keyFormatPromise=this.getKeyFormatPromise(c)}this.keyFormatPromise.then(l=>{const c=sd(l);let u,f;if(n==="sinf"){if(c!==Ue.FAIRPLAY){this.warn(`Ignoring unexpected "${t.type}" event with init data type: "${n}" for selected key-system ${c}`);return}const x=ft(new Uint8Array(i));try{const b=Vf(JSON.parse(x).sinf),S=ux(b);if(!S)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");u=S.subarray(8,24),f=Ue.FAIRPLAY}catch(b){this.warn(`${o} Failed to parse sinf: ${b}`);return}}else{if(c!==Ue.WIDEVINE&&c!==Ue.PLAYREADY){this.warn(`Ignoring unexpected "${t.type}" event with init data type: "${n}" for selected key-system ${c}`);return}const x=TT(i),b=x.filter(A=>!!A.systemId&&od(A.systemId)===c);b.length>1&&this.warn(`${o} Using first of ${b.length} pssh found for selected key-system ${c}`);const S=b[0];if(!S){x.length===0||x.some(A=>!A.systemId)?this.warn(`${o} contains incomplete or invalid pssh data`):this.log(`ignoring ${o} for ${x.map(A=>od(A.systemId)).join(",")} pssh data in favor of playlist keys`);return}if(f=od(S.systemId),S.version===0&&S.data)if(f===Ue.WIDEVINE){const A=S.data.length-22;u=S.data.subarray(A,A+16)}else f===Ue.PLAYREADY&&(u=rx(S.data))}if(!f||!u){this.log(`Unable to handle ${o} with key-system ${c}`);return}const h=Or.hexDump(u),{keyIdToKeySessionPromise:p,mediaKeySessions:g}=this;let v=p[h];for(let x=0;x<g.length;x++){const b=g[x],S=b.decryptdata;if(!S.keyId)continue;const A=Or.hexDump(S.keyId);if(h===A||S.uri.replace(/-/g,"").indexOf(h)!==-1){if(v=p[A],S.pssh)break;delete p[A],S.pssh=new Uint8Array(i),S.keyId=u,v=p[h]=v.then(()=>this.generateRequestWithPreferredKeySession(b,n,i,"encrypted-event-key-match")),v.catch(L=>this.handleError(L));break}}if(!v){if(f!==c){this.log(`Ignoring "${o}" with ${f} init data for selected key-system ${c}`);return}v=p[h]=this.getKeySystemSelectionPromise([f]).then(({keySystem:x,mediaKeys:b})=>{var S;this.throwIfDestroyed();const A=new po("ISO-23001-7",h,(S=ad(x))!=null?S:"");return A.pssh=new Uint8Array(i),A.keyId=u,this.attemptSetMediaKeys(x,b).then(()=>{this.throwIfDestroyed();const L=this.createMediaKeySessionContext({decryptdata:A,keySystem:x,mediaKeys:b});return this.generateRequestWithPreferredKeySession(L,n,i,"encrypted-event-no-match")})}),v.catch(x=>this.handleError(x))}})}},this.onWaitingForKey=t=>{this.log(`"${t.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.unregisterListeners(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on(I.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(I.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(I.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(I.MANIFEST_LOADED,this.onManifestLoaded,this)}unregisterListeners(){this.hls.off(I.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(I.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(I.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(I.MANIFEST_LOADED,this.onManifestLoaded,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:n}=this.config,i=t[e];if(i)return i.licenseUrl;if(e===Ue.WIDEVINE&&n)return n}getLicenseServerUrlOrThrow(e){const t=this.getLicenseServerUrl(e);if(t===void 0)throw new Error(`no license server URL configured for key-system "${e}"`);return t}getServerCertificateUrl(e){const{drmSystems:t}=this.config,n=t[e];if(n)return n.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const t=this.hls.levels,n=(l,c,u)=>!!l&&u.indexOf(l)===c,i=t.map(l=>l.audioCodec).filter(n),o=t.map(l=>l.videoCodec).filter(n);return i.length+o.length===0&&o.push("avc1.42e01e"),new Promise((l,c)=>{const u=f=>{const h=f.shift();this.getMediaKeysPromise(h,i,o).then(p=>l({keySystem:h,mediaKeys:p})).catch(p=>{f.length?u(f):p instanceof or?c(p):c(new or({type:Re.KEY_SYSTEM_ERROR,details:K.KEY_SYSTEM_NO_ACCESS,error:p,fatal:!0},p.message))})};u(e)})}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:n}=this.config;if(typeof n!="function"){let i=`Configured requestMediaKeySystemAccess is not a function ${n}`;return tx===null&&self.location.protocol==="http:"&&(i=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(i))}return n(e,t)}getMediaKeysPromise(e,t,n){const i=tT(e,t,n,this.config.drmSystemOptions),o=this.keySystemAccessPromises[e];let l=o?.keySystemAccess;if(!l){this.log(`Requesting encrypted media "${e}" key-system access with config: ${JSON.stringify(i)}`),l=this.requestMediaKeySystemAccess(e,i);const c=this.keySystemAccessPromises[e]={keySystemAccess:l};return l.catch(u=>{this.log(`Failed to obtain access to key-system "${e}": ${u}`)}),l.then(u=>{this.log(`Access for key-system "${u.keySystem}" obtained`);const f=this.fetchServerCertificate(e);return this.log(`Create media-keys for "${e}"`),c.mediaKeys=u.createMediaKeys().then(h=>(this.log(`Media-keys created for "${e}"`),f.then(p=>p?this.setMediaKeysServerCertificate(h,e,p):h))),c.mediaKeys.catch(h=>{this.error(`Failed to create media-keys for "${e}"}: ${h}`)}),c.mediaKeys})}return l.then(()=>o.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:t,mediaKeys:n}){this.log(`Creating key-system session "${t}" keyId: ${Or.hexDump(e.keyId||[])}`);const i=n.createSession(),o={decryptdata:e,keySystem:t,mediaKeys:n,mediaKeysSession:i,keyStatus:"status-pending"};return this.mediaKeySessions.push(o),o}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const n=this.createMediaKeySessionContext(e),i=this.getKeyIdString(t),o="cenc";this.keyIdToKeySessionPromise[i]=this.generateRequestWithPreferredKeySession(n,o,t.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(e.keyId===null)throw new Error("keyId is null");return Or.hexDump(e.keyId)}updateKeySession(e,t){var n;const i=e.mediaKeysSession;return this.log(`Updating key-session "${i.sessionId}" for keyID ${Or.hexDump(((n=e.decryptdata)==null?void 0:n.keyId)||[])}
      } (data length: ${t&&t.byteLength})`),i.update(t)}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){return new Promise((t,n)=>{const i=Ua(this.config),o=e.map(sd).filter(l=>!!l&&i.indexOf(l)!==-1);return this.getKeySystemSelectionPromise(o).then(({keySystem:l})=>{const c=ad(l);c?t(c):n(new Error(`Unable to find format for key-system "${l}"`))}).catch(n)})}loadKey(e){const t=e.keyInfo.decryptdata,n=this.getKeyIdString(t),i=`(keyId: ${n} format: "${t.keyFormat}" method: ${t.method} uri: ${t.uri})`;this.log(`Starting session for key ${i}`);let o=this.keyIdToKeySessionPromise[n];return o||(o=this.keyIdToKeySessionPromise[n]=this.getKeySystemForKeyPromise(t).then(({keySystem:l,mediaKeys:c})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${i}`),this.attemptSetMediaKeys(l,c).then(()=>{this.throwIfDestroyed();const u=this.createMediaKeySessionContext({keySystem:l,mediaKeys:c,decryptdata:t});return this.generateRequestWithPreferredKeySession(u,"cenc",t.pssh,"playlist-key")}))),o.catch(l=>this.handleError(l))),o}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e){this.hls&&(this.error(e.message),e instanceof or?this.hls.trigger(I.ERROR,e.data):this.hls.trigger(I.ERROR,{type:Re.KEY_SYSTEM_ERROR,details:K.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const t=this.getKeyIdString(e),n=this.keyIdToKeySessionPromise[t];if(!n){const i=sd(e.keyFormat),o=i?[i]:Ua(this.config);return this.attemptKeySystemAccess(o)}return n}getKeySystemSelectionPromise(e){if(e.length||(e=Ua(this.config)),e.length===0)throw new or({type:Re.KEY_SYSTEM_ERROR,details:K.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${JSON.stringify({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,t){const n=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const i=Promise.all(n).then(()=>{if(!this.media)throw new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(t)});return this.setMediaKeysQueue.push(i),i.then(()=>{this.log(`Media-keys set for "${e}"`),n.push(i),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(o=>n.indexOf(o)===-1)})}generateRequestWithPreferredKeySession(e,t,n,i){var o,l;const c=(o=this.config.drmSystems)==null||(l=o[e.keySystem])==null?void 0:l.generateRequest;if(c)try{const x=c.call(this.hls,t,n,e);if(!x)throw new Error("Invalid response from configured generateRequest filter");t=x.initDataType,n=e.decryptdata.pssh=x.initData?new Uint8Array(x.initData):null}catch(x){var u;if(this.warn(x.message),(u=this.hls)!=null&&u.config.debug)throw x}if(n===null)return this.log(`Skipping key-session request for "${i}" (no initData)`),Promise.resolve(e);const f=this.getKeyIdString(e.decryptdata);this.log(`Generating key-session request for "${i}": ${f} (init data type: ${t} length: ${n?n.byteLength:null})`);const h=new nh,p=e._onmessage=x=>{const b=e.mediaKeysSession;if(!b){h.emit("error",new Error("invalid state"));return}const{messageType:S,message:A}=x;this.log(`"${S}" message event for session "${b.sessionId}" message size: ${A.byteLength}`),S==="license-request"||S==="license-renewal"?this.renewLicense(e,A).catch(L=>{this.handleError(L),h.emit("error",L)}):S==="license-release"?e.keySystem===Ue.FAIRPLAY&&(this.updateKeySession(e,af("acknowledged")),this.removeSession(e)):this.warn(`unhandled media key message type "${S}"`)},g=e._onkeystatuseschange=x=>{if(!e.mediaKeysSession){h.emit("error",new Error("invalid state"));return}this.onKeyStatusChange(e);const S=e.keyStatus;h.emit("keyStatus",S),S==="expired"&&(this.warn(`${e.keySystem} expired for key ${f}`),this.renewKeySession(e))};e.mediaKeysSession.addEventListener("message",p),e.mediaKeysSession.addEventListener("keystatuseschange",g);const v=new Promise((x,b)=>{h.on("error",b),h.on("keyStatus",S=>{S.startsWith("usable")?x():S==="output-restricted"?b(new or({type:Re.KEY_SYSTEM_ERROR,details:K.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):S==="internal-error"?b(new or({type:Re.KEY_SYSTEM_ERROR,details:K.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${S}"`)):S==="expired"?b(new Error("key expired while generating request")):this.warn(`unhandled key status change "${S}"`)})});return e.mediaKeysSession.generateRequest(t,n).then(()=>{var x;this.log(`Request generated for key-session "${(x=e.mediaKeysSession)==null?void 0:x.sessionId}" keyId: ${f}`)}).catch(x=>{throw new or({type:Re.KEY_SYSTEM_ERROR,details:K.KEY_SYSTEM_NO_SESSION,error:x,fatal:!1},`Error generating key-session request: ${x}`)}).then(()=>v).catch(x=>{throw h.removeAllListeners(),this.removeSession(e),x}).then(()=>(h.removeAllListeners(),e))}onKeyStatusChange(e){e.mediaKeysSession.keyStatuses.forEach((t,n)=>{this.log(`key status change "${t}" for keyStatuses keyId: ${Or.hexDump("buffer"in n?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n))} session keyId: ${Or.hexDump(new Uint8Array(e.decryptdata.keyId||[]))} uri: ${e.decryptdata.uri}`),e.keyStatus=t})}fetchServerCertificate(e){const t=this.config,n=t.loader,i=new n(t),o=this.getServerCertificateUrl(e);return o?(this.log(`Fetching server certificate for "${e}"`),new Promise((l,c)=>{const u={responseType:"arraybuffer",url:o},f=t.certLoadPolicy.default,h={loadPolicy:f,timeout:f.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},p={onSuccess:(g,v,x,b)=>{l(g.data)},onError:(g,v,x,b)=>{c(new or({type:Re.KEY_SYSTEM_ERROR,details:K.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:x,response:xt({url:u.url,data:void 0},g)},`"${e}" certificate request failed (${o}). Status: ${g.code} (${g.text})`))},onTimeout:(g,v,x)=>{c(new or({type:Re.KEY_SYSTEM_ERROR,details:K.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:x,response:{url:u.url,data:void 0}},`"${e}" certificate request timed out (${o})`))},onAbort:(g,v,x)=>{c(new Error("aborted"))}};i.load(u,h,p)})):Promise.resolve()}setMediaKeysServerCertificate(e,t,n){return new Promise((i,o)=>{e.setServerCertificate(n).then(l=>{this.log(`setServerCertificate ${l?"success":"not supported by CDM"} (${n?.byteLength}) on "${t}"`),i(e)}).catch(l=>{o(new or({type:Re.KEY_SYSTEM_ERROR,details:K.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:l,fatal:!0},l.message))})})}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then(n=>this.updateKeySession(e,new Uint8Array(n)).catch(i=>{throw new or({type:Re.KEY_SYSTEM_ERROR,details:K.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:i,fatal:!0},i.message)}))}unpackPlayReadyKeyMessage(e,t){const n=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!n.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;const i=new DOMParser().parseFromString(n,"application/xml"),o=i.querySelectorAll("HttpHeader");if(o.length>0){let h;for(let p=0,g=o.length;p<g;p++){var l,c;h=o[p];const v=(l=h.querySelector("name"))==null?void 0:l.textContent,x=(c=h.querySelector("value"))==null?void 0:c.textContent;v&&x&&e.setRequestHeader(v,x)}}const u=i.querySelector("Challenge"),f=u?.textContent;if(!f)throw new Error("Cannot find <Challenge> in key message");return af(atob(f))}setupLicenseXHR(e,t,n,i){const o=this.config.licenseXhrSetup;return o?Promise.resolve().then(()=>{if(!n.decryptdata)throw new Error("Key removed");return o.call(this.hls,e,t,n,i)}).catch(l=>{if(!n.decryptdata)throw l;return e.open("POST",t,!0),o.call(this.hls,e,t,n,i)}).then(l=>(e.readyState||e.open("POST",t,!0),{xhr:e,licenseChallenge:l||i})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:i}))}requestLicense(e,t){const n=this.config.keyLoadPolicy.default;return new Promise((i,o)=>{const l=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${l}`);const c=new XMLHttpRequest;c.responseType="arraybuffer",c.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return o(new Error("invalid state"));if(c.readyState===4)if(c.status===200){this._requestLicenseFailureCount=0;let u=c.response;this.log(`License received ${u instanceof ArrayBuffer?u.byteLength:u}`);const f=this.config.licenseResponseCallback;if(f)try{u=f.call(this.hls,c,l,e)}catch(h){this.error(h)}i(u)}else{const u=n.errorRetry,f=u?u.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>f||c.status>=400&&c.status<500)o(new or({type:Re.KEY_SYSTEM_ERROR,details:K.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:c,response:{url:l,data:void 0,code:c.status,text:c.statusText}},`License Request XHR failed (${l}). Status: ${c.status} (${c.statusText})`));else{const h=f-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${h} attempts left`),this.requestLicense(e,t).then(i,o)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=c,this.setupLicenseXHR(c,l,e,t).then(({xhr:u,licenseChallenge:f})=>{e.keySystem==Ue.PLAYREADY&&(f=this.unpackPlayReadyKeyMessage(u,f)),u.send(f)})})}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const n=t.media;this.media=n,n.removeEventListener("encrypted",this.onMediaEncrypted),n.removeEventListener("waitingforkey",this.onWaitingForKey),n.addEventListener("encrypted",this.onMediaEncrypted),n.addEventListener("waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media,t=this.mediaKeySessions;e&&(e.removeEventListener("encrypted",this.onMediaEncrypted),e.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},po.clearKeyUriToKeyIdMap();const n=t.length;Xi.CDMCleanupPromise=Promise.all(t.map(i=>this.removeSession(i)).concat(e?.setMediaKeys(null).catch(i=>{this.log(`Could not clear media keys: ${i}`)}))).then(()=>{n&&(this.log("finished closing key sessions and clearing media keys"),t.length=0)}).catch(i=>{this.log(`Could not close sessions and clear media keys: ${i}`)})}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(e,{sessionKeys:t}){if(!(!t||!this.config.emeEnabled)&&!this.keyFormatPromise){const n=t.reduce((i,o)=>(i.indexOf(o.keyFormat)===-1&&i.push(o.keyFormat),i),[]);this.log(`Selecting key-system from session-keys ${n.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(n)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:n}=e;if(t){this.log(`Remove licenses and keys and close session ${t.sessionId}`),e._onmessage&&(t.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(t.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),n&&n.readyState!==XMLHttpRequest.DONE&&n.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const i=this.mediaKeySessions.indexOf(e);return i>-1&&this.mediaKeySessions.splice(i,1),t.remove().catch(o=>{this.log(`Could not remove session: ${o}`)}).then(()=>t.close()).catch(o=>{this.log(`Could not close session: ${o}`)})}}}Xi.CDMCleanupPromise=void 0;class or extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}var Ct;(function(r){r.MANIFEST="m",r.AUDIO="a",r.VIDEO="v",r.MUXED="av",r.INIT="i",r.CAPTION="c",r.TIMED_TEXT="tt",r.KEY="k",r.OTHER="o"})(Ct||(Ct={}));var yf;(function(r){r.DASH="d",r.HLS="h",r.SMOOTH="s",r.OTHER="o"})(yf||(yf={}));var ii;(function(r){r.OBJECT="CMCD-Object",r.REQUEST="CMCD-Request",r.SESSION="CMCD-Session",r.STATUS="CMCD-Status"})(ii||(ii={}));const XR={[ii.OBJECT]:["br","d","ot","tb"],[ii.REQUEST]:["bl","dl","mtp","nor","nrr","su"],[ii.SESSION]:["cid","pr","sf","sid","st","v"],[ii.STATUS]:["bs","rtp"]};class rs{constructor(e,t){this.value=void 0,this.params=void 0,Array.isArray(e)&&(e=e.map(n=>n instanceof rs?n:new rs(n))),this.value=e,this.params=t}}class Zx{constructor(e){this.description=void 0,this.description=e}}const ZR="Dict";function JR(r){return Array.isArray(r)?JSON.stringify(r):r instanceof Map?"Map{}":r instanceof Set?"Set{}":typeof r=="object"?JSON.stringify(r):String(r)}function QR(r,e,t,n){return new Error(`failed to ${r} "${JR(e)}" as ${t}`,{cause:n})}const cy="Bare Item",eC="Boolean",tC="Byte Sequence",rC="Decimal",nC="Integer";function iC(r){return r<-999999999999999||999999999999999<r}const sC=/[\x00-\x1f\x7f]+/,oC="Token",aC="Key";function Hr(r,e,t){return QR("serialize",r,e,t)}function lC(r){if(typeof r!="boolean")throw Hr(r,eC);return r?"?1":"?0"}function cC(r){return btoa(String.fromCharCode(...r))}function uC(r){if(ArrayBuffer.isView(r)===!1)throw Hr(r,tC);return`:${cC(r)}:`}function Jx(r){if(iC(r))throw Hr(r,nC);return r.toString()}function dC(r){return`@${Jx(r.getTime()/1e3)}`}function Qx(r,e){if(r<0)return-Qx(-r,e);const t=Math.pow(10,e);if(Math.abs(r*t%1-.5)<Number.EPSILON){const i=Math.floor(r*t);return(i%2===0?i:i+1)/t}else return Math.round(r*t)/t}function fC(r){const e=Qx(r,3);if(Math.floor(Math.abs(e)).toString().length>12)throw Hr(r,rC);const t=e.toString();return t.includes(".")?t:`${t}.0`}const hC="String";function pC(r){if(sC.test(r))throw Hr(r,hC);return`"${r.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function mC(r){return r.description||r.toString().slice(7,-1)}function uy(r){const e=mC(r);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw Hr(e,oC);return e}function vf(r){switch(typeof r){case"number":if(!he(r))throw Hr(r,cy);return Number.isInteger(r)?Jx(r):fC(r);case"string":return pC(r);case"symbol":return uy(r);case"boolean":return lC(r);case"object":if(r instanceof Date)return dC(r);if(r instanceof Uint8Array)return uC(r);if(r instanceof Zx)return uy(r);default:throw Hr(r,cy)}}function xf(r){if(/^[a-z*][a-z0-9\-_.*]*$/.test(r)===!1)throw Hr(r,aC);return r}function ah(r){return r==null?"":Object.entries(r).map(([e,t])=>t===!0?`;${xf(e)}`:`;${xf(e)}=${vf(t)}`).join("")}function eb(r){return r instanceof rs?`${vf(r.value)}${ah(r.params)}`:vf(r)}function gC(r){return`(${r.value.map(eb).join(" ")})${ah(r.params)}`}function yC(r,e={whitespace:!0}){if(typeof r!="object")throw Hr(r,ZR);const t=r instanceof Map?r.entries():Object.entries(r),n=e!=null&&e.whitespace?" ":"";return Array.from(t).map(([i,o])=>{o instanceof rs||(o=new rs(o));let l=xf(i);return o.value===!0?l+=ah(o.params):(l+="=",Array.isArray(o.value)?l+=gC(o):l+=eb(o)),l}).join(`,${n}`)}function vC(r,e){return yC(r,e)}const xC=r=>r==="ot"||r==="sf"||r==="st",bC=r=>typeof r=="number"?he(r):r!=null&&r!==""&&r!==!1;function EC(r,e){const t=new URL(r),n=new URL(e);if(t.origin!==n.origin)return r;const i=t.pathname.split("/").slice(1),o=n.pathname.split("/").slice(1,-1);for(;i[0]===o[0];)i.shift(),o.shift();for(;o.length;)o.shift(),i.unshift("..");return i.join("/")}function SC(){try{return crypto.randomUUID()}catch{try{const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch{let t=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,i=>{const o=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(i=="x"?o:o&3|8).toString(16)})}}}const cl=r=>Math.round(r),wC=(r,e)=>(e!=null&&e.baseUrl&&(r=EC(r,e.baseUrl)),encodeURIComponent(r)),Za=r=>cl(r/100)*100,IC={br:cl,d:cl,bl:Za,dl:Za,mtp:Za,nor:wC,rtp:Za,tb:cl};function AC(r,e){const t={};if(r==null||typeof r!="object")return t;const n=Object.keys(r).sort(),i=ct({},IC,e?.formatters),o=e?.filter;return n.forEach(l=>{if(o!=null&&o(l))return;let c=r[l];const u=i[l];u&&(c=u(c,e)),!(l==="v"&&c===1)&&(l=="pr"&&c===1||bC(c)&&(xC(l)&&typeof c=="string"&&(c=new Zx(c)),t[l]=c))}),t}function tb(r,e={}){return r?vC(AC(r,e),ct({whitespace:!1},e)):""}function TC(r,e={}){if(!r)return{};const t=Object.entries(r),n=Object.entries(XR).concat(Object.entries(e?.customHeaderMap||{})),i=t.reduce((o,l)=>{var c,u;const[f,h]=l,p=((c=n.find(g=>g[1].includes(f)))==null?void 0:c[0])||ii.REQUEST;return(u=o[p])!=null||(o[p]={}),o[p][f]=h,o},{});return Object.entries(i).reduce((o,[l,c])=>(o[l]=tb(c,e),o),{})}function LC(r,e,t){return ct(r,TC(e,t))}const RC="CMCD";function CC(r,e={}){if(!r)return"";const t=tb(r,e);return`${RC}=${encodeURIComponent(t)}`}const dy=/CMCD=[^&#]+/;function DC(r,e,t){const n=CC(e,t);if(!n)return r;if(dy.test(r))return r.replace(dy,n);const i=r.includes("?")?"&":"?";return`${r}${i}${n}`}class kC{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=i=>{try{this.apply(i,{ot:Ct.MANIFEST,su:!this.initialized})}catch(o){B.warn("Could not generate manifest CMCD data.",o)}},this.applyFragmentData=i=>{try{const o=i.frag,l=this.hls.levels[o.level],c=this.getObjectType(o),u={d:o.duration*1e3,ot:c};(c===Ct.VIDEO||c===Ct.AUDIO||c==Ct.MUXED)&&(u.br=l.bitrate/1e3,u.tb=this.getTopBandwidth(c)/1e3,u.bl=this.getBufferLength(c)),this.apply(i,u)}catch(o){B.warn("Could not generate segment CMCD data.",o)}},this.hls=e;const t=this.config=e.config,{cmcd:n}=t;n!=null&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=n.sessionId||SC(),this.cid=n.contentId,this.useHeaders=n.useHeaders===!0,this.includeKeys=n.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(I.MEDIA_DETACHED,this.onMediaDetached,this),e.on(I.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(I.MEDIA_DETACHED,this.onMediaDetached,this),e.off(I.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var n,i;this.audioBuffer=(n=t.tracks.audio)==null?void 0:n.buffer,this.videoBuffer=(i=t.tracks.video)==null?void 0:i.buffer}createData(){var e;return{v:1,sf:yf.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,t={}){ct(t,this.createData());const n=t.ot===Ct.INIT||t.ot===Ct.VIDEO||t.ot===Ct.MUXED;this.starved&&n&&(t.bs=!0,t.su=!0,this.starved=!1),t.su==null&&(t.su=this.buffering);const{includeKeys:i}=this;i&&(t=Object.keys(t).reduce((o,l)=>(i.includes(l)&&(o[l]=t[l]),o),{})),this.useHeaders?(e.headers||(e.headers={}),LC(e.headers,t)):e.url=DC(e.url,t)}getObjectType(e){const{type:t}=e;if(t==="subtitle")return Ct.TIMED_TEXT;if(e.sn==="initSegment")return Ct.INIT;if(t==="audio")return Ct.AUDIO;if(t==="main")return this.hls.audioTracks.length?Ct.VIDEO:Ct.MUXED}getTopBandwidth(e){let t=0,n;const i=this.hls;if(e===Ct.AUDIO)n=i.audioTracks;else{const o=i.maxAutoLevel,l=o>-1?o+1:i.levels.length;n=i.levels.slice(0,l)}for(const o of n)o.bitrate>t&&(t=o.bitrate);return t>0?t:NaN}getBufferLength(e){const t=this.hls.media,n=e===Ct.AUDIO?this.audioBuffer:this.videoBuffer;return!n||!t?NaN:Ve.bufferInfo(n,t.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,n=e||this.config.loader;return class{constructor(o){this.loader=void 0,this.loader=new n(o)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(o,l,c){t(o),this.loader.load(o,l,c)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,n=e||this.config.loader;return class{constructor(o){this.loader=void 0,this.loader=new n(o)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(o,l,c){t(o),this.loader.load(o,l,c)}}}}const OC=3e5;class PC{constructor(e){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.log=B.log.bind(B,"[content-steering]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(I.MANIFEST_PARSED,this.onManifestParsed,this),e.on(I.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(I.MANIFEST_PARSED,this.onManifestParsed,this),e.off(I.ERROR,this.onError,this))}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter(n=>n!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:n}=t;n!==null&&(this.pathwayId=n.pathwayId,this.uri=n.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:n}=t;if(n?.action===wt.SendAlternateToPenaltyBox&&n.flags===Er.MoveAllAlternatesMatchingHost){const i=this.levels;let o=this.pathwayPriority,l=this.pathwayId;if(t.context){const{groupId:c,pathwayId:u,type:f}=t.context;c&&i?l=this.getPathwayForGroupId(c,f,l):u&&(l=u)}l in this.penalizedPathways||(this.penalizedPathways[l]=performance.now()),!o&&i&&(o=i.reduce((c,u)=>(c.indexOf(u.pathwayId)===-1&&c.push(u.pathwayId),c),[])),o&&o.length>1&&(this.updatePathwayPriority(o),n.resolved=this.pathwayId!==l),n.resolved||B.warn(`Could not resolve ${t.details} ("${t.error.message}") with content-steering for Pathway: ${l} levels: ${i&&i.length} priorities: ${JSON.stringify(o)} penalized: ${JSON.stringify(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(t.length===0){const n=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${n}"`),t=this.getLevelsForPathway(n),this.pathwayId=n}return t.length!==e.length&&this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(t=>e===t.pathwayId)}updatePathwayPriority(e){this.pathwayPriority=e;let t;const n=this.penalizedPathways,i=performance.now();Object.keys(n).forEach(o=>{i-n[o]>OC&&delete n[o]});for(let o=0;o<e.length;o++){const l=e[o];if(l in n)continue;if(l===this.pathwayId)return;const c=this.hls.nextLoadLevel,u=this.hls.levels[c];if(t=this.getLevelsForPathway(l),t.length>0){this.log(`Setting Pathway to "${l}"`),this.pathwayId=l,bx(t),this.hls.trigger(I.LEVELS_UPDATED,{levels:t});const f=this.hls.levels[c];u&&f&&this.levels&&(f.attrs["STABLE-VARIANT-ID"]!==u.attrs["STABLE-VARIANT-ID"]&&f.bitrate!==u.bitrate&&this.log(`Unstable Pathways change from bitrate ${u.bitrate} to ${f.bitrate}`),this.hls.nextLoadLevel=c);break}}}getPathwayForGroupId(e,t,n){const i=this.getLevelsForPathway(n).concat(this.levels||[]);for(let o=0;o<i.length;o++)if(t===Me.AUDIO_TRACK&&i[o].hasAudioGroup(e)||t===Me.SUBTITLE_TRACK&&i[o].hasSubtitleGroup(e))return i[o].pathwayId;return n}clonePathways(e){const t=this.levels;if(!t)return;const n={},i={};e.forEach(o=>{const{ID:l,"BASE-ID":c,"URI-REPLACEMENT":u}=o;if(t.some(h=>h.pathwayId===l))return;const f=this.getLevelsForPathway(c).map(h=>{const p=new tt(h.attrs);p["PATHWAY-ID"]=l;const g=p.AUDIO&&`${p.AUDIO}_clone_${l}`,v=p.SUBTITLES&&`${p.SUBTITLES}_clone_${l}`;g&&(n[p.AUDIO]=g,p.AUDIO=g),v&&(i[p.SUBTITLES]=v,p.SUBTITLES=v);const x=rb(h.uri,p["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",u),b=new es({attrs:p,audioCodec:h.audioCodec,bitrate:h.bitrate,height:h.height,name:h.name,url:x,videoCodec:h.videoCodec,width:h.width});if(h.audioGroups)for(let S=1;S<h.audioGroups.length;S++)b.addGroupId("audio",`${h.audioGroups[S]}_clone_${l}`);if(h.subtitleGroups)for(let S=1;S<h.subtitleGroups.length;S++)b.addGroupId("text",`${h.subtitleGroups[S]}_clone_${l}`);return b});t.push(...f),fy(this.audioTracks,n,u,l),fy(this.subtitleTracks,i,u,l)})}loadSteeringManifest(e){const t=this.hls.config,n=t.loader;this.loader&&this.loader.destroy(),this.loader=new n(t);let i;try{i=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(i.protocol!=="data:"){const h=(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate)|0;i.searchParams.set("_HLS_pathway",this.pathwayId),i.searchParams.set("_HLS_throughput",""+h)}const o={responseType:"json",url:i.href},l=t.steeringManifestLoadPolicy.default,c=l.errorRetry||l.timeoutRetry||{},u={loadPolicy:l,timeout:l.maxLoadTimeMs,maxRetry:c.maxNumRetry||0,retryDelay:c.retryDelayMs||0,maxRetryDelay:c.maxRetryDelayMs||0},f={onSuccess:(h,p,g,v)=>{this.log(`Loaded steering manifest: "${i}"`);const x=h.data;if(x.VERSION!==1){this.log(`Steering VERSION ${x.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=x.TTL;const{"RELOAD-URI":b,"PATHWAY-CLONES":S,"PATHWAY-PRIORITY":A}=x;if(b)try{this.uri=new self.URL(b,i).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${b}`);return}this.scheduleRefresh(this.uri||g.url),S&&this.clonePathways(S);const L={steeringManifest:x,url:i.toString()};this.hls.trigger(I.STEERING_MANIFEST_LOADED,L),A&&this.updatePathwayPriority(A)},onError:(h,p,g,v)=>{if(this.log(`Error loading steering manifest: ${h.code} ${h.text} (${p.url})`),this.stopLoad(),h.code===410){this.enabled=!1,this.log(`Steering manifest ${p.url} no longer available`);return}let x=this.timeToLoad*1e3;if(h.code===429){const b=this.loader;if(typeof b?.getResponseHeader=="function"){const S=b.getResponseHeader("Retry-After");S&&(x=parseFloat(S)*1e3)}this.log(`Steering manifest ${p.url} rate limited`);return}this.scheduleRefresh(this.uri||p.url,x)},onTimeout:(h,p,g)=>{this.log(`Timeout loading steering manifest (${p.url})`),this.scheduleRefresh(this.uri||p.url)}};this.log(`Requesting steering manifest: ${i}`),this.loader.load(o,u,f)}scheduleRefresh(e,t=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var n;const i=(n=this.hls)==null?void 0:n.media;if(i&&!i.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},t)}}function fy(r,e,t,n){r&&Object.keys(e).forEach(i=>{const o=r.filter(l=>l.groupId===i).map(l=>{const c=ct({},l);return c.details=void 0,c.attrs=new tt(c.attrs),c.url=c.attrs.URI=rb(l.url,l.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",t),c.groupId=c.attrs["GROUP-ID"]=e[i],c.attrs["PATHWAY-ID"]=n,c});r.push(...o)})}function rb(r,e,t,n){const{HOST:i,PARAMS:o,[t]:l}=n;let c;e&&(c=l?.[e],c&&(r=c));const u=new self.URL(r);return i&&!c&&(u.host=i),o&&Object.keys(o).sort().forEach(f=>{f&&u.searchParams.set(f,o[f])}),u.href}const NC=/^age:\s*[\d.]+\s*$/im;class nb{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new Wl,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=n,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e||!t)return;const n=this.loader=new self.XMLHttpRequest,i=this.stats;i.loading.first=0,i.loaded=0,i.aborted=!1;const o=this.xhrSetup;o?Promise.resolve().then(()=>{if(!(this.loader!==n||this.stats.aborted))return o(n,t.url)}).catch(l=>{if(!(this.loader!==n||this.stats.aborted))return n.open("GET",t.url,!0),o(n,t.url)}).then(()=>{this.loader!==n||this.stats.aborted||this.openAndSendXhr(n,t,e)}).catch(l=>{this.callbacks.onError({code:n.status,text:l.message},t,n,i)}):this.openAndSendXhr(n,t,e)}openAndSendXhr(e,t,n){e.readyState||e.open("GET",t.url,!0);const i=t.headers,{maxTimeToFirstByteMs:o,maxLoadTimeMs:l}=n.loadPolicy;if(i)for(const c in i)e.setRequestHeader(c,i[c]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),n.timeout=o&&he(o)?o:l,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:n}=this;if(!e||!t)return;const i=t.readyState,o=this.config;if(!n.aborted&&i>=2&&(n.loading.first===0&&(n.loading.first=Math.max(self.performance.now(),n.loading.start),o.timeout!==o.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),o.timeout=o.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),o.loadPolicy.maxLoadTimeMs-(n.loading.first-n.loading.start)))),i===4)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const l=t.status,c=t.responseType==="text"?t.responseText:null;if(l>=200&&l<300){const p=c??t.response;if(p!=null){n.loading.end=Math.max(self.performance.now(),n.loading.first);const g=t.responseType==="arraybuffer"?p.byteLength:p.length;if(n.loaded=n.total=g,n.bwEstimate=n.total*8e3/(n.loading.end-n.loading.first),!this.callbacks)return;const v=this.callbacks.onProgress;if(v&&v(n,e,p,t),!this.callbacks)return;const x={url:t.responseURL,data:p,code:l};this.callbacks.onSuccess(x,n,e,t);return}}const u=o.loadPolicy.errorRetry,f=n.retry,h={url:e.url,data:void 0,code:l};Sl(u,f,!1,h)?this.retry(u):(B.error(`${l} while loading ${e.url}`),this.callbacks.onError({code:l,text:t.statusText},e,t,n))}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry,t=this.stats.retry;if(Sl(e,t,!0))this.retry(e);else{var n;B.warn(`timeout while loading ${(n=this.context)==null?void 0:n.url}`);const i=this.callbacks;i&&(this.abortInternal(),i.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:n}=this;this.retryDelay=Yf(e,n.retry),n.retry++,B.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${t?.url}, retrying ${n.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&NC.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}function MC(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const _C=/(\d+)-(\d+)\/(\d+)/;class hy{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||UC,this.controller=new self.AbortController,this.stats=new Wl}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,n){const i=this.stats;if(i.loading.start)throw new Error("Loader can only be used once.");i.loading.start=self.performance.now();const o=FC(e,this.controller.signal),l=n.onProgress,c=e.responseType==="arraybuffer",u=c?"byteLength":"length",{maxTimeToFirstByteMs:f,maxLoadTimeMs:h}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=n,this.request=this.fetchSetup(e,o),self.clearTimeout(this.requestTimeout),t.timeout=f&&he(f)?f:h,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),n.onTimeout(i,e,this.response)},t.timeout),self.fetch(this.request).then(p=>{this.response=this.loader=p;const g=Math.max(self.performance.now(),i.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=h,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),n.onTimeout(i,e,this.response)},h-(g-i.loading.start)),!p.ok){const{status:v,statusText:x}=p;throw new HC(x||"fetch, bad network response",v,p)}return i.loading.first=g,i.total=jC(p.headers)||i.total,l&&he(t.highWaterMark)?this.loadProgressively(p,i,e,t.highWaterMark,l):c?p.arrayBuffer():e.responseType==="json"?p.json():p.text()}).then(p=>{const g=this.response;if(!g)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),i.loading.end=Math.max(self.performance.now(),i.loading.first);const v=p[u];v&&(i.loaded=i.total=v);const x={url:g.url,data:p,code:g.status};l&&!he(t.highWaterMark)&&l(i,e,p,g),n.onSuccess(x,i,e,g)}).catch(p=>{if(self.clearTimeout(this.requestTimeout),i.aborted)return;const g=p&&p.code||0,v=p?p.message:null;n.onError({code:g,text:v},e,p?p.details:null,i)})}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,n,i=0,o){const l=new Ix,c=e.body.getReader(),u=()=>c.read().then(f=>{if(f.done)return l.dataLength&&o(t,n,l.flush(),e),Promise.resolve(new ArrayBuffer(0));const h=f.value,p=h.length;return t.loaded+=p,p<i||l.dataLength?(l.push(h),l.dataLength>=i&&o(t,n,l.flush(),e)):o(t,n,h,e),u()}).catch(()=>Promise.reject());return u()}}function FC(r,e){const t={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(ct({},r.headers))};return r.rangeEnd&&t.headers.set("Range","bytes="+r.rangeStart+"-"+String(r.rangeEnd-1)),t}function BC(r){const e=_C.exec(r);if(e)return parseInt(e[2])-parseInt(e[1])+1}function jC(r){const e=r.get("Content-Range");if(e){const n=BC(e);if(he(n))return n}const t=r.get("Content-Length");if(t)return parseInt(t)}function UC(r,e){return new self.Request(r.url,e)}class HC extends Error{constructor(e,t,n){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=n}}const $C=/\s/,GC={newCue(r,e,t,n){const i=[];let o,l,c,u,f;const h=self.VTTCue||self.TextTrackCue;for(let g=0;g<n.rows.length;g++)if(o=n.rows[g],c=!0,u=0,f="",!o.isEmpty()){var p;for(let b=0;b<o.chars.length;b++)$C.test(o.chars[b].uchar)&&c?u++:(f+=o.chars[b].uchar,c=!1);o.cueStartTime=e,e===t&&(t+=1e-4),u>=16?u--:u++;const v=Kx(f.trim()),x=sh(e,t,v);r!=null&&(p=r.cues)!=null&&p.getCueById(x)||(l=new h(e,t,v),l.id=x,l.line=g+1,l.align="left",l.position=10+Math.min(80,Math.floor(u*8/32)*10),i.push(l))}return r&&i.length&&(i.sort((g,v)=>g.line==="auto"||v.line==="auto"?0:g.line>8&&v.line>8?v.line-g.line:g.line-v.line),i.forEach(g=>gx(r,g))),i}},WC={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},ib=xt(xt({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,maxBufferSize:60*1e3*1e3,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:nb,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:yL,bufferController:ER,capLevelController:oh,errorController:sL,fpsController:qR,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:tx,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,useMediaCapabilities:!0,certLoadPolicy:{default:WC},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},VC()),{},{subtitleStreamController:yR,subtitleTrackController:xR,timelineController:zR,audioStreamController:mR,audioTrackController:gR,emeController:Xi,cmcdController:kC,contentSteeringController:PC});function VC(){return{cueHandler:GC,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function KC(r,e){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const t=bf(r),n=["manifest","level","frag"],i=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return n.forEach(o=>{const l=`${o==="level"?"playlist":o}LoadPolicy`,c=e[l]===void 0,u=[];i.forEach(f=>{const h=`${o}Loading${f}`,p=e[h];if(p!==void 0&&c){u.push(h);const g=t[l].default;switch(e[l]={default:g},f){case"TimeOut":g.maxLoadTimeMs=p,g.maxTimeToFirstByteMs=p;break;case"MaxRetry":g.errorRetry.maxNumRetry=p,g.timeoutRetry.maxNumRetry=p;break;case"RetryDelay":g.errorRetry.retryDelayMs=p,g.timeoutRetry.retryDelayMs=p;break;case"MaxRetryTimeout":g.errorRetry.maxRetryDelayMs=p,g.timeoutRetry.maxRetryDelayMs=p;break}}}),u.length&&B.warn(`hls.js config: "${u.join('", "')}" setting(s) are deprecated, use "${l}": ${JSON.stringify(e[l])}`)}),xt(xt({},t),e)}function bf(r){return r&&typeof r=="object"?Array.isArray(r)?r.map(bf):Object.keys(r).reduce((e,t)=>(e[t]=bf(r[t]),e),{}):r}function zC(r){const e=r.loader;e!==hy&&e!==nb?(B.log("[config]: Custom loader detected, cannot enable progressive streaming"),r.progressive=!1):MC()&&(r.loader=hy,r.progressive=!0,r.enableSoftwareAES=!0,B.log("[config]: Progressive streaming enabled, using FetchLoader"))}let Td;class YC extends qf{constructor(e,t){super(e,"[level-controller]"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(I.LEVEL_LOADED,this.onLevelLoaded,this),e.on(I.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(I.FRAG_BUFFERED,this.onFragBuffered,this),e.on(I.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(I.LEVEL_LOADED,this.onLevelLoaded,this),e.off(I.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(I.FRAG_BUFFERED,this.onFragBuffered,this),e.off(I.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(t=>{t.loadError=0,t.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const n=this.hls.config.preferManagedMediaSource,i=[],o={},l={};let c=!1,u=!1,f=!1;t.levels.forEach(h=>{var p,g;const v=h.attrs;let{audioCodec:x,videoCodec:b}=h;((p=x)==null?void 0:p.indexOf("mp4a.40.34"))!==-1&&(Td||(Td=/chrome|firefox/i.test(navigator.userAgent)),Td&&(h.audioCodec=x=void 0)),x&&(h.audioCodec=x=xl(x,n)),((g=b)==null?void 0:g.indexOf("avc1"))===0&&(b=h.videoCodec=NT(b));const{width:S,height:A,unknownCodecs:L}=h;if(c||(c=!!(S&&A)),u||(u=!!b),f||(f=!!x),L!=null&&L.length||x&&!dd(x,"audio",n)||b&&!dd(b,"video",n))return;const{CODECS:R,"FRAME-RATE":k,"HDCP-LEVEL":C,"PATHWAY-ID":F,RESOLUTION:_,"VIDEO-RANGE":z}=v,U=`${`${F||"."}-`}${h.bitrate}-${_}-${k}-${R}-${z}-${C}`;if(o[U])if(o[U].uri!==h.url&&!h.attrs["PATHWAY-ID"]){const q=l[U]+=1;h.attrs["PATHWAY-ID"]=new Array(q+1).join(".");const le=new es(h);o[U]=le,i.push(le)}else o[U].addGroupId("audio",v.AUDIO),o[U].addGroupId("text",v.SUBTITLES);else{const q=new es(h);o[U]=q,l[U]=1,i.push(q)}}),this.filterAndSortMediaOptions(i,t,c,u,f)}filterAndSortMediaOptions(e,t,n,i,o){let l=[],c=[],u=e;if((n||i)&&o&&(u=u.filter(({videoCodec:x,videoRange:b,width:S,height:A})=>(!!x||!!(S&&A))&&zT(b))),u.length===0){Promise.resolve().then(()=>{if(this.hls){t.levels.length&&this.warn(`One or more CODECS in variant not supported: ${JSON.stringify(t.levels[0].attrs)}`);const x=new Error("no level with compatible codecs found in manifest");this.hls.trigger(I.ERROR,{type:Re.MEDIA_ERROR,details:K.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:x,reason:x.message})}});return}if(t.audioTracks){const{preferManagedMediaSource:x}=this.hls.config;l=t.audioTracks.filter(b=>!b.audioCodec||dd(b.audioCodec,"audio",x)),py(l)}t.subtitles&&(c=t.subtitles,py(c));const f=u.slice(0);u.sort((x,b)=>{if(x.attrs["HDCP-LEVEL"]!==b.attrs["HDCP-LEVEL"])return(x.attrs["HDCP-LEVEL"]||"")>(b.attrs["HDCP-LEVEL"]||"")?1:-1;if(n&&x.height!==b.height)return x.height-b.height;if(x.frameRate!==b.frameRate)return x.frameRate-b.frameRate;if(x.videoRange!==b.videoRange)return bl.indexOf(x.videoRange)-bl.indexOf(b.videoRange);if(x.videoCodec!==b.videoCodec){const S=E0(x.videoCodec),A=E0(b.videoCodec);if(S!==A)return A-S}if(x.uri===b.uri&&x.codecSet!==b.codecSet){const S=vl(x.codecSet),A=vl(b.codecSet);if(S!==A)return A-S}return x.averageBitrate!==b.averageBitrate?x.averageBitrate-b.averageBitrate:0});let h=f[0];if(this.steering&&(u=this.steering.filterParsedLevels(u),u.length!==f.length)){for(let x=0;x<f.length;x++)if(f[x].pathwayId===u[0].pathwayId){h=f[x];break}}this._levels=u;for(let x=0;x<u.length;x++)if(u[x]===h){var p;this._firstLevel=x;const b=h.bitrate,S=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${u.length} level(s) found, first bitrate: ${b}`),((p=this.hls.userConfig)==null?void 0:p.abrEwmaDefaultEstimate)===void 0){const A=Math.min(b,this.hls.config.abrEwmaDefaultEstimateMax);A>S&&S===ib.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=A)}break}const g=o&&!i,v={levels:u,audioTracks:l,subtitleTracks:c,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:o,video:i,altAudio:!g&&l.some(x=>!!x.url)};this.hls.trigger(I.MANIFEST_PARSED,v),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}get levels(){return this._levels.length===0?null:this._levels}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(t.length===0)return;if(e<0||e>=t.length){const h=new Error("invalid level idx"),p=e<0;if(this.hls.trigger(I.ERROR,{type:Re.OTHER_ERROR,details:K.LEVEL_SWITCH_ERROR,level:e,fatal:p,error:h,reason:h.message}),p)return;e=Math.min(e,t.length-1)}const n=this.currentLevelIndex,i=this.currentLevel,o=i?i.attrs["PATHWAY-ID"]:void 0,l=t[e],c=l.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=l,n===e&&l.details&&i&&o===c)return;this.log(`Switching to level ${e} (${l.height?l.height+"p ":""}${l.videoRange?l.videoRange+" ":""}${l.codecSet?l.codecSet+" ":""}@${l.bitrate})${c?" with Pathway "+c:""} from level ${n}${o?" with Pathway "+o:""}`);const u={level:e,attrs:l.attrs,details:l.details,bitrate:l.bitrate,averageBitrate:l.averageBitrate,maxBitrate:l.maxBitrate,realBitrate:l.realBitrate,width:l.width,height:l.height,codecSet:l.codecSet,audioCodec:l.audioCodec,videoCodec:l.videoCodec,audioGroups:l.audioGroups,subtitleGroups:l.subtitleGroups,loaded:l.loaded,loadError:l.loadError,fragmentError:l.fragmentError,name:l.name,id:l.id,uri:l.uri,url:l.url,urlId:0,audioGroupIds:l.audioGroupIds,textGroupIds:l.textGroupIds};this.hls.trigger(I.LEVEL_SWITCHING,u);const f=l.details;if(!f||f.live){const h=this.switchParams(l.uri,i?.details,f);this.loadPlaylist(h)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}onError(e,t){t.fatal||!t.context||t.context.type===Me.LEVEL&&t.context.level===this.level&&this.checkRetry(t)}onFragBuffered(e,{frag:t}){if(t!==void 0&&t.type===Le.MAIN){const n=t.elementaryStreams;if(!Object.keys(n).some(o=>!!n[o]))return;const i=this._levels[t.level];i!=null&&i.loadError&&(this.log(`Resetting level error count of ${i.loadError} on frag buffered`),i.loadError=0)}}onLevelLoaded(e,t){var n;const{level:i,details:o}=t,l=this._levels[i];if(!l){var c;this.warn(`Invalid level index ${i}`),(c=t.deliveryDirectives)!=null&&c.skip&&(o.deltaUpdateFailed=!0);return}i===this.currentLevelIndex?(l.fragmentError===0&&(l.loadError=0),this.playlistLoaded(i,t,l.details)):(n=t.deliveryDirectives)!=null&&n.skip&&(o.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist();const t=this.currentLevelIndex,n=this.currentLevel;if(n&&this.shouldLoadPlaylist(n)){let i=n.uri;if(e)try{i=e.addDirectives(i)}catch(l){this.warn(`Could not construct new URL with HLS Delivery Directives: ${l}`)}const o=n.attrs["PATHWAY-ID"];this.log(`Loading level index ${t}${e?.msn!==void 0?" at sn "+e.msn+" part "+e.part:""} with${o?" Pathway "+o:""} ${i}`),this.clearTimer(),this.hls.trigger(I.LEVEL_LOADING,{url:i,level:t,pathwayId:n.attrs["PATHWAY-ID"],id:0,deliveryDirectives:e||null})}}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var t;const n=this._levels.filter((i,o)=>o!==e?!0:(this.steering&&this.steering.removeLevel(i),i===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,i.details&&i.details.fragments.forEach(l=>l.level=-1)),!1));bx(n),this._levels=n,this.currentLevelIndex>-1&&(t=this.currentLevel)!=null&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.hls.trigger(I.LEVELS_UPDATED,{levels:n})}onLevelsUpdated(e,{levels:t}){this._levels=t}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:t,maxHdcpLevel:n}=this.hls;this._maxAutoLevel!==t&&(this._maxAutoLevel=t,this.hls.trigger(I.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:t,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:n}))}}function py(r){const e={};r.forEach(t=>{const n=t.groupId||"";t.id=e[n]=e[n]||0,e[n]++})}class qC{constructor(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const n in this.keyUriToKeyInfo){const i=this.keyUriToKeyInfo[n].loader;if(i){var t;if(e&&e!==((t=i.context)==null?void 0:t.frag.type))return;i.abort()}}}detach(){for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e].loader;t&&t.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(e,t=K.KEY_LOAD_ERROR,n,i,o){return new Jr({type:Re.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:o,error:n,networkDetails:i})}loadClear(e,t){if(this.emeController&&this.config.emeEnabled){const{sn:n,cc:i}=e;for(let o=0;o<t.length;o++){const l=t[o];if(i<=l.cc&&(n==="initSegment"||l.sn==="initSegment"||n<l.sn)){this.emeController.selectKeySystemFormat(l).then(c=>{l.setKeyFormat(c)});break}}}}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(t=>this.loadInternal(e,t)):this.loadInternal(e)}loadInternal(e,t){var n,i;t&&e.setKeyFormat(t);const o=e.decryptdata;if(!o){const f=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,K.KEY_LOAD_ERROR,f))}const l=o.uri;if(!l)return Promise.reject(this.createKeyLoadError(e,K.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${l}"`)));let c=this.keyUriToKeyInfo[l];if((n=c)!=null&&n.decryptdata.key)return o.key=c.decryptdata.key,Promise.resolve({frag:e,keyInfo:c});if((i=c)!=null&&i.keyLoadPromise){var u;switch((u=c.mediaKeySessionContext)==null?void 0:u.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return c.keyLoadPromise.then(f=>(o.key=f.keyInfo.decryptdata.key,{frag:e,keyInfo:c}))}}switch(c=this.keyUriToKeyInfo[l]={decryptdata:o,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},o.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return o.keyFormat==="identity"?this.loadKeyHTTP(c,e):this.loadKeyEME(c,e);case"AES-128":return this.loadKeyHTTP(c,e);default:return Promise.reject(this.createKeyLoadError(e,K.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${o.method}"`)))}}loadKeyEME(e,t){const n={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const i=this.emeController.loadKey(n);if(i)return(e.keyLoadPromise=i.then(o=>(e.mediaKeySessionContext=o,n))).catch(o=>{throw e.keyLoadPromise=null,o})}return Promise.resolve(n)}loadKeyHTTP(e,t){const n=this.config,i=n.loader,o=new i(n);return t.keyLoader=e.loader=o,e.keyLoadPromise=new Promise((l,c)=>{const u={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},f=n.keyLoadPolicy.default,h={loadPolicy:f,timeout:f.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},p={onSuccess:(g,v,x,b)=>{const{frag:S,keyInfo:A,url:L}=x;if(!S.decryptdata||A!==this.keyUriToKeyInfo[L])return c(this.createKeyLoadError(S,K.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),b));A.decryptdata.key=S.decryptdata.key=new Uint8Array(g.data),S.keyLoader=null,A.loader=null,l({frag:S,keyInfo:A})},onError:(g,v,x,b)=>{this.resetLoader(v),c(this.createKeyLoadError(t,K.KEY_LOAD_ERROR,new Error(`HTTP Error ${g.code} loading key ${g.text}`),x,xt({url:u.url,data:void 0},g)))},onTimeout:(g,v,x)=>{this.resetLoader(v),c(this.createKeyLoadError(t,K.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),x))},onAbort:(g,v,x)=>{this.resetLoader(v),c(this.createKeyLoadError(t,K.INTERNAL_ABORTED,new Error("key loading aborted"),x))}};o.load(u,h,p)})}resetLoader(e){const{frag:t,keyInfo:n,url:i}=e,o=n.loader;t.keyLoader===o&&(t.keyLoader=null,n.loader=null),delete this.keyUriToKeyInfo[i],o&&o.destroy()}}function sb(){return self.SourceBuffer||self.WebKitSourceBuffer}function ob(){if(!ui())return!1;const e=sb();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function XC(){if(!ob())return!1;const r=ui();return typeof r?.isTypeSupported=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>r.isTypeSupported(mo(e,"video")))||["mp4a.40.2","fLaC"].some(e=>r.isTypeSupported(mo(e,"audio"))))}function ZC(){var r;const e=sb();return typeof(e==null||(r=e.prototype)==null?void 0:r.changeType)=="function"}const JC=250,ul=2,QC=.1,eD=.05;class tD{constructor(e,t,n,i){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=t,this.fragmentTracker=n,this.hls=i}destroy(){this.media=null,this.hls=this.fragmentTracker=null}poll(e,t){const{config:n,media:i,stalled:o}=this;if(i===null)return;const{currentTime:l,seeking:c}=i,u=this.seeking&&!c,f=!this.seeking&&c;if(this.seeking=c,l!==e){if(this.moved=!0,c||(this.nudgeRetry=0),o!==null){if(this.stallReported){const S=self.performance.now()-o;B.warn(`playback not stuck anymore @${l}, after ${Math.round(S)}ms`),this.stallReported=!1}this.stalled=null}return}if(f||u){this.stalled=null;return}if(i.paused&&!c||i.ended||i.playbackRate===0||!Ve.getBuffered(i).length){this.nudgeRetry=0;return}const h=Ve.bufferInfo(i,l,0),p=h.nextStart||0;if(c){const S=h.len>ul,A=!p||t&&t.start<=l||p-l>ul&&!this.fragmentTracker.getPartialFragment(l);if(S||A)return;this.moved=!1}if(!this.moved&&this.stalled!==null){var g;if(!(h.len>0)&&!p)return;const A=Math.max(p,h.start||0)-l,L=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,k=(L==null||(g=L.details)==null?void 0:g.live)?L.details.targetduration*2:ul,C=this.fragmentTracker.getPartialFragment(l);if(A>0&&(A<=k||C)){i.paused||this._trySkipBufferHole(C);return}}const v=self.performance.now();if(o===null){this.stalled=v;return}const x=v-o;if(!c&&x>=JC&&(this._reportStall(h),!this.media))return;const b=Ve.bufferInfo(i,l,n.maxBufferHole);this._tryFixBufferStall(b,x)}_tryFixBufferStall(e,t){const{config:n,fragmentTracker:i,media:o}=this;if(o===null)return;const l=o.currentTime,c=i.getPartialFragment(l);c&&(this._trySkipBufferHole(c)||!this.media)||(e.len>n.maxBufferHole||e.nextStart&&e.nextStart-l<n.maxBufferHole)&&t>n.highBufferWatchdogPeriod*1e3&&(B.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}_reportStall(e){const{hls:t,media:n,stallReported:i}=this;if(!i&&n){this.stallReported=!0;const o=new Error(`Playback stalling at @${n.currentTime} due to low buffer (${JSON.stringify(e)})`);B.warn(o.message),t.trigger(I.ERROR,{type:Re.MEDIA_ERROR,details:K.BUFFER_STALLED_ERROR,fatal:!1,error:o,buffer:e.len})}}_trySkipBufferHole(e){const{config:t,hls:n,media:i}=this;if(i===null)return 0;const o=i.currentTime,l=Ve.bufferInfo(i,o,0),c=o<l.start?l.start:l.nextStart;if(c){const u=l.len<=t.maxBufferHole,f=l.len>0&&l.len<1&&i.readyState<3,h=c-o;if(h>0&&(u||f)){if(h>t.maxBufferHole){const{fragmentTracker:g}=this;let v=!1;if(o===0){const x=g.getAppendedFrag(0,Le.MAIN);x&&c<x.end&&(v=!0)}if(!v){const x=e||g.getAppendedFrag(o,Le.MAIN);if(x){let b=!1,S=x.end;for(;S<c;){const A=g.getPartialFragment(S);if(A)S+=A.duration;else{b=!0;break}}if(b)return 0}}}const p=Math.max(c+eD,o+QC);if(B.warn(`skipping hole, adjusting currentTime from ${o} to ${p}`),this.moved=!0,this.stalled=null,i.currentTime=p,e&&!e.gap){const g=new Error(`fragment loaded with buffer holes, seeking from ${o} to ${p}`);n.trigger(I.ERROR,{type:Re.MEDIA_ERROR,details:K.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:g,reason:g.message,frag:e})}return p}}return 0}_tryNudgeBuffer(){const{config:e,hls:t,media:n,nudgeRetry:i}=this;if(n===null)return;const o=n.currentTime;if(this.nudgeRetry++,i<e.nudgeMaxRetry){const l=o+(i+1)*e.nudgeOffset,c=new Error(`Nudging 'currentTime' from ${o} to ${l}`);B.warn(c.message),n.currentTime=l,t.trigger(I.ERROR,{type:Re.MEDIA_ERROR,details:K.BUFFER_NUDGE_ON_STALL,error:c,fatal:!1})}else{const l=new Error(`Playhead still not moving while enough data buffered @${o} after ${e.nudgeMaxRetry} nudges`);B.error(l.message),t.trigger(I.ERROR,{type:Re.MEDIA_ERROR,details:K.BUFFER_STALLED_ERROR,error:l,fatal:!0})}}}const rD=100;class nD extends Jf{constructor(e,t,n){super(e,t,n,"[stream-controller]",Le.MAIN),this.audioCodecSwap=!1,this.gapController=null,this.level=-1,this._forceStartLoad=!1,this.altAudio=!1,this.audioOnly=!1,this.fragPlaying=null,this.onvplaying=null,this.onvseeked=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.MANIFEST_PARSED,this.onManifestParsed,this),e.on(I.LEVEL_LOADING,this.onLevelLoading,this),e.on(I.LEVEL_LOADED,this.onLevelLoaded,this),e.on(I.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(I.ERROR,this.onError,this),e.on(I.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(I.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(I.BUFFER_CREATED,this.onBufferCreated,this),e.on(I.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(I.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(I.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.MANIFEST_PARSED,this.onManifestParsed,this),e.off(I.LEVEL_LOADED,this.onLevelLoaded,this),e.off(I.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(I.ERROR,this.onError,this),e.off(I.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(I.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(I.BUFFER_CREATED,this.onBufferCreated,this),e.off(I.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(I.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(I.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying()}startLoad(e){if(this.levels){const{lastCurrentTime:t,hls:n}=this;if(this.stopLoad(),this.setInterval(rD),this.level=-1,!this.startFragRequested){let i=n.startLevel;i===-1&&(n.config.testBandwidth&&this.levels.length>1?(i=0,this.bitrateTest=!0):i=n.firstAutoLevel),n.nextLoadLevel=i,this.level=n.loadLevel,this.loadedmetadata=!1}t>0&&e===-1&&(this.log(`Override startPosition with lastCurrentTime @${t.toFixed(3)}`),e=t),this.state=J.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this._forceStartLoad=!0,this.state=J.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case J.WAITING_LEVEL:{const{levels:t,level:n}=this,i=t?.[n],o=i?.details;if(o&&(!o.live||this.levelLastLoaded===i)){if(this.waitForCdnTuneIn(o))break;this.state=J.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=J.IDLE;break}break}case J.FRAG_LOADING_WAITING_RETRY:{var e;const t=self.performance.now(),n=this.retryDate;if(!n||t>=n||(e=this.media)!=null&&e.seeking){const{levels:i,level:o}=this,l=i?.[o];this.resetStartWhenNotLoaded(l||null),this.state=J.IDLE}}break}this.state===J.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){super.onTickEnd(),this.checkBuffer(),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:n,media:i}=this;if(t===null||!i&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const o=this.buffering?e.nextLoadLevel:e.loadLevel;if(!(n!=null&&n[o]))return;const l=n[o],c=this.getMainFwdBufferInfo();if(c===null)return;const u=this.getLevelDetails();if(u&&this._streamEnded(c,u)){const b={};this.altAudio&&(b.type="video"),this.hls.trigger(I.BUFFER_EOS,b),this.state=J.ENDED;return}if(!this.buffering)return;e.loadLevel!==o&&e.manualLevel===-1&&this.log(`Adapting to level ${o} from level ${this.level}`),this.level=e.nextLoadLevel=o;const f=l.details;if(!f||this.state===J.WAITING_LEVEL||f.live&&this.levelLastLoaded!==l){this.level=o,this.state=J.WAITING_LEVEL;return}const h=c.len,p=this.getMaxBufferLength(l.maxBitrate);if(h>=p)return;this.backtrackFragment&&this.backtrackFragment.start>c.end&&(this.backtrackFragment=null);const g=this.backtrackFragment?this.backtrackFragment.start:c.end;let v=this.getNextFragment(g,f);if(this.couldBacktrack&&!this.fragPrevious&&v&&v.sn!=="initSegment"&&this.fragmentTracker.getState(v)!==yt.OK){var x;const S=((x=this.backtrackFragment)!=null?x:v).sn-f.startSN,A=f.fragments[S-1];A&&v.cc===A.cc&&(v=A,this.fragmentTracker.removeFragment(A))}else this.backtrackFragment&&c.len&&(this.backtrackFragment=null);if(v&&this.isLoopLoading(v,g)){if(!v.gap){const S=this.audioOnly&&!this.altAudio?Ge.AUDIO:Ge.VIDEO,A=(S===Ge.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;A&&this.afterBufferFlushed(A,S,Le.MAIN)}v=this.getNextFragmentLoopLoading(v,f,c,Le.MAIN,p)}v&&(v.initSegment&&!v.initSegment.data&&!this.bitrateTest&&(v=v.initSegment),this.loadFragment(v,l,g))}loadFragment(e,t,n){const i=this.fragmentTracker.getState(e);this.fragCurrent=e,i===yt.NOT_LOADED||i===yt.PARTIAL?e.sn==="initSegment"?this._loadInitSegment(e,t):this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,t)):(this.startFragRequested=!0,super.loadFragment(e,t,n)):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,Le.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(t!=null&&t.readyState){let n;const i=this.getAppendedFrag(t.currentTime);i&&i.start>1&&this.flushMainBuffer(0,i.start-1);const o=this.getLevelDetails();if(o!=null&&o.live){const c=this.getMainFwdBufferInfo();if(!c||c.len<o.targetduration*2)return}if(!t.paused&&e){const c=this.hls.nextLoadLevel,u=e[c],f=this.fragLastKbps;f&&this.fragCurrent?n=this.fragCurrent.duration*u.maxBitrate/(1e3*f)+1:n=0}else n=0;const l=this.getBufferedFrag(t.currentTime+n);if(l){const c=this.followingBufferedFrag(l);if(c){this.abortCurrentFrag();const u=c.maxStartPTS?c.maxStartPTS:c.start,f=c.duration,h=Math.max(l.end,u+Math.min(Math.max(f-this.config.maxFragLookUpTolerance,f*(this.couldBacktrack?.5:.125)),f*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(h,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case J.KEY_LOADING:case J.FRAG_LOADING:case J.FRAG_LOADING_WAITING_RETRY:case J.PARSING:case J.PARSED:this.state=J.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,this.altAudio?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const n=t.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),n.addEventListener("playing",this.onvplaying),n.addEventListener("seeked",this.onvseeked),this.gapController=new tD(this.config,n,this.fragmentTracker,this.hls)}onMediaDetaching(){const{media:e}=this;e&&this.onvplaying&&this.onvseeked&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),super.onMediaDetaching()}onMediaPlaying(){this.tick()}onMediaSeeked(){const e=this.media,t=e?e.currentTime:null;he(t)&&this.log(`Media seeked to ${t.toFixed(3)}`);const n=this.getMainFwdBufferInfo();if(n===null||n.len===0){this.warn(`Main forward buffer length on "seeked" event ${n?n.len:"empty"})`);return}this.tick()}onManifestLoading(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(I.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=this.fragLastKbps=0,this.levels=this.fragPlaying=this.backtrackFragment=this.levelLastLoaded=null,this.altAudio=this.audioOnly=this.startFragRequested=!1}onManifestParsed(e,t){let n=!1,i=!1;t.levels.forEach(o=>{const l=o.audioCodec;l&&(n=n||l.indexOf("mp4a.40.2")!==-1,i=i||l.indexOf("mp4a.40.5")!==-1)}),this.audioCodecSwitch=n&&i&&!ZC(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:n}=this;if(!n||this.state!==J.IDLE)return;const i=n[t.level];(!i.details||i.details.live&&this.levelLastLoaded!==i||this.waitForCdnTuneIn(i.details))&&(this.state=J.WAITING_LEVEL)}onLevelLoaded(e,t){var n;const{levels:i}=this,o=t.level,l=t.details,c=l.totalduration;if(!i){this.warn(`Levels were reset while loading level ${o}`);return}this.log(`Level ${o} loaded [${l.startSN},${l.endSN}]${l.lastPartSn?`[part-${l.lastPartSn}-${l.lastPartIndex}]`:""}, cc [${l.startCC}, ${l.endCC}] duration:${c}`);const u=i[o],f=this.fragCurrent;f&&(this.state===J.FRAG_LOADING||this.state===J.FRAG_LOADING_WAITING_RETRY)&&f.level!==t.level&&f.loader&&this.abortCurrentFrag();let h=0;if(l.live||(n=u.details)!=null&&n.live){var p;if(this.checkLiveUpdate(l),l.deltaUpdateFailed)return;h=this.alignPlaylists(l,u.details,(p=this.levelLastLoaded)==null?void 0:p.details)}if(u.details=l,this.levelLastLoaded=u,this.hls.trigger(I.LEVEL_UPDATED,{details:l,level:o}),this.state===J.WAITING_LEVEL){if(this.waitForCdnTuneIn(l))return;this.state=J.IDLE}this.startFragRequested?l.live&&this.synchronizeToLiveEdge(l):this.setStartPosition(l,h),this.tick()}_handleFragmentLoadProgress(e){var t;const{frag:n,part:i,payload:o}=e,{levels:l}=this;if(!l){this.warn(`Levels were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}const c=l[n.level],u=c.details;if(!u){this.warn(`Dropping fragment ${n.sn} of level ${n.level} after level details were reset`),this.fragmentTracker.removeFragment(n);return}const f=c.videoCodec,h=u.PTSKnown||!u.live,p=(t=n.initSegment)==null?void 0:t.data,g=this._getAudioCodec(c),v=this.transmuxer=this.transmuxer||new Ux(this.hls,Le.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),x=i?i.index:-1,b=x!==-1,S=new Xf(n.level,n.sn,n.stats.chunkCount,o.byteLength,x,b),A=this.initPTS[n.cc];v.push(o,p,g,f,n,i,u.totalduration,h,S,A)}onAudioTrackSwitching(e,t){const n=this.altAudio;if(!!!t.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const l=this.fragCurrent;l&&(this.log("Switching to main audio track, cancel main fragment load"),l.abortRequests(),this.fragmentTracker.removeFragment(l)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();const o=this.hls;n&&(o.trigger(I.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),o.trigger(I.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const n=t.id,i=!!this.hls.audioTracks[n].url;if(i){const o=this.videoBuffer;o&&this.mediaBuffer!==o&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=o)}this.altAudio=i,this.tick()}onBufferCreated(e,t){const n=t.tracks;let i,o,l=!1;for(const c in n){const u=n[c];if(u.id==="main"){if(o=c,i=u,c==="video"){const f=n[c];f&&(this.videoBuffer=f.buffer)}}else l=!0}l&&i?(this.log(`Alternate track found, use ${o}.buffered to schedule main fragment loading`),this.mediaBuffer=i.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:n,part:i}=t;if(n&&n.type!==Le.MAIN)return;if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${i?" p: "+i.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}`),this.state===J.PARSED&&(this.state=J.IDLE);return}const o=i?i.stats:n.stats;this.fragLastKbps=Math.round(8*o.total/(o.buffering.end-o.loading.first)),n.sn!=="initSegment"&&(this.fragPrevious=n),this.fragBufferedComplete(n,i)}onError(e,t){var n;if(t.fatal){this.state=J.ERROR;return}switch(t.details){case K.FRAG_GAP:case K.FRAG_PARSING_ERROR:case K.FRAG_DECRYPT_ERROR:case K.FRAG_LOAD_ERROR:case K.FRAG_LOAD_TIMEOUT:case K.KEY_LOAD_ERROR:case K.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Le.MAIN,t);break;case K.LEVEL_LOAD_ERROR:case K.LEVEL_LOAD_TIMEOUT:case K.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===J.WAITING_LEVEL&&((n=t.context)==null?void 0:n.type)===Me.LEVEL&&(this.state=J.IDLE);break;case K.BUFFER_APPEND_ERROR:case K.BUFFER_FULL_ERROR:if(!t.parent||t.parent!=="main")return;if(t.details===K.BUFFER_APPEND_ERROR){this.resetLoadingState();return}this.reduceLengthAndFlushBuffer(t)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case K.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}checkBuffer(){const{media:e,gapController:t}=this;if(!(!e||!t||!e.readyState)){if(this.loadedmetadata||!Ve.getBuffered(e).length){const n=this.state!==J.IDLE?this.fragCurrent:null;t.poll(this.lastCurrentTime,n)}this.lastCurrentTime=e.currentTime}}onFragLoadEmergencyAborted(){this.state=J.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()}onBufferFlushed(e,{type:t}){if(t!==Ge.AUDIO||this.audioOnly&&!this.altAudio){const n=(t===Ge.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(n,t,Le.MAIN),this.tick()}}onLevelsUpdated(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level),this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let n=this.startPosition;if(n>=0&&t<n){if(e.seeking){this.log(`could not seek to ${n}, already seeking at ${t}`);return}const i=Ve.getBuffered(e),l=(i.length?i.start(0):0)-n;l>0&&(l<this.config.maxBufferHole||l<this.config.maxFragLookUpTolerance)&&(this.log(`adjusting start position by ${l} to match buffer start`),n+=l,this.startPosition=n),this.log(`seek to target start position ${n} from current time ${t}`),e.currentTime=n}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t.indexOf("mp4a.40.5")!==-1?t="mp4a.40.2":t="mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then(n=>{const{hls:i}=this;if(!n||this.fragContextChanged(e))return;t.fragmentError=0,this.state=J.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const o=e.stats;o.parsing.start=o.parsing.end=o.buffering.start=o.buffering.end=self.performance.now(),i.trigger(I.FRAG_LOADED,n),e.bitrateTest=!1})}_handleTransmuxComplete(e){var t;const n="main",{hls:i}=this,{remuxResult:o,chunkMeta:l}=e,c=this.getCurrentContext(l);if(!c){this.resetWhenMissingContext(l);return}const{frag:u,part:f,level:h}=c,{video:p,text:g,id3:v,initSegment:x}=o,{details:b}=h,S=this.altAudio?void 0:o.audio;if(this.fragContextChanged(u)){this.fragmentTracker.removeFragment(u);return}if(this.state=J.PARSING,x){if(x!=null&&x.tracks){const R=u.initSegment||u;this._bufferInitSegment(h,x.tracks,R,l),i.trigger(I.FRAG_PARSING_INIT_SEGMENT,{frag:R,id:n,tracks:x.tracks})}const A=x.initPTS,L=x.timescale;he(A)&&(this.initPTS[u.cc]={baseTime:A,timescale:L},i.trigger(I.INIT_PTS_FOUND,{frag:u,id:n,initPTS:A,timescale:L}))}if(p&&b&&u.sn!=="initSegment"){const A=b.fragments[u.sn-1-b.startSN],L=u.sn===b.startSN,R=!A||u.cc>A.cc;if(o.independent!==!1){const{startPTS:k,endPTS:C,startDTS:F,endDTS:_}=p;if(f)f.elementaryStreams[p.type]={startPTS:k,endPTS:C,startDTS:F,endDTS:_};else if(p.firstKeyFrame&&p.independent&&l.id===1&&!R&&(this.couldBacktrack=!0),p.dropped&&p.independent){const z=this.getMainFwdBufferInfo(),te=(z?z.end:this.getLoadPosition())+this.config.maxBufferHole,U=p.firstKeyFramePTS?p.firstKeyFramePTS:k;if(!L&&te<U-this.config.maxBufferHole&&!R){this.backtrack(u);return}else R&&(u.gap=!0);u.setElementaryStreamInfo(p.type,u.start,C,u.start,_,!0)}else L&&k>ul&&(u.gap=!0);u.setElementaryStreamInfo(p.type,k,C,F,_),this.backtrackFragment&&(this.backtrackFragment=u),this.bufferFragmentData(p,u,f,l,L||R)}else if(L||R)u.gap=!0;else{this.backtrack(u);return}}if(S){const{startPTS:A,endPTS:L,startDTS:R,endDTS:k}=S;f&&(f.elementaryStreams[Ge.AUDIO]={startPTS:A,endPTS:L,startDTS:R,endDTS:k}),u.setElementaryStreamInfo(Ge.AUDIO,A,L,R,k),this.bufferFragmentData(S,u,f,l)}if(b&&v!=null&&(t=v.samples)!=null&&t.length){const A={id:n,frag:u,details:b,samples:v.samples};i.trigger(I.FRAG_PARSING_METADATA,A)}if(b&&g){const A={id:n,frag:u,details:b,samples:g.samples};i.trigger(I.FRAG_PARSING_USERDATA,A)}}_bufferInitSegment(e,t,n,i){if(this.state!==J.PARSING)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&delete t.audio;const{audio:o,video:l,audiovideo:c}=t;if(o){let u=e.audioCodec;const f=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){u&&(u.indexOf("mp4a.40.5")!==-1?u="mp4a.40.2":u="mp4a.40.5");const h=o.metadata;h&&"channelCount"in h&&(h.channelCount||1)!==1&&f.indexOf("firefox")===-1&&(u="mp4a.40.5")}u&&u.indexOf("mp4a.40.5")!==-1&&f.indexOf("android")!==-1&&o.container!=="audio/mpeg"&&(u="mp4a.40.2",this.log(`Android: force audio codec to ${u}`)),e.audioCodec&&e.audioCodec!==u&&this.log(`Swapping manifest audio codec "${e.audioCodec}" for "${u}"`),o.levelCodec=u,o.id="main",this.log(`Init audio buffer, container:${o.container}, codecs[selected/level/parsed]=[${u||""}/${e.audioCodec||""}/${o.codec}]`)}l&&(l.levelCodec=e.videoCodec,l.id="main",this.log(`Init video buffer, container:${l.container}, codecs[level/parsed]=[${e.videoCodec||""}/${l.codec}]`)),c&&this.log(`Init audiovideo buffer, container:${c.container}, codecs[level/parsed]=[${e.codecs}/${c.codec}]`),this.hls.trigger(I.BUFFER_CODECS,t),Object.keys(t).forEach(u=>{const h=t[u].initSegment;h!=null&&h.byteLength&&this.hls.trigger(I.BUFFER_APPENDING,{type:u,data:h,frag:n,part:null,chunkMeta:i,parent:n.type})}),this.tickImmediate()}getMainFwdBufferInfo(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,Le.MAIN)}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=J.IDLE}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&e.seeking===!1){const n=e.currentTime;if(Ve.isBuffered(e,n)?t=this.getAppendedFrag(n):Ve.isBuffered(e,n+.1)&&(t=this.getAppendedFrag(n+.1)),t){this.backtrackFragment=null;const i=this.fragPlaying,o=t.level;(!i||t.sn!==i.sn||i.level!==o)&&(this.fragPlaying=t,this.hls.trigger(I.FRAG_CHANGED,{frag:t}),(!i||i.level!==o)&&this.hls.trigger(I.LEVEL_SWITCHED,{level:o}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){const e=this.media;return e?this.fragPlaying||this.getAppendedFrag(e.currentTime):null}get currentProgramDateTime(){const e=this.media;if(e){const t=e.currentTime,n=this.currentFrag;if(n&&he(t)&&he(n.programDateTime)){const i=n.programDateTime+(t-n.start)*1e3;return new Date(i)}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class en{static get version(){return"1.5.19"}static isMSESupported(){return ob()}static isSupported(){return XC()}static getMediaSource(){return ui()}static get Events(){return I}static get ErrorTypes(){return Re}static get ErrorDetails(){return K}static get DefaultConfig(){return en.defaultConfig?en.defaultConfig:ib}static set DefaultConfig(e){en.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this.started=!1,this._emitter=new nh,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,this.triggeringException=void 0,VA(e.debug||!1,"Hls instance");const t=this.config=KC(en.DefaultConfig,e);this.userConfig=e,t.progressive&&zC(t);const{abrController:n,bufferController:i,capLevelController:o,errorController:l,fpsController:c}=t,u=new l(this),f=this.abrController=new n(this),h=this.bufferController=new i(this),p=this.capLevelController=new o(this),g=new c(this),v=new jT(this),x=new WT(this),b=t.contentSteeringController,S=b?new b(this):null,A=this.levelController=new YC(this,S),L=new xL(this),R=new qC(this.config),k=this.streamController=new nD(this,L,R);p.setStreamController(k),g.setStreamController(k);const C=[v,A,k];S&&C.splice(1,0,S),this.networkControllers=C;const F=[f,h,p,g,x,L];this.audioTrackController=this.createController(t.audioTrackController,C);const _=t.audioStreamController;_&&C.push(new _(this,L,R)),this.subtitleTrackController=this.createController(t.subtitleTrackController,C);const z=t.subtitleStreamController;z&&C.push(new z(this,L,R)),this.createController(t.timelineController,F),R.emeController=this.emeController=this.createController(t.emeController,F),this.cmcdController=this.createController(t.cmcdController,F),this.latencyController=this.createController(VT,F),this.coreComponents=F,C.push(u);const te=u.onErrorOut;typeof te=="function"&&this.on(I.ERROR,te,u)}createController(e,t){if(e){const n=new e(this);return t&&t.push(n),n}return null}on(e,t,n=this){this._emitter.on(e,t,n)}once(e,t,n=this){this._emitter.once(e,t,n)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t,n=this,i){this._emitter.off(e,t,n,i)}listeners(e){return this._emitter.listeners(e)}emit(e,t,n){return this._emitter.emit(e,t,n)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(n){if(B.error("An internal error happened while handling event "+e+'. Error message: "'+n.message+'". Here is a stacktrace:',n),!this.triggeringException){this.triggeringException=!0;const i=e===I.ERROR;this.trigger(I.ERROR,{type:Re.OTHER_ERROR,details:K.INTERNAL_EXCEPTION,fatal:i,event:e,error:n}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){B.log("destroy"),this.trigger(I.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(t=>t.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(t=>t.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){B.log("attachMedia"),this._media=e,this.trigger(I.MEDIA_ATTACHING,{media:e})}detachMedia(){B.log("detachMedia"),this.trigger(I.MEDIA_DETACHING,void 0),this._media=null}loadSource(e){this.stopLoad();const t=this.media,n=this.url,i=this.url=Wf.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,B.log(`loadSource:${i}`),t&&n&&(n!==i||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(I.MANIFEST_LOADING,{url:e})}startLoad(e=-1){B.log(`startLoad(${e})`),this.started=!0,this.resumeBuffering();for(let t=0;t<this.networkControllers.length&&(this.networkControllers[t].startLoad(e),!(!this.started||!this.networkControllers));t++);}stopLoad(){B.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!(this.started||!this.networkControllers));e++);}resumeBuffering(){B.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()})}pauseBuffering(){B.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()})}swapAudioCodec(){B.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){B.log("recoverMediaError");const e=this._media;this.detachMedia(),e&&this.attachMedia(e)}removeLevel(e){this.levelController.removeLevel(e)}get levels(){const e=this.levelController.levels;return e||[]}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){B.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){B.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){B.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){B.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){B.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(B.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){KT(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const n=e.length;for(let i=0;i<n;i++)if(e[i].maxBitrate>=t)return i;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:n}=this;let i;if(t===-1&&e!=null&&e.length?i=e.length-1:i=t,n)for(let o=i;o--;){const l=e[o].attrs["HDCP-LEVEL"];if(l&&l<=n)return o}return i}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}setAudioOption(e){var t;return(t=this.audioTrackController)==null?void 0:t.setAudioOption(e)}setSubtitleOption(e){var t;return(t=this.subtitleTrackController)==null||t.setSubtitleOption(e),null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}}en.defaultConfig=void 0;const Ar=({videoUrl:r,className:e="",autoPlay:t=!0,defaultMuted:n=!0,showMuteButton:i=!0,enableHoverPlay:o=!1})=>{const l=M.useRef(null),[c,u]=M.useState(n),[f,h]=M.useState(!1);M.useEffect(()=>{const b=l.current;if(en.isSupported()){const S=new en;S.loadSource(r),S.attachMedia(b),S.on(en.Events.MANIFEST_PARSED,()=>{t||setTimeout(()=>{b.currentTime=.1},100)})}else b.canPlayType("application/vnd.apple.mpegurl")&&(b.src=r)},[r]);const p=()=>{u(b=>!b)},g=b=>{o&&(h(!0),b.target.play())},v=b=>{o&&(h(!1),b.target.pause(),b.target.currentTime=0)},x=e.includes("absolute");return w.jsxs("div",{className:`${x?"":"relative"}`,children:[w.jsx("video",{className:e,ref:l,autoPlay:t,loop:!0,muted:c,playsInline:!0,onMouseEnter:g,onMouseLeave:v}),i&&w.jsx("button",{onClick:p,className:`absolute right-0 bottom-3/4 transform -translate-y-3/4 bg-black bg-opacity-10 text-white px-3 py-1 rounded-l-lg text-sm z-10 [@media(max-height:750px)]:bottom-2/3 [@media(max-height:750px)]:-translate-y-2/3\r
          [@media(max-height:750px)]:bottom-[60%] \r
          [@media(max-height:750px)]:-translate-y-[60%]`,children:c?"Unmute ":"Mute "})]})},iD=()=>{const r=hi(),e=u=>r.pathname===u?"text-[#E6C9A8]":"text-[#F5E6D3]",t=r.pathname==="/contacts",n="/Main/Contacts/master.m3u8",i=[{href:"https://wa.me/971544666066",icon:Zv},{href:"https://www.instagram.com/attractive_home",icon:PA},{href:"https://pin.it/4dHNZjnCY",icon:MA},{href:"https://www.facebook.com/attractive.home.interiors",icon:NA},{href:"https://www.tiktok.com/@attractivehome",icon:kA},{href:"https://www.linkedin.com/company/attractive-home-interior-studio/",icon:OA}],[o,l]=M.useState(window.innerWidth);M.useEffect(()=>{const u=()=>l(window.innerWidth);return window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)},[]);let c;return o>=350&&o<408||o>=1024&&o<=1280?c=w.jsxs("div",{children:[w.jsx("div",{className:"flex justify-start gap-6 mb-4",children:i.slice(0,4).map((u,f)=>w.jsx("a",{href:u.href,target:"_blank",rel:"noopener noreferrer",children:w.jsx("div",{className:"w-8 h-8 rounded-full bg-white flex justify-center items-center shadow-md transition-transform duration-200 transform hover:scale-110",children:w.jsx(Yi,{icon:u.icon,size:"lg",className:"text-black"})})},f))}),w.jsx("div",{className:"flex justify-start gap-6",children:i.slice(4).map((u,f)=>w.jsx("a",{href:u.href,target:"_blank",rel:"noopener noreferrer",children:w.jsx("div",{className:"w-8 h-8 rounded-full bg-white flex justify-center items-center shadow-md transition-transform duration-200 transform hover:scale-110",children:w.jsx(Yi,{icon:u.icon,size:"lg",className:"text-black"})})},f))})]}):c=w.jsx("div",{className:"flex justify-start gap-6 flex-wrap",children:i.map((u,f)=>w.jsx("a",{href:u.href,target:"_blank",rel:"noopener noreferrer",children:w.jsx("div",{className:"w-8 h-8 rounded-full bg-white flex justify-center items-center shadow-md transition-transform duration-200 transform hover:scale-110",children:w.jsx(Yi,{icon:u.icon,size:"lg",className:"text-black"})})},f))}),w.jsxs("footer",{className:"relative text-[#F5E6D3] py-32 overflow-hidden bg-[#0d2637]",children:[t&&w.jsx(Ar,{videoUrl:n,className:"absolute top-0 left-0 w-full h-full object-cover",showMuteButton:!1}),w.jsx("div",{className:"container mx-auto px-12 relative z-[0]",children:w.jsxs("div",{className:"grid grid-cols-1 space-y-6 gap-8 2xl:gap-32 sm:grid-cols-3 sm:space-y-0",children:[w.jsx("div",{children:w.jsxs("ul",{className:"font-semibold space-y-12 uppercase",children:[w.jsx("li",{children:w.jsx(rt,{to:"/about",className:`hover:text-gray-300 ${e("/about")}`,children:"About Us"})}),w.jsx("li",{children:w.jsx(rt,{to:"/contacts",className:`hover:text-gray-300 ${e("/contacts")}`,children:"Contacts"})}),w.jsx("li",{children:w.jsx(rt,{to:"/services",className:`hover:text-gray-300 ${e("/services")}`,children:"Services"})})]})}),w.jsx("div",{children:w.jsxs("ul",{className:"font-semibold space-y-12 uppercase",children:[w.jsx("li",{children:w.jsx(rt,{to:"/portfolio",className:`hover:text-gray-300 ${e("/portfolio")}`,children:"Portfolio"})}),w.jsx("li",{children:w.jsx(rt,{to:"/portfolio/architectural",className:`hover:text-gray-300 ${e("/portfolio/architectural")}`,children:"Architectural Design"})}),w.jsx("li",{children:w.jsx(rt,{to:"/portfolio/interior",className:`hover:text-gray-300 ${e("/portfolio/interior")}`,children:"Interior Design"})}),w.jsx("li",{children:w.jsx(rt,{to:"/portfolio/fit",className:`hover:text-gray-300 ${e("/portfolio/fit")}`,children:"Fit-Out Interiors"})})]})}),w.jsxs("div",{className:"text-left",children:[w.jsx("h1",{className:"font-bold text-3xl mb-10",children:"Attractive Home"}),w.jsxs("p",{className:"text-sm mb-10",children:[" 2009  2024 Attractive Home. All Rights Reserved.",w.jsx("br",{}),"Developed by"," ",w.jsx("a",{href:"https://wa.me/201202640992",target:"_blank",rel:"noopener noreferrer",className:"font-bold text-yellow-100 hover:text-yellow-50 transition-colors duration-200",children:"MinaNassef"})]}),c]})]})})]})},sD=()=>{const{pathname:r}=hi();return M.useEffect(()=>{window.scrollTo(0,0)},[r]),null},ab=M.createContext(null),oD=()=>{const r=M.useContext(ab);if(!r)throw new Error("useToast must be used within a ToastProvider");return r},aD=({id:r,message:e,type:t,onClose:n})=>{const[i,o]=M.useState(!1);M.useEffect(()=>{setTimeout(()=>o(!0),10)},[]);const l=()=>{o(!1),setTimeout(()=>n(r),300)},c={success:w.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),error:w.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),warning:w.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),info:w.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})},u={success:"bg-green-600 text-white",error:"bg-red-600 text-white",warning:"bg-yellow-500 text-black",info:"bg-blue-600 text-white"};return w.jsxs("div",{className:`flex items-center gap-3 px-4 py-3 rounded-lg shadow-lg backdrop-blur-sm transition-all duration-300 ${u[t]} ${i?"opacity-100 translate-x-0":"opacity-0 translate-x-full"}`,children:[c[t],w.jsx("span",{className:"flex-1 font-medium",children:e}),w.jsx("button",{onClick:l,className:"p-1 hover:bg-white/20 rounded transition-colors",children:w.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},lD=({children:r})=>{const[e,t]=M.useState([]),n=M.useCallback((l,c="info",u=4e3)=>{const f=Date.now()+Math.random();return t(h=>[...h,{id:f,message:l,type:c}]),u>0&&setTimeout(()=>{i(f)},u),f},[]),i=M.useCallback(l=>{t(c=>c.filter(u=>u.id!==l))},[]),o={success:(l,c)=>n(l,"success",c),error:(l,c)=>n(l,"error",c),warning:(l,c)=>n(l,"warning",c),info:(l,c)=>n(l,"info",c)};return w.jsxs(ab.Provider,{value:o,children:[r,w.jsx("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-2 max-w-sm",children:e.map(l=>w.jsx(aD,{...l,onClose:i},l.id))})]})},cD=()=>w.jsxs("section",{className:"relative h-screen flex items-center justify-center overflow-hidden",children:[w.jsx(Ar,{videoUrl:"/Main/Home/master.m3u8",className:"absolute inset-0 w-full h-full object-cover",showMuteButton:!1}),w.jsx("div",{className:"absolute inset-0 bg-black opacity-50"}),w.jsxs("div",{className:"relative z-1 text-center text-[#F5E6D3]",children:[w.jsx("h1",{className:"text-5xl font-bold mb-4",style:{letterSpacing:"0.72px"},children:"Attractive Home"}),w.jsx("p",{className:"text-lg",style:{transform:"scale(1.2)",letterSpacing:"0.4px"},children:"Interior Design and Fit-Out"})]})]}),uD=()=>w.jsxs("section",{className:"text-[#F5E6D3] relative",children:[w.jsx(Ar,{videoUrl:"/Main/About/master.m3u8",className:"absolute inset-0 w-full h-full object-cover"}),w.jsx("div",{className:"absolute inset-0 bg-black opacity-50"}),w.jsx("div",{className:"max-w-7xl mx-auto px-8 md:px-16 2xl:px-0",children:w.jsx("div",{className:"flex flex-col min-h-screen",children:w.jsx("div",{className:"relative z-1 mb-16 grid grid-cols-1 mt-auto",children:w.jsxs("div",{className:"space-y-6  2xl:space-y-10",children:[w.jsx("h2",{className:"text-4xl sm:text-5xl font-bold text-[#F5E6D3]",style:{letterSpacing:"0.02em"},children:"About Us"}),w.jsxs("p",{className:"text-xl sm:text-2xl leading-relaxed sm:leading-10 2xl:leading-loose",style:{letterSpacing:"0.03em"},children:["As a high-quality company with a keen eye for detail and a passion for design,"," ",w.jsx("span",{style:{color:"#EDDBB3",fontStyle:"italic"},children:w.jsx("strong",{children:"Attractive Home"})}),", brings creative interior solutions that combine elegance, functionality, and artistry. We transform spaces into personalized expressions of style and comfort, guided by a deep understanding of spatial harmony."]}),w.jsx("p",{className:"[@media(max-width:400px)]:hidden text-lg sm:text-xl leading-relaxed sm:leading-10 2xl:leading-loose",style:{letterSpacing:"0.03em"},children:"Our team collaborates closely with clients to ensure every design reflects their unique vision and needs. Whether it's a sleek, modern apartment or a charming, classic home, we are dedicated to delivering stunning spaces that elevate everyday life."})]})})})})]}),_n="https://xzhwxwav28.execute-api.me-central-1.amazonaws.com",lh="https://attractivehomeawstestbucket.s3.me-central-1.amazonaws.com";async function lb(){try{if(_n){const e=await fetch(`${_n}/projects`);if(!e.ok)throw new Error("API request failed");return await e.json()}const r=await fetch(`${lh}/projects.json`);if(!r.ok)throw new Error("Failed to fetch projects manifest");return await r.json()}catch(r){throw console.error("Error fetching projects manifest:",r),r}}function Ll(r){if(!r||r.startsWith("http://")||r.startsWith("https://"))return r;const e=lh.replace(/\/$/,""),t=r.replace(/^\//,"");return`${e}/${t}`}function my(r){if(!r)return r;const e={...r};return e.cover&&(e.cover=Ll(e.cover)),e.media&&Array.isArray(e.media)&&(e.media=e.media.map(t=>({...t,src:Ll(t.src)}))),e}const Rl=r=>new Promise(e=>setTimeout(e,r));async function ch(r,e,t=3){for(let n=0;n<=t;n++)try{if(_n){const l=await fetch(`${_n}/projects/${r}/${e}`);if(l.status===503&&n<t){const u=Math.pow(2,n)*1e3;console.log(`Throttled on ${r}/${e}, retrying in ${u}ms...`),await Rl(u);continue}if(!l.ok)throw new Error(`API request failed: ${l.status}`);const c=await l.json();return my(c)}const i=await fetch(`${lh}/projects/${r}/${e}/metadata.json`);if(!i.ok)throw new Error("Failed to fetch project metadata");const o=await i.json();return my(o)}catch(i){if(n===t)throw console.error(`Error fetching project metadata after ${t+1} attempts:`,i),i;const o=Math.pow(2,n)*1e3;console.log(`Error on ${r}/${e}, retrying in ${o}ms...`),await Rl(o)}}async function dD(){const r=await lb(),e={},t={architectural:{title:"Architectural",description:"Architectural design projects"},interior:{title:"Interior",description:"Interior design projects"},fit:{title:"Fit Out",description:"Fit out projects"}},n=r.categories&&Object.keys(r.categories).length>0?r.categories:t;for(const[l,c]of Object.entries(n))e[l]={title:c.title,description:c.description,projects:[]};const i=3,o=[];for(let l=0;l<r.projects.length;l+=i){const u=r.projects.slice(l,l+i).map(async h=>{try{return{...await ch(h.category,h.id),category:h.category}}catch(p){return console.error(`Failed to load project ${h.id}:`,p),null}}),f=await Promise.all(u);o.push(...f)}for(const l of o)l&&(e[l.category]||(e[l.category]={title:l.category.charAt(0).toUpperCase()+l.category.slice(1),description:"",projects:[]}),e[l.category].projects.push({id:l.id,title:l.title,area:l.area||"",description:l.description||"",video:Ll(l.cover),details:(l.media||[]).map(c=>({type:c.type,src:Ll(c.src)}))}));return e}async function fD(r,e){const t=await fetch(`${_n}/projects`,{method:"POST",headers:{"Content-Type":"application/json","X-Admin-Password":e},body:JSON.stringify(r)});if(!t.ok){const n=await t.json();throw new Error(n.error||"Failed to create project")}return t.json()}async function hD(r,e,t,n){const i=await fetch(`${_n}/projects/${r}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json","X-Admin-Password":n},body:JSON.stringify(t)});if(!i.ok){const o=await i.json();throw new Error(o.error||"Failed to update project")}return i.json()}async function pD(r,e,t,n=3){for(let i=0;i<=n;i++)try{const o=await fetch(`${_n}/projects/${r}/${e}`,{method:"DELETE",headers:{"X-Admin-Password":t}});if(o.status===500&&i<n){const l=Math.pow(2,i)*1e3;console.log(`Delete failed for ${r}/${e}, retrying in ${l}ms...`),await Rl(l);continue}if(!o.ok){const l=await o.json();throw new Error(l.error||"Failed to delete project")}return o.json()}catch(o){if(i===n)throw o;const l=Math.pow(2,i)*1e3;console.log(`Delete error for ${r}/${e}, retrying in ${l}ms...`),await Rl(l)}}async function mD(r,e,t,n){const i=await fetch(`${_n}/projects/${r}/${e}/upload-urls`,{method:"POST",headers:{"Content-Type":"application/json","X-Admin-Password":n},body:JSON.stringify({files:t})});if(!i.ok){const o=await i.json();throw new Error(o.error||"Failed to get upload URLs")}return i.json()}async function gD(r,e,t){return new Promise((n,i)=>{const o=new XMLHttpRequest;o.upload.addEventListener("progress",l=>{l.lengthComputable&&t&&t(Math.round(l.loaded/l.total*100))}),o.addEventListener("load",()=>{o.status>=200&&o.status<300?n():i(new Error(`Upload failed: ${o.status}`))}),o.addEventListener("error",()=>i(new Error("Upload failed"))),o.addEventListener("abort",()=>i(new Error("Upload aborted"))),o.open("PUT",r),o.send(e)})}const cb={architectural:{title:"Architectural Design",description:`Attractive Home changes the idea of what a space for living should look like. Our architecture pushes 
                    the boundaries of the four walls and turns a country residence into a holiday and adventure. 
                    We use landscape, climate, and terrain data 100% and even more to exceed expectations and 
                    make your dreams come true.`,projects:[{id:"project-1",title:"Mr. Ahmed Baghoum's Villa",area:"750 m",description:"Architectural design",video:"/Architecture/Baghoum/Cover/master.m3u8",details:[{type:"video",src:"/Architecture/Baghoum/Intro/master.m3u8"},{type:"image",src:"/Architecture/Baghoum/1.webp"},{type:"image",src:"/Architecture/Baghoum/2.webp"},{type:"image",src:"/Architecture/Baghoum/3.webp"},{type:"image",src:"/Architecture/Baghoum/4.webp"},{type:"image",src:"/Architecture/Baghoum/5.webp"},{type:"image",src:"/Architecture/Baghoum/6.webp"},{type:"image",src:"/Architecture/Baghoum/7.webp"},{type:"image",src:"/Architecture/Baghoum/8.webp"},{type:"image",src:"/Architecture/Baghoum/9.webp"},{type:"image",src:"/Architecture/Baghoum/10.webp"},{type:"image",src:"/Architecture/Baghoum/11.webp"},{type:"image",src:"/Architecture/Baghoum/12.webp"},{type:"image",src:"/Architecture/Baghoum/13.webp"},{type:"image",src:"/Architecture/Baghoum/14.webp"},{type:"image",src:"/Architecture/Baghoum/15.webp"},{type:"image",src:"/Architecture/Baghoum/16.webp"},{type:"image",src:"/Architecture/Baghoum/17.webp"},{type:"image",src:"/Architecture/Baghoum/18.webp"},{type:"image",src:"/Architecture/Baghoum/19.webp"},{type:"image",src:"/Architecture/Baghoum/20.webp"},{type:"image",src:"/Architecture/Baghoum/21.webp"},{type:"image",src:"/Architecture/Baghoum/22.webp"},{type:"image",src:"/Architecture/Baghoum/23.webp"},{type:"image",src:"/Architecture/Baghoum/24.webp"},{type:"image",src:"/Architecture/Baghoum/25.webp"},{type:"image",src:"/Architecture/Baghoum/26.webp"},{type:"image",src:"/Architecture/Baghoum/27.webp"},{type:"image",src:"/Architecture/Baghoum/28.webp"},{type:"image",src:"/Architecture/Baghoum/29.webp"},{type:"image",src:"/Architecture/Baghoum/30.webp"},{type:"image",src:"/Architecture/Baghoum/31.webp"},{type:"image",src:"/Architecture/Baghoum/32.webp"},{type:"image",src:"/Architecture/Baghoum/33.webp"},{type:"image",src:"/Architecture/Baghoum/34.webp"},{type:"image",src:"/Architecture/Baghoum/35.webp"},{type:"image",src:"/Architecture/Baghoum/36.webp"},{type:"image",src:"/Architecture/Baghoum/37.webp"},{type:"image",src:"/Architecture/Baghoum/38.webp"},{type:"image",src:"/Architecture/Baghoum/39.webp"},{type:"image",src:"/Architecture/Baghoum/40.webp"},{type:"image",src:"/Architecture/Baghoum/41.webp"},{type:"image",src:"/Architecture/Baghoum/42.webp"},{type:"image",src:"/Architecture/Baghoum/43.webp"},{type:"image",src:"/Architecture/Baghoum/44.webp"},{type:"image",src:"/Architecture/Baghoum/45.webp"},{type:"image",src:"/Architecture/Baghoum/46.webp"},{type:"image",src:"/Architecture/Baghoum/47.webp"},{type:"image",src:"/Architecture/Baghoum/48.webp"},{type:"image",src:"/Architecture/Baghoum/49.webp"},{type:"image",src:"/Architecture/Baghoum/50.webp"},{type:"image",src:"/Architecture/Baghoum/51.webp"},{type:"image",src:"/Architecture/Baghoum/52.webp"},{type:"image",src:"/Architecture/Baghoum/53.webp"},{type:"image",src:"/Architecture/Baghoum/54.webp"},{type:"image",src:"/Architecture/Baghoum/55.webp"},{type:"image",src:"/Architecture/Baghoum/56.webp"},{type:"image",src:"/Architecture/Baghoum/57.webp"},{type:"image",src:"/Architecture/Baghoum/58.webp"},{type:"image",src:"/Architecture/Baghoum/59.webp"},{type:"image",src:"/Architecture/Baghoum/60.webp"},{type:"image",src:"/Architecture/Baghoum/61.webp"},{type:"image",src:"/Architecture/Baghoum/62.webp"},{type:"image",src:"/Architecture/Baghoum/63.webp"},{type:"image",src:"/Architecture/Baghoum/64.webp"},{type:"image",src:"/Architecture/Baghoum/65.webp"},{type:"image",src:"/Architecture/Baghoum/66.webp"},{type:"image",src:"/Architecture/Baghoum/67.webp"},{type:"image",src:"/Architecture/Baghoum/68.webp"},{type:"image",src:"/Architecture/Baghoum/69.webp"},{type:"image",src:"/Architecture/Baghoum/70.webp"},{type:"image",src:"/Architecture/Baghoum/71.webp"},{type:"image",src:"/Architecture/Baghoum/72.webp"},{type:"image",src:"/Architecture/Baghoum/73.webp"},{type:"image",src:"/Architecture/Baghoum/74.webp"},{type:"image",src:"/Architecture/Baghoum/75.webp"},{type:"image",src:"/Architecture/Baghoum/76.webp"},{type:"image",src:"/Architecture/Baghoum/77.webp"},{type:"image",src:"/Architecture/Baghoum/78.webp"},{type:"image",src:"/Architecture/Baghoum/79.webp"},{type:"image",src:"/Architecture/Baghoum/80.webp"},{type:"image",src:"/Architecture/Baghoum/81.webp"},{type:"image",src:"/Architecture/Baghoum/82.webp"},{type:"image",src:"/Architecture/Baghoum/83.webp"},{type:"image",src:"/Architecture/Baghoum/84.webp"},{type:"image",src:"/Architecture/Baghoum/85.webp"},{type:"image",src:"/Architecture/Baghoum/86.webp"},{type:"image",src:"/Architecture/Baghoum/87.webp"},{type:"image",src:"/Architecture/Baghoum/88.webp"},{type:"image",src:"/Architecture/Baghoum/89.webp"},{type:"image",src:"/Architecture/Baghoum/90.webp"},{type:"image",src:"/Architecture/Baghoum/91.webp"},{type:"image",src:"/Architecture/Baghoum/92.webp"},{type:"image",src:"/Architecture/Baghoum/93.webp"},{type:"image",src:"/Architecture/Baghoum/94.webp"},{type:"image",src:"/Architecture/Baghoum/95.webp"},{type:"image",src:"/Architecture/Baghoum/96.webp"},{type:"image",src:"/Architecture/Baghoum/97.webp"},{type:"image",src:"/Architecture/Baghoum/98.webp"},{type:"image",src:"/Architecture/Baghoum/99.webp"},{type:"image",src:"/Architecture/Baghoum/100.webp"},{type:"image",src:"/Architecture/Baghoum/101.webp"},{type:"image",src:"/Architecture/Baghoum/102.webp"},{type:"image",src:"/Architecture/Baghoum/103.webp"},{type:"image",src:"/Architecture/Baghoum/104.webp"},{type:"image",src:"/Architecture/Baghoum/105.webp"},{type:"image",src:"/Architecture/Baghoum/106.webp"},{type:"image",src:"/Architecture/Baghoum/107.webp"},{type:"image",src:"/Architecture/Baghoum/108.webp"},{type:"image",src:"/Architecture/Baghoum/109.webp"},{type:"image",src:"/Architecture/Baghoum/110.webp"},{type:"image",src:"/Architecture/Baghoum/111.webp"},{type:"image",src:"/Architecture/Baghoum/112.webp"},{type:"image",src:"/Architecture/Baghoum/113.webp"},{type:"image",src:"/Architecture/Baghoum/114.webp"},{type:"image",src:"/Architecture/Baghoum/115.webp"},{type:"image",src:"/Architecture/Baghoum/116.webp"},{type:"image",src:"/Architecture/Baghoum/117.webp"},{type:"image",src:"/Architecture/Baghoum/118.webp"},{type:"image",src:"/Architecture/Baghoum/119.webp"},{type:"image",src:"/Architecture/Baghoum/120.webp"}]}]},interior:{title:"Interior Design",description:"Crafting stylish and comfortable spaces that reflect our clients' unique tastes and lifestyles. Our focus is on creating environments that are not only visually stunning but also practical and welcoming.",projects:[{id:"project-1",title:"Palm Jumeirah A3 Villa",area:"900 m",description:"Interior design",video:"/Interior/Jumeirah-A3/Cover/master.m3u8",details:[{type:"video",src:"/Interior/Jumeirah-A3/Intro-1/master.m3u8"},{type:"video",src:"/Interior/Jumeirah-A3/Intro-2/master.m3u8"},{type:"image",src:"/Interior/Jumeirah-A3/2.webp"},{type:"image",src:"/Interior/Jumeirah-A3/3.webp"},{type:"image",src:"/Interior/Jumeirah-A3/4.webp"},{type:"image",src:"/Interior/Jumeirah-A3/5.webp"},{type:"image",src:"/Interior/Jumeirah-A3/6.webp"},{type:"image",src:"/Interior/Jumeirah-A3/7.webp"},{type:"image",src:"/Interior/Jumeirah-A3/8.webp"},{type:"image",src:"/Interior/Jumeirah-A3/9.webp"},{type:"image",src:"/Interior/Jumeirah-A3/10.webp"},{type:"image",src:"/Interior/Jumeirah-A3/11.webp"},{type:"image",src:"/Interior/Jumeirah-A3/12.webp"},{type:"image",src:"/Interior/Jumeirah-A3/13.webp"},{type:"image",src:"/Interior/Jumeirah-A3/14.webp"},{type:"image",src:"/Interior/Jumeirah-A3/15.webp"},{type:"image",src:"/Interior/Jumeirah-A3/16.webp"},{type:"image",src:"/Interior/Jumeirah-A3/17.webp"},{type:"image",src:"/Interior/Jumeirah-A3/18.webp"},{type:"image",src:"/Interior/Jumeirah-A3/19.webp"},{type:"image",src:"/Interior/Jumeirah-A3/20.webp"},{type:"image",src:"/Interior/Jumeirah-A3/21.webp"},{type:"image",src:"/Interior/Jumeirah-A3/22.webp"},{type:"image",src:"/Interior/Jumeirah-A3/23.webp"},{type:"image",src:"/Interior/Jumeirah-A3/24.webp"},{type:"image",src:"/Interior/Jumeirah-A3/25.webp"},{type:"image",src:"/Interior/Jumeirah-A3/26.webp"},{type:"image",src:"/Interior/Jumeirah-A3/27.webp"},{type:"image",src:"/Interior/Jumeirah-A3/28.webp"},{type:"image",src:"/Interior/Jumeirah-A3/29.webp"},{type:"image",src:"/Interior/Jumeirah-A3/30.webp"}]},{id:"project-2",title:"Minister Rashed's Villa",area:"500 m",description:"Interior design",video:"/Interior/Minister-Rashed/Cover/master.m3u8",details:[{type:"image",src:"/Interior/Minister-Rashed/1.webp"},{type:"image",src:"/Interior/Minister-Rashed/2.webp"},{type:"image",src:"/Interior/Minister-Rashed/3.webp"},{type:"image",src:"/Interior/Minister-Rashed/4.webp"},{type:"image",src:"/Interior/Minister-Rashed/5.webp"},{type:"image",src:"/Interior/Minister-Rashed/6.webp"},{type:"image",src:"/Interior/Minister-Rashed/7.webp"},{type:"image",src:"/Interior/Minister-Rashed/8.webp"},{type:"image",src:"/Interior/Minister-Rashed/9.webp"},{type:"image",src:"/Interior/Minister-Rashed/10.webp"},{type:"image",src:"/Interior/Minister-Rashed/11.webp"},{type:"image",src:"/Interior/Minister-Rashed/12.webp"},{type:"image",src:"/Interior/Minister-Rashed/13.webp"},{type:"image",src:"/Interior/Minister-Rashed/14.webp"},{type:"image",src:"/Interior/Minister-Rashed/15.webp"},{type:"image",src:"/Interior/Minister-Rashed/16.webp"},{type:"image",src:"/Interior/Minister-Rashed/17.webp"},{type:"image",src:"/Interior/Minister-Rashed/18.webp"},{type:"image",src:"/Interior/Minister-Rashed/19.webp"},{type:"image",src:"/Interior/Minister-Rashed/20.webp"},{type:"image",src:"/Interior/Minister-Rashed/21.webp"},{type:"image",src:"/Interior/Minister-Rashed/22.webp"},{type:"image",src:"/Interior/Minister-Rashed/23.webp"},{type:"image",src:"/Interior/Minister-Rashed/24.webp"},{type:"image",src:"/Interior/Minister-Rashed/25.webp"},{type:"image",src:"/Interior/Minister-Rashed/26.webp"},{type:"image",src:"/Interior/Minister-Rashed/27.webp"},{type:"image",src:"/Interior/Minister-Rashed/28.webp"},{type:"image",src:"/Interior/Minister-Rashed/29.webp"},{type:"image",src:"/Interior/Minister-Rashed/30.webp"},{type:"image",src:"/Interior/Minister-Rashed/31.webp"},{type:"image",src:"/Interior/Minister-Rashed/32.webp"},{type:"image",src:"/Interior/Minister-Rashed/33.webp"},{type:"image",src:"/Interior/Minister-Rashed/34.webp"},{type:"image",src:"/Interior/Minister-Rashed/35.webp"},{type:"image",src:"/Interior/Minister-Rashed/36.webp"},{type:"image",src:"/Interior/Minister-Rashed/37.webp"},{type:"image",src:"/Interior/Minister-Rashed/38.webp"},{type:"image",src:"/Interior/Minister-Rashed/39.webp"},{type:"image",src:"/Interior/Minister-Rashed/40.webp"},{type:"image",src:"/Interior/Minister-Rashed/41.webp"},{type:"image",src:"/Interior/Minister-Rashed/42.webp"},{type:"image",src:"/Interior/Minister-Rashed/43.webp"},{type:"image",src:"/Interior/Minister-Rashed/44.webp"},{type:"image",src:"/Interior/Minister-Rashed/45.webp"},{type:"image",src:"/Interior/Minister-Rashed/46.webp"},{type:"image",src:"/Interior/Minister-Rashed/47.webp"},{type:"image",src:"/Interior/Minister-Rashed/48.webp"},{type:"image",src:"/Interior/Minister-Rashed/49.webp"},{type:"image",src:"/Interior/Minister-Rashed/50.webp"},{type:"image",src:"/Interior/Minister-Rashed/51.webp"}]},{id:"project-3",title:"Mr. Salem's Villa",area:"500 m",description:"Interior design",video:"/Interior/Salem/Cover/master.m3u8",details:[{type:"image",src:"/Interior/Salem/1.webp"},{type:"image",src:"/Interior/Salem/2.webp"},{type:"image",src:"/Interior/Salem/3.webp"},{type:"image",src:"/Interior/Salem/4.webp"},{type:"image",src:"/Interior/Salem/5.webp"},{type:"image",src:"/Interior/Salem/6.webp"},{type:"image",src:"/Interior/Salem/7.webp"},{type:"image",src:"/Interior/Salem/8.webp"},{type:"image",src:"/Interior/Salem/9.webp"},{type:"image",src:"/Interior/Salem/10.webp"},{type:"image",src:"/Interior/Salem/11.webp"},{type:"image",src:"/Interior/Salem/12.webp"},{type:"image",src:"/Interior/Salem/13.webp"},{type:"image",src:"/Interior/Salem/14.webp"},{type:"image",src:"/Interior/Salem/15.webp"},{type:"image",src:"/Interior/Salem/16.webp"},{type:"image",src:"/Interior/Salem/17.webp"},{type:"image",src:"/Interior/Salem/18.webp"},{type:"image",src:"/Interior/Salem/19.webp"},{type:"image",src:"/Interior/Salem/20.webp"},{type:"image",src:"/Interior/Salem/21.webp"},{type:"image",src:"/Interior/Salem/22.webp"},{type:"image",src:"/Interior/Salem/23.webp"},{type:"image",src:"/Interior/Salem/24.webp"},{type:"image",src:"/Interior/Salem/25.webp"},{type:"image",src:"/Interior/Salem/26.webp"},{type:"image",src:"/Interior/Salem/27.webp"},{type:"image",src:"/Interior/Salem/28.webp"},{type:"image",src:"/Interior/Salem/29.webp"},{type:"image",src:"/Interior/Salem/30.webp"},{type:"image",src:"/Interior/Salem/31.webp"},{type:"image",src:"/Interior/Salem/32.webp"},{type:"image",src:"/Interior/Salem/33.webp"},{type:"image",src:"/Interior/Salem/34.webp"},{type:"image",src:"/Interior/Salem/35.webp"},{type:"image",src:"/Interior/Salem/36.webp"},{type:"image",src:"/Interior/Salem/37.webp"},{type:"image",src:"/Interior/Salem/38.webp"},{type:"image",src:"/Interior/Salem/39.webp"},{type:"image",src:"/Interior/Salem/40.webp"},{type:"image",src:"/Interior/Salem/41.webp"},{type:"image",src:"/Interior/Salem/42.webp"},{type:"image",src:"/Interior/Salem/43.webp"},{type:"image",src:"/Interior/Salem/44.webp"},{type:"image",src:"/Interior/Salem/45.webp"},{type:"image",src:"/Interior/Salem/46.webp"},{type:"image",src:"/Interior/Salem/47.webp"},{type:"image",src:"/Interior/Salem/48.webp"},{type:"image",src:"/Interior/Salem/49.webp"},{type:"image",src:"/Interior/Salem/50.webp"},{type:"image",src:"/Interior/Salem/51.webp"},{type:"image",src:"/Interior/Salem/52.webp"},{type:"image",src:"/Interior/Salem/53.webp"},{type:"image",src:"/Interior/Salem/54.webp"},{type:"image",src:"/Interior/Salem/55.webp"},{type:"image",src:"/Interior/Salem/56.webp"},{type:"image",src:"/Interior/Salem/57.webp"},{type:"image",src:"/Interior/Salem/58.webp"},{type:"image",src:"/Interior/Salem/59.webp"},{type:"image",src:"/Interior/Salem/60.webp"},{type:"image",src:"/Interior/Salem/61.webp"},{type:"image",src:"/Interior/Salem/62.webp"},{type:"image",src:"/Interior/Salem/63.webp"},{type:"image",src:"/Interior/Salem/64.webp"},{type:"image",src:"/Interior/Salem/65.webp"},{type:"image",src:"/Interior/Salem/66.webp"},{type:"image",src:"/Interior/Salem/67.webp"},{type:"image",src:"/Interior/Salem/68.webp"},{type:"image",src:"/Interior/Salem/69.webp"},{type:"image",src:"/Interior/Salem/70.webp"},{type:"image",src:"/Interior/Salem/71.webp"},{type:"image",src:"/Interior/Salem/72.webp"},{type:"image",src:"/Interior/Salem/73.webp"},{type:"image",src:"/Interior/Salem/74.webp"},{type:"image",src:"/Interior/Salem/75.webp"},{type:"image",src:"/Interior/Salem/76.webp"},{type:"image",src:"/Interior/Salem/77.webp"},{type:"image",src:"/Interior/Salem/78.webp"},{type:"image",src:"/Interior/Salem/79.webp"}]},{id:"project-4",title:"Mr. El Tayeb Villa",area:"500 m",description:"Interior design",video:"/Interior/El-Tayeb/Cover/master.m3u8",details:[{type:"video",src:"/Interior/El-Tayeb/Cover/master.m3u8"},{type:"image",src:"/Interior/El-Tayeb/1.webp"},{type:"image",src:"/Interior/El-Tayeb/2.webp"},{type:"image",src:"/Interior/El-Tayeb/3.webp"},{type:"image",src:"/Interior/El-Tayeb/4.webp"},{type:"image",src:"/Interior/El-Tayeb/5.webp"},{type:"image",src:"/Interior/El-Tayeb/6.webp"}]},{id:"project-5",title:"Mr. Wahed's Villa",area:"500 m",description:"Interior design",video:"/Interior/Wahed/Cover/master.m3u8",details:[{type:"image",src:"/Interior/Wahed/1.webp"},{type:"image",src:"/Interior/Wahed/2.webp"},{type:"image",src:"/Interior/Wahed/3.webp"},{type:"image",src:"/Interior/Wahed/4.webp"},{type:"image",src:"/Interior/Wahed/5.webp"},{type:"image",src:"/Interior/Wahed/6.webp"},{type:"image",src:"/Interior/Wahed/7.webp"},{type:"image",src:"/Interior/Wahed/8.webp"},{type:"image",src:"/Interior/Wahed/9.webp"},{type:"image",src:"/Interior/Wahed/10.webp"},{type:"image",src:"/Interior/Wahed/11.webp"},{type:"image",src:"/Interior/Wahed/12.webp"},{type:"image",src:"/Interior/Wahed/13.webp"},{type:"image",src:"/Interior/Wahed/14.webp"},{type:"image",src:"/Interior/Wahed/15.webp"},{type:"image",src:"/Interior/Wahed/16.webp"},{type:"image",src:"/Interior/Wahed/17.webp"},{type:"image",src:"/Interior/Wahed/18.webp"},{type:"image",src:"/Interior/Wahed/19.webp"},{type:"image",src:"/Interior/Wahed/20.webp"},{type:"image",src:"/Interior/Wahed/21.webp"},{type:"image",src:"/Interior/Wahed/22.webp"},{type:"image",src:"/Interior/Wahed/23.webp"},{type:"image",src:"/Interior/Wahed/24.webp"},{type:"image",src:"/Interior/Wahed/25.webp"},{type:"image",src:"/Interior/Wahed/26.webp"},{type:"image",src:"/Interior/Wahed/27.webp"},{type:"image",src:"/Interior/Wahed/28.webp"},{type:"image",src:"/Interior/Wahed/29.webp"},{type:"image",src:"/Interior/Wahed/30.webp"},{type:"image",src:"/Interior/Wahed/31.webp"},{type:"image",src:"/Interior/Wahed/32.webp"},{type:"image",src:"/Interior/Wahed/33.webp"},{type:"image",src:"/Interior/Wahed/34.webp"},{type:"image",src:"/Interior/Wahed/35.webp"},{type:"image",src:"/Interior/Wahed/36.webp"},{type:"image",src:"/Interior/Wahed/37.webp"}]},{id:"project-6",title:"Mr. Mohamed Omar's Villa",area:"500 m",description:"Interior design",video:"/Interior/Mohamed-Omar/Cover/master.m3u8",details:[{type:"image",src:"/Interior/Mohamed-Omar/1.webp"},{type:"image",src:"/Interior/Mohamed-Omar/2.webp"},{type:"image",src:"/Interior/Mohamed-Omar/3.webp"},{type:"image",src:"/Interior/Mohamed-Omar/4.webp"},{type:"image",src:"/Interior/Mohamed-Omar/5.webp"},{type:"image",src:"/Interior/Mohamed-Omar/6.webp"},{type:"image",src:"/Interior/Mohamed-Omar/7.webp"},{type:"image",src:"/Interior/Mohamed-Omar/8.webp"},{type:"image",src:"/Interior/Mohamed-Omar/9.webp"},{type:"image",src:"/Interior/Mohamed-Omar/10.webp"},{type:"image",src:"/Interior/Mohamed-Omar/11.webp"},{type:"image",src:"/Interior/Mohamed-Omar/12.webp"},{type:"image",src:"/Interior/Mohamed-Omar/13.webp"},{type:"image",src:"/Interior/Mohamed-Omar/14.webp"},{type:"image",src:"/Interior/Mohamed-Omar/15.webp"},{type:"image",src:"/Interior/Mohamed-Omar/16.webp"},{type:"image",src:"/Interior/Mohamed-Omar/17.webp"},{type:"image",src:"/Interior/Mohamed-Omar/18.webp"},{type:"image",src:"/Interior/Mohamed-Omar/19.webp"},{type:"image",src:"/Interior/Mohamed-Omar/20.webp"},{type:"image",src:"/Interior/Mohamed-Omar/21.webp"},{type:"image",src:"/Interior/Mohamed-Omar/22.webp"},{type:"image",src:"/Interior/Mohamed-Omar/23.webp"},{type:"image",src:"/Interior/Mohamed-Omar/24.webp"},{type:"image",src:"/Interior/Mohamed-Omar/25.webp"},{type:"image",src:"/Interior/Mohamed-Omar/26.webp"},{type:"image",src:"/Interior/Mohamed-Omar/27.webp"},{type:"image",src:"/Interior/Mohamed-Omar/28.webp"},{type:"image",src:"/Interior/Mohamed-Omar/29.webp"},{type:"image",src:"/Interior/Mohamed-Omar/30.webp"},{type:"image",src:"/Interior/Mohamed-Omar/31.webp"},{type:"image",src:"/Interior/Mohamed-Omar/32.webp"},{type:"image",src:"/Interior/Mohamed-Omar/33.webp"},{type:"image",src:"/Interior/Mohamed-Omar/34.webp"},{type:"image",src:"/Interior/Mohamed-Omar/35.webp"},{type:"image",src:"/Interior/Mohamed-Omar/36.webp"},{type:"image",src:"/Interior/Mohamed-Omar/37.webp"},{type:"image",src:"/Interior/Mohamed-Omar/38.webp"},{type:"image",src:"/Interior/Mohamed-Omar/39.webp"},{type:"image",src:"/Interior/Mohamed-Omar/40.webp"},{type:"image",src:"/Interior/Mohamed-Omar/41.webp"},{type:"image",src:"/Interior/Mohamed-Omar/42.webp"},{type:"image",src:"/Interior/Mohamed-Omar/43.webp"},{type:"image",src:"/Interior/Mohamed-Omar/44.webp"},{type:"image",src:"/Interior/Mohamed-Omar/45.webp"},{type:"image",src:"/Interior/Mohamed-Omar/46.webp"},{type:"image",src:"/Interior/Mohamed-Omar/47.webp"},{type:"image",src:"/Interior/Mohamed-Omar/48.webp"},{type:"image",src:"/Interior/Mohamed-Omar/49.webp"},{type:"image",src:"/Interior/Mohamed-Omar/50.webp"},{type:"image",src:"/Interior/Mohamed-Omar/51.webp"},{type:"image",src:"/Interior/Mohamed-Omar/52.webp"},{type:"image",src:"/Interior/Mohamed-Omar/53.webp"},{type:"image",src:"/Interior/Mohamed-Omar/54.webp"},{type:"image",src:"/Interior/Mohamed-Omar/55.webp"}]},{id:"project-7",title:"Mr. Srour's Villa",area:"500 m",description:"Interior design",video:"/Interior/Srour/Cover/master.m3u8",details:[{type:"image",src:"/Interior/Srour/1.webp"},{type:"image",src:"/Interior/Srour/2.webp"},{type:"image",src:"/Interior/Srour/3.webp"},{type:"image",src:"/Interior/Srour/4.webp"},{type:"image",src:"/Interior/Srour/5.webp"},{type:"image",src:"/Interior/Srour/6.webp"},{type:"image",src:"/Interior/Srour/7.webp"},{type:"image",src:"/Interior/Srour/8.webp"},{type:"image",src:"/Interior/Srour/9.webp"},{type:"image",src:"/Interior/Srour/10.webp"},{type:"image",src:"/Interior/Srour/11.webp"},{type:"image",src:"/Interior/Srour/12.webp"},{type:"image",src:"/Interior/Srour/13.webp"},{type:"image",src:"/Interior/Srour/14.webp"},{type:"image",src:"/Interior/Srour/15.webp"},{type:"image",src:"/Interior/Srour/16.webp"},{type:"image",src:"/Interior/Srour/17.webp"},{type:"image",src:"/Interior/Srour/18.webp"},{type:"image",src:"/Interior/Srour/19.webp"},{type:"image",src:"/Interior/Srour/20.webp"},{type:"image",src:"/Interior/Srour/21.webp"},{type:"image",src:"/Interior/Srour/22.webp"},{type:"image",src:"/Interior/Srour/23.webp"},{type:"image",src:"/Interior/Srour/24.webp"},{type:"image",src:"/Interior/Srour/25.webp"},{type:"image",src:"/Interior/Srour/26.webp"},{type:"image",src:"/Interior/Srour/27.webp"},{type:"image",src:"/Interior/Srour/28.webp"},{type:"image",src:"/Interior/Srour/29.webp"},{type:"image",src:"/Interior/Srour/30.webp"},{type:"image",src:"/Interior/Srour/31.webp"},{type:"image",src:"/Interior/Srour/32.webp"},{type:"image",src:"/Interior/Srour/33.webp"},{type:"image",src:"/Interior/Srour/34.webp"},{type:"image",src:"/Interior/Srour/35.webp"},{type:"image",src:"/Interior/Srour/36.webp"},{type:"image",src:"/Interior/Srour/37.webp"},{type:"image",src:"/Interior/Srour/38.webp"},{type:"image",src:"/Interior/Srour/39.webp"},{type:"image",src:"/Interior/Srour/40.webp"},{type:"image",src:"/Interior/Srour/41.webp"},{type:"image",src:"/Interior/Srour/42.webp"},{type:"image",src:"/Interior/Srour/43.webp"},{type:"image",src:"/Interior/Srour/44.webp"},{type:"image",src:"/Interior/Srour/45.webp"},{type:"image",src:"/Interior/Srour/46.webp"},{type:"image",src:"/Interior/Srour/47.webp"},{type:"image",src:"/Interior/Srour/48.webp"},{type:"image",src:"/Interior/Srour/49.webp"},{type:"image",src:"/Interior/Srour/50.webp"},{type:"image",src:"/Interior/Srour/51.webp"},{type:"image",src:"/Interior/Srour/52.webp"},{type:"image",src:"/Interior/Srour/53.webp"},{type:"image",src:"/Interior/Srour/54.webp"},{type:"image",src:"/Interior/Srour/55.webp"},{type:"image",src:"/Interior/Srour/56.webp"},{type:"image",src:"/Interior/Srour/57.webp"},{type:"image",src:"/Interior/Srour/58.webp"},{type:"image",src:"/Interior/Srour/59.webp"},{type:"image",src:"/Interior/Srour/60.webp"},{type:"image",src:"/Interior/Srour/61.webp"},{type:"image",src:"/Interior/Srour/62.webp"},{type:"image",src:"/Interior/Srour/63.webp"},{type:"image",src:"/Interior/Srour/64.webp"},{type:"image",src:"/Interior/Srour/65.webp"},{type:"image",src:"/Interior/Srour/66.webp"},{type:"image",src:"/Interior/Srour/67.webp"},{type:"image",src:"/Interior/Srour/68.webp"},{type:"image",src:"/Interior/Srour/69.webp"},{type:"image",src:"/Interior/Srour/70.webp"},{type:"image",src:"/Interior/Srour/71.webp"},{type:"image",src:"/Interior/Srour/72.webp"},{type:"image",src:"/Interior/Srour/73.webp"},{type:"image",src:"/Interior/Srour/74.webp"},{type:"image",src:"/Interior/Srour/75.webp"},{type:"image",src:"/Interior/Srour/76.webp"},{type:"image",src:"/Interior/Srour/77.webp"},{type:"image",src:"/Interior/Srour/78.webp"},{type:"image",src:"/Interior/Srour/79.webp"},{type:"image",src:"/Interior/Srour/80.webp"},{type:"image",src:"/Interior/Srour/81.webp"},{type:"image",src:"/Interior/Srour/82.webp"},{type:"image",src:"/Interior/Srour/83.webp"},{type:"image",src:"/Interior/Srour/84.webp"},{type:"image",src:"/Interior/Srour/85.webp"},{type:"image",src:"/Interior/Srour/86.webp"},{type:"image",src:"/Interior/Srour/87.webp"},{type:"image",src:"/Interior/Srour/88.webp"},{type:"image",src:"/Interior/Srour/89.webp"},{type:"image",src:"/Interior/Srour/90.webp"},{type:"image",src:"/Interior/Srour/91.webp"},{type:"image",src:"/Interior/Srour/92.webp"},{type:"image",src:"/Interior/Srour/93.webp"},{type:"image",src:"/Interior/Srour/94.webp"},{type:"image",src:"/Interior/Srour/95.webp"},{type:"image",src:"/Interior/Srour/96.webp"},{type:"image",src:"/Interior/Srour/97.webp"},{type:"image",src:"/Interior/Srour/98.webp"},{type:"image",src:"/Interior/Srour/99.webp"},{type:"image",src:"/Interior/Srour/100.webp"},{type:"image",src:"/Interior/Srour/101.webp"},{type:"image",src:"/Interior/Srour/102.webp"},{type:"image",src:"/Interior/Srour/103.webp"},{type:"image",src:"/Interior/Srour/104.webp"},{type:"image",src:"/Interior/Srour/105.webp"},{type:"image",src:"/Interior/Srour/106.webp"},{type:"image",src:"/Interior/Srour/107.webp"},{type:"image",src:"/Interior/Srour/108.webp"},{type:"image",src:"/Interior/Srour/109.webp"},{type:"image",src:"/Interior/Srour/110.webp"},{type:"image",src:"/Interior/Srour/111.webp"},{type:"image",src:"/Interior/Srour/112.webp"},{type:"image",src:"/Interior/Srour/113.webp"},{type:"image",src:"/Interior/Srour/114.webp"},{type:"image",src:"/Interior/Srour/115.webp"},{type:"image",src:"/Interior/Srour/116.webp"},{type:"image",src:"/Interior/Srour/117.webp"},{type:"image",src:"/Interior/Srour/118.webp"},{type:"image",src:"/Interior/Srour/119.webp"},{type:"image",src:"/Interior/Srour/120.webp"},{type:"image",src:"/Interior/Srour/121.webp"},{type:"image",src:"/Interior/Srour/122.webp"},{type:"image",src:"/Interior/Srour/123.webp"},{type:"image",src:"/Interior/Srour/124.webp"},{type:"image",src:"/Interior/Srour/125.webp"},{type:"image",src:"/Interior/Srour/126.webp"},{type:"image",src:"/Interior/Srour/127.webp"},{type:"image",src:"/Interior/Srour/128.webp"},{type:"image",src:"/Interior/Srour/129.webp"},{type:"image",src:"/Interior/Srour/130.webp"},{type:"image",src:"/Interior/Srour/131.webp"},{type:"image",src:"/Interior/Srour/132.webp"},{type:"image",src:"/Interior/Srour/133.webp"},{type:"image",src:"/Interior/Srour/134.webp"},{type:"image",src:"/Interior/Srour/135.webp"},{type:"image",src:"/Interior/Srour/136.webp"},{type:"image",src:"/Interior/Srour/137.webp"},{type:"image",src:"/Interior/Srour/138.webp"},{type:"image",src:"/Interior/Srour/139.webp"},{type:"image",src:"/Interior/Srour/140.webp"},{type:"image",src:"/Interior/Srour/141.webp"},{type:"image",src:"/Interior/Srour/142.webp"},{type:"image",src:"/Interior/Srour/143.webp"},{type:"image",src:"/Interior/Srour/144.webp"},{type:"image",src:"/Interior/Srour/145.webp"},{type:"image",src:"/Interior/Srour/146.webp"},{type:"image",src:"/Interior/Srour/147.webp"},{type:"image",src:"/Interior/Srour/148.webp"},{type:"image",src:"/Interior/Srour/149.webp"},{type:"image",src:"/Interior/Srour/150.webp"},{type:"image",src:"/Interior/Srour/151.webp"},{type:"image",src:"/Interior/Srour/152.webp"},{type:"image",src:"/Interior/Srour/153.webp"},{type:"image",src:"/Interior/Srour/154.webp"},{type:"image",src:"/Interior/Srour/155.webp"},{type:"image",src:"/Interior/Srour/156.webp"},{type:"image",src:"/Interior/Srour/157.webp"},{type:"image",src:"/Interior/Srour/158.webp"},{type:"image",src:"/Interior/Srour/159.webp"},{type:"image",src:"/Interior/Srour/160.webp"},{type:"image",src:"/Interior/Srour/161.webp"},{type:"image",src:"/Interior/Srour/162.webp"},{type:"image",src:"/Interior/Srour/163.webp"},{type:"image",src:"/Interior/Srour/164.webp"},{type:"image",src:"/Interior/Srour/165.webp"},{type:"image",src:"/Interior/Srour/166.webp"},{type:"image",src:"/Interior/Srour/167.webp"},{type:"image",src:"/Interior/Srour/168.webp"},{type:"image",src:"/Interior/Srour/169.webp"},{type:"image",src:"/Interior/Srour/170.webp"},{type:"image",src:"/Interior/Srour/171.webp"},{type:"image",src:"/Interior/Srour/172.webp"},{type:"image",src:"/Interior/Srour/173.webp"},{type:"image",src:"/Interior/Srour/174.webp"},{type:"image",src:"/Interior/Srour/175.webp"},{type:"image",src:"/Interior/Srour/176.webp"},{type:"image",src:"/Interior/Srour/177.webp"},{type:"image",src:"/Interior/Srour/178.webp"}]},{id:"project-8",title:"Mr. Hussien's Villa",area:"500 m",description:"Interior design",video:"/Interior/Hussien/Cover/master.m3u8",details:[{type:"image",src:"/Interior/Hussien/1.webp"},{type:"image",src:"/Interior/Hussien/2.webp"},{type:"image",src:"/Interior/Hussien/3.webp"},{type:"image",src:"/Interior/Hussien/4.webp"},{type:"image",src:"/Interior/Hussien/5.webp"},{type:"image",src:"/Interior/Hussien/6.webp"},{type:"image",src:"/Interior/Hussien/7.webp"},{type:"image",src:"/Interior/Hussien/8.webp"},{type:"image",src:"/Interior/Hussien/9.webp"},{type:"image",src:"/Interior/Hussien/10.webp"},{type:"image",src:"/Interior/Hussien/11.webp"},{type:"image",src:"/Interior/Hussien/12.webp"},{type:"image",src:"/Interior/Hussien/13.webp"},{type:"image",src:"/Interior/Hussien/14.webp"},{type:"image",src:"/Interior/Hussien/15.webp"},{type:"image",src:"/Interior/Hussien/16.webp"},{type:"image",src:"/Interior/Hussien/17.webp"},{type:"image",src:"/Interior/Hussien/18.webp"},{type:"image",src:"/Interior/Hussien/19.webp"},{type:"image",src:"/Interior/Hussien/20.webp"},{type:"image",src:"/Interior/Hussien/21.webp"},{type:"image",src:"/Interior/Hussien/22.webp"},{type:"image",src:"/Interior/Hussien/23.webp"},{type:"image",src:"/Interior/Hussien/24.webp"},{type:"image",src:"/Interior/Hussien/25.webp"},{type:"image",src:"/Interior/Hussien/26.webp"},{type:"image",src:"/Interior/Hussien/27.webp"},{type:"image",src:"/Interior/Hussien/28.webp"},{type:"image",src:"/Interior/Hussien/29.webp"},{type:"image",src:"/Interior/Hussien/30.webp"},{type:"image",src:"/Interior/Hussien/31.webp"}]},{id:"project-9",title:"Mr. Khaled's Villa",area:"500 m",description:"Interior design",video:"/Interior/Khaled/Cover/master.m3u8",details:[{type:"image",src:"/Interior/Khaled/1.webp"},{type:"image",src:"/Interior/Khaled/2.webp"},{type:"image",src:"/Interior/Khaled/3.webp"},{type:"image",src:"/Interior/Khaled/4.webp"},{type:"image",src:"/Interior/Khaled/5.webp"},{type:"image",src:"/Interior/Khaled/6.webp"},{type:"image",src:"/Interior/Khaled/7.webp"},{type:"image",src:"/Interior/Khaled/8.webp"},{type:"image",src:"/Interior/Khaled/9.webp"},{type:"image",src:"/Interior/Khaled/10.webp"},{type:"image",src:"/Interior/Khaled/11.webp"},{type:"image",src:"/Interior/Khaled/12.webp"},{type:"image",src:"/Interior/Khaled/13.webp"},{type:"image",src:"/Interior/Khaled/14.webp"},{type:"image",src:"/Interior/Khaled/15.webp"},{type:"image",src:"/Interior/Khaled/16.webp"},{type:"image",src:"/Interior/Khaled/17.webp"},{type:"image",src:"/Interior/Khaled/18.webp"},{type:"image",src:"/Interior/Khaled/19.webp"},{type:"image",src:"/Interior/Khaled/20.webp"},{type:"image",src:"/Interior/Khaled/21.webp"},{type:"image",src:"/Interior/Khaled/22.webp"},{type:"image",src:"/Interior/Khaled/23.webp"},{type:"image",src:"/Interior/Khaled/24.webp"},{type:"image",src:"/Interior/Khaled/25.webp"},{type:"image",src:"/Interior/Khaled/26.webp"},{type:"image",src:"/Interior/Khaled/27.webp"},{type:"image",src:"/Interior/Khaled/28.webp"},{type:"image",src:"/Interior/Khaled/29.webp"},{type:"image",src:"/Interior/Khaled/30.webp"},{type:"image",src:"/Interior/Khaled/31.webp"},{type:"image",src:"/Interior/Khaled/32.webp"},{type:"image",src:"/Interior/Khaled/33.webp"},{type:"image",src:"/Interior/Khaled/34.webp"},{type:"image",src:"/Interior/Khaled/35.webp"},{type:"image",src:"/Interior/Khaled/36.webp"},{type:"image",src:"/Interior/Khaled/37.webp"},{type:"image",src:"/Interior/Khaled/38.webp"},{type:"image",src:"/Interior/Khaled/39.webp"},{type:"image",src:"/Interior/Khaled/40.webp"},{type:"image",src:"/Interior/Khaled/41.webp"},{type:"image",src:"/Interior/Khaled/42.webp"},{type:"image",src:"/Interior/Khaled/43.webp"},{type:"image",src:"/Interior/Khaled/44.webp"},{type:"image",src:"/Interior/Khaled/45.webp"},{type:"image",src:"/Interior/Khaled/46.webp"},{type:"image",src:"/Interior/Khaled/47.webp"},{type:"image",src:"/Interior/Khaled/48.webp"},{type:"image",src:"/Interior/Khaled/49.webp"},{type:"image",src:"/Interior/Khaled/50.webp"},{type:"image",src:"/Interior/Khaled/51.webp"},{type:"image",src:"/Interior/Khaled/52.webp"},{type:"image",src:"/Interior/Khaled/53.webp"},{type:"image",src:"/Interior/Khaled/54.webp"},{type:"image",src:"/Interior/Khaled/55.webp"},{type:"image",src:"/Interior/Khaled/56.webp"},{type:"image",src:"/Interior/Khaled/57.webp"},{type:"image",src:"/Interior/Khaled/58.webp"},{type:"image",src:"/Interior/Khaled/59.webp"},{type:"image",src:"/Interior/Khaled/60.webp"},{type:"image",src:"/Interior/Khaled/61.webp"},{type:"image",src:"/Interior/Khaled/62.webp"},{type:"image",src:"/Interior/Khaled/63.webp"},{type:"image",src:"/Interior/Khaled/64.webp"},{type:"image",src:"/Interior/Khaled/65.webp"},{type:"image",src:"/Interior/Khaled/66.webp"},{type:"image",src:"/Interior/Khaled/67.webp"},{type:"image",src:"/Interior/Khaled/68.webp"},{type:"image",src:"/Interior/Khaled/69.webp"},{type:"image",src:"/Interior/Khaled/70.webp"},{type:"image",src:"/Interior/Khaled/71.webp"},{type:"image",src:"/Interior/Khaled/72.webp"},{type:"image",src:"/Interior/Khaled/73.webp"},{type:"image",src:"/Interior/Khaled/74.webp"},{type:"image",src:"/Interior/Khaled/75.webp"},{type:"image",src:"/Interior/Khaled/76.webp"},{type:"image",src:"/Interior/Khaled/77.webp"},{type:"image",src:"/Interior/Khaled/78.webp"},{type:"image",src:"/Interior/Khaled/79.webp"},{type:"image",src:"/Interior/Khaled/80.webp"},{type:"image",src:"/Interior/Khaled/81.webp"},{type:"image",src:"/Interior/Khaled/82.webp"},{type:"image",src:"/Interior/Khaled/83.webp"},{type:"image",src:"/Interior/Khaled/84.webp"},{type:"image",src:"/Interior/Khaled/85.webp"},{type:"image",src:"/Interior/Khaled/86.webp"},{type:"image",src:"/Interior/Khaled/87.webp"},{type:"image",src:"/Interior/Khaled/88.webp"},{type:"image",src:"/Interior/Khaled/89.webp"},{type:"image",src:"/Interior/Khaled/90.webp"},{type:"image",src:"/Interior/Khaled/91.webp"},{type:"image",src:"/Interior/Khaled/92.webp"},{type:"image",src:"/Interior/Khaled/93.webp"},{type:"image",src:"/Interior/Khaled/94.webp"},{type:"image",src:"/Interior/Khaled/95.webp"},{type:"image",src:"/Interior/Khaled/96.webp"},{type:"image",src:"/Interior/Khaled/97.webp"},{type:"image",src:"/Interior/Khaled/98.webp"},{type:"image",src:"/Interior/Khaled/99.webp"},{type:"image",src:"/Interior/Khaled/100.webp"},{type:"image",src:"/Interior/Khaled/101.webp"},{type:"image",src:"/Interior/Khaled/102.webp"},{type:"image",src:"/Interior/Khaled/103.webp"},{type:"image",src:"/Interior/Khaled/104.webp"},{type:"image",src:"/Interior/Khaled/105.webp"},{type:"image",src:"/Interior/Khaled/106.webp"},{type:"image",src:"/Interior/Khaled/107.webp"},{type:"image",src:"/Interior/Khaled/108.webp"},{type:"image",src:"/Interior/Khaled/109.webp"},{type:"image",src:"/Interior/Khaled/110.webp"},{type:"image",src:"/Interior/Khaled/111.webp"}]},{id:"project-10",title:"Mr. Nabras's Villa",area:"500 m",description:"Interior design",video:"/Interior/Nabras/Cover/master.m3u8",details:[{type:"image",src:"/Interior/Nabras/1.webp"},{type:"image",src:"/Interior/Nabras/2.webp"},{type:"image",src:"/Interior/Nabras/3.webp"},{type:"image",src:"/Interior/Nabras/4.webp"},{type:"image",src:"/Interior/Nabras/5.webp"},{type:"image",src:"/Interior/Nabras/6.webp"},{type:"image",src:"/Interior/Nabras/7.webp"},{type:"image",src:"/Interior/Nabras/8.webp"},{type:"image",src:"/Interior/Nabras/9.webp"},{type:"image",src:"/Interior/Nabras/10.webp"},{type:"image",src:"/Interior/Nabras/11.webp"},{type:"image",src:"/Interior/Nabras/12.webp"},{type:"image",src:"/Interior/Nabras/13.webp"},{type:"image",src:"/Interior/Nabras/14.webp"},{type:"image",src:"/Interior/Nabras/15.webp"},{type:"image",src:"/Interior/Nabras/16.webp"},{type:"image",src:"/Interior/Nabras/17.webp"},{type:"image",src:"/Interior/Nabras/18.webp"},{type:"image",src:"/Interior/Nabras/19.webp"},{type:"image",src:"/Interior/Nabras/20.webp"},{type:"image",src:"/Interior/Nabras/21.webp"},{type:"image",src:"/Interior/Nabras/22.webp"},{type:"image",src:"/Interior/Nabras/23.webp"},{type:"image",src:"/Interior/Nabras/24.webp"},{type:"image",src:"/Interior/Nabras/25.webp"},{type:"image",src:"/Interior/Nabras/26.webp"},{type:"image",src:"/Interior/Nabras/27.webp"},{type:"image",src:"/Interior/Nabras/28.webp"},{type:"image",src:"/Interior/Nabras/29.webp"},{type:"image",src:"/Interior/Nabras/30.webp"},{type:"image",src:"/Interior/Nabras/31.webp"},{type:"image",src:"/Interior/Nabras/32.webp"},{type:"image",src:"/Interior/Nabras/33.webp"},{type:"image",src:"/Interior/Nabras/34.webp"},{type:"image",src:"/Interior/Nabras/35.webp"},{type:"image",src:"/Interior/Nabras/36.webp"},{type:"image",src:"/Interior/Nabras/37.webp"},{type:"image",src:"/Interior/Nabras/38.webp"},{type:"image",src:"/Interior/Nabras/39.webp"},{type:"image",src:"/Interior/Nabras/40.webp"},{type:"image",src:"/Interior/Nabras/41.webp"},{type:"image",src:"/Interior/Nabras/42.webp"},{type:"image",src:"/Interior/Nabras/43.webp"},{type:"image",src:"/Interior/Nabras/44.webp"},{type:"image",src:"/Interior/Nabras/45.webp"}]},{id:"project-11",title:"Mr. Ahmed El Haje's Villa",area:"750 m",description:"Interior design",video:"/Interior/Ahmed-El-Haje/Cover/master.m3u8",details:[{folder:"BEDROOM 1",items:[{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 1/1.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 1/3.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 1/4.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 1/5.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 1/6.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 1/7.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 1/8.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 1/9.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 1/10.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 1/11.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 1/12.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 1/13.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 1/14.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 1/15.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 1/16.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 1/17.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 1/18.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 1/19.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 1/20.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 1/21.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 1/22.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 1/23.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 1/24.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 1/25.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 1/26.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 1/27.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 1/28.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 1/29.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 1/30.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 1/31.webp"}]},{folder:"BEDROOM 2",items:[{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 2/1.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 2/2.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 2/3.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 2/4.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 2/5.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 2/6.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 2/7.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 2/8.webp"}]},{folder:"BEDROOM 3",items:[{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 3/1.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 3/2.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 3/3.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 3/4.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 3/5.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 3/6.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 3/7.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 3/8.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 3/9.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 3/10.webp"}]},{folder:"BEDROOM 4",items:[{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 4/1.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 4/2.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 4/3.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 4/4.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 4/5.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 4/6.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 4/7.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 4/8.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/BEDROOM 4/9.webp"}]},{folder:"GIRL BEDROOM",items:[{type:"image",src:"/Interior/Ahmed-El-Haje/GIRL BEDROOM/1.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/GIRL BEDROOM/2.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/GIRL BEDROOM/3.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/GIRL BEDROOM/4.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/GIRL BEDROOM/5.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/GIRL BEDROOM/6.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/GIRL BEDROOM/7.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/GIRL BEDROOM/8.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/GIRL BEDROOM/9.webp"}]},{folder:"FAMILY HALL",items:[{type:"image",src:"/Interior/Ahmed-El-Haje/FAMILY HALL&KITCHEN/1.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/FAMILY HALL&KITCHEN/2.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/FAMILY HALL&KITCHEN/3.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/FAMILY HALL&KITCHEN/4.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/FAMILY HALL&KITCHEN/5.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/FAMILY HALL&KITCHEN/6.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/FAMILY HALL&KITCHEN/7.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/FAMILY HALL&KITCHEN/8.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/FAMILY HALL&KITCHEN/9.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/FAMILY HALL&KITCHEN/10.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/FAMILY HALL&KITCHEN/11.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/FAMILY HALL&KITCHEN/12.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/FAMILY HALL&KITCHEN/13.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/FAMILY HALL&KITCHEN/14.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/FAMILY HALL&KITCHEN/15.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/FAMILY HALL&KITCHEN/16.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/FAMILY HALL&KITCHEN/17.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/FAMILY HALL&KITCHEN/18.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/FAMILY HALL&KITCHEN/19.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/FAMILY HALL&KITCHEN/20.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/FAMILY HALL&KITCHEN/21.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/FAMILY HALL&KITCHEN/22.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/FAMILY HALL&KITCHEN/23.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/FAMILY HALL&KITCHEN/24.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/FAMILY HALL&KITCHEN/25.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/FAMILY HALL&KITCHEN/26.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/FAMILY HALL&KITCHEN/27.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/FAMILY HALL&KITCHEN/28.webp"}]},{folder:"KITCHEN",items:[{type:"image",src:"/Interior/Ahmed-El-Haje/KITCHEN/1.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/KITCHEN/2.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/KITCHEN/3.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/KITCHEN/4.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/KITCHEN/5.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/KITCHEN/6.webp"}]},{folder:"GYM",items:[{type:"image",src:"/Interior/Ahmed-El-Haje/GYM/1.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/GYM/2.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/GYM/3.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/GYM/4.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/GYM/5.webp"}]},{folder:"LAUNDRY",items:[{type:"image",src:"/Interior/Ahmed-El-Haje/LANDU/1.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/LANDU/2.webp"}]},{folder:"LOBBY",items:[{type:"image",src:"/Interior/Ahmed-El-Haje/LOBBY/1.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/LOBBY/2.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/LOBBY/3.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/LOBBY/4.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/LOBBY/5.webp"}]},{folder:"MAJLIS & WC",items:[{type:"image",src:"/Interior/Ahmed-El-Haje/MAJLIS&WC/1.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/MAJLIS&WC/2.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/MAJLIS&WC/3.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/MAJLIS&WC/4.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/MAJLIS&WC/5.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/MAJLIS&WC/6.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/MAJLIS&WC/7.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/MAJLIS&WC/8.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/MAJLIS&WC/9.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/MAJLIS&WC/10.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/MAJLIS&WC/11.webp"}]},{folder:"PANTRY",items:[{type:"image",src:"/Interior/Ahmed-El-Haje/PANTRY &FAMILY HALL/1.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/PANTRY &FAMILY HALL/2.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/PANTRY &FAMILY HALL/3.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/PANTRY &FAMILY HALL/4.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/PANTRY &FAMILY HALL/5.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/PANTRY &FAMILY HALL/6.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/PANTRY &FAMILY HALL/7.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/PANTRY &FAMILY HALL/8.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/PANTRY &FAMILY HALL/9.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/PANTRY &FAMILY HALL/10.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/PANTRY &FAMILY HALL/11.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/PANTRY &FAMILY HALL/12.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/PANTRY &FAMILY HALL/13.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/PANTRY &FAMILY HALL/14.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/PANTRY &FAMILY HALL/15.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/PANTRY &FAMILY HALL/16.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/PANTRY &FAMILY HALL/17.webp"}]},{folder:"WOMEN MAJLIS & WC",items:[{type:"image",src:"/Interior/Ahmed-El-Haje/WOMEN MAJLIS&WC/1.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/WOMEN MAJLIS&WC/2.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/WOMEN MAJLIS&WC/3.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/WOMEN MAJLIS&WC/4.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/WOMEN MAJLIS&WC/5.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/WOMEN MAJLIS&WC/6.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/WOMEN MAJLIS&WC/7.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/WOMEN MAJLIS&WC/8.webp"},{type:"image",src:"/Interior/Ahmed-El-Haje/WOMEN MAJLIS&WC/9.webp"}]}]},{id:"project-12",title:"Mr. Ziad El Haje's Villa",area:"750 m",description:"Interior design",video:"/Interior/Ziad-El-Haje/Cover/master.m3u8",details:[{folder:"Master Bedroom ",items:[{type:"image",src:"/Interior/Ziad-El-Haje/MASTER BEDROOM/1.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/MASTER BEDROOM/3.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/MASTER BEDROOM/4.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/MASTER BEDROOM/5.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/MASTER BEDROOM/6.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/MASTER BEDROOM/7.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/MASTER BEDROOM/8.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/MASTER BEDROOM/9.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/MASTER BEDROOM/10.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/MASTER BEDROOM/11.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/MASTER BEDROOM/12.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/MASTER BEDROOM/13.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/MASTER BEDROOM/14.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/MASTER BEDROOM/15.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/MASTER BEDROOM/16.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/MASTER BEDROOM/17.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/MASTER BEDROOM/18.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/MASTER BEDROOM/19.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/MASTER BEDROOM/20.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/MASTER BEDROOM/21.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/MASTER BEDROOM/22.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/MASTER BEDROOM/23.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/MASTER BEDROOM/24.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/MASTER BEDROOM/25.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/MASTER BEDROOM/26.webp"}]},{folder:"BEDROOM ",items:[{type:"image",src:"/Interior/Ziad-El-Haje/BEDROOM/1.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/BEDROOM/2.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/BEDROOM/3.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/BEDROOM/4.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/BEDROOM/5.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/BEDROOM/6.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/BEDROOM/7.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/BEDROOM/8.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/BEDROOM/9.webp"}]},{folder:"BOY BEDROOM 1",items:[{type:"image",src:"/Interior/Ziad-El-Haje/BOY BEDROOM 1/1.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/BOY BEDROOM 1/2.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/BOY BEDROOM 1/3.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/BOY BEDROOM 1/4.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/BOY BEDROOM 1/5.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/BOY BEDROOM 1/6.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/BOY BEDROOM 1/7.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/BOY BEDROOM 1/8.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/BOY BEDROOM 1/9.webp"}]},{folder:"BOY BEDROOM 2",items:[{type:"image",src:"/Interior/Ziad-El-Haje/BOY BEDROOM 2/1.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/BOY BEDROOM 2/2.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/BOY BEDROOM 2/3.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/BOY BEDROOM 2/4.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/BOY BEDROOM 2/5.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/BOY BEDROOM 2/6.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/BOY BEDROOM 2/7.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/BOY BEDROOM 2/8.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/BOY BEDROOM 2/9.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/BOY BEDROOM 2/10.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/BOY BEDROOM 2/11.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/BOY BEDROOM 2/12.webp"}]},{folder:"Girl BEDROOM",items:[{type:"image",src:"/Interior/Ziad-El-Haje/Girl BEDROOM/1.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/Girl BEDROOM/2.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/Girl BEDROOM/3.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/Girl BEDROOM/4.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/Girl BEDROOM/5.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/Girl BEDROOM/6.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/Girl BEDROOM/7.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/Girl BEDROOM/8.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/Girl BEDROOM/9.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/Girl BEDROOM/10.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/Girl BEDROOM/11.webp"}]},{folder:"Family Hall",items:[{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/1.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/2.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/3.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/4.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/5.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/6.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/7.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/8.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/9.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/10.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/11.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/12.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/13.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/14.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/15.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/16.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/17.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/18.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/19.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/20.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/21.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/22.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/23.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/24.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/25.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/26.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/27.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/28.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/29.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/30.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/31.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/32.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/33.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/34.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/35.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/36.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/37.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/38.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/39.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/40.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/41.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/42.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/43.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/44.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/45.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/46.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/47.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/FAMILY HALL/48.webp"}]},{folder:"KITCHEN",items:[{type:"image",src:"/Interior/Ziad-El-Haje/KITCHEN/1.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/KITCHEN/2.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/KITCHEN/3.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/KITCHEN/4.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/KITCHEN/5.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/KITCHEN/6.webp"}]},{folder:"Gym",items:[{type:"image",src:"/Interior/Ziad-El-Haje/GYM/1.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/GYM/2.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/GYM/3.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/GYM/4.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/GYM/5.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/GYM/6.webp"}]},{folder:"LAUNDRY",items:[{type:"image",src:"/Interior/Ziad-El-Haje/LAUNDRY ROOM/1.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/LAUNDRY ROOM/2.webp"}]},{folder:"HALL ROOf",items:[{type:"image",src:"/Interior/Ziad-El-Haje/HALL ROOF/1.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/HALL ROOF/3.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/HALL ROOF/4.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/HALL ROOF/5.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/HALL ROOF/6.webp"}]},{folder:"MAJLIS & WC",items:[{type:"image",src:"/Interior/Ziad-El-Haje/MAJLIS &WC/2.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/MAJLIS &WC/3.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/MAJLIS &WC/4.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/MAJLIS &WC/5.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/MAJLIS &WC/6.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/MAJLIS &WC/7.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/MAJLIS &WC/8.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/MAJLIS &WC/9.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/MAJLIS &WC/10.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/MAJLIS &WC/11.webp"}]},{folder:"WOMEN MAJLIS",items:[{type:"image",src:"/Interior/Ziad-El-Haje/WOMEN MAJLIS/1.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/WOMEN MAJLIS/2.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/WOMEN MAJLIS/3.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/WOMEN MAJLIS/4.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/WOMEN MAJLIS/5.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/WOMEN MAJLIS/6.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/WOMEN MAJLIS/7.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/WOMEN MAJLIS/8.webp"},{type:"image",src:"/Interior/Ziad-El-Haje/WOMEN MAJLIS/9.webp"}]}]}]},fit:{title:"Fit-Out Interiors",description:"Delivering tailored and efficient interior solutions for businesses. Our fit-out designs prioritize functionality and aesthetics, ensuring spaces align with productivity needs and brand identity.",projects:[{id:"project-1",title:"Mr. Dawoud's Villa",area:"500 m",description:"Fit-Out",video:"/Fit/Dawoud/Cover/master.m3u8",details:[{type:"video",src:"/Fit/Dawoud/Intro/master.m3u8"}]},{id:"project-2",title:"Mr. Hamad's Villa",area:"500 m",description:"Fit-Out",video:"/Fit/Hamad/Cover/master.m3u8",details:[{type:"video",src:"/Fit/Hamad/1/master.m3u8"},{type:"video",src:"/Fit/Hamad/2/master.m3u8"}]}]}},yD=({category:r,activeTab:e,portfolioData:t})=>{const n=e===r;return w.jsx(rt,{to:`/portfolio/${r}`,className:`pb-2 text-xl font-semibold text-center ${n?"border-b-2 border-gray-50":"border-b text-white"} transition-colors duration-200 uppercase`,"aria-label":`View projects for ${t[r].title}`,children:t[r].title})},vD=({category:r,project:e})=>w.jsxs("div",{className:"relative group overflow-hidden sm:rounded-lg sm:shadow-lg",children:[w.jsx(rt,{to:`/portfolio/${r}/${e.id}`,className:"block",children:w.jsx("div",{className:"relative overflow-hidden sm:rounded-lg sm:shadow-lg",children:w.jsx(Ar,{videoUrl:e.video,className:"w-full h-64 object-cover",enableHoverPlay:!0,autoPlay:!1,defaultMuted:!0,showMuteButton:!1})})}),w.jsxs("div",{className:"mt-4 text-left px-2 sm:px-0",children:[w.jsxs("p",{className:"text-sm uppercase",children:[e.description," "]}),w.jsx("h3",{className:"text-xl font-bold",children:e.title})]})]}),gy=()=>{const{categoryId:r}=fv(),e=M.useRef({}),t=M.useRef(null),[n,i]=M.useState(cb),[o,l]=M.useState(!0),[c,u]=M.useState(null);M.useEffect(()=>{(async()=>{try{l(!0);const b=await dD();b&&Object.keys(b).length>0&&Object.values(b).some(A=>A.projects&&A.projects.length>0)&&i(b)}catch(b){console.error("Failed to load dynamic portfolio data:",b),u(b.message)}finally{l(!1)}})()},[]);const f=r||null,h=r?n[r]:null;if(M.useEffect(()=>{r&&t.current&&(t.current.scrollIntoView({behavior:"smooth",block:"start"}),setTimeout(()=>{window.scrollBy({top:0,left:0,behavior:"smooth"})},400))},[r]),r&&!n[r])return w.jsx("div",{className:"flex flex-col items-center justify-center h-screen text-center bg-[#0d2637] px-6",children:w.jsxs("div",{className:"flex flex-col",children:[w.jsxs(rt,{to:"/portfolio",className:"text-lg flex items-center text-blue-300 hover:text-blue-400 mt-4 self-start",children:[w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:w.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Back to Portfolio"]}),w.jsx("h1",{className:"text-3xl sm:text-5xl font-bold mt-4 text-[#F5E6D3]",children:"Category not found!"})]})});const p=(x,b)=>{const S=`${x}-${b}`,A=e.current[S];A&&A.play()},g=(x,b)=>{const S=`${x}-${b}`,A=e.current[S];A&&(A.pause(),A.currentTime=0)};return w.jsxs("section",{className:"py-20 md:px-12 lg:px-24 bg-[#0d2637] text-[#F5E6D3]",children:[w.jsx(Ar,{videoUrl:"/Main/Portfolio/master.m3u8",showMuteButton:!1,className:"absolute inset-0 w-full h-full object-cover"}),w.jsx("div",{className:"absolute inset-0 bg-black opacity-50"}),w.jsxs("div",{className:"absolute right-0 opacity-70 top-[40%] px-3",children:[w.jsx("span",{className:"absolute top-[-20px] left-0 bg-gray-800 text-white text-xs font-semibold py-1 px-3 rounded-full",children:"Pioneer"}),w.jsx(rt,{to:"/portfolio/aluminum-skirting",className:"bg-white text-gray-900 font-bold rounded-md shadow-lg transition-all duration-300 px-3 py-2 text-sm sm:text-xl sm:py-3 sm:px-6 sm:rounded-lg hover:bg-gray-200",children:"Explore Aluminum Skirting"})]}),w.jsxs("div",{className:"flex flex-col min-h-screen",children:[w.jsx("div",{className:"relative z-1 mb-12 grid grid-cols-1 mt-auto",children:f===null?w.jsx("h2",{className:"text-5xl font-bold mb-2 px-6",style:{letterSpacing:"2.4px"},children:"PORTFOLIO"}):w.jsxs(w.Fragment,{children:[w.jsx("h2",{className:"text-4xl font-bold mb-5 px-6 hidden sm:block",style:{letterSpacing:"2.4px"},children:h.title}),w.jsx("p",{className:"text-lg leading-8 px-6 hidden sm:block",style:{letterSpacing:"0.6px"},children:h.description}),w.jsx("p",{className:"text-lg mt-4 mb-6 font-semibold px-6 hidden sm:block",style:{letterSpacing:"0.72px"},children:"More than 140 objects ranging from 120 to 8000 m"})]})}),w.jsx("div",{className:"relative z-1 max-w-5xl grid grid-cols-1 md:grid-cols-3 gap-x-36 md:border-b border-gray-300 gap-y-8 mb-32 md:mx-auto",children:Object.keys(n).map(x=>w.jsx(yD,{category:x,activeTab:f,portfolioData:n},x))})]}),w.jsxs("div",{ref:t,className:"max-w-5xl mx-auto grid gap-24 md:grid-cols-2",children:[(f===null?Object.keys(n):[f]).map(x=>n[x].projects.map((b,S)=>w.jsx(vD,{category:x,project:b,projectIndex:S,handleMouseEnter:p,handleMouseLeave:g,videoRefs:e},`${x}-${S}`))),w.jsxs("div",{className:"relative group overflow-hidden sm:rounded-lg sm:shadow-lg bg-[#143344] p-6 flex flex-col items-center justify-center",children:[w.jsx("h3",{className:"text-xl font-bold text-[#F5E6D3] mb-4",children:"Aluminum Skirting Profiles"}),w.jsx(rt,{to:"/portfolio/aluminum-skirting",className:"bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg transition duration-300",children:"Explore More"})]})]})]})},xD=()=>{const{categoryId:r,projectId:e}=fv(),[t,n]=M.useState(null),[i,o]=M.useState(!0),[l,c]=M.useState(null),[u,f]=M.useState({});M.useEffect(()=>{(async()=>{o(!0);try{const v=await ch(r,e);v&&n({id:v.id,title:v.title,area:v.area,description:v.description,video:v.cover,details:v.media||[]})}catch(v){console.error("Failed to load from API, using static data:",v);const x=cb[r];if(x){const b=x.projects.find(S=>S.id===e);n(b)}c(v.message)}finally{o(!1)}})()},[r,e]),M.useEffect(()=>{if(t?.details&&Array.isArray(t.details)&&t.details.length>0&&t.details[0].folder){const v={};t.details.forEach(x=>{v[x.folder]=!0}),f(v)}},[t]);const h=g=>{f(v=>({...v,[g]:!v[g]}))};if(i)return w.jsx("div",{className:"flex items-center justify-center h-screen bg-[#0d2637]",children:w.jsx("div",{className:"text-[#F5E6D3] text-xl",children:"Loading project..."})});if(!t)return w.jsx("div",{className:"flex flex-col items-center justify-center h-screen text-center bg-[#0d2637] px-6",children:w.jsxs("div",{className:"flex flex-col",children:[w.jsxs(rt,{to:"/portfolio",className:"text-lg flex items-center text-blue-300 hover:text-blue-400 mt-4 self-start",children:[w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:w.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Back to Portfolio"]}),w.jsx("h1",{className:"text-3xl sm:text-5xl font-bold mt-4 text-[#F5E6D3]",children:"Project not found!"})]})});const p=Array.isArray(t.details)&&t.details.length>0&&t.details[0].folder;return w.jsxs("section",{className:"flex flex-col bg-[#0d2637] text-[#F5E6D3]",children:[w.jsx("div",{className:"h-40 bg-[#0d2637]"}),w.jsx("h1",{className:"text-4xl font-bold mb-10 mt-10 text-center px-4",children:t.title}),w.jsx("div",{className:"w-full h-auto overflow-hidden space-y-8",children:p?t.details.map((g,v)=>w.jsxs("div",{className:"mb-8",children:[w.jsxs("div",{className:"flex items-center cursor-pointer select-none mb-4 ml-4",onClick:()=>h(g.folder),children:[w.jsx("span",{className:"text-2xl font-bold text-blue-300 uppercase mr-2",children:g.folder}),w.jsx("button",{"aria-label":u[g.folder]?`Show ${g.folder}`:`Hide ${g.folder}`,className:"focus:outline-none",type:"button",children:u[g.folder]?w.jsx("svg",{className:"w-5 h-5 inline",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})}):w.jsx("svg",{className:"w-5 h-5 inline",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 15l7-7 7 7"})})})]}),!u[g.folder]&&w.jsx("div",{className:"grid gap-4 md:grid-cols-2 md:m-4",children:g.items.map((x,b)=>x.type==="image"?w.jsx("img",{src:x.src,alt:`Project ${t.title} ${g.folder} Image ${b+1}`,className:"w-full h-auto"},`detail-${v}-${b}`):w.jsx(Ar,{videoUrl:x.src,className:"w-full h-auto object-cover"},`detail-${v}-${b}`))})]},`folder-group-${v}`)):w.jsx("div",{className:"space-y-4",children:w.jsx("div",{className:"grid gap-4 md:grid-cols-2 md:m-4",children:t.details.map((g,v)=>g.type==="image"?w.jsx("img",{src:g.src,alt:`Project ${t.title} Image ${v+1}`,className:"w-full h-auto"},`detail-${v}`):w.jsx(Ar,{videoUrl:g.src,className:"w-full h-auto object-cover"},`detail-${v}`))})})})]})},bD=()=>{const[r,e]=M.useState("+971");M.useEffect(()=>{async function n(){const i=localStorage.getItem("countryCode");if(i){e(i);return}try{const o=await fetch("https://ipapi.co/json/");if(!o.ok)throw new Error("Failed to fetch country data");const c=(await o.json()).country_calling_code||"+971";localStorage.setItem("countryCode",c),e(c)}catch(o){console.error("Error fetching country code:",o)}}n()},[]);const t=n=>{e(n.target.value)};return w.jsxs("section",{className:"min-h-screen flex flex-col",children:[w.jsx("div",{className:"h-40 bg-[#0d2637]"}),w.jsx("div",{className:"bg-[#0d2637] text-[#F5E6D3] flex-grow flex items-center justify-center",children:w.jsxs("div",{className:"max-w-4xl w-full bg-[#0d2637] rounded-lg flex flex-col md:flex-row overflow-hidden shadow-lg",children:[w.jsxs("div",{className:"w-full md:w-1/2 px-8 py-12",children:[w.jsx("h1",{className:"text-3xl font-bold mb-4 text-[#F5E6D3]",children:"WE WILL CALL YOU BACK, ANSWER YOUR QUESTIONS AND FIND THE SOLUTION FOR ANY TASK YOU HAVE"}),w.jsx("p",{className:"mb-6 text-[#E6C9A8]",children:"Discussion of the project does not oblige you to anything: we will tell you about ourselves and options for implementing your ideas, and you will decide on cooperation."}),w.jsxs("form",{className:"space-y-4",children:[w.jsxs("div",{children:[w.jsx("label",{htmlFor:"name",className:"block text-sm font-medium",children:"Enter your name*"}),w.jsx("input",{type:"text",id:"name",placeholder:"Your Name",className:"w-full mt-1 px-4 py-2 bg-[#143344] text-[#F5E6D3] rounded-lg border border-[#5A2E0D] focus:outline-none focus:ring-2 focus:ring-[#C4864A]"})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium",children:"Phone Number"}),w.jsxs("div",{className:"flex items-center mt-1",children:[w.jsx("input",{type:"text",value:r,onChange:t,className:"bg-[#143344] text-[#F5E6D3] px-4 py-2 rounded-l-lg border border-[#5A2E0D] focus:outline-none focus:ring-2 focus:ring-[#C4864A]",style:{width:"5rem"}}),w.jsx("input",{type:"text",id:"phone",placeholder:"Your Phone Number",className:"w-full px-4 py-2 bg-[#143344] text-[#F5E6D3] rounded-r-lg border border-[#5A2E0D] focus:outline-none focus:ring-2 focus:ring-[#C4864A]"})]})]}),w.jsx("button",{type:"submit",className:"w-full bg-[#8B4513] text-white py-2 rounded-lg hover:bg-[#723A10] focus:outline-none focus:ring-2 focus:ring-[#C4864A]",children:"SEND"})]})]}),w.jsxs("div",{className:"w-full md:w-1/2 bg-[#091a26] text-[#E6C9A8] px-8 py-12 flex flex-col space-y-6 justify-between",children:[w.jsxs("div",{children:[w.jsx("h2",{className:"text-xl font-semibold",children:"Contact Information"}),w.jsx("p",{children:"ORDER A PROJECT"}),w.jsx("p",{children:"+971 54 4666066"}),w.jsx("p",{children:"info@attractivehome.ae"})]}),w.jsxs("div",{children:[w.jsx("p",{children:"DUBAI"}),w.jsx("p",{children:"+971 43 420732"}),w.jsx("p",{children:"79P6+86, Al Qusais, Al Nahda 1, Dubai, United Arab Emirates"})]})]})]})})]})},ED=[{title:"Construction Management",description:"Expert management of construction projects ensuring quality and efficiency.",video:"/Services/Management/master.m3u8"},{title:"Remodeling",description:"Transform your spaces with our high-quality remodeling services.",video:"/Main/Portfolio/master.m3u8"},{title:"Install Flooring",description:"Professional installation of durable and stylish flooring options.",video:"/Services/Flooring/master.m3u8"},{title:"Exterior Design",description:"Transform outdoor spaces with stunning and functional exterior designs.",video:"Architecture/Baghoum/Cover/master.m3u8"},{title:"Fit Out",description:"Customized fit-out solutions for commercial and residential spaces.",video:"/Services/Fit-Out/master.m3u8"},{title:"Interior Design",description:"Creative and functional interior design solutions tailored to your style and needs.",video:"/Interior/El-Tayeb/Cover/master.m3u8"},{title:"Plumbing Fixture Installation",description:"Efficient installation of plumbing fixtures for kitchens, bathrooms, and more.",image:"/Services/Plumbing.webp"},{title:"Construction Site Excavation",description:"Accurate and efficient excavation services for all types of construction sites.",image:"/Services/Excavation.webp"},{title:"Interior Structural Repairs",description:"Expert repairs to maintain the integrity and safety of your building.",image:"/Services/Repairs.webp"},{title:"Exterior Painting",description:"High-quality exterior painting services to refresh and protect your building.",image:"/Services/Painting.webp"},{title:"MEP Solutions",description:"Comprehensive mechanical, electrical, and plumbing solutions for efficient systems.",image:"/Services/MEP.webp"},{title:"Shop Drawings",description:"Accurate shop drawings for precise construction and manufacturing.",image:"/Services/Shop-Drawing.webp"}],SD=()=>w.jsxs("section",{className:"bg-[#0d2637]",children:[w.jsx(Ar,{videoUrl:"/Main/Services/master.m3u8",className:"absolute inset-0 w-full h-full object-cover"}),w.jsx("div",{className:"absolute inset-0 bg-black opacity-50"}),w.jsxs("div",{className:"max-w-7xl mx-auto sm:px-8 lg:px-10 2xl:px-0",children:[w.jsx("div",{className:"flex flex-col min-h-screen",children:w.jsx("div",{className:"relative z-1 [@media(max-width:400px)]:mb-14 mb-32 sm:mb-16 grid grid-cols-1 mt-auto",children:w.jsx("h2",{className:"[@media(max-width:400px)]:text-[2.5rem] text-[2.8rem] 2xl:text-[3.2rem] sm:text-5xl font-bold text-white px-8 sm:px-6 lg:px-12 2xl:px-0 tracking-[3px] uppercase",style:{lineHeight:"1.5"},children:"We provide a wide range of professional services tailored to your needs"})})}),w.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-16 py-16",children:ED.map((e,t)=>w.jsxs("div",{className:"bg-[#143344] rounded-lg shadow-lg overflow-hidden transition-transform duration-1000 hover:scale-105",children:[e.image?w.jsx("img",{src:e.image,alt:e.title,className:"w-full h-48 object-cover"}):e.video?w.jsx(Ar,{className:"w-full h-48 object-cover",videoUrl:e.video,autoPlay:!1,showMuteButton:!1,enableHoverPlay:!0}):null,w.jsxs("div",{className:"p-6",children:[w.jsx("h2",{className:"text-2xl font-semibold mb-2 text-[#F5E6D3]",children:e.title}),w.jsx("p",{className:"text-[#E6C9A8]",children:e.description})]})]},t))})]})]}),wD=()=>w.jsxs("div",{className:"flex flex-col items-center justify-center h-screen text-center bg-[#0d2637]",children:[w.jsx("h1",{className:"text-6xl font-bold text-red-500",children:"404"}),w.jsx("p",{className:"text-xl mt-4 text-[#F5E6D3] px-6",children:"Oops! The page you're looking for doesn't exist."}),w.jsx(rt,{to:"/",className:"mt-6 px-6 py-3 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700",children:"Go Home"})]}),ID=()=>w.jsxs("section",{children:[w.jsxs("div",{className:"relative flex flex-col lg:justify-end min-h-screen bg-cover bg-center text-white lg:px-32 max-lg:text-center max-lg:items-center",style:{backgroundImage:"url('/Aluminum-Skirting/Background.avif')"},children:[w.jsx("div",{className:"lg:hidden",style:{paddingTop:"21vh"}}),w.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50"}),w.jsxs("div",{className:"relative z-10 max-w-4xl 2xl:max-w-5xl",children:[w.jsx("h1",{className:"text-6xl 2xl:text-7xl max-sm:text-4xl font-bold tracking-[1.6px] max-sm:max-w-xs mx-auto lg:mx-0",style:{lineHeight:"1.5"},children:"Transformative Aluminum Skirting Profiles"}),w.jsx("div",{className:"lg:hidden",style:{paddingBottom:"24vh"}}),w.jsx("p",{className:"mt-3 text-md sm:text-xl 2xl:text-2xl tracking-[0.7px] md:max-w-2xl 2xl:max-w-3xl lg:max-w-2xl max-sm:px-8 mx-auto lg:mx-0",style:{lineHeight:"1.4"},children:"Elevate your space with sleek, modern aluminum profiles that blend functionality and style."}),w.jsx("a",{href:"https://s3.me-central-1.amazonaws.com/attractivehome.ae/Aluminum-Skirting/ATT-001-Guide.pdf",target:"_blank",rel:"noopener noreferrer",className:"mt-8 mb-20 inline-block px-14 py-4 text-lg 2xl:text-xl font-medium text-gray-900 bg-white rounded-full hover:bg-gray-200",children:"Discover"})]})]}),w.jsxs("div",{className:"mx-auto px-10 2xl:px-20 py-24 bg-[#fafafa]",children:[w.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-center text-gray-900 mb-6",children:"Premium Aluminum Skirting Profiles"}),w.jsx("p",{className:"text-center text-gray-600 mb-24",children:"Experience sleek and modern profiles that enhance the aesthetic of any space."}),w.jsxs("div",{className:"flex flex-wrap items-center",children:[w.jsx("img",{src:"/Aluminum-Skirting/Image1-Desk.jpg",alt:"Aluminum Skirting",className:"w-full lg:w-1/2 rounded-2xl shadow-lg hidden lg:block"}),w.jsxs("div",{className:"w-full lg:w-1/2 lg:px-24",children:[w.jsxs("div",{className:"mb-6",children:[w.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",style:{lineHeight:"1.3"},children:"Modern Touch Neat Finish Sleek Design"}),w.jsx("p",{className:"text-gray-600",style:{lineHeight:"1.3"},children:"Discover the transformative power of our premium aluminum skirting profiles for any space."})]}),w.jsxs("div",{className:"mb-6",children:[w.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",style:{lineHeight:"1.3"},children:"Flawless Look Functionality Style Clean"}),w.jsx("p",{className:"text-gray-600",style:{lineHeight:"1.3"},children:"Enhance every corner with impeccable clean and sophisticated aluminum skirting profiles."})]}),w.jsxs("div",{children:[w.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",style:{lineHeight:"1.3"},children:"Residential Commercial Setting Attention Detail Precision Design"}),w.jsx("p",{className:"text-gray-600",style:{lineHeight:"1.3"},children:"Transform your space with attention to detail and precision in our sleek profiles."})]}),w.jsx("img",{src:"/Aluminum-Skirting/Image1-Mob.avif",alt:"Aluminum Skirting",className:"w-full lg:w-1/2 rounded-2xl shadow-lg mt-16 block lg:hidden"})]})]})]}),w.jsxs("div",{className:"mx-auto px-10 2xl:px-20 py-24",children:[w.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-center text-gray-900 mb-6",children:"Sleek Profiles"}),w.jsx("p",{className:"text-center text-gray-600 mb-14",children:"Transformative power, clean lines, modern touch, flawless look, impeccable clean"}),w.jsxs("div",{className:"flex flex-wrap justify-between gap-8",children:[w.jsx("img",{src:"/Aluminum-Skirting/Sleek1.avif",alt:"Sleek Profile 1",className:"w-[45%] lg:w-1/5 rounded-lg shadow-lg"}),w.jsx("img",{src:"/Aluminum-Skirting/Sleek2.avif",alt:"Sleek Profile 2",className:"w-[45%] lg:w-1/5 rounded-lg shadow-lg"}),w.jsx("img",{src:"/Aluminum-Skirting/Sleek3.avif",alt:"Sleek Profile 3",className:"w-[45%] lg:w-1/5 rounded-lg shadow-lg"}),w.jsx("img",{src:"/Aluminum-Skirting/Sleek4.avif",alt:"Sleek Profile 4",className:"w-[45%] lg:w-1/5 rounded-lg shadow-lg"})]})]}),w.jsxs("div",{className:"flex flex-col lg:flex-row bg-white py-24 px-10 2xl:px-20 text-gray-900 gap-20 mx-auto",children:[w.jsxs("div",{className:"lg:w-1/3",children:[w.jsx("div",{children:w.jsx("img",{src:"/Aluminum-Skirting/ATT-001.avif",alt:"ATT-001 Aluminum Profile",className:"w-full object-cover"})}),w.jsxs("div",{className:"bg-gray-900 text-white p-6",children:[w.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Aluminum Profile ATT-001"}),w.jsx("p",{className:"mb-2",children:"Durable, stylish, versatile aluminum profile for projects."}),w.jsx("p",{className:"text-yellow-500",children:"Plastered Walls Profile"})]})]}),w.jsxs("div",{className:"lg:w-2/3",children:[w.jsx("h1",{className:"text-2xl font-bold mb-2",children:"ATT-001 - Precision for Plastered Walls"}),w.jsxs("p",{className:"mb-4",children:["Designed for ",w.jsx("span",{className:"font-bold",children:"plastered walls"}),", the"," ",w.jsx("strong",{children:"ATT-001"})," aluminum profile seamlessly creates a"," ",w.jsx("span",{className:"font-bold",children:"2 cm shadow gap"})," between the walls and flooring, adding a sleek and modern aesthetic. This profile has been successfully applied in numerous projects, offering durability and precision. To ensure optimal performance, it should be installed following the provided installation guide."," ",w.jsx("span",{className:"font-bold",children:"ATT-001"})," enhances the transition between surfaces, making it an ideal choice for architects and designers aiming for a refined, seamless look."]}),w.jsxs("p",{className:"mb-8 text-right",dir:"rtl",lang:"ar",children:["  ",w.jsx("span",{className:"font-bold",children:"ATT-001"})," "," ",w.jsx("strong",{children:"  ()"}),"  ",w.jsx("span",{className:"font-bold",children:"    2 "}),"        .                         . "," ",w.jsx("span",{className:"font-bold",children:"ATT-001"}),"                  ."]}),w.jsxs("div",{className:"flex flex-wrap gap-4",children:[w.jsx("a",{href:"https://s3.me-central-1.amazonaws.com/attractivehome.ae/ATT-001-DIMS.pdf",target:"_blank",rel:"noopener noreferrer",children:w.jsx("button",{className:"bg-black hover:bg-gray-800 text-white font-medium py-3 px-6 rounded-full",children:"Dimensions"})}),w.jsx("a",{href:"https://s3.me-central-1.amazonaws.com/attractivehome.ae/Aluminum-Skirting/ATT-001-Guide.pdf",target:"_blank",rel:"noopener noreferrer",children:w.jsx("button",{className:"bg-black hover:bg-gray-800 text-white font-medium py-3 px-6 rounded-full",children:"Technical Guide"})})]})]})]}),w.jsxs("div",{className:"flex flex-col lg:flex-row bg-white py-24 px-10 2xl:px-20 text-gray-900 gap-20 mx-auto",children:[w.jsxs("div",{className:"lg:w-1/3",children:[w.jsx("div",{children:w.jsx("img",{src:"/Aluminum-Skirting/ATT-002.avif",alt:"ATT-002 Aluminum Profile",className:"w-full object-cover"})}),w.jsxs("div",{className:"bg-gray-900 text-white p-6",children:[w.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Aluminum Profile ATT-002"}),w.jsx("p",{className:"text-yellow-500",children:"Wall Claddings Profile"})]})]}),w.jsxs("div",{className:"lg:w-2/3",children:[w.jsx("h1",{className:"text-2xl font-bold mb-2",children:"ATT-002 - Perfect for Claddings (All types)"}),w.jsxs("p",{className:"mb-4",children:["Complementing ",w.jsx("strong",{children:"ATT-001"}),", the ",w.jsx("strong",{children:"ATT-002"})," ","aluminum profile is designed for"," ",w.jsx("strong",{children:"wood and marble claddings."})," It also creates a"," ",w.jsx("strong",{children:"2 cm shadow gap"}),", ensuring a cohesive and sophisticated finish across different surfaces. Whether used in wall paneling or decorative cladding, ",w.jsx("strong",{children:"ATT-002"})," maintains a consistent design language, making it an essential component for high-end interior and architectural detailing. Together,"," ",w.jsx("strong",{children:"ATT-001"})," and ",w.jsx("strong",{children:"ATT-002"}),"provide a complete solution for achieving clean lines and contemporary elegance."]}),w.jsxs("p",{className:"mb-8 text-right",dir:"rtl",lang:"ar",children:[" ",w.jsx("strong",{children:"ATT-001"}),"    ",w.jsx("strong",{children:"ATT-002"})," ","",w.jsx("strong",{children:"   "}),".  "," ",w.jsx("span",{className:"font-bold",children:"    2 "}),"        .          "," ",w.jsx("strong",{children:"ATT-002"}),"              .  ",w.jsx("strong",{children:"ATT-001"})," ",w.jsx("strong",{children:"ATT-002"}),"        ."]}),w.jsx("div",{className:"flex flex-wrap gap-4",children:w.jsx("a",{href:"#",target:"_blank",rel:"noopener noreferrer",children:w.jsx("button",{className:"bg-black hover:bg-gray-800 text-white font-medium py-3 px-6 rounded-full",children:"Dimensions"})})})]})]})]});function Pt(r){return`Minified Redux error #${r}; visit https://redux.js.org/Errors?code=${r} for the full message or use the non-minified dev environment for full errors. `}var AD=typeof Symbol=="function"&&Symbol.observable||"@@observable",yy=AD,vy=()=>Math.random().toString(36).substring(7).split("").join("."),TD={INIT:`@@redux/INIT${vy()}`,REPLACE:`@@redux/REPLACE${vy()}`},xy=TD;function LD(r){if(typeof r!="object"||r===null)return!1;let e=r;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(r)===e||Object.getPrototypeOf(r)===null}function ub(r,e,t){if(typeof r!="function")throw new Error(Pt(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(Pt(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(Pt(1));return t(ub)(r,e)}let n=r,i=e,o=new Map,l=o,c=0,u=!1;function f(){l===o&&(l=new Map,o.forEach((S,A)=>{l.set(A,S)}))}function h(){if(u)throw new Error(Pt(3));return i}function p(S){if(typeof S!="function")throw new Error(Pt(4));if(u)throw new Error(Pt(5));let A=!0;f();const L=c++;return l.set(L,S),function(){if(A){if(u)throw new Error(Pt(6));A=!1,f(),l.delete(L),o=null}}}function g(S){if(!LD(S))throw new Error(Pt(7));if(typeof S.type>"u")throw new Error(Pt(8));if(typeof S.type!="string")throw new Error(Pt(17));if(u)throw new Error(Pt(9));try{u=!0,i=n(i,S)}finally{u=!1}return(o=l).forEach(L=>{L()}),S}function v(S){if(typeof S!="function")throw new Error(Pt(10));n=S,g({type:xy.REPLACE})}function x(){const S=p;return{subscribe(A){if(typeof A!="object"||A===null)throw new Error(Pt(11));function L(){const k=A;k.next&&k.next(h())}return L(),{unsubscribe:S(L)}},[yy](){return this}}}return g({type:xy.INIT}),{dispatch:g,subscribe:p,getState:h,replaceReducer:v,[yy]:x}}function by(r,e){return function(...t){return e(r.apply(this,t))}}function Ey(r,e){if(typeof r=="function")return by(r,e);if(typeof r!="object"||r===null)throw new Error(Pt(16));const t={};for(const n in r){const i=r[n];typeof i=="function"&&(t[n]=by(i,e))}return t}function db(...r){return r.length===0?e=>e:r.length===1?r[0]:r.reduce((e,t)=>(...n)=>e(t(...n)))}function RD(...r){return e=>(t,n)=>{const i=e(t,n);let o=()=>{throw new Error(Pt(15))};const l={getState:i.getState,dispatch:(u,...f)=>o(u,...f)},c=r.map(u=>u(l));return o=db(...c)(i.dispatch),{...i,dispatch:o}}}var Ld={exports:{}},Rd={};var Sy;function CD(){if(Sy)return Rd;Sy=1;var r=Bl();function e(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var t=typeof Object.is=="function"?Object.is:e,n=r.useSyncExternalStore,i=r.useRef,o=r.useEffect,l=r.useMemo,c=r.useDebugValue;return Rd.useSyncExternalStoreWithSelector=function(u,f,h,p,g){var v=i(null);if(v.current===null){var x={hasValue:!1,value:null};v.current=x}else x=v.current;v=l(function(){function S(C){if(!A){if(A=!0,L=C,C=p(C),g!==void 0&&x.hasValue){var F=x.value;if(g(F,C))return R=F}return R=C}if(F=R,t(L,C))return F;var _=p(C);return g!==void 0&&g(F,_)?(L=C,F):(L=C,R=_)}var A=!1,L,R,k=h===void 0?null:h;return[function(){return S(f())},k===null?void 0:function(){return S(k())}]},[f,h,p,g]);var b=n(u,v[0],v[1]);return o(function(){x.hasValue=!0,x.value=b},[b]),c(b),b},Rd}var wy;function DD(){return wy||(wy=1,Ld.exports=CD()),Ld.exports}DD();var kD=M.version.startsWith("19"),OD=Symbol.for(kD?"react.transitional.element":"react.element"),PD=Symbol.for("react.portal"),ND=Symbol.for("react.fragment"),MD=Symbol.for("react.strict_mode"),_D=Symbol.for("react.profiler"),FD=Symbol.for("react.consumer"),BD=Symbol.for("react.context"),fb=Symbol.for("react.forward_ref"),jD=Symbol.for("react.suspense"),UD=Symbol.for("react.suspense_list"),uh=Symbol.for("react.memo"),HD=Symbol.for("react.lazy"),$D=fb,GD=uh;function WD(r){if(typeof r=="object"&&r!==null){const{$$typeof:e}=r;switch(e){case OD:switch(r=r.type,r){case ND:case _D:case MD:case jD:case UD:return r;default:switch(r=r&&r.$$typeof,r){case BD:case fb:case HD:case uh:return r;case FD:return r;default:return e}}case PD:return e}}}function VD(r){return WD(r)===uh}function KD(r,e,t,n,{areStatesEqual:i,areOwnPropsEqual:o,areStatePropsEqual:l}){let c=!1,u,f,h,p,g;function v(L,R){return u=L,f=R,h=r(u,f),p=e(n,f),g=t(h,p,f),c=!0,g}function x(){return h=r(u,f),e.dependsOnOwnProps&&(p=e(n,f)),g=t(h,p,f),g}function b(){return r.dependsOnOwnProps&&(h=r(u,f)),e.dependsOnOwnProps&&(p=e(n,f)),g=t(h,p,f),g}function S(){const L=r(u,f),R=!l(L,h);return h=L,R&&(g=t(h,p,f)),g}function A(L,R){const k=!o(R,f),C=!i(L,u,R,f);return u=L,f=R,k&&C?x():k?b():C?S():g}return function(R,k){return c?A(R,k):v(R,k)}}function zD(r,{initMapStateToProps:e,initMapDispatchToProps:t,initMergeProps:n,...i}){const o=e(r,i),l=t(r,i),c=n(r,i);return KD(o,l,c,r,i)}function YD(r,e){const t={};for(const n in r){const i=r[n];typeof i=="function"&&(t[n]=(...o)=>e(i(...o)))}return t}function Ef(r){return function(t){const n=r(t);function i(){return n}return i.dependsOnOwnProps=!1,i}}function Iy(r){return r.dependsOnOwnProps?!!r.dependsOnOwnProps:r.length!==1}function hb(r,e){return function(n,{displayName:i}){const o=function(c,u){return o.dependsOnOwnProps?o.mapToProps(c,u):o.mapToProps(c,void 0)};return o.dependsOnOwnProps=!0,o.mapToProps=function(c,u){o.mapToProps=r,o.dependsOnOwnProps=Iy(r);let f=o(c,u);return typeof f=="function"&&(o.mapToProps=f,o.dependsOnOwnProps=Iy(f),f=o(c,u)),f},o}}function dh(r,e){return(t,n)=>{throw new Error(`Invalid value of type ${typeof r} for ${e} argument when connecting component ${n.wrappedComponentName}.`)}}function qD(r){return r&&typeof r=="object"?Ef(e=>YD(r,e)):r?typeof r=="function"?hb(r):dh(r,"mapDispatchToProps"):Ef(e=>({dispatch:e}))}function XD(r){return r?typeof r=="function"?hb(r):dh(r,"mapStateToProps"):Ef(()=>({}))}function ZD(r,e,t){return{...t,...r,...e}}function JD(r){return function(t,{displayName:n,areMergedPropsEqual:i}){let o=!1,l;return function(u,f,h){const p=r(u,f,h);return o?i(p,l)||(l=p):(o=!0,l=p),l}}}function QD(r){return r?typeof r=="function"?JD(r):dh(r,"mergeProps"):()=>ZD}function ek(r){r()}function tk(){let r=null,e=null;return{clear(){r=null,e=null},notify(){ek(()=>{let t=r;for(;t;)t.callback(),t=t.next})},get(){const t=[];let n=r;for(;n;)t.push(n),n=n.next;return t},subscribe(t){let n=!0;const i=e={callback:t,next:null,prev:e};return i.prev?i.prev.next=i:r=i,function(){!n||r===null||(n=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:r=i.next)}}}}var Ay={notify(){},get:()=>[]};function pb(r,e){let t,n=Ay,i=0,o=!1;function l(b){h();const S=n.subscribe(b);let A=!1;return()=>{A||(A=!0,S(),p())}}function c(){n.notify()}function u(){x.onStateChange&&x.onStateChange()}function f(){return o}function h(){i++,t||(t=e?e.addNestedSub(u):r.subscribe(u),n=tk())}function p(){i--,t&&i===0&&(t(),t=void 0,n.clear(),n=Ay)}function g(){o||(o=!0,h())}function v(){o&&(o=!1,p())}const x={addNestedSub:l,notifyNestedSubs:c,handleChangeWrapper:u,isSubscribed:f,trySubscribe:g,tryUnsubscribe:v,getListeners:()=>n};return x}var rk=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",nk=rk(),ik=()=>typeof navigator<"u"&&navigator.product==="ReactNative",sk=ik(),ok=()=>nk||sk?M.useLayoutEffect:M.useEffect,Cl=ok();function Ty(r,e){return r===e?r!==0||e!==0||1/r===1/e:r!==r&&e!==e}function Cd(r,e){if(Ty(r,e))return!0;if(typeof r!="object"||r===null||typeof e!="object"||e===null)return!1;const t=Object.keys(r),n=Object.keys(e);if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(!Object.prototype.hasOwnProperty.call(e,t[i])||!Ty(r[t[i]],e[t[i]]))return!1;return!0}var ak={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},lk={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},ck={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},mb={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},uk={[$D]:ck,[GD]:mb};function Ly(r){return VD(r)?mb:uk[r.$$typeof]||ak}var dk=Object.defineProperty,fk=Object.getOwnPropertyNames,Ry=Object.getOwnPropertySymbols,hk=Object.getOwnPropertyDescriptor,pk=Object.getPrototypeOf,Cy=Object.prototype;function Sf(r,e){if(typeof e!="string"){if(Cy){const o=pk(e);o&&o!==Cy&&Sf(r,o)}let t=fk(e);Ry&&(t=t.concat(Ry(e)));const n=Ly(r),i=Ly(e);for(let o=0;o<t.length;++o){const l=t[o];if(!lk[l]&&!(i&&i[l])&&!(n&&n[l])){const c=hk(e,l);try{dk(r,l,c)}catch{}}}}return r}var mk=Symbol.for("react-redux-context"),gk=typeof globalThis<"u"?globalThis:{};function yk(){if(!M.createContext)return{};const r=gk[mk]??=new Map;let e=r.get(M.createContext);return e||(e=M.createContext(null),r.set(M.createContext,e)),e}var gb=yk(),vk=[null,null];function xk(r,e,t){Cl(()=>r(...e),t)}function bk(r,e,t,n,i,o){r.current=n,t.current=!1,i.current&&(i.current=null,o())}function Ek(r,e,t,n,i,o,l,c,u,f,h){if(!r)return()=>{};let p=!1,g=null;const v=()=>{if(p||!c.current)return;const b=e.getState();let S,A;try{S=n(b,i.current)}catch(L){A=L,g=L}A||(g=null),S===o.current?l.current||f():(o.current=S,u.current=S,l.current=!0,h())};return t.onStateChange=v,t.trySubscribe(),v(),()=>{if(p=!0,t.tryUnsubscribe(),t.onStateChange=null,g)throw g}}function Sk(r,e){return r===e}function wk(r,e,t,{pure:n,areStatesEqual:i=Sk,areOwnPropsEqual:o=Cd,areStatePropsEqual:l=Cd,areMergedPropsEqual:c=Cd,forwardRef:u=!1,context:f=gb}={}){const h=f,p=XD(r),g=qD(e),v=QD(t),x=!!r;return S=>{const A=S.displayName||S.name||"Component",L=`Connect(${A})`,R={shouldHandleStateChanges:x,displayName:L,wrappedComponentName:A,WrappedComponent:S,initMapStateToProps:p,initMapDispatchToProps:g,initMergeProps:v,areStatesEqual:i,areStatePropsEqual:l,areOwnPropsEqual:o,areMergedPropsEqual:c};function k(_){const[z,te,U]=M.useMemo(()=>{const{reactReduxForwardedRef:Ke,...Nt}=_;return[_.context,Ke,Nt]},[_]),q=M.useMemo(()=>{let Ke=h;return z?.Consumer,Ke},[z,h]),le=M.useContext(q),re=!!_.store&&!!_.store.getState&&!!_.store.dispatch,pe=!!le&&!!le.store,de=re?_.store:le.store,ce=pe?le.getServerState:de.getState,xe=M.useMemo(()=>zD(de.dispatch,R),[de]),[Z,X]=M.useMemo(()=>{if(!x)return vk;const Ke=pb(de,re?void 0:le.subscription),Nt=Ke.notifyNestedSubs.bind(Ke);return[Ke,Nt]},[de,re,le]),V=M.useMemo(()=>re?le:{...le,subscription:Z},[re,le,Z]),P=M.useRef(void 0),G=M.useRef(U),ae=M.useRef(void 0),ge=M.useRef(!1),we=M.useRef(!1),Ee=M.useRef(void 0);Cl(()=>(we.current=!0,()=>{we.current=!1}),[]);const De=M.useMemo(()=>()=>ae.current&&U===G.current?ae.current:xe(de.getState(),U),[de,U]),Y=M.useMemo(()=>Nt=>Z?Ek(x,de,Z,xe,G,P,ge,we,ae,X,Nt):()=>{},[Z]);xk(bk,[G,P,ge,U,ae,X]);let se;try{se=M.useSyncExternalStore(Y,De,ce?()=>xe(ce(),U):De)}catch(Ke){throw Ee.current&&(Ke.message+=`
The error may be correlated with this previous error:
${Ee.current.stack}

`),Ke}Cl(()=>{Ee.current=void 0,ae.current=void 0,P.current=se});const Oe=M.useMemo(()=>M.createElement(S,{...se,ref:te}),[te,S,se]);return M.useMemo(()=>x?M.createElement(q.Provider,{value:V},Oe):Oe,[q,Oe,V])}const F=M.memo(k);if(F.WrappedComponent=S,F.displayName=k.displayName=L,u){const z=M.forwardRef(function(U,q){return M.createElement(F,{...U,reactReduxForwardedRef:q})});return z.displayName=L,z.WrappedComponent=S,Sf(z,S)}return Sf(F,S)}}var yb=wk;function Ik(r){const{children:e,context:t,serverState:n,store:i}=r,o=M.useMemo(()=>{const u=pb(i);return{store:i,subscription:u,getServerState:n?()=>n:void 0}},[i,n]),l=M.useMemo(()=>i.getState(),[i]);Cl(()=>{const{subscription:u}=o;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),l!==i.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[o,l]);const c=t||gb;return M.createElement(c.Provider,{value:o},e)}var Ak=Ik,Tk="Invariant failed";function Lk(r,e){throw new Error(Tk)}var Ir=function(e){var t=e.top,n=e.right,i=e.bottom,o=e.left,l=n-o,c=i-t,u={top:t,right:n,bottom:i,left:o,width:l,height:c,x:o,y:t,center:{x:(n+o)/2,y:(i+t)/2}};return u},fh=function(e,t){return{top:e.top-t.top,left:e.left-t.left,bottom:e.bottom+t.bottom,right:e.right+t.right}},Dy=function(e,t){return{top:e.top+t.top,left:e.left+t.left,bottom:e.bottom-t.bottom,right:e.right-t.right}},Rk=function(e,t){return{top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}},Dd={top:0,right:0,bottom:0,left:0},hh=function(e){var t=e.borderBox,n=e.margin,i=n===void 0?Dd:n,o=e.border,l=o===void 0?Dd:o,c=e.padding,u=c===void 0?Dd:c,f=Ir(fh(t,i)),h=Ir(Dy(t,l)),p=Ir(Dy(h,u));return{marginBox:f,borderBox:Ir(t),paddingBox:h,contentBox:p,margin:i,border:l,padding:u}},ar=function(e){var t=e.slice(0,-2),n=e.slice(-2);if(n!=="px")return 0;var i=Number(t);return isNaN(i)&&Lk(),i},Ck=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Dl=function(e,t){var n=e.borderBox,i=e.border,o=e.margin,l=e.padding,c=Rk(n,t);return hh({borderBox:c,border:i,margin:o,padding:l})},kl=function(e,t){return t===void 0&&(t=Ck()),Dl(e,t)},vb=function(e,t){var n={top:ar(t.marginTop),right:ar(t.marginRight),bottom:ar(t.marginBottom),left:ar(t.marginLeft)},i={top:ar(t.paddingTop),right:ar(t.paddingRight),bottom:ar(t.paddingBottom),left:ar(t.paddingLeft)},o={top:ar(t.borderTopWidth),right:ar(t.borderRightWidth),bottom:ar(t.borderBottomWidth),left:ar(t.borderLeftWidth)};return hh({borderBox:e,margin:n,padding:i,border:o})},xb=function(e){var t=e.getBoundingClientRect(),n=window.getComputedStyle(e);return vb(t,n)},go=function(e){var t=[],n=null,i=function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];t=c,!n&&(n=requestAnimationFrame(function(){n=null,e.apply(void 0,t)}))};return i.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},i};function Ol(){return Ol=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Ol.apply(null,arguments)}function bb(r,e){}bb.bind(null,"warn");bb.bind(null,"error");function kn(){}function Dk(r,e){return{...r,...e}}function cr(r,e,t){const n=e.map(i=>{const o=Dk(t,i.options);return r.addEventListener(i.eventName,i.fn,o),function(){r.removeEventListener(i.eventName,i.fn,o)}});return function(){n.forEach(o=>{o()})}}const kk="Invariant failed";class Pl extends Error{}Pl.prototype.toString=function(){return this.message};function oe(r,e){throw new Pl(kk)}class Ok extends Ze.Component{constructor(...e){super(...e),this.callbacks=null,this.unbind=kn,this.onWindowError=t=>{const n=this.getCallbacks();n.isDragging()&&n.tryAbort(),t.error instanceof Pl&&t.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=t=>{this.callbacks=t}}componentDidMount(){this.unbind=cr(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(e){if(e instanceof Pl){this.setState({});return}throw e}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const Pk=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Nl=r=>r+1,Nk=r=>`
  You have lifted an item in position ${Nl(r.source.index)}
`,Eb=(r,e)=>{const t=r.droppableId===e.droppableId,n=Nl(r.index),i=Nl(e.index);return t?`
      You have moved the item from position ${n}
      to position ${i}
    `:`
    You have moved the item from position ${n}
    in list ${r.droppableId}
    to list ${e.droppableId}
    in position ${i}
  `},Sb=(r,e,t)=>e.droppableId===t.droppableId?`
      The item ${r}
      has been combined with ${t.draggableId}`:`
      The item ${r}
      in list ${e.droppableId}
      has been combined with ${t.draggableId}
      in list ${t.droppableId}
    `,Mk=r=>{const e=r.destination;if(e)return Eb(r.source,e);const t=r.combine;return t?Sb(r.draggableId,r.source,t):"You are over an area that cannot be dropped on"},ky=r=>`
  The item has returned to its starting position
  of ${Nl(r.index)}
`,_k=r=>{if(r.reason==="CANCEL")return`
      Movement cancelled.
      ${ky(r.source)}
    `;const e=r.destination,t=r.combine;return e?`
      You have dropped the item.
      ${Eb(r.source,e)}
    `:t?`
      You have dropped the item.
      ${Sb(r.draggableId,r.source,t)}
    `:`
    The item has been dropped while not over a drop area.
    ${ky(r.source)}
  `},dl={dragHandleUsageInstructions:Pk,onDragStart:Nk,onDragUpdate:Mk,onDragEnd:_k};function Fk(r,e){return!!(r===e||Number.isNaN(r)&&Number.isNaN(e))}function wb(r,e){if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(!Fk(r[t],e[t]))return!1;return!0}function _e(r,e){const t=M.useState(()=>({inputs:e,result:r()}))[0],n=M.useRef(!0),i=M.useRef(t),l=n.current||!!(e&&i.current.inputs&&wb(e,i.current.inputs))?i.current:{inputs:e,result:r()};return M.useEffect(()=>{n.current=!1,i.current=l},[l]),l.result}function Se(r,e){return _e(()=>r,e)}const bt={x:0,y:0},It=(r,e)=>({x:r.x+e.x,y:r.y+e.y}),Yt=(r,e)=>({x:r.x-e.x,y:r.y-e.y}),On=(r,e)=>r.x===e.x&&r.y===e.y,ls=r=>({x:r.x!==0?-r.x:0,y:r.y!==0?-r.y:0}),di=(r,e,t=0)=>r==="x"?{x:e,y:t}:{x:t,y:e},yo=(r,e)=>Math.sqrt((e.x-r.x)**2+(e.y-r.y)**2),Oy=(r,e)=>Math.min(...e.map(t=>yo(r,t))),Ib=r=>e=>({x:r(e.x),y:r(e.y)});var Bk=(r,e)=>{const t=Ir({top:Math.max(e.top,r.top),right:Math.min(e.right,r.right),bottom:Math.min(e.bottom,r.bottom),left:Math.max(e.left,r.left)});return t.width<=0||t.height<=0?null:t};const To=(r,e)=>({top:r.top+e.y,left:r.left+e.x,bottom:r.bottom+e.y,right:r.right+e.x}),Py=r=>[{x:r.left,y:r.top},{x:r.right,y:r.top},{x:r.left,y:r.bottom},{x:r.right,y:r.bottom}],jk={top:0,right:0,bottom:0,left:0},Uk=(r,e)=>e?To(r,e.scroll.diff.displacement):r,Hk=(r,e,t)=>t&&t.increasedBy?{...r,[e.end]:r[e.end]+t.increasedBy[e.line]}:r,$k=(r,e)=>e&&e.shouldClipSubject?Bk(e.pageMarginBox,r):Ir(r);var ns=({page:r,withPlaceholder:e,axis:t,frame:n})=>{const i=Uk(r.marginBox,n),o=Hk(i,t,e),l=$k(o,n);return{page:r,withPlaceholder:e,active:l}},ph=(r,e)=>{r.frame||oe();const t=r.frame,n=Yt(e,t.scroll.initial),i=ls(n),o={...t,scroll:{initial:t.scroll.initial,current:e,diff:{value:n,displacement:i},max:t.scroll.max}},l=ns({page:r.subject.page,withPlaceholder:r.subject.withPlaceholder,axis:r.axis,frame:o});return{...r,frame:o,subject:l}};function vt(r,e=wb){let t=null;function n(...i){if(t&&t.lastThis===this&&e(i,t.lastArgs))return t.lastResult;const o=r.apply(this,i);return t={lastResult:o,lastArgs:i,lastThis:this},o}return n.clear=function(){t=null},n}const Ab=vt(r=>r.reduce((e,t)=>(e[t.descriptor.id]=t,e),{})),Tb=vt(r=>r.reduce((e,t)=>(e[t.descriptor.id]=t,e),{})),Kl=vt(r=>Object.values(r)),Gk=vt(r=>Object.values(r));var cs=vt((r,e)=>Gk(e).filter(n=>r===n.descriptor.droppableId).sort((n,i)=>n.descriptor.index-i.descriptor.index));function mh(r){return r.at&&r.at.type==="REORDER"?r.at.destination:null}function zl(r){return r.at&&r.at.type==="COMBINE"?r.at.combine:null}var Yl=vt((r,e)=>e.filter(t=>t.descriptor.id!==r.descriptor.id)),Wk=({isMovingForward:r,draggable:e,destination:t,insideDestination:n,previousImpact:i})=>{if(!t.isCombineEnabled||!mh(i))return null;function l(v){const x={type:"COMBINE",combine:{draggableId:v,droppableId:t.descriptor.id}};return{...i,at:x}}const c=i.displaced.all,u=c.length?c[0]:null;if(r)return u?l(u):null;const f=Yl(e,n);if(!u){if(!f.length)return null;const v=f[f.length-1];return l(v.descriptor.id)}const h=f.findIndex(v=>v.descriptor.id===u);h===-1&&oe();const p=h-1;if(p<0)return null;const g=f[p];return l(g.descriptor.id)},us=(r,e)=>r.descriptor.droppableId===e.descriptor.id;const Lb={point:bt,value:0},vo={invisible:{},visible:{},all:[]},Vk={displaced:vo,displacedBy:Lb,at:null};var ur=(r,e)=>t=>r<=t&&t<=e,Rb=r=>{const e=ur(r.top,r.bottom),t=ur(r.left,r.right);return n=>{if(e(n.top)&&e(n.bottom)&&t(n.left)&&t(n.right))return!0;const o=e(n.top)||e(n.bottom),l=t(n.left)||t(n.right);if(o&&l)return!0;const u=n.top<r.top&&n.bottom>r.bottom,f=n.left<r.left&&n.right>r.right;return u&&f?!0:u&&l||f&&o}},Kk=r=>{const e=ur(r.top,r.bottom),t=ur(r.left,r.right);return n=>e(n.top)&&e(n.bottom)&&t(n.left)&&t(n.right)};const gh={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},Cb={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var zk=r=>e=>{const t=ur(e.top,e.bottom),n=ur(e.left,e.right);return i=>r===gh?t(i.top)&&t(i.bottom):n(i.left)&&n(i.right)};const Yk=(r,e)=>{const t=e.frame?e.frame.scroll.diff.displacement:bt;return To(r,t)},qk=(r,e,t)=>e.subject.active?t(e.subject.active)(r):!1,Xk=(r,e,t)=>t(e)(r),yh=({target:r,destination:e,viewport:t,withDroppableDisplacement:n,isVisibleThroughFrameFn:i})=>{const o=n?Yk(r,e):r;return qk(o,e,i)&&Xk(o,t,i)},Zk=r=>yh({...r,isVisibleThroughFrameFn:Rb}),Db=r=>yh({...r,isVisibleThroughFrameFn:Kk}),Jk=r=>yh({...r,isVisibleThroughFrameFn:zk(r.destination.axis)}),Qk=(r,e,t)=>{if(typeof t=="boolean")return t;if(!e)return!0;const{invisible:n,visible:i}=e;if(n[r])return!1;const o=i[r];return o?o.shouldAnimate:!0};function e2(r,e){const t=r.page.marginBox,n={top:e.point.y,right:0,bottom:0,left:e.point.x};return Ir(fh(t,n))}function xo({afterDragging:r,destination:e,displacedBy:t,viewport:n,forceShouldAnimate:i,last:o}){return r.reduce(function(c,u){const f=e2(u,t),h=u.descriptor.id;if(c.all.push(h),!Zk({target:f,destination:e,viewport:n,withDroppableDisplacement:!0}))return c.invisible[u.descriptor.id]=!0,c;const g=Qk(h,o,i),v={draggableId:h,shouldAnimate:g};return c.visible[h]=v,c},{all:[],visible:{},invisible:{}})}function t2(r,e){if(!r.length)return 0;const t=r[r.length-1].descriptor.index;return e.inHomeList?t:t+1}function Ny({insideDestination:r,inHomeList:e,displacedBy:t,destination:n}){const i=t2(r,{inHomeList:e});return{displaced:vo,displacedBy:t,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:i}}}}function Ml({draggable:r,insideDestination:e,destination:t,viewport:n,displacedBy:i,last:o,index:l,forceShouldAnimate:c}){const u=us(r,t);if(l==null)return Ny({insideDestination:e,inHomeList:u,displacedBy:i,destination:t});const f=e.find(x=>x.descriptor.index===l);if(!f)return Ny({insideDestination:e,inHomeList:u,displacedBy:i,destination:t});const h=Yl(r,e),p=e.indexOf(f),g=h.slice(p);return{displaced:xo({afterDragging:g,destination:t,displacedBy:i,last:o,viewport:n.frame,forceShouldAnimate:c}),displacedBy:i,at:{type:"REORDER",destination:{droppableId:t.descriptor.id,index:l}}}}function Fn(r,e){return!!e.effected[r]}var r2=({isMovingForward:r,destination:e,draggables:t,combine:n,afterCritical:i})=>{if(!e.isCombineEnabled)return null;const o=n.draggableId,c=t[o].descriptor.index;return Fn(o,i)?r?c:c-1:r?c+1:c},n2=({isMovingForward:r,isInHomeList:e,insideDestination:t,location:n})=>{if(!t.length)return null;const i=n.index,o=r?i+1:i-1,l=t[0].descriptor.index,c=t[t.length-1].descriptor.index,u=e?c:c+1;return o<l||o>u?null:o},i2=({isMovingForward:r,isInHomeList:e,draggable:t,draggables:n,destination:i,insideDestination:o,previousImpact:l,viewport:c,afterCritical:u})=>{const f=l.at;if(f||oe(),f.type==="REORDER"){const p=n2({isMovingForward:r,isInHomeList:e,location:f.destination,insideDestination:o});return p==null?null:Ml({draggable:t,insideDestination:o,destination:i,viewport:c,last:l.displaced,displacedBy:l.displacedBy,index:p})}const h=r2({isMovingForward:r,destination:i,displaced:l.displaced,draggables:n,combine:f.combine,afterCritical:u});return h==null?null:Ml({draggable:t,insideDestination:o,destination:i,viewport:c,last:l.displaced,displacedBy:l.displacedBy,index:h})},s2=({displaced:r,afterCritical:e,combineWith:t,displacedBy:n})=>{const i=!!(r.visible[t]||r.invisible[t]);return Fn(t,e)?i?bt:ls(n.point):i?n.point:bt},o2=({afterCritical:r,impact:e,draggables:t})=>{const n=zl(e);n||oe();const i=n.draggableId,o=t[i].page.borderBox.center,l=s2({displaced:e.displaced,afterCritical:r,combineWith:i,displacedBy:e.displacedBy});return It(o,l)};const kb=(r,e)=>e.margin[r.start]+e.borderBox[r.size]/2,a2=(r,e)=>e.margin[r.end]+e.borderBox[r.size]/2,vh=(r,e,t)=>e[r.crossAxisStart]+t.margin[r.crossAxisStart]+t.borderBox[r.crossAxisSize]/2,My=({axis:r,moveRelativeTo:e,isMoving:t})=>di(r.line,e.marginBox[r.end]+kb(r,t),vh(r,e.marginBox,t)),_y=({axis:r,moveRelativeTo:e,isMoving:t})=>di(r.line,e.marginBox[r.start]-a2(r,t),vh(r,e.marginBox,t)),l2=({axis:r,moveInto:e,isMoving:t})=>di(r.line,e.contentBox[r.start]+kb(r,t),vh(r,e.contentBox,t));var c2=({impact:r,draggable:e,draggables:t,droppable:n,afterCritical:i})=>{const o=cs(n.descriptor.id,t),l=e.page,c=n.axis;if(!o.length)return l2({axis:c,moveInto:n.page,isMoving:l});const{displaced:u,displacedBy:f}=r,h=u.all[0];if(h){const g=t[h];if(Fn(h,i))return _y({axis:c,moveRelativeTo:g.page,isMoving:l});const v=Dl(g.page,f.point);return _y({axis:c,moveRelativeTo:v,isMoving:l})}const p=o[o.length-1];if(p.descriptor.id===e.descriptor.id)return l.borderBox.center;if(Fn(p.descriptor.id,i)){const g=Dl(p.page,ls(i.displacedBy.point));return My({axis:c,moveRelativeTo:g,isMoving:l})}return My({axis:c,moveRelativeTo:p.page,isMoving:l})},wf=(r,e)=>{const t=r.frame;return t?It(e,t.scroll.diff.displacement):e};const u2=({impact:r,draggable:e,droppable:t,draggables:n,afterCritical:i})=>{const o=e.page.borderBox.center,l=r.at;return!t||!l?o:l.type==="REORDER"?c2({impact:r,draggable:e,draggables:n,droppable:t,afterCritical:i}):o2({impact:r,draggables:n,afterCritical:i})};var ql=r=>{const e=u2(r),t=r.droppable;return t?wf(t,e):e},Ob=(r,e)=>{const t=Yt(e,r.scroll.initial),n=ls(t);return{frame:Ir({top:e.y,bottom:e.y+r.frame.height,left:e.x,right:e.x+r.frame.width}),scroll:{initial:r.scroll.initial,max:r.scroll.max,current:e,diff:{value:t,displacement:n}}}};function Fy(r,e){return r.map(t=>e[t])}function d2(r,e){for(let t=0;t<e.length;t++){const n=e[t].visible[r];if(n)return n}return null}var f2=({impact:r,viewport:e,destination:t,draggables:n,maxScrollChange:i})=>{const o=Ob(e,It(e.scroll.current,i)),l=t.frame?ph(t,It(t.frame.scroll.current,i)):t,c=r.displaced,u=xo({afterDragging:Fy(c.all,n),destination:t,displacedBy:r.displacedBy,viewport:o.frame,last:c,forceShouldAnimate:!1}),f=xo({afterDragging:Fy(c.all,n),destination:l,displacedBy:r.displacedBy,viewport:e.frame,last:c,forceShouldAnimate:!1}),h={},p={},g=[c,u,f];return c.all.forEach(x=>{const b=d2(x,g);if(b){p[x]=b;return}h[x]=!0}),{...r,displaced:{all:c.all,invisible:h,visible:p}}},h2=(r,e)=>It(r.scroll.diff.displacement,e),xh=({pageBorderBoxCenter:r,draggable:e,viewport:t})=>{const n=h2(t,r),i=Yt(n,e.page.borderBox.center);return It(e.client.borderBox.center,i)},Pb=({draggable:r,destination:e,newPageBorderBoxCenter:t,viewport:n,withDroppableDisplacement:i,onlyOnMainAxis:o=!1})=>{const l=Yt(t,r.page.borderBox.center),u={target:To(r.page.borderBox,l),destination:e,withDroppableDisplacement:i,viewport:n};return o?Jk(u):Db(u)},p2=({isMovingForward:r,draggable:e,destination:t,draggables:n,previousImpact:i,viewport:o,previousPageBorderBoxCenter:l,previousClientSelection:c,afterCritical:u})=>{if(!t.isEnabled)return null;const f=cs(t.descriptor.id,n),h=us(e,t),p=Wk({isMovingForward:r,draggable:e,destination:t,insideDestination:f,previousImpact:i})||i2({isMovingForward:r,isInHomeList:h,draggable:e,draggables:n,destination:t,insideDestination:f,previousImpact:i,viewport:o,afterCritical:u});if(!p)return null;const g=ql({impact:p,draggable:e,droppable:t,draggables:n,afterCritical:u});if(Pb({draggable:e,destination:t,newPageBorderBoxCenter:g,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:xh({pageBorderBoxCenter:g,draggable:e,viewport:o}),impact:p,scrollJumpRequest:null};const x=Yt(g,l),b=f2({impact:p,viewport:o,destination:t,draggables:n,maxScrollChange:x});return{clientSelection:c,impact:b,scrollJumpRequest:x}};const Ot=r=>{const e=r.subject.active;return e||oe(),e};var m2=({isMovingForward:r,pageBorderBoxCenter:e,source:t,droppables:n,viewport:i})=>{const o=t.subject.active;if(!o)return null;const l=t.axis,c=ur(o[l.start],o[l.end]),u=Kl(n).filter(h=>h!==t).filter(h=>h.isEnabled).filter(h=>!!h.subject.active).filter(h=>Rb(i.frame)(Ot(h))).filter(h=>{const p=Ot(h);return r?o[l.crossAxisEnd]<p[l.crossAxisEnd]:p[l.crossAxisStart]<o[l.crossAxisStart]}).filter(h=>{const p=Ot(h),g=ur(p[l.start],p[l.end]);return c(p[l.start])||c(p[l.end])||g(o[l.start])||g(o[l.end])}).sort((h,p)=>{const g=Ot(h)[l.crossAxisStart],v=Ot(p)[l.crossAxisStart];return r?g-v:v-g}).filter((h,p,g)=>Ot(h)[l.crossAxisStart]===Ot(g[0])[l.crossAxisStart]);if(!u.length)return null;if(u.length===1)return u[0];const f=u.filter(h=>ur(Ot(h)[l.start],Ot(h)[l.end])(e[l.line]));return f.length===1?f[0]:f.length>1?f.sort((h,p)=>Ot(h)[l.start]-Ot(p)[l.start])[0]:u.sort((h,p)=>{const g=Oy(e,Py(Ot(h))),v=Oy(e,Py(Ot(p)));return g!==v?g-v:Ot(h)[l.start]-Ot(p)[l.start]})[0]};const By=(r,e)=>{const t=r.page.borderBox.center;return Fn(r.descriptor.id,e)?Yt(t,e.displacedBy.point):t},g2=(r,e)=>{const t=r.page.borderBox;return Fn(r.descriptor.id,e)?To(t,ls(e.displacedBy.point)):t};var y2=({pageBorderBoxCenter:r,viewport:e,destination:t,insideDestination:n,afterCritical:i})=>n.filter(l=>Db({target:g2(l,i),destination:t,viewport:e.frame,withDroppableDisplacement:!0})).sort((l,c)=>{const u=yo(r,wf(t,By(l,i))),f=yo(r,wf(t,By(c,i)));return u<f?-1:f<u?1:l.descriptor.index-c.descriptor.index})[0]||null,Lo=vt(function(e,t){const n=t[e.line];return{value:n,point:di(e.line,n)}});const v2=(r,e,t)=>{const n=r.axis;if(r.descriptor.mode==="virtual")return di(n.line,e[n.line]);const i=r.subject.page.contentBox[n.size],u=cs(r.descriptor.id,t).reduce((f,h)=>f+h.client.marginBox[n.size],0)+e[n.line]-i;return u<=0?null:di(n.line,u)},Nb=(r,e)=>({...r,scroll:{...r.scroll,max:e}}),Mb=(r,e,t)=>{const n=r.frame;us(e,r)&&oe(),r.subject.withPlaceholder&&oe();const i=Lo(r.axis,e.displaceBy).point,o=v2(r,i,t),l={placeholderSize:i,increasedBy:o,oldFrameMaxScroll:r.frame?r.frame.scroll.max:null};if(!n){const h=ns({page:r.subject.page,withPlaceholder:l,axis:r.axis,frame:r.frame});return{...r,subject:h}}const c=o?It(n.scroll.max,o):n.scroll.max,u=Nb(n,c),f=ns({page:r.subject.page,withPlaceholder:l,axis:r.axis,frame:u});return{...r,subject:f,frame:u}},x2=r=>{const e=r.subject.withPlaceholder;e||oe();const t=r.frame;if(!t){const l=ns({page:r.subject.page,axis:r.axis,frame:null,withPlaceholder:null});return{...r,subject:l}}const n=e.oldFrameMaxScroll;n||oe();const i=Nb(t,n),o=ns({page:r.subject.page,axis:r.axis,frame:i,withPlaceholder:null});return{...r,subject:o,frame:i}};var b2=({previousPageBorderBoxCenter:r,moveRelativeTo:e,insideDestination:t,draggable:n,draggables:i,destination:o,viewport:l,afterCritical:c})=>{if(!e){if(t.length)return null;const p={displaced:vo,displacedBy:Lb,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},g=ql({impact:p,draggable:n,droppable:o,draggables:i,afterCritical:c}),v=us(n,o)?o:Mb(o,n,i);return Pb({draggable:n,destination:v,newPageBorderBoxCenter:g,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?p:null}const u=r[o.axis.line]<=e.page.borderBox.center[o.axis.line],f=(()=>{const p=e.descriptor.index;return e.descriptor.id===n.descriptor.id||u?p:p+1})(),h=Lo(o.axis,n.displaceBy);return Ml({draggable:n,insideDestination:t,destination:o,viewport:l,displacedBy:h,last:vo,index:f})},E2=({isMovingForward:r,previousPageBorderBoxCenter:e,draggable:t,isOver:n,draggables:i,droppables:o,viewport:l,afterCritical:c})=>{const u=m2({isMovingForward:r,pageBorderBoxCenter:e,source:n,droppables:o,viewport:l});if(!u)return null;const f=cs(u.descriptor.id,i),h=y2({pageBorderBoxCenter:e,viewport:l,destination:u,insideDestination:f,afterCritical:c}),p=b2({previousPageBorderBoxCenter:e,destination:u,draggable:t,draggables:i,moveRelativeTo:h,insideDestination:f,viewport:l,afterCritical:c});if(!p)return null;const g=ql({impact:p,draggable:t,droppable:u,draggables:i,afterCritical:c});return{clientSelection:xh({pageBorderBoxCenter:g,draggable:t,viewport:l}),impact:p,scrollJumpRequest:null}},Zt=r=>{const e=r.at;return e?e.type==="REORDER"?e.destination.droppableId:e.combine.droppableId:null};const S2=(r,e)=>{const t=Zt(r);return t?e[t]:null};var w2=({state:r,type:e})=>{const t=S2(r.impact,r.dimensions.droppables),n=!!t,i=r.dimensions.droppables[r.critical.droppable.id],o=t||i,l=o.axis.direction,c=l==="vertical"&&(e==="MOVE_UP"||e==="MOVE_DOWN")||l==="horizontal"&&(e==="MOVE_LEFT"||e==="MOVE_RIGHT");if(c&&!n)return null;const u=e==="MOVE_DOWN"||e==="MOVE_RIGHT",f=r.dimensions.draggables[r.critical.draggable.id],h=r.current.page.borderBoxCenter,{draggables:p,droppables:g}=r.dimensions;return c?p2({isMovingForward:u,previousPageBorderBoxCenter:h,draggable:f,destination:o,draggables:p,viewport:r.viewport,previousClientSelection:r.current.client.selection,previousImpact:r.impact,afterCritical:r.afterCritical}):E2({isMovingForward:u,previousPageBorderBoxCenter:h,draggable:f,isOver:o,draggables:p,droppables:g,viewport:r.viewport,afterCritical:r.afterCritical})};function ri(r){return r.phase==="DRAGGING"||r.phase==="COLLECTING"}function _b(r){const e=ur(r.top,r.bottom),t=ur(r.left,r.right);return function(i){return e(i.y)&&t(i.x)}}function I2(r,e){return r.left<e.right&&r.right>e.left&&r.top<e.bottom&&r.bottom>e.top}function A2({pageBorderBox:r,draggable:e,candidates:t}){const n=e.page.borderBox.center,i=t.map(o=>{const l=o.axis,c=di(o.axis.line,r.center[l.line],o.page.borderBox.center[l.crossAxisLine]);return{id:o.descriptor.id,distance:yo(n,c)}}).sort((o,l)=>l.distance-o.distance);return i[0]?i[0].id:null}function T2({pageBorderBox:r,draggable:e,droppables:t}){const n=Kl(t).filter(i=>{if(!i.isEnabled)return!1;const o=i.subject.active;if(!o||!I2(r,o))return!1;if(_b(o)(r.center))return!0;const l=i.axis,c=o.center[l.crossAxisLine],u=r[l.crossAxisStart],f=r[l.crossAxisEnd],h=ur(o[l.crossAxisStart],o[l.crossAxisEnd]),p=h(u),g=h(f);return!p&&!g?!0:p?u<c:f>c});return n.length?n.length===1?n[0].descriptor.id:A2({pageBorderBox:r,draggable:e,candidates:n}):null}const Fb=(r,e)=>Ir(To(r,e));var L2=(r,e)=>{const t=r.frame;return t?Fb(e,t.scroll.diff.value):e};function Bb({displaced:r,id:e}){return!!(r.visible[e]||r.invisible[e])}function R2({draggable:r,closest:e,inHomeList:t}){return e?t&&e.descriptor.index>r.descriptor.index?e.descriptor.index-1:e.descriptor.index:null}var C2=({pageBorderBoxWithDroppableScroll:r,draggable:e,destination:t,insideDestination:n,last:i,viewport:o,afterCritical:l})=>{const c=t.axis,u=Lo(t.axis,e.displaceBy),f=u.value,h=r[c.start],p=r[c.end],v=Yl(e,n).find(b=>{const S=b.descriptor.id,A=b.page.borderBox.center[c.line],L=Fn(S,l),R=Bb({displaced:i,id:S});return L?R?p<=A:h<A-f:R?p<=A+f:h<A})||null,x=R2({draggable:e,closest:v,inHomeList:us(e,t)});return Ml({draggable:e,insideDestination:n,destination:t,viewport:o,last:i,displacedBy:u,index:x})};const D2=4;var k2=({draggable:r,pageBorderBoxWithDroppableScroll:e,previousImpact:t,destination:n,insideDestination:i,afterCritical:o})=>{if(!n.isCombineEnabled)return null;const l=n.axis,c=Lo(n.axis,r.displaceBy),u=c.value,f=e[l.start],h=e[l.end],g=Yl(r,i).find(x=>{const b=x.descriptor.id,S=x.page.borderBox,L=S[l.size]/D2,R=Fn(b,o),k=Bb({displaced:t.displaced,id:b});return R?k?h>S[l.start]+L&&h<S[l.end]-L:f>S[l.start]-u+L&&f<S[l.end]-u-L:k?h>S[l.start]+u+L&&h<S[l.end]+u-L:f>S[l.start]+L&&f<S[l.end]-L});return g?{displacedBy:c,displaced:t.displaced,at:{type:"COMBINE",combine:{draggableId:g.descriptor.id,droppableId:n.descriptor.id}}}:null},jb=({pageOffset:r,draggable:e,draggables:t,droppables:n,previousImpact:i,viewport:o,afterCritical:l})=>{const c=Fb(e.page.borderBox,r),u=T2({pageBorderBox:c,draggable:e,droppables:n});if(!u)return Vk;const f=n[u],h=cs(f.descriptor.id,t),p=L2(f,c);return k2({pageBorderBoxWithDroppableScroll:p,draggable:e,previousImpact:i,destination:f,insideDestination:h,afterCritical:l})||C2({pageBorderBoxWithDroppableScroll:p,draggable:e,destination:f,insideDestination:h,last:i.displaced,viewport:o,afterCritical:l})},bh=(r,e)=>({...r,[e.descriptor.id]:e});const O2=({previousImpact:r,impact:e,droppables:t})=>{const n=Zt(r),i=Zt(e);if(!n||n===i)return t;const o=t[n];if(!o.subject.withPlaceholder)return t;const l=x2(o);return bh(t,l)};var P2=({draggable:r,draggables:e,droppables:t,previousImpact:n,impact:i})=>{const o=O2({previousImpact:n,impact:i,droppables:t}),l=Zt(i);if(!l)return o;const c=t[l];if(us(r,c)||c.subject.withPlaceholder)return o;const u=Mb(c,r,e);return bh(o,u)},oo=({state:r,clientSelection:e,dimensions:t,viewport:n,impact:i,scrollJumpRequest:o})=>{const l=n||r.viewport,c=t||r.dimensions,u=e||r.current.client.selection,f=Yt(u,r.initial.client.selection),h={offset:f,selection:u,borderBoxCenter:It(r.initial.client.borderBoxCenter,f)},p={selection:It(h.selection,l.scroll.current),borderBoxCenter:It(h.borderBoxCenter,l.scroll.current),offset:It(h.offset,l.scroll.diff.value)},g={client:h,page:p};if(r.phase==="COLLECTING")return{...r,dimensions:c,viewport:l,current:g};const v=c.draggables[r.critical.draggable.id],x=i||jb({pageOffset:p.offset,draggable:v,draggables:c.draggables,droppables:c.droppables,previousImpact:r.impact,viewport:l,afterCritical:r.afterCritical}),b=P2({draggable:v,impact:x,previousImpact:r.impact,draggables:c.draggables,droppables:c.droppables});return{...r,current:g,dimensions:{draggables:c.draggables,droppables:b},impact:x,viewport:l,scrollJumpRequest:o||null,forceShouldAnimate:o?!1:null}};function N2(r,e){return r.map(t=>e[t])}var Ub=({impact:r,viewport:e,draggables:t,destination:n,forceShouldAnimate:i})=>{const o=r.displaced,l=N2(o.all,t),c=xo({afterDragging:l,destination:n,displacedBy:r.displacedBy,viewport:e.frame,forceShouldAnimate:i,last:o});return{...r,displaced:c}},Hb=({impact:r,draggable:e,droppable:t,draggables:n,viewport:i,afterCritical:o})=>{const l=ql({impact:r,draggable:e,draggables:n,droppable:t,afterCritical:o});return xh({pageBorderBoxCenter:l,draggable:e,viewport:i})},$b=({state:r,dimensions:e,viewport:t})=>{r.movementMode!=="SNAP"&&oe();const n=r.impact,i=t||r.viewport,o=e||r.dimensions,{draggables:l,droppables:c}=o,u=l[r.critical.draggable.id],f=Zt(n);f||oe();const h=c[f],p=Ub({impact:n,viewport:i,destination:h,draggables:l}),g=Hb({impact:p,draggable:u,droppable:h,draggables:l,viewport:i,afterCritical:r.afterCritical});return oo({impact:p,clientSelection:g,state:r,dimensions:o,viewport:i})},M2=r=>({index:r.index,droppableId:r.droppableId}),Gb=({draggable:r,home:e,draggables:t,viewport:n})=>{const i=Lo(e.axis,r.displaceBy),o=cs(e.descriptor.id,t),l=o.indexOf(r);l===-1&&oe();const c=o.slice(l+1),u=c.reduce((g,v)=>(g[v.descriptor.id]=!0,g),{}),f={inVirtualList:e.descriptor.mode==="virtual",displacedBy:i,effected:u};return{impact:{displaced:xo({afterDragging:c,destination:e,displacedBy:i,last:null,viewport:n.frame,forceShouldAnimate:!1}),displacedBy:i,at:{type:"REORDER",destination:M2(r.descriptor)}},afterCritical:f}},_2=(r,e)=>({draggables:r.draggables,droppables:bh(r.droppables,e)}),F2=({draggable:r,offset:e,initialWindowScroll:t})=>{const n=Dl(r.client,e),i=kl(n,t);return{...r,placeholder:{...r.placeholder,client:n},client:n,page:i}},B2=r=>{const e=r.frame;return e||oe(),e},j2=({additions:r,updatedDroppables:e,viewport:t})=>{const n=t.scroll.diff.value;return r.map(i=>{const o=i.descriptor.droppableId,l=e[o],u=B2(l).scroll.diff.value,f=It(n,u);return F2({draggable:i,offset:f,initialWindowScroll:t.scroll.initial})})},U2=({state:r,published:e})=>{const t=e.modified.map(A=>{const L=r.dimensions.droppables[A.droppableId];return ph(L,A.scroll)}),n={...r.dimensions.droppables,...Ab(t)},i=Tb(j2({additions:e.additions,updatedDroppables:n,viewport:r.viewport})),o={...r.dimensions.draggables,...i};e.removals.forEach(A=>{delete o[A]});const l={droppables:n,draggables:o},c=Zt(r.impact),u=c?l.droppables[c]:null,f=l.draggables[r.critical.draggable.id],h=l.droppables[r.critical.droppable.id],{impact:p,afterCritical:g}=Gb({draggable:f,home:h,draggables:o,viewport:r.viewport}),v=u&&u.isCombineEnabled?r.impact:p,x=jb({pageOffset:r.current.page.offset,draggable:l.draggables[r.critical.draggable.id],draggables:l.draggables,droppables:l.droppables,previousImpact:v,viewport:r.viewport,afterCritical:g}),b={...r,phase:"DRAGGING",impact:x,onLiftImpact:p,dimensions:l,afterCritical:g,forceShouldAnimate:!1};return r.phase==="COLLECTING"?b:{...b,phase:"DROP_PENDING",reason:r.reason,isWaiting:!1}};const If=r=>r.movementMode==="SNAP",kd=(r,e,t)=>{const n=_2(r.dimensions,e);return!If(r)||t?oo({state:r,dimensions:n}):$b({state:r,dimensions:n})};function Od(r){return r.isDragging&&r.movementMode==="SNAP"?{...r,scrollJumpRequest:null}:r}const jy={phase:"IDLE",completed:null,shouldFlush:!1};var H2=(r=jy,e)=>{if(e.type==="FLUSH")return{...jy,shouldFlush:!0};if(e.type==="INITIAL_PUBLISH"){r.phase!=="IDLE"&&oe();const{critical:t,clientSelection:n,viewport:i,dimensions:o,movementMode:l}=e.payload,c=o.draggables[t.draggable.id],u=o.droppables[t.droppable.id],f={selection:n,borderBoxCenter:c.client.borderBox.center,offset:bt},h={client:f,page:{selection:It(f.selection,i.scroll.initial),borderBoxCenter:It(f.selection,i.scroll.initial),offset:It(f.selection,i.scroll.diff.value)}},p=Kl(o.droppables).every(b=>!b.isFixedOnPage),{impact:g,afterCritical:v}=Gb({draggable:c,home:u,draggables:o.draggables,viewport:i});return{phase:"DRAGGING",isDragging:!0,critical:t,movementMode:l,dimensions:o,initial:h,current:h,isWindowScrollAllowed:p,impact:g,afterCritical:v,onLiftImpact:g,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null}}if(e.type==="COLLECTION_STARTING")return r.phase==="COLLECTING"||r.phase==="DROP_PENDING"?r:(r.phase!=="DRAGGING"&&oe(),{...r,phase:"COLLECTING"});if(e.type==="PUBLISH_WHILE_DRAGGING")return r.phase==="COLLECTING"||r.phase==="DROP_PENDING"||oe(),U2({state:r,published:e.payload});if(e.type==="MOVE"){if(r.phase==="DROP_PENDING")return r;ri(r)||oe();const{client:t}=e.payload;return On(t,r.current.client.selection)?r:oo({state:r,clientSelection:t,impact:If(r)?r.impact:null})}if(e.type==="UPDATE_DROPPABLE_SCROLL"){if(r.phase==="DROP_PENDING"||r.phase==="COLLECTING")return Od(r);ri(r)||oe();const{id:t,newScroll:n}=e.payload,i=r.dimensions.droppables[t];if(!i)return r;const o=ph(i,n);return kd(r,o,!1)}if(e.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(r.phase==="DROP_PENDING")return r;ri(r)||oe();const{id:t,isEnabled:n}=e.payload,i=r.dimensions.droppables[t];i||oe(),i.isEnabled===n&&oe();const o={...i,isEnabled:n};return kd(r,o,!0)}if(e.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(r.phase==="DROP_PENDING")return r;ri(r)||oe();const{id:t,isCombineEnabled:n}=e.payload,i=r.dimensions.droppables[t];i||oe(),i.isCombineEnabled===n&&oe();const o={...i,isCombineEnabled:n};return kd(r,o,!0)}if(e.type==="MOVE_BY_WINDOW_SCROLL"){if(r.phase==="DROP_PENDING"||r.phase==="DROP_ANIMATING")return r;ri(r)||oe(),r.isWindowScrollAllowed||oe();const t=e.payload.newScroll;if(On(r.viewport.scroll.current,t))return Od(r);const n=Ob(r.viewport,t);return If(r)?$b({state:r,viewport:n}):oo({state:r,viewport:n})}if(e.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!ri(r))return r;const t=e.payload.maxScroll;if(On(t,r.viewport.scroll.max))return r;const n={...r.viewport,scroll:{...r.viewport.scroll,max:t}};return{...r,viewport:n}}if(e.type==="MOVE_UP"||e.type==="MOVE_DOWN"||e.type==="MOVE_LEFT"||e.type==="MOVE_RIGHT"){if(r.phase==="COLLECTING"||r.phase==="DROP_PENDING")return r;r.phase!=="DRAGGING"&&oe();const t=w2({state:r,type:e.type});return t?oo({state:r,impact:t.impact,clientSelection:t.clientSelection,scrollJumpRequest:t.scrollJumpRequest}):r}if(e.type==="DROP_PENDING"){const t=e.payload.reason;return r.phase!=="COLLECTING"&&oe(),{...r,phase:"DROP_PENDING",isWaiting:!0,reason:t}}if(e.type==="DROP_ANIMATE"){const{completed:t,dropDuration:n,newHomeClientOffset:i}=e.payload;return r.phase==="DRAGGING"||r.phase==="DROP_PENDING"||oe(),{phase:"DROP_ANIMATING",completed:t,dropDuration:n,newHomeClientOffset:i,dimensions:r.dimensions}}if(e.type==="DROP_COMPLETE"){const{completed:t}=e.payload;return{phase:"IDLE",completed:t,shouldFlush:!1}}return r};function He(r,e){return r instanceof Object&&"type"in r&&r.type===e}const $2=r=>({type:"BEFORE_INITIAL_CAPTURE",payload:r}),G2=r=>({type:"LIFT",payload:r}),W2=r=>({type:"INITIAL_PUBLISH",payload:r}),V2=r=>({type:"PUBLISH_WHILE_DRAGGING",payload:r}),K2=()=>({type:"COLLECTION_STARTING",payload:null}),z2=r=>({type:"UPDATE_DROPPABLE_SCROLL",payload:r}),Y2=r=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:r}),q2=r=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:r}),Wb=r=>({type:"MOVE",payload:r}),X2=r=>({type:"MOVE_BY_WINDOW_SCROLL",payload:r}),Z2=r=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:r}),J2=()=>({type:"MOVE_UP",payload:null}),Q2=()=>({type:"MOVE_DOWN",payload:null}),eO=()=>({type:"MOVE_RIGHT",payload:null}),tO=()=>({type:"MOVE_LEFT",payload:null}),Eh=()=>({type:"FLUSH",payload:null}),rO=r=>({type:"DROP_ANIMATE",payload:r}),Sh=r=>({type:"DROP_COMPLETE",payload:r}),Vb=r=>({type:"DROP",payload:r}),nO=r=>({type:"DROP_PENDING",payload:r}),Kb=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var iO=r=>({getState:e,dispatch:t})=>n=>i=>{if(!He(i,"LIFT")){n(i);return}const{id:o,clientSelection:l,movementMode:c}=i.payload,u=e();u.phase==="DROP_ANIMATING"&&t(Sh({completed:u.completed})),e().phase!=="IDLE"&&oe(),t(Eh()),t($2({draggableId:o,movementMode:c}));const h={draggableId:o,scrollOptions:{shouldPublishImmediately:c==="SNAP"}},{critical:p,dimensions:g,viewport:v}=r.startPublishing(h);t(W2({critical:p,dimensions:g,clientSelection:l,movementMode:c,viewport:v}))},sO=r=>()=>e=>t=>{He(t,"INITIAL_PUBLISH")&&r.dragging(),He(t,"DROP_ANIMATE")&&r.dropping(t.payload.completed.result.reason),(He(t,"FLUSH")||He(t,"DROP_COMPLETE"))&&r.resting(),e(t)};const wh={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},bo={opacity:{drop:0,combining:.7},scale:{drop:.75}},zb={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},ei=`${zb.outOfTheWay}s ${wh.outOfTheWay}`,ao={fluid:`opacity ${ei}`,snap:`transform ${ei}, opacity ${ei}`,drop:r=>{const e=`${r}s ${wh.drop}`;return`transform ${e}, opacity ${e}`},outOfTheWay:`transform ${ei}`,placeholder:`height ${ei}, width ${ei}, margin ${ei}`},Uy=r=>On(r,bt)?void 0:`translate(${r.x}px, ${r.y}px)`,Af={moveTo:Uy,drop:(r,e)=>{const t=Uy(r);if(t)return e?`${t} scale(${bo.scale.drop})`:t}},{minDropTime:Tf,maxDropTime:Yb}=zb,oO=Yb-Tf,Hy=1500,aO=.6;var lO=({current:r,destination:e,reason:t})=>{const n=yo(r,e);if(n<=0)return Tf;if(n>=Hy)return Yb;const i=n/Hy,o=Tf+oO*i,l=t==="CANCEL"?o*aO:o;return Number(l.toFixed(2))},cO=({impact:r,draggable:e,dimensions:t,viewport:n,afterCritical:i})=>{const{draggables:o,droppables:l}=t,c=Zt(r),u=c?l[c]:null,f=l[e.descriptor.droppableId],h=Hb({impact:r,draggable:e,draggables:o,afterCritical:i,droppable:u||f,viewport:n});return Yt(h,e.client.borderBox.center)},uO=({draggables:r,reason:e,lastImpact:t,home:n,viewport:i,onLiftImpact:o})=>!t.at||e!=="DROP"?{impact:Ub({draggables:r,impact:o,destination:n,viewport:i,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:t.at.type==="REORDER"?{impact:t,didDropInsideDroppable:!0}:{impact:{...t,displaced:vo},didDropInsideDroppable:!0};const dO=({getState:r,dispatch:e})=>t=>n=>{if(!He(n,"DROP")){t(n);return}const i=r(),o=n.payload.reason;if(i.phase==="COLLECTING"){e(nO({reason:o}));return}if(i.phase==="IDLE")return;i.phase==="DROP_PENDING"&&i.isWaiting&&oe(),i.phase==="DRAGGING"||i.phase==="DROP_PENDING"||oe();const c=i.critical,u=i.dimensions,f=u.draggables[i.critical.draggable.id],{impact:h,didDropInsideDroppable:p}=uO({reason:o,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),g=p?mh(h):null,v=p?zl(h):null,x={index:c.draggable.index,droppableId:c.droppable.id},b={draggableId:f.descriptor.id,type:f.descriptor.type,source:x,reason:o,mode:i.movementMode,destination:g,combine:v},S=cO({impact:h,draggable:f,dimensions:u,viewport:i.viewport,afterCritical:i.afterCritical}),A={critical:i.critical,afterCritical:i.afterCritical,result:b,impact:h};if(!(!On(i.current.client.offset,S)||!!b.combine)){e(Sh({completed:A}));return}const R=lO({current:i.current.client.offset,destination:S,reason:o});e(rO({newHomeClientOffset:S,dropDuration:R,completed:A}))};var qb=()=>({x:window.pageXOffset,y:window.pageYOffset});function fO(r){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:e=>{e.target!==window&&e.target!==window.document||r()}}}function hO({onWindowScroll:r}){function e(){r(qb())}const t=go(e),n=fO(t);let i=kn;function o(){return i!==kn}function l(){o()&&oe(),i=cr(window,[n])}function c(){o()||oe(),t.cancel(),i(),i=kn}return{start:l,stop:c,isActive:o}}const pO=r=>He(r,"DROP_COMPLETE")||He(r,"DROP_ANIMATE")||He(r,"FLUSH"),mO=r=>{const e=hO({onWindowScroll:t=>{r.dispatch(X2({newScroll:t}))}});return t=>n=>{!e.isActive()&&He(n,"INITIAL_PUBLISH")&&e.start(),e.isActive()&&pO(n)&&e.stop(),t(n)}};var gO=r=>{let e=!1,t=!1;const n=setTimeout(()=>{t=!0}),i=o=>{e||t||(e=!0,r(o),clearTimeout(n))};return i.wasCalled=()=>e,i},yO=()=>{const r=[],e=i=>{const o=r.findIndex(c=>c.timerId===i);o===-1&&oe();const[l]=r.splice(o,1);l.callback()};return{add:i=>{const o=setTimeout(()=>e(o)),l={timerId:o,callback:i};r.push(l)},flush:()=>{if(!r.length)return;const i=[...r];r.length=0,i.forEach(o=>{clearTimeout(o.timerId),o.callback()})}}};const vO=(r,e)=>r==null&&e==null?!0:r==null||e==null?!1:r.droppableId===e.droppableId&&r.index===e.index,xO=(r,e)=>r==null&&e==null?!0:r==null||e==null?!1:r.draggableId===e.draggableId&&r.droppableId===e.droppableId,bO=(r,e)=>{if(r===e)return!0;const t=r.draggable.id===e.draggable.id&&r.draggable.droppableId===e.draggable.droppableId&&r.draggable.type===e.draggable.type&&r.draggable.index===e.draggable.index,n=r.droppable.id===e.droppable.id&&r.droppable.type===e.droppable.type;return t&&n},Js=(r,e)=>{e()},Ja=(r,e)=>({draggableId:r.draggable.id,type:r.droppable.type,source:{droppableId:r.droppable.id,index:r.draggable.index},mode:e});function Pd(r,e,t,n){if(!r){t(n(e));return}const i=gO(t);r(e,{announce:i}),i.wasCalled()||t(n(e))}var EO=(r,e)=>{const t=yO();let n=null;const i=(p,g)=>{n&&oe(),Js("onBeforeCapture",()=>{const v=r().onBeforeCapture;v&&v({draggableId:p,mode:g})})},o=(p,g)=>{n&&oe(),Js("onBeforeDragStart",()=>{const v=r().onBeforeDragStart;v&&v(Ja(p,g))})},l=(p,g)=>{n&&oe();const v=Ja(p,g);n={mode:g,lastCritical:p,lastLocation:v.source,lastCombine:null},t.add(()=>{Js("onDragStart",()=>Pd(r().onDragStart,v,e,dl.onDragStart))})},c=(p,g)=>{const v=mh(g),x=zl(g);n||oe();const b=!bO(p,n.lastCritical);b&&(n.lastCritical=p);const S=!vO(n.lastLocation,v);S&&(n.lastLocation=v);const A=!xO(n.lastCombine,x);if(A&&(n.lastCombine=x),!b&&!S&&!A)return;const L={...Ja(p,n.mode),combine:x,destination:v};t.add(()=>{Js("onDragUpdate",()=>Pd(r().onDragUpdate,L,e,dl.onDragUpdate))})},u=()=>{n||oe(),t.flush()},f=p=>{n||oe(),n=null,Js("onDragEnd",()=>Pd(r().onDragEnd,p,e,dl.onDragEnd))};return{beforeCapture:i,beforeStart:o,start:l,update:c,flush:u,drop:f,abort:()=>{if(!n)return;const p={...Ja(n.lastCritical,n.mode),combine:null,destination:null,reason:"CANCEL"};f(p)}}},SO=(r,e)=>{const t=EO(r,e);return n=>i=>o=>{if(He(o,"BEFORE_INITIAL_CAPTURE")){t.beforeCapture(o.payload.draggableId,o.payload.movementMode);return}if(He(o,"INITIAL_PUBLISH")){const c=o.payload.critical;t.beforeStart(c,o.payload.movementMode),i(o),t.start(c,o.payload.movementMode);return}if(He(o,"DROP_COMPLETE")){const c=o.payload.completed.result;t.flush(),i(o),t.drop(c);return}if(i(o),He(o,"FLUSH")){t.abort();return}const l=n.getState();l.phase==="DRAGGING"&&t.update(l.critical,l.impact)}};const wO=r=>e=>t=>{if(!He(t,"DROP_ANIMATION_FINISHED")){e(t);return}const n=r.getState();n.phase!=="DROP_ANIMATING"&&oe(),r.dispatch(Sh({completed:n.completed}))},IO=r=>{let e=null,t=null;function n(){t&&(cancelAnimationFrame(t),t=null),e&&(e(),e=null)}return i=>o=>{if((He(o,"FLUSH")||He(o,"DROP_COMPLETE")||He(o,"DROP_ANIMATION_FINISHED"))&&n(),i(o),!He(o,"DROP_ANIMATE"))return;const l={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){r.getState().phase==="DROP_ANIMATING"&&r.dispatch(Kb())}};t=requestAnimationFrame(()=>{t=null,e=cr(window,[l])})}};var AO=r=>()=>e=>t=>{(He(t,"DROP_COMPLETE")||He(t,"FLUSH")||He(t,"DROP_ANIMATE"))&&r.stopPublishing(),e(t)},TO=r=>{let e=!1;return()=>t=>n=>{if(He(n,"INITIAL_PUBLISH")){e=!0,r.tryRecordFocus(n.payload.critical.draggable.id),t(n),r.tryRestoreFocusRecorded();return}if(t(n),!!e){if(He(n,"FLUSH")){e=!1,r.tryRestoreFocusRecorded();return}if(He(n,"DROP_COMPLETE")){e=!1;const i=n.payload.completed.result;i.combine&&r.tryShiftRecord(i.draggableId,i.combine.draggableId),r.tryRestoreFocusRecorded()}}}};const LO=r=>He(r,"DROP_COMPLETE")||He(r,"DROP_ANIMATE")||He(r,"FLUSH");var RO=r=>e=>t=>n=>{if(LO(n)){r.stop(),t(n);return}if(He(n,"INITIAL_PUBLISH")){t(n);const i=e.getState();i.phase!=="DRAGGING"&&oe(),r.start(i);return}t(n),r.scroll(e.getState())};const CO=r=>e=>t=>{if(e(t),!He(t,"PUBLISH_WHILE_DRAGGING"))return;const n=r.getState();n.phase==="DROP_PENDING"&&(n.isWaiting||r.dispatch(Vb({reason:n.reason})))},DO=db;var kO=({dimensionMarshal:r,focusMarshal:e,styleMarshal:t,getResponders:n,announce:i,autoScroller:o})=>ub(H2,DO(RD(sO(t),AO(r),iO(r),dO,wO,IO,CO,RO(o),mO,TO(e),SO(n,i))));const Nd=()=>({additions:{},removals:{},modified:{}});function OO({registry:r,callbacks:e}){let t=Nd(),n=null;const i=()=>{n||(e.collectionStarting(),n=requestAnimationFrame(()=>{n=null;const{additions:u,removals:f,modified:h}=t,p=Object.keys(u).map(x=>r.draggable.getById(x).getDimension(bt)).sort((x,b)=>x.descriptor.index-b.descriptor.index),g=Object.keys(h).map(x=>{const S=r.droppable.getById(x).callbacks.getScrollWhileDragging();return{droppableId:x,scroll:S}}),v={additions:p,removals:Object.keys(f),modified:g};t=Nd(),e.publish(v)}))};return{add:u=>{const f=u.descriptor.id;t.additions[f]=u,t.modified[u.descriptor.droppableId]=!0,t.removals[f]&&delete t.removals[f],i()},remove:u=>{const f=u.descriptor;t.removals[f.id]=!0,t.modified[f.droppableId]=!0,t.additions[f.id]&&delete t.additions[f.id],i()},stop:()=>{n&&(cancelAnimationFrame(n),n=null,t=Nd())}}}var Xb=({scrollHeight:r,scrollWidth:e,height:t,width:n})=>{const i=Yt({x:e,y:r},{x:n,y:t});return{x:Math.max(0,i.x),y:Math.max(0,i.y)}},Zb=()=>{const r=document.documentElement;return r||oe(),r},Jb=()=>{const r=Zb();return Xb({scrollHeight:r.scrollHeight,scrollWidth:r.scrollWidth,width:r.clientWidth,height:r.clientHeight})},PO=()=>{const r=qb(),e=Jb(),t=r.y,n=r.x,i=Zb(),o=i.clientWidth,l=i.clientHeight,c=n+o,u=t+l;return{frame:Ir({top:t,left:n,right:c,bottom:u}),scroll:{initial:r,current:r,max:e,diff:{value:bt,displacement:bt}}}},NO=({critical:r,scrollOptions:e,registry:t})=>{const n=PO(),i=n.scroll.current,o=r.droppable,l=t.droppable.getAllByType(o.type).map(h=>h.callbacks.getDimensionAndWatchScroll(i,e)),c=t.draggable.getAllByType(r.draggable.type).map(h=>h.getDimension(i));return{dimensions:{draggables:Tb(c),droppables:Ab(l)},critical:r,viewport:n}};function $y(r,e,t){return!(t.descriptor.id===e.id||t.descriptor.type!==e.type||r.droppable.getById(t.descriptor.droppableId).descriptor.mode!=="virtual")}var MO=(r,e)=>{let t=null;const n=OO({callbacks:{publish:e.publishWhileDragging,collectionStarting:e.collectionStarting},registry:r}),i=(g,v)=>{r.droppable.exists(g)||oe(),t&&e.updateDroppableIsEnabled({id:g,isEnabled:v})},o=(g,v)=>{t&&(r.droppable.exists(g)||oe(),e.updateDroppableIsCombineEnabled({id:g,isCombineEnabled:v}))},l=(g,v)=>{t&&(r.droppable.exists(g)||oe(),e.updateDroppableScroll({id:g,newScroll:v}))},c=(g,v)=>{t&&r.droppable.getById(g).callbacks.scroll(v)},u=()=>{if(!t)return;n.stop();const g=t.critical.droppable;r.droppable.getAllByType(g.type).forEach(v=>v.callbacks.dragStopped()),t.unsubscribe(),t=null},f=g=>{t||oe();const v=t.critical.draggable;g.type==="ADDITION"&&$y(r,v,g.value)&&n.add(g.value),g.type==="REMOVAL"&&$y(r,v,g.value)&&n.remove(g.value)};return{updateDroppableIsEnabled:i,updateDroppableIsCombineEnabled:o,scrollDroppable:c,updateDroppableScroll:l,startPublishing:g=>{t&&oe();const v=r.draggable.getById(g.draggableId),x=r.droppable.getById(v.descriptor.droppableId),b={draggable:v.descriptor,droppable:x.descriptor},S=r.subscribe(f);return t={critical:b,unsubscribe:S},NO({critical:b,registry:r,scrollOptions:g.scrollOptions})},stopPublishing:u}},Qb=(r,e)=>r.phase==="IDLE"?!0:r.phase!=="DROP_ANIMATING"||r.completed.result.draggableId===e?!1:r.completed.result.reason==="DROP",_O=r=>{window.scrollBy(r.x,r.y)};const FO=vt(r=>Kl(r).filter(e=>!(!e.isEnabled||!e.frame))),BO=(r,e)=>FO(e).find(n=>(n.frame||oe(),_b(n.frame.pageMarginBox)(r)))||null;var jO=({center:r,destination:e,droppables:t})=>{if(e){const i=t[e];return i.frame?i:null}return BO(r,t)};const Eo={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:r=>r**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var UO=(r,e,t=()=>Eo)=>{const n=t(),i=r[e.size]*n.startFromPercentage,o=r[e.size]*n.maxScrollAtPercentage;return{startScrollingFrom:i,maxScrollValueAt:o}},eE=({startOfRange:r,endOfRange:e,current:t})=>{const n=e-r;return n===0?0:(t-r)/n},Ih=1,HO=(r,e,t=()=>Eo)=>{const n=t();if(r>e.startScrollingFrom)return 0;if(r<=e.maxScrollValueAt)return n.maxPixelScroll;if(r===e.startScrollingFrom)return Ih;const o=1-eE({startOfRange:e.maxScrollValueAt,endOfRange:e.startScrollingFrom,current:r}),l=n.maxPixelScroll*n.ease(o);return Math.ceil(l)},$O=(r,e,t)=>{const n=t(),i=n.durationDampening.accelerateAt,o=n.durationDampening.stopDampeningAt,l=e,c=o,f=Date.now()-l;if(f>=o)return r;if(f<i)return Ih;const h=eE({startOfRange:i,endOfRange:c,current:f}),p=r*n.ease(h);return Math.ceil(p)},Gy=({distanceToEdge:r,thresholds:e,dragStartTime:t,shouldUseTimeDampening:n,getAutoScrollerOptions:i})=>{const o=HO(r,e,i);return o===0?0:n?Math.max($O(o,t,i),Ih):o},Wy=({container:r,distanceToEdges:e,dragStartTime:t,axis:n,shouldUseTimeDampening:i,getAutoScrollerOptions:o})=>{const l=UO(r,n,o);return e[n.end]<e[n.start]?Gy({distanceToEdge:e[n.end],thresholds:l,dragStartTime:t,shouldUseTimeDampening:i,getAutoScrollerOptions:o}):-1*Gy({distanceToEdge:e[n.start],thresholds:l,dragStartTime:t,shouldUseTimeDampening:i,getAutoScrollerOptions:o})},GO=({container:r,subject:e,proposedScroll:t})=>{const n=e.height>r.height,i=e.width>r.width;return!i&&!n?t:i&&n?null:{x:i?0:t.x,y:n?0:t.y}};const WO=Ib(r=>r===0?0:r);var tE=({dragStartTime:r,container:e,subject:t,center:n,shouldUseTimeDampening:i,getAutoScrollerOptions:o})=>{const l={top:n.y-e.top,right:e.right-n.x,bottom:e.bottom-n.y,left:n.x-e.left},c=Wy({container:e,distanceToEdges:l,dragStartTime:r,axis:gh,shouldUseTimeDampening:i,getAutoScrollerOptions:o}),u=Wy({container:e,distanceToEdges:l,dragStartTime:r,axis:Cb,shouldUseTimeDampening:i,getAutoScrollerOptions:o}),f=WO({x:u,y:c});if(On(f,bt))return null;const h=GO({container:e,subject:t,proposedScroll:f});return h?On(h,bt)?null:h:null};const VO=Ib(r=>r===0?0:r>0?1:-1),Ah=(()=>{const r=(e,t)=>e<0?e:e>t?e-t:0;return({current:e,max:t,change:n})=>{const i=It(e,n),o={x:r(i.x,t.x),y:r(i.y,t.y)};return On(o,bt)?null:o}})(),rE=({max:r,current:e,change:t})=>{const n={x:Math.max(e.x,r.x),y:Math.max(e.y,r.y)},i=VO(t),o=Ah({max:n,current:e,change:i});return!o||i.x!==0&&o.x===0||i.y!==0&&o.y===0},Th=(r,e)=>rE({current:r.scroll.current,max:r.scroll.max,change:e}),KO=(r,e)=>{if(!Th(r,e))return null;const t=r.scroll.max,n=r.scroll.current;return Ah({current:n,max:t,change:e})},Lh=(r,e)=>{const t=r.frame;return t?rE({current:t.scroll.current,max:t.scroll.max,change:e}):!1},zO=(r,e)=>{const t=r.frame;return!t||!Lh(r,e)?null:Ah({current:t.scroll.current,max:t.scroll.max,change:e})};var YO=({viewport:r,subject:e,center:t,dragStartTime:n,shouldUseTimeDampening:i,getAutoScrollerOptions:o})=>{const l=tE({dragStartTime:n,container:r.frame,subject:e,center:t,shouldUseTimeDampening:i,getAutoScrollerOptions:o});return l&&Th(r,l)?l:null},qO=({droppable:r,subject:e,center:t,dragStartTime:n,shouldUseTimeDampening:i,getAutoScrollerOptions:o})=>{const l=r.frame;if(!l)return null;const c=tE({dragStartTime:n,container:l.pageMarginBox,subject:e,center:t,shouldUseTimeDampening:i,getAutoScrollerOptions:o});return c&&Lh(r,c)?c:null},Vy=({state:r,dragStartTime:e,shouldUseTimeDampening:t,scrollWindow:n,scrollDroppable:i,getAutoScrollerOptions:o})=>{const l=r.current.page.borderBoxCenter,u=r.dimensions.draggables[r.critical.draggable.id].page.marginBox;if(r.isWindowScrollAllowed){const p=r.viewport,g=YO({dragStartTime:e,viewport:p,subject:u,center:l,shouldUseTimeDampening:t,getAutoScrollerOptions:o});if(g){n(g);return}}const f=jO({center:l,destination:Zt(r.impact),droppables:r.dimensions.droppables});if(!f)return;const h=qO({dragStartTime:e,droppable:f,subject:u,center:l,shouldUseTimeDampening:t,getAutoScrollerOptions:o});h&&i(f.descriptor.id,h)},XO=({scrollWindow:r,scrollDroppable:e,getAutoScrollerOptions:t=()=>Eo})=>{const n=go(r),i=go(e);let o=null;const l=f=>{o||oe();const{shouldUseTimeDampening:h,dragStartTime:p}=o;Vy({state:f,scrollWindow:n,scrollDroppable:i,dragStartTime:p,shouldUseTimeDampening:h,getAutoScrollerOptions:t})};return{start:f=>{o&&oe();const h=Date.now();let p=!1;const g=()=>{p=!0};Vy({state:f,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:g,scrollDroppable:g,getAutoScrollerOptions:t}),o={dragStartTime:h,shouldUseTimeDampening:p},p&&l(f)},stop:()=>{o&&(n.cancel(),i.cancel(),o=null)},scroll:l}},ZO=({move:r,scrollDroppable:e,scrollWindow:t})=>{const n=(c,u)=>{const f=It(c.current.client.selection,u);r({client:f})},i=(c,u)=>{if(!Lh(c,u))return u;const f=zO(c,u);if(!f)return e(c.descriptor.id,u),null;const h=Yt(u,f);return e(c.descriptor.id,h),Yt(u,h)},o=(c,u,f)=>{if(!c||!Th(u,f))return f;const h=KO(u,f);if(!h)return t(f),null;const p=Yt(f,h);return t(p),Yt(f,p)};return c=>{const u=c.scrollJumpRequest;if(!u)return;const f=Zt(c.impact);f||oe();const h=i(c.dimensions.droppables[f],u);if(!h)return;const p=c.viewport,g=o(c.isWindowScrollAllowed,p,h);g&&n(c,g)}},JO=({scrollDroppable:r,scrollWindow:e,move:t,getAutoScrollerOptions:n})=>{const i=XO({scrollWindow:e,scrollDroppable:r,getAutoScrollerOptions:n}),o=ZO({move:t,scrollWindow:e,scrollDroppable:r});return{scroll:u=>{if(!(n().disabled||u.phase!=="DRAGGING")){if(u.movementMode==="FLUID"){i.scroll(u);return}u.scrollJumpRequest&&o(u)}},start:i.start,stop:i.stop}};const is="data-rfd",ss=(()=>{const r=`${is}-drag-handle`;return{base:r,draggableId:`${r}-draggable-id`,contextId:`${r}-context-id`}})(),Lf=(()=>{const r=`${is}-draggable`;return{base:r,contextId:`${r}-context-id`,id:`${r}-id`}})(),QO=(()=>{const r=`${is}-droppable`;return{base:r,contextId:`${r}-context-id`,id:`${r}-id`}})(),Ky={contextId:`${is}-scroll-container-context-id`},eP=r=>e=>`[${e}="${r}"]`,Qs=(r,e)=>r.map(t=>{const n=t.styles[e];return n?`${t.selector} { ${n} }`:""}).join(" "),tP="pointer-events: none;";var rP=r=>{const e=eP(r),t=(()=>{const c=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:e(ss.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:c,dragging:tP,dropAnimating:c}}})(),n=(()=>{const c=`
      transition: ${ao.outOfTheWay};
    `;return{selector:e(Lf.contextId),styles:{dragging:c,dropAnimating:c,userCancel:c}}})(),i={selector:e(QO.contextId),styles:{always:"overflow-anchor: none;"}},l=[n,t,i,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:Qs(l,"always"),resting:Qs(l,"resting"),dragging:Qs(l,"dragging"),dropAnimating:Qs(l,"dropAnimating"),userCancel:Qs(l,"userCancel")}};const Jt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?M.useLayoutEffect:M.useEffect,Md=()=>{const r=document.querySelector("head");return r||oe(),r},zy=r=>{const e=document.createElement("style");return r&&e.setAttribute("nonce",r),e.type="text/css",e};function nP(r,e){const t=_e(()=>rP(r),[r]),n=M.useRef(null),i=M.useRef(null),o=Se(vt(p=>{const g=i.current;g||oe(),g.textContent=p}),[]),l=Se(p=>{const g=n.current;g||oe(),g.textContent=p},[]);Jt(()=>{!n.current&&!i.current||oe();const p=zy(e),g=zy(e);return n.current=p,i.current=g,p.setAttribute(`${is}-always`,r),g.setAttribute(`${is}-dynamic`,r),Md().appendChild(p),Md().appendChild(g),l(t.always),o(t.resting),()=>{const v=x=>{const b=x.current;b||oe(),Md().removeChild(b),x.current=null};v(n),v(i)}},[e,l,o,t.always,t.resting,r]);const c=Se(()=>o(t.dragging),[o,t.dragging]),u=Se(p=>{if(p==="DROP"){o(t.dropAnimating);return}o(t.userCancel)},[o,t.dropAnimating,t.userCancel]),f=Se(()=>{i.current&&o(t.resting)},[o,t.resting]);return _e(()=>({dragging:c,dropping:u,resting:f}),[c,u,f])}function nE(r,e){return Array.from(r.querySelectorAll(e))}var iE=r=>r&&r.ownerDocument&&r.ownerDocument.defaultView?r.ownerDocument.defaultView:window;function Xl(r){return r instanceof iE(r).HTMLElement}function iP(r,e){const t=`[${ss.contextId}="${r}"]`,n=nE(document,t);if(!n.length)return null;const i=n.find(o=>o.getAttribute(ss.draggableId)===e);return!i||!Xl(i)?null:i}function sP(r){const e=M.useRef({}),t=M.useRef(null),n=M.useRef(null),i=M.useRef(!1),o=Se(function(g,v){const x={id:g,focus:v};return e.current[g]=x,function(){const S=e.current;S[g]!==x&&delete S[g]}},[]),l=Se(function(g){const v=iP(r,g);v&&v!==document.activeElement&&v.focus()},[r]),c=Se(function(g,v){t.current===g&&(t.current=v)},[]),u=Se(function(){n.current||i.current&&(n.current=requestAnimationFrame(()=>{n.current=null;const g=t.current;g&&l(g)}))},[l]),f=Se(function(g){t.current=null;const v=document.activeElement;v&&v.getAttribute(ss.draggableId)===g&&(t.current=g)},[]);return Jt(()=>(i.current=!0,function(){i.current=!1;const g=n.current;g&&cancelAnimationFrame(g)}),[]),_e(()=>({register:o,tryRecordFocus:f,tryRestoreFocusRecorded:u,tryShiftRecord:c}),[o,f,u,c])}function oP(){const r={draggables:{},droppables:{}},e=[];function t(p){return e.push(p),function(){const v=e.indexOf(p);v!==-1&&e.splice(v,1)}}function n(p){e.length&&e.forEach(g=>g(p))}function i(p){return r.draggables[p]||null}function o(p){const g=i(p);return g||oe(),g}const l={register:p=>{r.draggables[p.descriptor.id]=p,n({type:"ADDITION",value:p})},update:(p,g)=>{const v=r.draggables[g.descriptor.id];v&&v.uniqueId===p.uniqueId&&(delete r.draggables[g.descriptor.id],r.draggables[p.descriptor.id]=p)},unregister:p=>{const g=p.descriptor.id,v=i(g);v&&p.uniqueId===v.uniqueId&&(delete r.draggables[g],r.droppables[p.descriptor.droppableId]&&n({type:"REMOVAL",value:p}))},getById:o,findById:i,exists:p=>!!i(p),getAllByType:p=>Object.values(r.draggables).filter(g=>g.descriptor.type===p)};function c(p){return r.droppables[p]||null}function u(p){const g=c(p);return g||oe(),g}const f={register:p=>{r.droppables[p.descriptor.id]=p},unregister:p=>{const g=c(p.descriptor.id);g&&p.uniqueId===g.uniqueId&&delete r.droppables[p.descriptor.id]},getById:u,findById:c,exists:p=>!!c(p),getAllByType:p=>Object.values(r.droppables).filter(g=>g.descriptor.type===p)};function h(){r.draggables={},r.droppables={},e.length=0}return{draggable:l,droppable:f,subscribe:t,clean:h}}function aP(){const r=_e(oP,[]);return M.useEffect(()=>function(){r.clean()},[r]),r}var Rh=Ze.createContext(null),_l=()=>{const r=document.body;return r||oe(),r};const lP={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},cP=r=>`rfd-announcement-${r}`;function uP(r){const e=_e(()=>cP(r),[r]),t=M.useRef(null);return M.useEffect(function(){const o=document.createElement("div");return t.current=o,o.id=e,o.setAttribute("aria-live","assertive"),o.setAttribute("aria-atomic","true"),Ol(o.style,lP),_l().appendChild(o),function(){setTimeout(function(){const u=_l();u.contains(o)&&u.removeChild(o),o===t.current&&(t.current=null)})}},[e]),Se(i=>{const o=t.current;if(o){o.textContent=i;return}},[])}const dP={separator:"::"};function Ch(r,e=dP){const t=Ze.useId();return _e(()=>`${r}${e.separator}${t}`,[e.separator,r,t])}function fP({contextId:r,uniqueId:e}){return`rfd-hidden-text-${r}-${e}`}function hP({contextId:r,text:e}){const t=Ch("hidden-text",{separator:"-"}),n=_e(()=>fP({contextId:r,uniqueId:t}),[t,r]);return M.useEffect(function(){const o=document.createElement("div");return o.id=n,o.textContent=e,o.style.display="none",_l().appendChild(o),function(){const c=_l();c.contains(o)&&c.removeChild(o)}},[n,e]),n}var Zl=Ze.createContext(null);function sE(r){const e=M.useRef(r);return M.useEffect(()=>{e.current=r}),e}function pP(){let r=null;function e(){return!!r}function t(l){return l===r}function n(l){r&&oe();const c={abandon:l};return r=c,c}function i(){r||oe(),r=null}function o(){r&&(r.abandon(),i())}return{isClaimed:e,isActive:t,claim:n,release:i,tryAbandon:o}}function So(r){return r.phase==="IDLE"||r.phase==="DROP_ANIMATING"?!1:r.isDragging}const mP=9,gP=13,Dh=27,oE=32,yP=33,vP=34,xP=35,bP=36,EP=37,SP=38,wP=39,IP=40,AP={[gP]:!0,[mP]:!0};var aE=r=>{AP[r.keyCode]&&r.preventDefault()};const Jl=(()=>{const r="visibilitychange";return typeof document>"u"?r:[r,`ms${r}`,`webkit${r}`,`moz${r}`,`o${r}`].find(n=>`on${n}`in document)||r})(),lE=0,Yy=5;function TP(r,e){return Math.abs(e.x-r.x)>=Yy||Math.abs(e.y-r.y)>=Yy}const qy={type:"IDLE"};function LP({cancel:r,completed:e,getPhase:t,setPhase:n}){return[{eventName:"mousemove",fn:i=>{const{button:o,clientX:l,clientY:c}=i;if(o!==lE)return;const u={x:l,y:c},f=t();if(f.type==="DRAGGING"){i.preventDefault(),f.actions.move(u);return}f.type!=="PENDING"&&oe();const h=f.point;if(!TP(h,u))return;i.preventDefault();const p=f.actions.fluidLift(u);n({type:"DRAGGING",actions:p})}},{eventName:"mouseup",fn:i=>{const o=t();if(o.type!=="DRAGGING"){r();return}i.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),e()}},{eventName:"mousedown",fn:i=>{t().type==="DRAGGING"&&i.preventDefault(),r()}},{eventName:"keydown",fn:i=>{if(t().type==="PENDING"){r();return}if(i.keyCode===Dh){i.preventDefault(),r();return}aE(i)}},{eventName:"resize",fn:r},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{t().type==="PENDING"&&r()}},{eventName:"webkitmouseforcedown",fn:i=>{const o=t();if(o.type==="IDLE"&&oe(),o.actions.shouldRespectForcePress()){r();return}i.preventDefault()}},{eventName:Jl,fn:r}]}function RP(r){const e=M.useRef(qy),t=M.useRef(kn),n=_e(()=>({eventName:"mousedown",fn:function(p){if(p.defaultPrevented||p.button!==lE||p.ctrlKey||p.metaKey||p.shiftKey||p.altKey)return;const g=r.findClosestDraggableId(p);if(!g)return;const v=r.tryGetLock(g,l,{sourceEvent:p});if(!v)return;p.preventDefault();const x={x:p.clientX,y:p.clientY};t.current(),f(v,x)}}),[r]),i=_e(()=>({eventName:"webkitmouseforcewillbegin",fn:h=>{if(h.defaultPrevented)return;const p=r.findClosestDraggableId(h);if(!p)return;const g=r.findOptionsForDraggable(p);g&&(g.shouldRespectForcePress||r.canGetLock(p)&&h.preventDefault())}}),[r]),o=Se(function(){const p={passive:!1,capture:!0};t.current=cr(window,[i,n],p)},[i,n]),l=Se(()=>{e.current.type!=="IDLE"&&(e.current=qy,t.current(),o())},[o]),c=Se(()=>{const h=e.current;l(),h.type==="DRAGGING"&&h.actions.cancel({shouldBlockNextClick:!0}),h.type==="PENDING"&&h.actions.abort()},[l]),u=Se(function(){const p={capture:!0,passive:!1},g=LP({cancel:c,completed:l,getPhase:()=>e.current,setPhase:v=>{e.current=v}});t.current=cr(window,g,p)},[c,l]),f=Se(function(p,g){e.current.type!=="IDLE"&&oe(),e.current={type:"PENDING",point:g,actions:p},u()},[u]);Jt(function(){return o(),function(){t.current()}},[o])}function CP(){}const DP={[vP]:!0,[yP]:!0,[bP]:!0,[xP]:!0};function kP(r,e){function t(){e(),r.cancel()}function n(){e(),r.drop()}return[{eventName:"keydown",fn:i=>{if(i.keyCode===Dh){i.preventDefault(),t();return}if(i.keyCode===oE){i.preventDefault(),n();return}if(i.keyCode===IP){i.preventDefault(),r.moveDown();return}if(i.keyCode===SP){i.preventDefault(),r.moveUp();return}if(i.keyCode===wP){i.preventDefault(),r.moveRight();return}if(i.keyCode===EP){i.preventDefault(),r.moveLeft();return}if(DP[i.keyCode]){i.preventDefault();return}aE(i)}},{eventName:"mousedown",fn:t},{eventName:"mouseup",fn:t},{eventName:"click",fn:t},{eventName:"touchstart",fn:t},{eventName:"resize",fn:t},{eventName:"wheel",fn:t,options:{passive:!0}},{eventName:Jl,fn:t}]}function OP(r){const e=M.useRef(CP),t=_e(()=>({eventName:"keydown",fn:function(o){if(o.defaultPrevented||o.keyCode!==oE)return;const l=r.findClosestDraggableId(o);if(!l)return;const c=r.tryGetLock(l,h,{sourceEvent:o});if(!c)return;o.preventDefault();let u=!0;const f=c.snapLift();e.current();function h(){u||oe(),u=!1,e.current(),n()}e.current=cr(window,kP(f,h),{capture:!0,passive:!1})}}),[r]),n=Se(function(){const o={passive:!1,capture:!0};e.current=cr(window,[t],o)},[t]);Jt(function(){return n(),function(){e.current()}},[n])}const _d={type:"IDLE"},PP=120,NP=.15;function MP({cancel:r,getPhase:e}){return[{eventName:"orientationchange",fn:r},{eventName:"resize",fn:r},{eventName:"contextmenu",fn:t=>{t.preventDefault()}},{eventName:"keydown",fn:t=>{if(e().type!=="DRAGGING"){r();return}t.keyCode===Dh&&t.preventDefault(),r()}},{eventName:Jl,fn:r}]}function _P({cancel:r,completed:e,getPhase:t}){return[{eventName:"touchmove",options:{capture:!1},fn:n=>{const i=t();if(i.type!=="DRAGGING"){r();return}i.hasMoved=!0;const{clientX:o,clientY:l}=n.touches[0],c={x:o,y:l};n.preventDefault(),i.actions.move(c)}},{eventName:"touchend",fn:n=>{const i=t();if(i.type!=="DRAGGING"){r();return}n.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),e()}},{eventName:"touchcancel",fn:n=>{if(t().type!=="DRAGGING"){r();return}n.preventDefault(),r()}},{eventName:"touchforcechange",fn:n=>{const i=t();i.type==="IDLE"&&oe();const o=n.touches[0];if(!o||!(o.force>=NP))return;const c=i.actions.shouldRespectForcePress();if(i.type==="PENDING"){c&&r();return}if(c){if(i.hasMoved){n.preventDefault();return}r();return}n.preventDefault()}},{eventName:Jl,fn:r}]}function FP(r){const e=M.useRef(_d),t=M.useRef(kn),n=Se(function(){return e.current},[]),i=Se(function(v){e.current=v},[]),o=_e(()=>({eventName:"touchstart",fn:function(v){if(v.defaultPrevented)return;const x=r.findClosestDraggableId(v);if(!x)return;const b=r.tryGetLock(x,c,{sourceEvent:v});if(!b)return;const S=v.touches[0],{clientX:A,clientY:L}=S,R={x:A,y:L};t.current(),p(b,R)}}),[r]),l=Se(function(){const v={capture:!0,passive:!1};t.current=cr(window,[o],v)},[o]),c=Se(()=>{const g=e.current;g.type!=="IDLE"&&(g.type==="PENDING"&&clearTimeout(g.longPressTimerId),i(_d),t.current(),l())},[l,i]),u=Se(()=>{const g=e.current;c(),g.type==="DRAGGING"&&g.actions.cancel({shouldBlockNextClick:!0}),g.type==="PENDING"&&g.actions.abort()},[c]),f=Se(function(){const v={capture:!0,passive:!1},x={cancel:u,completed:c,getPhase:n},b=cr(window,_P(x),v),S=cr(window,MP(x),v);t.current=function(){b(),S()}},[u,n,c]),h=Se(function(){const v=n();v.type!=="PENDING"&&oe();const x=v.actions.fluidLift(v.point);i({type:"DRAGGING",actions:x,hasMoved:!1})},[n,i]),p=Se(function(v,x){n().type!=="IDLE"&&oe();const b=setTimeout(h,PP);i({type:"PENDING",point:x,actions:v,longPressTimerId:b}),f()},[f,n,i,h]);Jt(function(){return l(),function(){t.current();const x=n();x.type==="PENDING"&&(clearTimeout(x.longPressTimerId),i(_d))}},[n,l,i]),Jt(function(){return cr(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const BP=["input","button","textarea","select","option","optgroup","video","audio"];function cE(r,e){if(e==null)return!1;if(BP.includes(e.tagName.toLowerCase()))return!0;const n=e.getAttribute("contenteditable");return n==="true"||n===""?!0:e===r?!1:cE(r,e.parentElement)}function jP(r,e){const t=e.target;return Xl(t)?cE(r,t):!1}var UP=r=>Ir(r.getBoundingClientRect()).center;function HP(r){return r instanceof iE(r).Element}const $P=(()=>{const r="matches";return typeof document>"u"?r:[r,"msMatchesSelector","webkitMatchesSelector"].find(n=>n in Element.prototype)||r})();function uE(r,e){return r==null?null:r[$P](e)?r:uE(r.parentElement,e)}function GP(r,e){return r.closest?r.closest(e):uE(r,e)}function WP(r){return`[${ss.contextId}="${r}"]`}function VP(r,e){const t=e.target;if(!HP(t))return null;const n=WP(r),i=GP(t,n);return!i||!Xl(i)?null:i}function KP(r,e){const t=VP(r,e);return t?t.getAttribute(ss.draggableId):null}function zP(r,e){const t=`[${Lf.contextId}="${r}"]`,i=nE(document,t).find(o=>o.getAttribute(Lf.id)===e);return!i||!Xl(i)?null:i}function YP(r){r.preventDefault()}function Qa({expected:r,phase:e,isLockActive:t,shouldWarn:n}){return!(!t()||r!==e)}function dE({lockAPI:r,store:e,registry:t,draggableId:n}){if(r.isClaimed())return!1;const i=t.draggable.findById(n);return!(!i||!i.options.isEnabled||!Qb(e.getState(),n))}function qP({lockAPI:r,contextId:e,store:t,registry:n,draggableId:i,forceSensorStop:o,sourceEvent:l}){if(!dE({lockAPI:r,store:t,registry:n,draggableId:i}))return null;const u=n.draggable.getById(i),f=zP(e,u.descriptor.id);if(!f||l&&!u.options.canDragInteractiveElements&&jP(f,l))return null;const h=r.claim(o||kn);let p="PRE_DRAG";function g(){return u.options.shouldRespectForcePress}function v(){return r.isActive(h)}function x(C,F){Qa({expected:C,phase:p,isLockActive:v,shouldWarn:!0})&&t.dispatch(F())}const b=x.bind(null,"DRAGGING");function S(C){function F(){r.release(),p="COMPLETED"}p!=="PRE_DRAG"&&(F(),oe()),t.dispatch(G2(C.liftActionArgs)),p="DRAGGING";function _(z,te={shouldBlockNextClick:!1}){if(C.cleanup(),te.shouldBlockNextClick){const U=cr(window,[{eventName:"click",fn:YP,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(U)}F(),t.dispatch(Vb({reason:z}))}return{isActive:()=>Qa({expected:"DRAGGING",phase:p,isLockActive:v,shouldWarn:!1}),shouldRespectForcePress:g,drop:z=>_("DROP",z),cancel:z=>_("CANCEL",z),...C.actions}}function A(C){const F=go(z=>{b(()=>Wb({client:z}))});return{...S({liftActionArgs:{id:i,clientSelection:C,movementMode:"FLUID"},cleanup:()=>F.cancel(),actions:{move:F}}),move:F}}function L(){const C={moveUp:()=>b(J2),moveRight:()=>b(eO),moveDown:()=>b(Q2),moveLeft:()=>b(tO)};return S({liftActionArgs:{id:i,clientSelection:UP(f),movementMode:"SNAP"},cleanup:kn,actions:C})}function R(){Qa({expected:"PRE_DRAG",phase:p,isLockActive:v,shouldWarn:!0})&&r.release()}return{isActive:()=>Qa({expected:"PRE_DRAG",phase:p,isLockActive:v,shouldWarn:!1}),shouldRespectForcePress:g,fluidLift:A,snapLift:L,abort:R}}const XP=[RP,OP,FP];function ZP({contextId:r,store:e,registry:t,customSensors:n,enableDefaultSensors:i}){const o=[...i?XP:[],...n||[]],l=M.useState(()=>pP())[0],c=Se(function(S,A){So(S)&&!So(A)&&l.tryAbandon()},[l]);Jt(function(){let S=e.getState();return e.subscribe(()=>{const L=e.getState();c(S,L),S=L})},[l,e,c]),Jt(()=>l.tryAbandon,[l.tryAbandon]);const u=Se(b=>dE({lockAPI:l,registry:t,store:e,draggableId:b}),[l,t,e]),f=Se((b,S,A)=>qP({lockAPI:l,registry:t,contextId:r,store:e,draggableId:b,forceSensorStop:S||null,sourceEvent:A&&A.sourceEvent?A.sourceEvent:null}),[r,l,t,e]),h=Se(b=>KP(r,b),[r]),p=Se(b=>{const S=t.draggable.findById(b);return S?S.options:null},[t.draggable]),g=Se(function(){l.isClaimed()&&(l.tryAbandon(),e.getState().phase!=="IDLE"&&e.dispatch(Eh()))},[l,e]),v=Se(()=>l.isClaimed(),[l]),x=_e(()=>({canGetLock:u,tryGetLock:f,findClosestDraggableId:h,findOptionsForDraggable:p,tryReleaseLock:g,isLockClaimed:v}),[u,f,h,p,g,v]);for(let b=0;b<o.length;b++)o[b](x)}const JP=r=>({onBeforeCapture:e=>{const t=()=>{r.onBeforeCapture&&r.onBeforeCapture(e)};Df.flushSync(t)},onBeforeDragStart:r.onBeforeDragStart,onDragStart:r.onDragStart,onDragEnd:r.onDragEnd,onDragUpdate:r.onDragUpdate}),QP=r=>({...Eo,...r.autoScrollerOptions,durationDampening:{...Eo.durationDampening,...r.autoScrollerOptions}});function eo(r){return r.current||oe(),r.current}function eN(r){const{contextId:e,setCallbacks:t,sensors:n,nonce:i,dragHandleUsageInstructions:o}=r,l=M.useRef(null),c=sE(r),u=Se(()=>JP(c.current),[c]),f=Se(()=>QP(c.current),[c]),h=uP(e),p=hP({contextId:e,text:o}),g=nP(e,i),v=Se(U=>{eo(l).dispatch(U)},[]),x=_e(()=>Ey({publishWhileDragging:V2,updateDroppableScroll:z2,updateDroppableIsEnabled:Y2,updateDroppableIsCombineEnabled:q2,collectionStarting:K2},v),[v]),b=aP(),S=_e(()=>MO(b,x),[b,x]),A=_e(()=>JO({scrollWindow:_O,scrollDroppable:S.scrollDroppable,getAutoScrollerOptions:f,...Ey({move:Wb},v)}),[S.scrollDroppable,v,f]),L=sP(e),R=_e(()=>kO({announce:h,autoScroller:A,dimensionMarshal:S,focusMarshal:L,getResponders:u,styleMarshal:g}),[h,A,S,L,u,g]);l.current=R;const k=Se(()=>{const U=eo(l);U.getState().phase!=="IDLE"&&U.dispatch(Eh())},[]),C=Se(()=>{const U=eo(l).getState();return U.phase==="DROP_ANIMATING"?!0:U.phase==="IDLE"?!1:U.isDragging},[]),F=_e(()=>({isDragging:C,tryAbort:k}),[C,k]);t(F);const _=Se(U=>Qb(eo(l).getState(),U),[]),z=Se(()=>ri(eo(l).getState()),[]),te=_e(()=>({marshal:S,focus:L,contextId:e,canLift:_,isMovementAllowed:z,dragHandleUsageInstructionsId:p,registry:b}),[e,S,p,L,_,z,b]);return ZP({contextId:e,store:R,registry:b,customSensors:n||null,enableDefaultSensors:r.enableDefaultSensors!==!1}),M.useEffect(()=>k,[k]),Ze.createElement(Zl.Provider,{value:te},Ze.createElement(Ak,{context:Rh,store:R},r.children))}function tN(){return Ze.useId()}function rN(r){const e=tN(),t=r.dragHandleUsageInstructions||dl.dragHandleUsageInstructions;return Ze.createElement(Ok,null,n=>Ze.createElement(eN,{nonce:r.nonce,contextId:e,setCallbacks:n,dragHandleUsageInstructions:t,enableDefaultSensors:r.enableDefaultSensors,sensors:r.sensors,onBeforeCapture:r.onBeforeCapture,onBeforeDragStart:r.onBeforeDragStart,onDragStart:r.onDragStart,onDragUpdate:r.onDragUpdate,onDragEnd:r.onDragEnd,autoScrollerOptions:r.autoScrollerOptions},r.children))}const Xy={dragging:5e3,dropAnimating:4500},nN=(r,e)=>e?ao.drop(e.duration):r?ao.snap:ao.fluid,iN=(r,e)=>{if(r)return e?bo.opacity.drop:bo.opacity.combining},sN=r=>r.forceShouldAnimate!=null?r.forceShouldAnimate:r.mode==="SNAP";function oN(r){const t=r.dimension.client,{offset:n,combineWith:i,dropping:o}=r,l=!!i,c=sN(r),u=!!o,f=u?Af.drop(n,l):Af.moveTo(n);return{position:"fixed",top:t.marginBox.top,left:t.marginBox.left,boxSizing:"border-box",width:t.borderBox.width,height:t.borderBox.height,transition:nN(c,o),transform:f,opacity:iN(l,u),zIndex:u?Xy.dropAnimating:Xy.dragging,pointerEvents:"none"}}function aN(r){return{transform:Af.moveTo(r.offset),transition:r.shouldAnimateDisplacement?void 0:"none"}}function lN(r){return r.type==="DRAGGING"?oN(r):aN(r)}function cN(r,e,t=bt){const n=window.getComputedStyle(e),i=e.getBoundingClientRect(),o=vb(i,n),l=kl(o,t),c={client:o,tagName:e.tagName.toLowerCase(),display:n.display},u={x:o.marginBox.width,y:o.marginBox.height};return{descriptor:r,placeholder:c,displaceBy:u,client:o,page:l}}function uN(r){const e=Ch("draggable"),{descriptor:t,registry:n,getDraggableRef:i,canDragInteractiveElements:o,shouldRespectForcePress:l,isEnabled:c}=r,u=_e(()=>({canDragInteractiveElements:o,shouldRespectForcePress:l,isEnabled:c}),[o,c,l]),f=Se(v=>{const x=i();return x||oe(),cN(t,x,v)},[t,i]),h=_e(()=>({uniqueId:e,descriptor:t,options:u,getDimension:f}),[t,f,u,e]),p=M.useRef(h),g=M.useRef(!0);Jt(()=>(n.draggable.register(p.current),()=>n.draggable.unregister(p.current)),[n.draggable]),Jt(()=>{if(g.current){g.current=!1;return}const v=p.current;p.current=h,n.draggable.update(h,v)},[h,n.draggable])}var kh=Ze.createContext(null);function Fl(r){const e=M.useContext(r);return e||oe(),e}function dN(r){r.preventDefault()}const fN=r=>{const e=M.useRef(null),t=Se((F=null)=>{e.current=F},[]),n=Se(()=>e.current,[]),{contextId:i,dragHandleUsageInstructionsId:o,registry:l}=Fl(Zl),{type:c,droppableId:u}=Fl(kh),f=_e(()=>({id:r.draggableId,index:r.index,type:c,droppableId:u}),[r.draggableId,r.index,c,u]),{children:h,draggableId:p,isEnabled:g,shouldRespectForcePress:v,canDragInteractiveElements:x,isClone:b,mapped:S,dropAnimationFinished:A}=r;if(!b){const F=_e(()=>({descriptor:f,registry:l,getDraggableRef:n,canDragInteractiveElements:x,shouldRespectForcePress:v,isEnabled:g}),[f,l,n,x,v,g]);uN(F)}const L=_e(()=>g?{tabIndex:0,role:"button","aria-describedby":o,"data-rfd-drag-handle-draggable-id":p,"data-rfd-drag-handle-context-id":i,draggable:!1,onDragStart:dN}:null,[i,o,p,g]),R=Se(F=>{S.type==="DRAGGING"&&S.dropping&&F.propertyName==="transform"&&Df.flushSync(A)},[A,S]),k=_e(()=>{const F=lN(S),_=S.type==="DRAGGING"&&S.dropping?R:void 0;return{innerRef:t,draggableProps:{"data-rfd-draggable-context-id":i,"data-rfd-draggable-id":p,style:F,onTransitionEnd:_},dragHandleProps:L}},[i,L,p,S,R,t]),C=_e(()=>({draggableId:f.id,type:f.type,source:{index:f.index,droppableId:f.droppableId}}),[f.droppableId,f.id,f.index,f.type]);return Ze.createElement(Ze.Fragment,null,h(k,S.snapshot,C))};var fE=(r,e)=>r===e,hE=r=>{const{combine:e,destination:t}=r;return t?t.droppableId:e?e.droppableId:null};const hN=r=>r.combine?r.combine.draggableId:null,pN=r=>r.at&&r.at.type==="COMBINE"?r.at.combine.draggableId:null;function mN(){const r=vt((i,o)=>({x:i,y:o})),e=vt((i,o,l=null,c=null,u=null)=>({isDragging:!0,isClone:o,isDropAnimating:!!u,dropAnimation:u,mode:i,draggingOver:l,combineWith:c,combineTargetFor:null})),t=vt((i,o,l,c,u=null,f=null,h=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:u,combineWith:f,mode:o,offset:i,dimension:l,forceShouldAnimate:h,snapshot:e(o,c,u,f,null)}}));return(i,o)=>{if(So(i)){if(i.critical.draggable.id!==o.draggableId)return null;const l=i.current.client.offset,c=i.dimensions.draggables[o.draggableId],u=Zt(i.impact),f=pN(i.impact),h=i.forceShouldAnimate;return t(r(l.x,l.y),i.movementMode,c,o.isClone,u,f,h)}if(i.phase==="DROP_ANIMATING"){const l=i.completed;if(l.result.draggableId!==o.draggableId)return null;const c=o.isClone,u=i.dimensions.draggables[o.draggableId],f=l.result,h=f.mode,p=hE(f),g=hN(f),x={duration:i.dropDuration,curve:wh.drop,moveTo:i.newHomeClientOffset,opacity:g?bo.opacity.drop:null,scale:g?bo.scale.drop:null};return{mapped:{type:"DRAGGING",offset:i.newHomeClientOffset,dimension:u,dropping:x,draggingOver:p,combineWith:g,mode:h,forceShouldAnimate:null,snapshot:e(h,c,p,g,x)}}}return null}}function pE(r=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:r,combineWith:null}}const gN={mapped:{type:"SECONDARY",offset:bt,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:pE(null)}};function yN(){const r=vt((l,c)=>({x:l,y:c})),e=vt(pE),t=vt((l,c=null,u)=>({mapped:{type:"SECONDARY",offset:l,combineTargetFor:c,shouldAnimateDisplacement:u,snapshot:e(c)}})),n=l=>l?t(bt,l,!0):null,i=(l,c,u,f)=>{const h=u.displaced.visible[l],p=!!(f.inVirtualList&&f.effected[l]),g=zl(u),v=g&&g.draggableId===l?c:null;if(!h){if(!p)return n(v);if(u.displaced.invisible[l])return null;const S=ls(f.displacedBy.point),A=r(S.x,S.y);return t(A,v,!0)}if(p)return n(v);const x=u.displacedBy.point,b=r(x.x,x.y);return t(b,v,h.shouldAnimate)};return(l,c)=>{if(So(l))return l.critical.draggable.id===c.draggableId?null:i(c.draggableId,l.critical.draggable.id,l.impact,l.afterCritical);if(l.phase==="DROP_ANIMATING"){const u=l.completed;return u.result.draggableId===c.draggableId?null:i(c.draggableId,u.result.draggableId,u.impact,u.afterCritical)}return null}}const vN=()=>{const r=mN(),e=yN();return(n,i)=>r(n,i)||e(n,i)||gN},xN={dropAnimationFinished:Kb},bN=yb(vN,xN,null,{context:Rh,areStatePropsEqual:fE})(fN);function mE(r){return Fl(kh).isUsingCloneFor===r.draggableId&&!r.isClone?null:Ze.createElement(bN,r)}function EN(r){const e=typeof r.isDragDisabled=="boolean"?!r.isDragDisabled:!0,t=!!r.disableInteractiveElementBlocking,n=!!r.shouldRespectForcePress;return Ze.createElement(mE,Ol({},r,{isClone:!1,isEnabled:e,canDragInteractiveElements:t,shouldRespectForcePress:n}))}const gE=r=>e=>r===e,SN=gE("scroll"),wN=gE("auto"),Zy=(r,e)=>e(r.overflowX)||e(r.overflowY),IN=r=>{const e=window.getComputedStyle(r),t={overflowX:e.overflowX,overflowY:e.overflowY};return Zy(t,SN)||Zy(t,wN)},AN=()=>!1,yE=r=>r==null?null:r===document.body?AN()?r:null:r===document.documentElement?null:IN(r)?r:yE(r.parentElement);var Rf=r=>({x:r.scrollLeft,y:r.scrollTop});const vE=r=>r?window.getComputedStyle(r).position==="fixed"?!0:vE(r.parentElement):!1;var TN=r=>{const e=yE(r),t=vE(r);return{closestScrollable:e,isFixedOnPage:t}},LN=({descriptor:r,isEnabled:e,isCombineEnabled:t,isFixedOnPage:n,direction:i,client:o,page:l,closest:c})=>{const u=(()=>{if(!c)return null;const{scrollSize:g,client:v}=c,x=Xb({scrollHeight:g.scrollHeight,scrollWidth:g.scrollWidth,height:v.paddingBox.height,width:v.paddingBox.width});return{pageMarginBox:c.page.marginBox,frameClient:v,scrollSize:g,shouldClipSubject:c.shouldClipSubject,scroll:{initial:c.scroll,current:c.scroll,max:x,diff:{value:bt,displacement:bt}}}})(),f=i==="vertical"?gh:Cb,h=ns({page:l,withPlaceholder:null,axis:f,frame:u});return{descriptor:r,isCombineEnabled:t,isFixedOnPage:n,axis:f,isEnabled:e,client:o,page:l,frame:u,subject:h}};const RN=(r,e)=>{const t=xb(r);if(!e||r!==e)return t;const n=t.paddingBox.top-e.scrollTop,i=t.paddingBox.left-e.scrollLeft,o=n+e.scrollHeight,l=i+e.scrollWidth,u=fh({top:n,right:l,bottom:o,left:i},t.border);return hh({borderBox:u,margin:t.margin,border:t.border,padding:t.padding})};var CN=({ref:r,descriptor:e,env:t,windowScroll:n,direction:i,isDropDisabled:o,isCombineEnabled:l,shouldClipSubject:c})=>{const u=t.closestScrollable,f=RN(r,u),h=kl(f,n),p=(()=>{if(!u)return null;const v=xb(u),x={scrollHeight:u.scrollHeight,scrollWidth:u.scrollWidth};return{client:v,page:kl(v,n),scroll:Rf(u),scrollSize:x,shouldClipSubject:c}})();return LN({descriptor:e,isEnabled:!o,isCombineEnabled:l,isFixedOnPage:t.isFixedOnPage,direction:i,client:f,page:h,closest:p})};const DN={passive:!1},kN={passive:!0};var Jy=r=>r.shouldPublishImmediately?DN:kN;const el=r=>r&&r.env.closestScrollable||null;function ON(r){const e=M.useRef(null),t=Fl(Zl),n=Ch("droppable"),{registry:i,marshal:o}=t,l=sE(r),c=_e(()=>({id:r.droppableId,type:r.type,mode:r.mode}),[r.droppableId,r.mode,r.type]),u=M.useRef(c),f=_e(()=>vt((k,C)=>{e.current||oe();const F={x:k,y:C};o.updateDroppableScroll(c.id,F)}),[c.id,o]),h=Se(()=>{const k=e.current;return!k||!k.env.closestScrollable?bt:Rf(k.env.closestScrollable)},[]),p=Se(()=>{const k=h();f(k.x,k.y)},[h,f]),g=_e(()=>go(p),[p]),v=Se(()=>{const k=e.current,C=el(k);if(k&&C||oe(),k.scrollOptions.shouldPublishImmediately){p();return}g()},[g,p]),x=Se((k,C)=>{e.current&&oe();const F=l.current,_=F.getDroppableRef();_||oe();const z=TN(_),te={ref:_,descriptor:c,env:z,scrollOptions:C};e.current=te;const U=CN({ref:_,descriptor:c,env:z,windowScroll:k,direction:F.direction,isDropDisabled:F.isDropDisabled,isCombineEnabled:F.isCombineEnabled,shouldClipSubject:!F.ignoreContainerClipping}),q=z.closestScrollable;return q&&(q.setAttribute(Ky.contextId,t.contextId),q.addEventListener("scroll",v,Jy(te.scrollOptions))),U},[t.contextId,c,v,l]),b=Se(()=>{const k=e.current,C=el(k);return k&&C||oe(),Rf(C)},[]),S=Se(()=>{const k=e.current;k||oe();const C=el(k);e.current=null,C&&(g.cancel(),C.removeAttribute(Ky.contextId),C.removeEventListener("scroll",v,Jy(k.scrollOptions)))},[v,g]),A=Se(k=>{const C=e.current;C||oe();const F=el(C);F||oe(),F.scrollTop+=k.y,F.scrollLeft+=k.x},[]),L=_e(()=>({getDimensionAndWatchScroll:x,getScrollWhileDragging:b,dragStopped:S,scroll:A}),[S,x,b,A]),R=_e(()=>({uniqueId:n,descriptor:c,callbacks:L}),[L,c,n]);Jt(()=>(u.current=R.descriptor,i.droppable.register(R),()=>{e.current&&S(),i.droppable.unregister(R)}),[L,c,S,R,o,i.droppable]),Jt(()=>{e.current&&o.updateDroppableIsEnabled(u.current.id,!r.isDropDisabled)},[r.isDropDisabled,o]),Jt(()=>{e.current&&o.updateDroppableIsCombineEnabled(u.current.id,r.isCombineEnabled)},[r.isCombineEnabled,o])}function Fd(){}const Qy={width:0,height:0,margin:jk},PN=({isAnimatingOpenOnMount:r,placeholder:e,animate:t})=>r||t==="close"?Qy:{height:e.client.borderBox.height,width:e.client.borderBox.width,margin:e.client.margin},NN=({isAnimatingOpenOnMount:r,placeholder:e,animate:t})=>{const n=PN({isAnimatingOpenOnMount:r,placeholder:e,animate:t});return{display:e.display,boxSizing:"border-box",width:n.width,height:n.height,marginTop:n.margin.top,marginRight:n.margin.right,marginBottom:n.margin.bottom,marginLeft:n.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:t!=="none"?ao.placeholder:null}},MN=r=>{const e=M.useRef(null),t=Se(()=>{e.current&&(clearTimeout(e.current),e.current=null)},[]),{animate:n,onTransitionEnd:i,onClose:o,contextId:l}=r,[c,u]=M.useState(r.animate==="open");M.useEffect(()=>c?n!=="open"?(t(),u(!1),Fd):e.current?Fd:(e.current=setTimeout(()=>{e.current=null,u(!1)}),t):Fd,[n,c,t]);const f=Se(p=>{p.propertyName==="height"&&(i(),n==="close"&&o())},[n,o,i]),h=NN({isAnimatingOpenOnMount:c,animate:r.animate,placeholder:r.placeholder});return Ze.createElement(r.placeholder.tagName,{style:h,"data-rfd-placeholder-context-id":l,onTransitionEnd:f,ref:r.innerRef})};var _N=Ze.memo(MN);class FN extends Ze.PureComponent{constructor(...e){super(...e),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(e,t){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:t.isVisible?{isVisible:!0,data:t.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!e.on,data:e.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)}}const BN=r=>{const e=M.useContext(Zl);e||oe();const{contextId:t,isMovementAllowed:n}=e,i=M.useRef(null),o=M.useRef(null),{children:l,droppableId:c,type:u,mode:f,direction:h,ignoreContainerClipping:p,isDropDisabled:g,isCombineEnabled:v,snapshot:x,useClone:b,updateViewportMaxScroll:S,getContainerForClone:A}=r,L=Se(()=>i.current,[]),R=Se((q=null)=>{i.current=q},[]);Se(()=>o.current,[]);const k=Se((q=null)=>{o.current=q},[]),C=Se(()=>{n()&&S({maxScroll:Jb()})},[n,S]);ON({droppableId:c,type:u,mode:f,direction:h,isDropDisabled:g,isCombineEnabled:v,ignoreContainerClipping:p,getDroppableRef:L});const F=_e(()=>Ze.createElement(FN,{on:r.placeholder,shouldAnimate:r.shouldAnimatePlaceholder},({onClose:q,data:le,animate:re})=>Ze.createElement(_N,{placeholder:le,onClose:q,innerRef:k,animate:re,contextId:t,onTransitionEnd:C})),[t,C,r.placeholder,r.shouldAnimatePlaceholder,k]),_=_e(()=>({innerRef:R,placeholder:F,droppableProps:{"data-rfd-droppable-id":c,"data-rfd-droppable-context-id":t}}),[t,c,F,R]),z=b?b.dragging.draggableId:null,te=_e(()=>({droppableId:c,type:u,isUsingCloneFor:z}),[c,z,u]);function U(){if(!b)return null;const{dragging:q,render:le}=b,re=Ze.createElement(mE,{draggableId:q.draggableId,index:q.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(pe,de)=>le(pe,de,q));return T1.createPortal(re,A())}return Ze.createElement(kh.Provider,{value:te},l(_,x),U())};function jN(){return document.body||oe(),document.body}const ev={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:jN},xE=r=>{let e={...r},t;for(t in ev)r[t]===void 0&&(e={...e,[t]:ev[t]});return e},Bd=(r,e)=>r===e.droppable.type,tv=(r,e)=>e.draggables[r.draggable.id],UN=()=>{const r={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},e={...r,shouldAnimatePlaceholder:!1},t=vt(o=>({draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}})),n=vt((o,l,c,u,f,h)=>{const p=f.descriptor.id;if(f.descriptor.droppableId===o){const x=h?{render:h,dragging:t(f.descriptor)}:null,b={isDraggingOver:c,draggingOverWith:c?p:null,draggingFromThisWith:p,isUsingPlaceholder:!0};return{placeholder:f.placeholder,shouldAnimatePlaceholder:!1,snapshot:b,useClone:x}}if(!l)return e;if(!u)return r;const v={isDraggingOver:c,draggingOverWith:p,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:f.placeholder,shouldAnimatePlaceholder:!0,snapshot:v,useClone:null}});return(o,l)=>{const c=xE(l),u=c.droppableId,f=c.type,h=!c.isDropDisabled,p=c.renderClone;if(So(o)){const g=o.critical;if(!Bd(f,g))return e;const v=tv(g,o.dimensions),x=Zt(o.impact)===u;return n(u,h,x,x,v,p)}if(o.phase==="DROP_ANIMATING"){const g=o.completed;if(!Bd(f,g.critical))return e;const v=tv(g.critical,o.dimensions);return n(u,h,hE(g.result)===u,Zt(g.impact)===u,v,p)}if(o.phase==="IDLE"&&o.completed&&!o.shouldFlush){const g=o.completed;if(!Bd(f,g.critical))return e;const v=Zt(g.impact)===u,x=!!(g.impact.at&&g.impact.at.type==="COMBINE"),b=g.critical.droppable.id===u;return v?x?r:e:b?r:e}return e}},HN={updateViewportMaxScroll:Z2},$N=yb(UN,HN,(r,e,t)=>({...xE(t),...r,...e}),{context:Rh,areStatePropsEqual:fE})(BN),GN=({isOpen:r,onClose:e,onConfirm:t,title:n,message:i,confirmText:o="Delete",cancelText:l="Cancel",isDanger:c=!0})=>{const[u,f]=M.useState(!1);if(!r)return null;const h=()=>{f(!0),setTimeout(()=>{f(!1),e()},200)},p=()=>{f(!0),setTimeout(()=>{f(!1),t()},200)};return w.jsxs("div",{className:`fixed inset-0 z-50 flex items-center justify-center p-4 transition-opacity duration-200 ${u?"opacity-0":"opacity-100"}`,children:[w.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:h}),w.jsxs("div",{className:`relative bg-gray-800 rounded-xl shadow-2xl max-w-md w-full p-6 transform transition-all duration-200 ${u?"scale-95":"scale-100"}`,children:[w.jsx("div",{className:`mx-auto w-12 h-12 rounded-full flex items-center justify-center ${c?"bg-red-500/20":"bg-blue-500/20"}`,children:c?w.jsx("svg",{className:"w-6 h-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}):w.jsx("svg",{className:"w-6 h-6 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),w.jsx("h3",{className:"mt-4 text-xl font-semibold text-white text-center",children:n}),w.jsx("p",{className:"mt-2 text-gray-400 text-center",children:i}),w.jsxs("div",{className:"mt-6 flex gap-3",children:[w.jsx("button",{onClick:h,className:"flex-1 px-4 py-3 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors font-medium",children:l}),w.jsx("button",{onClick:p,className:`flex-1 px-4 py-3 rounded-lg transition-colors font-medium ${c?"bg-red-600 text-white hover:bg-red-700":"bg-blue-600 text-white hover:bg-blue-700"}`,children:o})]})]})]})};function WN(){const[r,e]=M.useState([]),[t,n]=M.useState(!0),[i,o]=M.useState({id:null,title:"",area:"",description:"",category:"architectural",coverVideo:null,coverVideoPreview:null,mediaItems:[]}),[l,c]=M.useState(!1),[u,f]=M.useState(!1),[h,p]=M.useState(!1),[g,v]=M.useState(""),[x,b]=M.useState(0),[S,A]=M.useState(null),[L,R]=M.useState(null),[k,C]=M.useState("all"),[F,_]=M.useState(""),[z,te]=M.useState({isOpen:!1,project:null}),U=oD(),q=()=>"admin123",le=[{value:"architectural",label:"Architectural Design",icon:""},{value:"interior",label:"Interior Design",icon:""},{value:"fit",label:"Fit-Out Interiors",icon:""}],re=Y=>{if(!Y)return null;if(Y.startsWith("http://")||Y.startsWith("https://"))return Y;const se="https://attractivehomeawstestbucket.s3.me-central-1.amazonaws.com",Oe=Y.startsWith("/")?"":"/";return`${se}${Oe}${Y}`};M.useEffect(()=>{pe()},[]);const pe=async()=>{try{n(!0),A(null);const Y=await lb(),se=3,Oe=[];for(let it=0;it<Y.projects.length;it+=se){const Ke=Y.projects.slice(it,it+se),Nt=await Promise.all(Ke.map(async Mt=>{try{return{...await ch(Mt.category,Mt.id),category:Mt.category}}catch(je){return console.error(`Failed to load project ${Mt.id}:`,je),{...Mt,title:Mt.title||Mt.id}}}));Oe.push(...Nt)}e(Oe)}catch(Y){console.error("Failed to load projects:",Y),A("Failed to load projects"),U.error("Failed to load projects. Please refresh the page.")}finally{n(!1)}},de=Y=>{const se=Y.target.files[0];se&&o({...i,coverVideo:se,coverVideoPreview:URL.createObjectURL(se)})},ce=Y=>{const Oe=Array.from(Y.target.files).map((it,Ke)=>({id:Date.now()+Ke,file:it,type:it.type.startsWith("image/")?"image":"video",preview:URL.createObjectURL(it)}));o({...i,mediaItems:[...i.mediaItems,...Oe]})},xe=Y=>{o({...i,mediaItems:i.mediaItems.filter(se=>se.id!==Y)})},Z=Y=>{if(!Y.destination)return;const se=Array.from(i.mediaItems),[Oe]=se.splice(Y.source.index,1);se.splice(Y.destination.index,0,Oe),o({...i,mediaItems:se})},X=async Y=>{if(Y.preventDefault(),!i.title.trim()){U.warning("Please enter a project title");return}if(!l&&!i.coverVideo){U.warning("Please select a cover video");return}try{p(!0),b(0);const se=[];i.coverVideo&&se.push({filename:`cover.${i.coverVideo.name.split(".").pop()}`,contentType:i.coverVideo.type,type:"cover",file:i.coverVideo}),i.mediaItems.forEach((je,fr)=>{je.file&&se.push({filename:`media_${fr+1}.${je.file.name.split(".").pop()}`,contentType:je.file.type,type:"media",file:je.file})});const Oe=i.id||`project-${Date.now()}`;let it=[];if(se.length>0){v("Getting upload URLs...");const je=await mD(i.category,Oe,se.map(fr=>({filename:fr.filename,type:fr.type,contentType:fr.contentType})),q());it=je.uploadUrls||je||[]}const Ke=se.length;for(let je=0;je<se.length;je++){const fr=se[je];v(`Uploading ${fr.filename}...`);const pi=it[je]?.uploadUrl;if(pi){const Ro=Math.round(je/Ke*80),ds=80/Ke;await gD(pi,fr.file,jn=>{const sn=Ro+Math.round(jn/100*ds);b(sn)})}b(Math.round((je+1)/Ke*80))}v("Saving project...");const Nt=i.mediaItems.filter(je=>!je.file&&je.preview&&(je.preview.startsWith("http")||je.preview.startsWith("projects/"))).map(je=>({type:je.type,src:je.preview})),Mt={id:Oe,category:i.category,title:i.title,area:i.area,description:i.description,mediaCount:i.mediaItems.filter(je=>je.file).length,hasCover:!!i.coverVideo,media:l?Nt:void 0};l?(await hD(i.category,Oe,Mt,q()),U.success("Project updated successfully!")):(await fD(Mt,q()),U.success("Project created successfully!")),b(100),await pe(),V()}catch(se){console.error("Error saving project:",se),U.error("Error saving project: "+se.message)}finally{p(!1),v(""),b(0)}},V=()=>{o({id:null,title:"",area:"",description:"",category:"architectural",coverVideo:null,coverVideoPreview:null,mediaItems:[]}),c(!1),f(!1)},P=Y=>{o({id:Y.id,title:Y.title||"",area:Y.area||"",description:Y.description||"",category:Y.category,coverVideo:null,coverVideoPreview:Y.cover||null,mediaItems:(Y.media||[]).map((se,Oe)=>({id:`existing-${Oe}`,type:se.type,preview:se.src,file:null}))}),c(!0),f(!0)},G=Y=>{te({isOpen:!0,project:Y})},ae=async()=>{const Y=z.project;te({isOpen:!1,project:null});try{R(Y.id),await pD(Y.category,Y.id,q()),await pe(),U.success(`"${Y.title||Y.id}" deleted successfully`)}catch(se){console.error("Error deleting project:",se),U.error("Error deleting project: "+se.message)}finally{R(null)}},ge=()=>{let Y=r;if(k!=="all"&&(Y=Y.filter(se=>se.category===k)),F.trim()){const se=F.toLowerCase();Y=Y.filter(Oe=>(Oe.title||Oe.id).toLowerCase().includes(se)||(Oe.description||"").toLowerCase().includes(se))}return Y},Ee=(()=>{const Y={all:r.length};return le.forEach(se=>{Y[se.value]=r.filter(Oe=>Oe.category===se.value).length}),Y})(),De=ge();return t&&r.length===0?w.jsx("div",{className:"min-h-screen bg-[#0d2637] pt-36 px-4 sm:px-6 lg:px-8 flex items-center justify-center",children:w.jsxs("div",{className:"flex flex-col items-center gap-4",children:[w.jsx("div",{className:"w-12 h-12 border-4 border-[#C4864A] border-t-transparent rounded-full animate-spin"}),w.jsx("p",{className:"text-[#F5E6D3] text-lg",children:"Loading projects..."})]})}):w.jsxs("div",{className:"min-h-screen bg-[#0d2637] pt-36 pb-16 px-4 sm:px-6 lg:px-8",children:[w.jsxs("div",{className:"max-w-7xl mx-auto",children:[w.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8",children:[w.jsxs("div",{children:[w.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-[#F5E6D3] tracking-wide",children:"PORTFOLIO DASHBOARD"}),w.jsx("p",{className:"text-[#E6C9A8] mt-1",children:"Manage your projects and media"})]}),w.jsx("button",{onClick:()=>f(!u),className:`px-6 py-3 rounded-lg font-semibold transition-all duration-200 flex items-center gap-2 ${u?"bg-[#143344] text-[#F5E6D3] hover:bg-[#091a26]":"bg-[#8B4513] text-white hover:bg-[#723A10] shadow-lg shadow-[#723A10]/30"}`,children:u?w.jsxs(w.Fragment,{children:[w.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),"View Projects"]}):w.jsxs(w.Fragment,{children:[w.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Project"]})})]}),!u&&w.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-8",children:[w.jsxs("div",{onClick:()=>C("all"),className:`p-4 rounded-xl cursor-pointer transition-all duration-200 ${k==="all"?"bg-[#8B4513] shadow-lg shadow-[#723A10]/30":"bg-[#143344] hover:bg-[#091a26]"}`,children:[w.jsx("p",{className:"text-3xl font-bold text-[#F5E6D3]",children:Ee.all}),w.jsx("p",{className:"text-sm text-[#E6C9A8] mt-1",children:"All Projects"})]}),le.map(Y=>w.jsxs("div",{onClick:()=>C(Y.value),className:`p-4 rounded-xl cursor-pointer transition-all duration-200 ${k===Y.value?"bg-[#8B4513] shadow-lg shadow-[#723A10]/30":"bg-[#143344] hover:bg-[#091a26]"}`,children:[w.jsxs("p",{className:"text-3xl font-bold text-[#F5E6D3]",children:[w.jsx("span",{className:"mr-2",children:Y.icon}),Ee[Y.value]]}),w.jsx("p",{className:"text-sm text-[#E6C9A8] mt-1 truncate",children:Y.label})]},Y.value))]}),!u&&w.jsx("div",{className:"mb-6",children:w.jsxs("div",{className:"relative",children:[w.jsx("svg",{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-[#D4A574]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),w.jsx("input",{type:"text",placeholder:"Search projects...",value:F,onChange:Y=>_(Y.target.value),className:"w-full pl-12 pr-4 py-3 bg-[#143344] text-[#F5E6D3] placeholder-[#D4A574] rounded-xl border border-[#5A2E0D] focus:border-[#C4864A] focus:ring-2 focus:ring-[#8B4513]/20 focus:outline-none transition-all"})]})}),h&&w.jsxs("div",{className:"mb-8 bg-[#143344] backdrop-blur rounded-xl p-6 border border-[#5A2E0D]",children:[w.jsxs("div",{className:"flex justify-between text-[#F5E6D3] mb-3",children:[w.jsx("span",{className:"font-medium",children:g}),w.jsxs("span",{className:"text-[#C4864A] font-bold",children:[x,"%"]})]}),w.jsx("div",{className:"w-full bg-[#091a26] rounded-full h-3 overflow-hidden",children:w.jsx("div",{className:"bg-gradient-to-r from-[#C4864A] to-[#8B4513] h-3 rounded-full transition-all duration-300 ease-out",style:{width:`${x}%`}})})]}),u?w.jsxs("div",{className:"bg-[#143344] backdrop-blur rounded-2xl shadow-xl p-6 sm:p-8 border border-[#5A2E0D]",children:[w.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:l?"Edit Project":"Create New Project"}),w.jsxs("form",{onSubmit:X,className:"space-y-6",children:[w.jsxs("div",{children:[w.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Cover Video ",w.jsx("span",{className:"text-red-400",children:"*"}),w.jsx("span",{className:"text-gray-500 text-xs ml-2",children:"(16:9 ratio)"})]}),w.jsx("div",{className:"relative",children:w.jsx("input",{type:"file",accept:"video/*",onChange:de,className:"block w-full text-sm text-gray-400 file:mr-4 file:py-3 file:px-6 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-600 file:text-white hover:file:bg-blue-700 file:cursor-pointer cursor-pointer bg-gray-700/50 rounded-lg border border-gray-600 focus:border-blue-500"})}),i.coverVideoPreview&&w.jsx("div",{className:"mt-4 rounded-xl overflow-hidden bg-gray-900 max-w-lg",children:i.coverVideoPreview.includes(".m3u8")?w.jsx(Ar,{videoUrl:re(i.coverVideoPreview),className:"w-full rounded-xl",autoPlay:!1,showMuteButton:!1}):w.jsx("video",{src:i.coverVideoPreview,controls:!0,className:"w-full rounded-xl"})})]}),w.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[w.jsxs("div",{children:[w.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Title ",w.jsx("span",{className:"text-red-400",children:"*"})]}),w.jsx("input",{type:"text",value:i.title,onChange:Y=>o({...i,title:Y.target.value}),placeholder:"e.g. Mr. Ahmed's Villa",className:"w-full px-4 py-3 bg-gray-700/50 text-white placeholder-gray-500 rounded-lg border border-gray-600 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all",required:!0})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Area"}),w.jsx("input",{type:"text",value:i.area,onChange:Y=>o({...i,area:Y.target.value}),placeholder:"e.g. 750 m",className:"w-full px-4 py-3 bg-gray-700/50 text-white placeholder-gray-500 rounded-lg border border-gray-600 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all"})]})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description"}),w.jsx("textarea",{value:i.description,onChange:Y=>o({...i,description:Y.target.value}),placeholder:"Brief project description...",rows:"3",className:"w-full px-4 py-3 bg-gray-700/50 text-white placeholder-gray-500 rounded-lg border border-gray-600 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all resize-none"})]}),w.jsxs("div",{children:[w.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Category ",w.jsx("span",{className:"text-red-400",children:"*"})]}),w.jsx("div",{className:"grid grid-cols-3 gap-3",children:le.map(Y=>w.jsxs("button",{type:"button",onClick:()=>o({...i,category:Y.value}),className:`p-4 rounded-xl border-2 transition-all duration-200 text-center ${i.category===Y.value?"border-blue-500 bg-blue-500/20 text-white":"border-gray-600 bg-gray-700/30 text-gray-400 hover:border-gray-500"}`,children:[w.jsx("span",{className:"text-2xl block mb-1",children:Y.icon}),w.jsx("span",{className:"text-xs font-medium",children:Y.label.split(" ")[0]})]},Y.value))})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Project Media (Images/Videos)"}),w.jsx("input",{type:"file",accept:"image/*,video/*",multiple:!0,onChange:ce,className:"block w-full text-sm text-gray-400 file:mr-4 file:py-3 file:px-6 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-gray-600 file:text-white hover:file:bg-gray-500 file:cursor-pointer cursor-pointer bg-gray-700/50 rounded-lg border border-gray-600"})]}),i.mediaItems.length>0&&w.jsxs("div",{children:[w.jsxs("h3",{className:"text-sm font-medium text-gray-300 mb-3",children:["Media Items (",i.mediaItems.length,")  Drag to reorder"]}),w.jsx(rN,{onDragEnd:Z,children:w.jsx($N,{droppableId:"mediaItems",children:Y=>w.jsxs("div",{...Y.droppableProps,ref:Y.innerRef,className:"space-y-2 max-h-64 overflow-y-auto pr-2",children:[i.mediaItems.map((se,Oe)=>w.jsx(EN,{draggableId:String(se.id),index:Oe,children:(it,Ke)=>w.jsxs("div",{ref:it.innerRef,...it.draggableProps,...it.dragHandleProps,className:`flex items-center gap-3 p-3 rounded-lg border transition-all ${Ke.isDragging?"bg-gray-600 border-blue-500 shadow-lg":"bg-gray-700/50 border-gray-600"}`,children:[w.jsx("svg",{className:"w-5 h-5 text-gray-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})}),w.jsx("div",{className:"flex-shrink-0",children:se.type==="image"?w.jsx("img",{src:se.preview,alt:"",className:"w-16 h-12 object-cover rounded"}):w.jsx("video",{src:se.preview,className:"w-16 h-12 object-cover rounded"})}),w.jsx("div",{className:"flex-1 min-w-0",children:w.jsxs("p",{className:"text-sm font-medium text-white truncate",children:[se.type==="image"?"":""," ",se.file?.name||`${se.type} ${Oe+1}`]})}),w.jsx("button",{type:"button",onClick:()=>xe(se.id),className:"p-2 text-red-400 hover:text-red-300 hover:bg-red-500/20 rounded-lg transition-colors",children:w.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},se.id)),Y.placeholder]})})})]}),w.jsxs("div",{className:"flex gap-4 pt-4",children:[w.jsx("button",{type:"submit",disabled:h,className:`flex-1 sm:flex-none px-8 py-3 bg-blue-600 text-white rounded-lg font-semibold transition-all duration-200 flex items-center justify-center gap-2 ${h?"opacity-50 cursor-not-allowed":"hover:bg-blue-700 shadow-lg shadow-blue-600/30"}`,children:h?w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Uploading..."]}):w.jsxs(w.Fragment,{children:[w.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),l?"Update Project":"Create Project"]})}),w.jsx("button",{type:"button",onClick:V,disabled:h,className:"px-6 py-3 bg-gray-700 text-gray-300 rounded-lg font-medium hover:bg-gray-600 transition-colors",children:"Cancel"})]}),w.jsxs("div",{className:"mt-4 p-4 bg-blue-500/10 border border-blue-500/30 rounded-xl",children:[w.jsx("p",{className:"text-sm text-blue-300 font-medium mb-2",children:" Automatic Processing:"}),w.jsxs("ul",{className:"text-sm text-blue-200/80 space-y-1",children:[w.jsx("li",{children:" Images  WebP format"}),w.jsx("li",{children:" Videos  HLS (240p, 480p)"}),w.jsx("li",{children:" Processing takes a few minutes"})]})]})]})]}):w.jsx("div",{children:De.length===0?w.jsx("div",{className:"bg-gray-800/50 backdrop-blur rounded-2xl p-12 text-center border border-gray-700",children:F||k!=="all"?w.jsxs(w.Fragment,{children:[w.jsx("svg",{className:"w-16 h-16 text-gray-600 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),w.jsx("p",{className:"text-gray-400 text-lg mb-2",children:"No projects found"}),w.jsx("p",{className:"text-gray-500 text-sm",children:"Try adjusting your search or filter"}),w.jsx("button",{onClick:()=>{_(""),C("all")},className:"mt-4 px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Clear filters"})]}):w.jsxs(w.Fragment,{children:[w.jsx("svg",{className:"w-16 h-16 text-gray-600 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),w.jsx("p",{className:"text-gray-400 text-lg mb-2",children:"No projects yet"}),w.jsx("p",{className:"text-gray-500 text-sm",children:'Click "Add Project" to get started'})]})}):w.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:De.map(Y=>w.jsxs("div",{className:`bg-gray-800/80 backdrop-blur rounded-xl overflow-hidden border border-gray-700 hover:border-gray-600 transition-all duration-200 group ${L===Y.id?"opacity-50":""}`,children:[w.jsxs("div",{className:"aspect-video bg-gray-900 relative overflow-hidden",children:[L===Y.id?w.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:w.jsx("div",{className:"w-8 h-8 border-3 border-red-500 border-t-transparent rounded-full animate-spin"})}):Y.cover?Y.cover.includes(".m3u8")?w.jsx(Ar,{videoUrl:re(Y.cover),className:"w-full h-full object-cover",autoPlay:!1,showMuteButton:!1}):w.jsx("video",{src:re(Y.cover),className:"w-full h-full object-cover"}):w.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-gray-600",children:w.jsx("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),w.jsx("div",{className:"absolute top-2 left-2",children:w.jsxs("span",{className:"px-2 py-1 bg-black/60 backdrop-blur-sm text-white text-xs rounded-full",children:[le.find(se=>se.value===Y.category)?.icon," ",Y.category]})})]}),w.jsxs("div",{className:"p-4",children:[w.jsx("h3",{className:"font-semibold text-lg text-white truncate",children:Y.title||Y.id}),Y.area&&w.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:[" ",Y.area]}),Y.description&&w.jsx("p",{className:"text-sm text-gray-500 mt-2 line-clamp-2",children:Y.description}),w.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:[" ",Y.media?.length||0," media items"]}),w.jsxs("div",{className:"flex gap-2 mt-4",children:[w.jsxs("button",{onClick:()=>P(Y),className:"flex-1 px-4 py-2 bg-blue-600/20 text-blue-400 rounded-lg hover:bg-blue-600/30 transition-colors font-medium text-sm flex items-center justify-center gap-1",children:[w.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]}),w.jsxs("button",{onClick:()=>G(Y),disabled:L===Y.id,className:"flex-1 px-4 py-2 bg-red-600/20 text-red-400 rounded-lg hover:bg-red-600/30 transition-colors font-medium text-sm flex items-center justify-center gap-1",children:[w.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})]})]},`${Y.category}-${Y.id}`))})})]}),w.jsx(GN,{isOpen:z.isOpen,onClose:()=>te({isOpen:!1,project:null}),onConfirm:ae,title:"Delete Project",message:`Are you sure you want to delete "${z.project?.title||z.project?.id}"? This action cannot be undone.`,confirmText:"Delete",isDanger:!0})]})}const VN=({children:r})=>{const[e,t]=M.useState(!1),[n,i]=M.useState(""),[o,l]=M.useState(""),c=dv(),u="admin123";M.useEffect(()=>{sessionStorage.getItem("dashboardAuth")==="true"&&t(!0)},[]);const f=p=>{p.preventDefault(),n===u?(sessionStorage.setItem("dashboardAuth","true"),t(!0),l("")):l("Incorrect password. Please try again.")},h=()=>{sessionStorage.removeItem("dashboardAuth"),t(!1),i("")};return e?w.jsxs("div",{children:[w.jsx("div",{className:"fixed top-0 right-0 z-50 flex items-center gap-8 px-4 sm:px-6 lg:px-10 py-5",children:w.jsxs("button",{onClick:h,className:"text-white hover:text-gray-300 transition-colors flex items-center gap-2 text-sm font-medium",children:[w.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"LOGOUT"]})}),r]}):w.jsx("div",{className:"min-h-screen bg-[#0d2637] from-blue-50 to-indigo-100 flex items-center justify-center px-4 py-36",children:w.jsx("div",{className:"max-w-md w-full",children:w.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[w.jsxs("div",{className:"text-center mb-8",children:[w.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-4",children:w.jsx("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),w.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Dashboard Access"}),w.jsx("p",{className:"text-gray-600 mt-2",children:"Enter password to manage portfolio"})]}),w.jsxs("form",{onSubmit:f,className:"space-y-6",children:[w.jsxs("div",{children:[w.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),w.jsx("input",{id:"password",type:"password",value:n,onChange:p=>{i(p.target.value),l("")},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition",placeholder:"Enter dashboard password",autoComplete:"current-password"})]}),o&&w.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:w.jsx("p",{className:"text-sm text-red-600",children:o})}),w.jsx("button",{type:"submit",className:"w-full py-3 px-4 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors focus:ring-4 focus:ring-blue-200",children:"Access Dashboard"}),w.jsx("div",{className:"text-center",children:w.jsx("button",{type:"button",onClick:()=>c("/"),className:"text-sm text-gray-600 hover:text-gray-900",children:" Back to Home"})})]})]})})})};function KN(){return w.jsx(ww,{children:w.jsxs(lD,{children:[w.jsx(Lw,{}),w.jsx(sD,{}),w.jsxs(gw,{children:[w.jsx(br,{path:"/",element:w.jsx(cD,{})}),w.jsx(br,{path:"/about",element:w.jsx(uD,{})}),w.jsx(br,{path:"/portfolio",element:w.jsx(gy,{})}),w.jsx(br,{path:"/portfolio/:categoryId",element:w.jsx(gy,{})}),w.jsx(br,{path:"/portfolio/:categoryId/:projectId",element:w.jsx(xD,{})}),w.jsx(br,{path:"/portfolio/aluminum-skirting",element:w.jsx(ID,{})}),w.jsx(br,{path:"/contacts",element:w.jsx(bD,{})}),w.jsx(br,{path:"/services",element:w.jsx(SD,{})}),w.jsx(br,{path:"/dashboard",element:w.jsx(VN,{children:w.jsx(WN,{})})}),w.jsx(br,{path:"*",element:w.jsx(wD,{})})]}),w.jsx(_A,{}),w.jsx(iD,{})]})})}A1.createRoot(document.getElementById("root")).render(w.jsx(M.StrictMode,{children:w.jsx(KN,{})}));
